/*! For license information please see 2.2932b52f.chunk.js.LICENSE.txt */
(this["webpackJsonpketcher-react-app"]=this["webpackJsonpketcher-react-app"]||[]).push([[2],[function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?i(e):t}function h(e){return function(){var t,n=u(e);if(c()){var r=u(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)}}var p;n.r(t),n.d(t,"ACESFilmicToneMapping",(function(){return _e})),n.d(t,"AddEquation",(function(){return V})),n.d(t,"AddOperation",(function(){return pe})),n.d(t,"AdditiveBlending",(function(){return F})),n.d(t,"AlphaFormat",(function(){return Qe})),n.d(t,"AlwaysDepth",(function(){return ie})),n.d(t,"AlwaysStencilFunc",(function(){return wn})),n.d(t,"AmbientLight",(function(){return cf})),n.d(t,"AmbientLightProbe",(function(){return Lf})),n.d(t,"AnimationClip",(function(){return ml})),n.d(t,"AnimationLoader",(function(){return Sl})),n.d(t,"AnimationMixer",(function(){return uh})),n.d(t,"AnimationObjectGroup",(function(){return ah})),n.d(t,"AnimationUtils",(function(){return nl})),n.d(t,"ArcCurve",(function(){return Pl})),n.d(t,"ArrayCamera",(function(){return As})),n.d(t,"ArrowHelper",(function(){return Zh})),n.d(t,"Audio",(function(){return Uf})),n.d(t,"AudioAnalyser",(function(){return Xf})),n.d(t,"AudioContext",(function(){return Mf})),n.d(t,"AudioListener",(function(){return Vf})),n.d(t,"AudioLoader",(function(){return Cf})),n.d(t,"AxesHelper",(function(){return Kh})),n.d(t,"AxisHelper",(function(){return Jp})),n.d(t,"BackSide",(function(){return C})),n.d(t,"BasicDepthPacking",(function(){return nn})),n.d(t,"BasicShadowMap",(function(){return S})),n.d(t,"BinaryTextureLoader",(function(){return rd})),n.d(t,"Bone",(function(){return iu})),n.d(t,"BooleanKeyframeTrack",(function(){return ul})),n.d(t,"BoundingBoxHelper",(function(){return Qp})),n.d(t,"Box2",(function(){return gh})),n.d(t,"Box3",(function(){return Dr})),n.d(t,"Box3Helper",(function(){return Wh})),n.d(t,"BoxBufferGeometry",(function(){return po})),n.d(t,"BoxGeometry",(function(){return ho})),n.d(t,"BoxHelper",(function(){return Hh})),n.d(t,"BufferAttribute",(function(){return bi})),n.d(t,"BufferGeometry",(function(){return ji})),n.d(t,"BufferGeometryLoader",(function(){return mf})),n.d(t,"ByteType",(function(){return Ue})),n.d(t,"Cache",(function(){return gl})),n.d(t,"Camera",(function(){return _o})),n.d(t,"CameraHelper",(function(){return Vh})),n.d(t,"CanvasRenderer",(function(){return od})),n.d(t,"CanvasTexture",(function(){return Ru})),n.d(t,"CatmullRomCurve3",(function(){return Fl})),n.d(t,"CineonToneMapping",(function(){return ye})),n.d(t,"CircleBufferGeometry",(function(){return Gc})),n.d(t,"CircleGeometry",(function(){return Uc})),n.d(t,"ClampToEdgeWrapping",(function(){return ke})),n.d(t,"Clock",(function(){return Df})),n.d(t,"ClosedSplineCurve3",(function(){return $p})),n.d(t,"Color",(function(){return hi})),n.d(t,"ColorKeyframeTrack",(function(){return cl})),n.d(t,"CompressedTexture",(function(){return ku})),n.d(t,"CompressedTextureLoader",(function(){return El})),n.d(t,"ConeBufferGeometry",(function(){return Vc})),n.d(t,"ConeGeometry",(function(){return jc})),n.d(t,"CubeCamera",(function(){return bo})),n.d(t,"CubeGeometry",(function(){return ho})),n.d(t,"CubeReflectionMapping",(function(){return be})),n.d(t,"CubeRefractionMapping",(function(){return we})),n.d(t,"CubeTexture",(function(){return Wo})),n.d(t,"CubeTextureLoader",(function(){return Ml})),n.d(t,"CubeUVReflectionMapping",(function(){return Ae})),n.d(t,"CubeUVRefractionMapping",(function(){return Me})),n.d(t,"CubicBezierCurve",(function(){return Vl})),n.d(t,"CubicBezierCurve3",(function(){return Ul})),n.d(t,"CubicInterpolant",(function(){return il})),n.d(t,"CullFaceBack",(function(){return y})),n.d(t,"CullFaceFront",(function(){return _})),n.d(t,"CullFaceFrontBack",(function(){return x})),n.d(t,"CullFaceNone",(function(){return g})),n.d(t,"Curve",(function(){return kl})),n.d(t,"CurvePath",(function(){return $l})),n.d(t,"CustomBlending",(function(){return j})),n.d(t,"CylinderBufferGeometry",(function(){return Bc})),n.d(t,"CylinderGeometry",(function(){return zc})),n.d(t,"Cylindrical",(function(){return mh})),n.d(t,"DataTexture",(function(){return So})),n.d(t,"DataTexture2DArray",(function(){return qo})),n.d(t,"DataTexture3D",(function(){return Yo})),n.d(t,"DataTextureLoader",(function(){return Tl})),n.d(t,"DecrementStencilOp",(function(){return fn})),n.d(t,"DecrementWrapStencilOp",(function(){return pn})),n.d(t,"DefaultLoadingManager",(function(){return _l})),n.d(t,"DepthFormat",(function(){return ot})),n.d(t,"DepthStencilFormat",(function(){return at})),n.d(t,"DepthTexture",(function(){return Pu})),n.d(t,"DirectionalLight",(function(){return uf})),n.d(t,"DirectionalLightHelper",(function(){return zh})),n.d(t,"DirectionalLightShadow",(function(){return sf})),n.d(t,"DiscreteInterpolant",(function(){return al})),n.d(t,"DodecahedronBufferGeometry",(function(){return Hu})),n.d(t,"DodecahedronGeometry",(function(){return Gu})),n.d(t,"DoubleSide",(function(){return k})),n.d(t,"DstAlphaFactor",(function(){return J})),n.d(t,"DstColorFactor",(function(){return ee})),n.d(t,"DynamicBufferAttribute",(function(){return Bp})),n.d(t,"DynamicCopyUsage",(function(){return Rn})),n.d(t,"DynamicDrawUsage",(function(){return En})),n.d(t,"DynamicReadUsage",(function(){return Mn})),n.d(t,"EdgesGeometry",(function(){return Fc})),n.d(t,"EdgesHelper",(function(){return ed})),n.d(t,"EllipseCurve",(function(){return Rl})),n.d(t,"EqualDepth",(function(){return se})),n.d(t,"EqualStencilFunc",(function(){return gn})),n.d(t,"EquirectangularReflectionMapping",(function(){return Se})),n.d(t,"EquirectangularRefractionMapping",(function(){return Ee})),n.d(t,"Euler",(function(){return ar})),n.d(t,"EventDispatcher",(function(){return Ln})),n.d(t,"ExtrudeBufferGeometry",(function(){return Sc})),n.d(t,"ExtrudeGeometry",(function(){return wc})),n.d(t,"Face3",(function(){return vi})),n.d(t,"Face4",(function(){return Mp})),n.d(t,"FaceColors",(function(){return O})),n.d(t,"FileLoader",(function(){return wl})),n.d(t,"FlatShading",(function(){return R})),n.d(t,"Float32Attribute",(function(){return Yp})),n.d(t,"Float32BufferAttribute",(function(){return ki})),n.d(t,"Float64Attribute",(function(){return Xp})),n.d(t,"Float64BufferAttribute",(function(){return Ri})),n.d(t,"FloatType",(function(){return Ye})),n.d(t,"Fog",(function(){return Ps})),n.d(t,"FogExp2",(function(){return Rs})),n.d(t,"Font",(function(){return Ef})),n.d(t,"FontLoader",(function(){return Af})),n.d(t,"FrontFaceDirectionCCW",(function(){return w})),n.d(t,"FrontFaceDirectionCW",(function(){return b})),n.d(t,"FrontSide",(function(){return M})),n.d(t,"Frustum",(function(){return Ao})),n.d(t,"GammaEncoding",(function(){return Zt})),n.d(t,"Geometry",(function(){return fo})),n.d(t,"GeometryUtils",(function(){return id})),n.d(t,"GreaterDepth",(function(){return ce})),n.d(t,"GreaterEqualDepth",(function(){return ue})),n.d(t,"GreaterEqualStencilFunc",(function(){return bn})),n.d(t,"GreaterStencilFunc",(function(){return _n})),n.d(t,"GridHelper",(function(){return Oh})),n.d(t,"Group",(function(){return Ms})),n.d(t,"HalfFloatType",(function(){return Xe})),n.d(t,"HemisphereLight",(function(){return Ql})),n.d(t,"HemisphereLightHelper",(function(){return Lh})),n.d(t,"HemisphereLightProbe",(function(){return Pf})),n.d(t,"IcosahedronBufferGeometry",(function(){return Uu})),n.d(t,"IcosahedronGeometry",(function(){return Vu})),n.d(t,"ImageBitmapLoader",(function(){return wf})),n.d(t,"ImageLoader",(function(){return Al})),n.d(t,"ImageUtils",(function(){return Hn})),n.d(t,"ImmediateRenderObject",(function(){return bh})),n.d(t,"IncrementStencilOp",(function(){return ln})),n.d(t,"IncrementWrapStencilOp",(function(){return hn})),n.d(t,"InstancedBufferAttribute",(function(){return df})),n.d(t,"InstancedBufferGeometry",(function(){return pf})),n.d(t,"InstancedInterleavedBuffer",(function(){return lh})),n.d(t,"InstancedMesh",(function(){return cu})),n.d(t,"Int16Attribute",(function(){return Gp})),n.d(t,"Int16BufferAttribute",(function(){return Ti})),n.d(t,"Int32Attribute",(function(){return Wp})),n.d(t,"Int32BufferAttribute",(function(){return Mi})),n.d(t,"Int8Attribute",(function(){return jp})),n.d(t,"Int8BufferAttribute",(function(){return wi})),n.d(t,"IntType",(function(){return We})),n.d(t,"InterleavedBuffer",(function(){return Ls})),n.d(t,"InterleavedBufferAttribute",(function(){return Ns})),n.d(t,"Interpolant",(function(){return rl})),n.d(t,"InterpolateDiscrete",(function(){return Bt})),n.d(t,"InterpolateLinear",(function(){return jt})),n.d(t,"InterpolateSmooth",(function(){return Vt})),n.d(t,"InvertStencilOp",(function(){return dn})),n.d(t,"JSONLoader",(function(){return ad})),n.d(t,"KeepStencilOp",(function(){return un})),n.d(t,"KeyframeTrack",(function(){return sl})),n.d(t,"LOD",(function(){return Qs})),n.d(t,"LatheBufferGeometry",(function(){return Oc})),n.d(t,"LatheGeometry",(function(){return Lc})),n.d(t,"Layers",(function(){return sr})),n.d(t,"LensFlare",(function(){return ud})),n.d(t,"LessDepth",(function(){return oe})),n.d(t,"LessEqualDepth",(function(){return ae})),n.d(t,"LessEqualStencilFunc",(function(){return yn})),n.d(t,"LessStencilFunc",(function(){return vn})),n.d(t,"Light",(function(){return Jl})),n.d(t,"LightProbe",(function(){return Rf})),n.d(t,"LightShadow",(function(){return ef})),n.d(t,"Line",(function(){return vu})),n.d(t,"Line3",(function(){return xh})),n.d(t,"LineBasicMaterial",(function(){return lu})),n.d(t,"LineCurve",(function(){return Gl})),n.d(t,"LineCurve3",(function(){return Hl})),n.d(t,"LineDashedMaterial",(function(){return el})),n.d(t,"LineLoop",(function(){return xu})),n.d(t,"LinePieces",(function(){return kp})),n.d(t,"LineSegments",(function(){return _u})),n.d(t,"LineStrip",(function(){return Cp})),n.d(t,"LinearEncoding",(function(){return Xt})),n.d(t,"LinearFilter",(function(){return De})),n.d(t,"LinearInterpolant",(function(){return ol})),n.d(t,"LinearMipMapLinearFilter",(function(){return je})),n.d(t,"LinearMipMapNearestFilter",(function(){return ze})),n.d(t,"LinearMipmapLinearFilter",(function(){return Be})),n.d(t,"LinearMipmapNearestFilter",(function(){return Fe})),n.d(t,"LinearToneMapping",(function(){return me})),n.d(t,"Loader",(function(){return xl})),n.d(t,"LoaderUtils",(function(){return hf})),n.d(t,"LoadingManager",(function(){return yl})),n.d(t,"LogLuvEncoding",(function(){return Jt})),n.d(t,"LoopOnce",(function(){return Dt})),n.d(t,"LoopPingPong",(function(){return zt})),n.d(t,"LoopRepeat",(function(){return Ft})),n.d(t,"LuminanceAlphaFormat",(function(){return rt})),n.d(t,"LuminanceFormat",(function(){return nt})),n.d(t,"MOUSE",(function(){return m})),n.d(t,"Material",(function(){return yi})),n.d(t,"MaterialLoader",(function(){return ff})),n.d(t,"Math",(function(){return Nn})),n.d(t,"Matrix3",(function(){return Gn})),n.d(t,"Matrix4",(function(){return rr})),n.d(t,"MaxEquation",(function(){return W})),n.d(t,"Mesh",(function(){return io})),n.d(t,"MeshBasicMaterial",(function(){return _i})),n.d(t,"MeshDepthMaterial",(function(){return ys})),n.d(t,"MeshDistanceMaterial",(function(){return _s})),n.d(t,"MeshFaceMaterial",(function(){return Rp})),n.d(t,"MeshLambertMaterial",(function(){return Jc})),n.d(t,"MeshMatcapMaterial",(function(){return Qc})),n.d(t,"MeshNormalMaterial",(function(){return Kc})),n.d(t,"MeshPhongMaterial",(function(){return $c})),n.d(t,"MeshPhysicalMaterial",(function(){return Xc})),n.d(t,"MeshStandardMaterial",(function(){return Yc})),n.d(t,"MeshToonMaterial",(function(){return Zc})),n.d(t,"MinEquation",(function(){return H})),n.d(t,"MirroredRepeatWrapping",(function(){return Re})),n.d(t,"MixOperation",(function(){return he})),n.d(t,"MultiMaterial",(function(){return Pp})),n.d(t,"MultiplyBlending",(function(){return B})),n.d(t,"MultiplyOperation",(function(){return fe})),n.d(t,"NearestFilter",(function(){return Pe})),n.d(t,"NearestMipMapLinearFilter",(function(){return Ne})),n.d(t,"NearestMipMapNearestFilter",(function(){return Oe})),n.d(t,"NearestMipmapLinearFilter",(function(){return Ie})),n.d(t,"NearestMipmapNearestFilter",(function(){return Le})),n.d(t,"NeverDepth",(function(){return re})),n.d(t,"NeverStencilFunc",(function(){return mn})),n.d(t,"NoBlending",(function(){return N})),n.d(t,"NoColors",(function(){return L})),n.d(t,"NoToneMapping",(function(){return de})),n.d(t,"NormalBlending",(function(){return D})),n.d(t,"NotEqualDepth",(function(){return le})),n.d(t,"NotEqualStencilFunc",(function(){return xn})),n.d(t,"NumberKeyframeTrack",(function(){return ll})),n.d(t,"Object3D",(function(){return br})),n.d(t,"ObjectLoader",(function(){return gf})),n.d(t,"ObjectSpaceNormalMap",(function(){return an})),n.d(t,"OctahedronBufferGeometry",(function(){return ju})),n.d(t,"OctahedronGeometry",(function(){return Bu})),n.d(t,"OneFactor",(function(){return Y})),n.d(t,"OneMinusDstAlphaFactor",(function(){return Q})),n.d(t,"OneMinusDstColorFactor",(function(){return te})),n.d(t,"OneMinusSrcAlphaFactor",(function(){return K})),n.d(t,"OneMinusSrcColorFactor",(function(){return $})),n.d(t,"OrthographicCamera",(function(){return af})),n.d(t,"PCFShadowMap",(function(){return E})),n.d(t,"PCFSoftShadowMap",(function(){return T})),n.d(t,"PMREMGenerator",(function(){return mp})),n.d(t,"ParametricBufferGeometry",(function(){return Iu})),n.d(t,"ParametricGeometry",(function(){return Ou})),n.d(t,"Particle",(function(){return Op})),n.d(t,"ParticleBasicMaterial",(function(){return Dp})),n.d(t,"ParticleSystem",(function(){return Ip})),n.d(t,"ParticleSystemMaterial",(function(){return Fp})),n.d(t,"Path",(function(){return Zl})),n.d(t,"PerspectiveCamera",(function(){return xo})),n.d(t,"Plane",(function(){return Kr})),n.d(t,"PlaneBufferGeometry",(function(){return Oo})),n.d(t,"PlaneGeometry",(function(){return Lo})),n.d(t,"PlaneHelper",(function(){return qh})),n.d(t,"PointCloud",(function(){return Lp})),n.d(t,"PointCloudMaterial",(function(){return Np})),n.d(t,"PointLight",(function(){return of})),n.d(t,"PointLightHelper",(function(){return Ch})),n.d(t,"Points",(function(){return Au})),n.d(t,"PointsMaterial",(function(){return bu})),n.d(t,"PolarGridHelper",(function(){return Ih})),n.d(t,"PolyhedronBufferGeometry",(function(){return Du})),n.d(t,"PolyhedronGeometry",(function(){return Nu})),n.d(t,"PositionalAudio",(function(){return Yf})),n.d(t,"PropertyBinding",(function(){return oh})),n.d(t,"PropertyMixer",(function(){return $f})),n.d(t,"QuadraticBezierCurve",(function(){return Wl})),n.d(t,"QuadraticBezierCurve3",(function(){return ql})),n.d(t,"Quaternion",(function(){return Fn})),n.d(t,"QuaternionKeyframeTrack",(function(){return hl})),n.d(t,"QuaternionLinearInterpolant",(function(){return fl})),n.d(t,"REVISION",(function(){return d})),n.d(t,"RGBADepthPacking",(function(){return rn})),n.d(t,"RGBAFormat",(function(){return tt})),n.d(t,"RGBAIntegerFormat",(function(){return ht})),n.d(t,"RGBA_ASTC_10x10_Format",(function(){return Ot})),n.d(t,"RGBA_ASTC_10x5_Format",(function(){return Rt})),n.d(t,"RGBA_ASTC_10x6_Format",(function(){return Pt})),n.d(t,"RGBA_ASTC_10x8_Format",(function(){return Lt})),n.d(t,"RGBA_ASTC_12x10_Format",(function(){return It})),n.d(t,"RGBA_ASTC_12x12_Format",(function(){return Nt})),n.d(t,"RGBA_ASTC_4x4_Format",(function(){return wt})),n.d(t,"RGBA_ASTC_5x4_Format",(function(){return St})),n.d(t,"RGBA_ASTC_5x5_Format",(function(){return Et})),n.d(t,"RGBA_ASTC_6x5_Format",(function(){return Tt})),n.d(t,"RGBA_ASTC_6x6_Format",(function(){return At})),n.d(t,"RGBA_ASTC_8x5_Format",(function(){return Mt})),n.d(t,"RGBA_ASTC_8x6_Format",(function(){return Ct})),n.d(t,"RGBA_ASTC_8x8_Format",(function(){return kt})),n.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return xt})),n.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return _t})),n.d(t,"RGBA_S3TC_DXT1_Format",(function(){return dt})),n.d(t,"RGBA_S3TC_DXT3_Format",(function(){return mt})),n.d(t,"RGBA_S3TC_DXT5_Format",(function(){return vt})),n.d(t,"RGBDEncoding",(function(){return tn})),n.d(t,"RGBEEncoding",(function(){return Kt})),n.d(t,"RGBEFormat",(function(){return it})),n.d(t,"RGBFormat",(function(){return et})),n.d(t,"RGBIntegerFormat",(function(){return ft})),n.d(t,"RGBM16Encoding",(function(){return en})),n.d(t,"RGBM7Encoding",(function(){return Qt})),n.d(t,"RGB_ETC1_Format",(function(){return bt})),n.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return yt})),n.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return gt})),n.d(t,"RGB_S3TC_DXT1_Format",(function(){return pt})),n.d(t,"RGFormat",(function(){return ct})),n.d(t,"RGIntegerFormat",(function(){return lt})),n.d(t,"RawShaderMaterial",(function(){return qc})),n.d(t,"Ray",(function(){return Yr})),n.d(t,"Raycaster",(function(){return fh})),n.d(t,"RectAreaLight",(function(){return lf})),n.d(t,"RedFormat",(function(){return st})),n.d(t,"RedIntegerFormat",(function(){return ut})),n.d(t,"ReinhardToneMapping",(function(){return ve})),n.d(t,"RepeatWrapping",(function(){return Ce})),n.d(t,"ReplaceStencilOp",(function(){return cn})),n.d(t,"ReverseSubtractEquation",(function(){return G})),n.d(t,"RingBufferGeometry",(function(){return Pc})),n.d(t,"RingGeometry",(function(){return Rc})),n.d(t,"Scene",(function(){return wr})),n.d(t,"SceneUtils",(function(){return sd})),n.d(t,"ShaderChunk",(function(){return Mo})),n.d(t,"ShaderLib",(function(){return ko})),n.d(t,"ShaderMaterial",(function(){return yo})),n.d(t,"ShadowMaterial",(function(){return Wc})),n.d(t,"Shape",(function(){return Kl})),n.d(t,"ShapeBufferGeometry",(function(){return Nc})),n.d(t,"ShapeGeometry",(function(){return Ic})),n.d(t,"ShapePath",(function(){return Sf})),n.d(t,"ShapeUtils",(function(){return _c})),n.d(t,"ShortType",(function(){return Ge})),n.d(t,"Skeleton",(function(){return ru})),n.d(t,"SkeletonHelper",(function(){return Mh})),n.d(t,"SkinnedMesh",(function(){return eu})),n.d(t,"SmoothShading",(function(){return P})),n.d(t,"Sphere",(function(){return Br})),n.d(t,"SphereBufferGeometry",(function(){return kc})),n.d(t,"SphereGeometry",(function(){return Cc})),n.d(t,"Spherical",(function(){return dh})),n.d(t,"SphericalHarmonics3",(function(){return kf})),n.d(t,"SphericalReflectionMapping",(function(){return Te})),n.d(t,"Spline",(function(){return Kp})),n.d(t,"SplineCurve",(function(){return Yl})),n.d(t,"SplineCurve3",(function(){return Zp})),n.d(t,"SpotLight",(function(){return nf})),n.d(t,"SpotLightHelper",(function(){return Sh})),n.d(t,"SpotLightShadow",(function(){return tf})),n.d(t,"Sprite",(function(){return $s})),n.d(t,"SpriteMaterial",(function(){return Ds})),n.d(t,"SrcAlphaFactor",(function(){return Z})),n.d(t,"SrcAlphaSaturateFactor",(function(){return ne})),n.d(t,"SrcColorFactor",(function(){return X})),n.d(t,"StaticCopyUsage",(function(){return kn})),n.d(t,"StaticDrawUsage",(function(){return Sn})),n.d(t,"StaticReadUsage",(function(){return An})),n.d(t,"StereoCamera",(function(){return Nf})),n.d(t,"StreamCopyUsage",(function(){return Pn})),n.d(t,"StreamDrawUsage",(function(){return Tn})),n.d(t,"StreamReadUsage",(function(){return Cn})),n.d(t,"StringKeyframeTrack",(function(){return pl})),n.d(t,"SubtractEquation",(function(){return U})),n.d(t,"SubtractiveBlending",(function(){return z})),n.d(t,"TOUCH",(function(){return v})),n.d(t,"TangentSpaceNormalMap",(function(){return on})),n.d(t,"TetrahedronBufferGeometry",(function(){return zu})),n.d(t,"TetrahedronGeometry",(function(){return Fu})),n.d(t,"TextBufferGeometry",(function(){return Mc})),n.d(t,"TextGeometry",(function(){return Ac})),n.d(t,"Texture",(function(){return qn})),n.d(t,"TextureLoader",(function(){return Cl})),n.d(t,"TorusBufferGeometry",(function(){return Zu})),n.d(t,"TorusGeometry",(function(){return $u})),n.d(t,"TorusKnotBufferGeometry",(function(){return Xu})),n.d(t,"TorusKnotGeometry",(function(){return Yu})),n.d(t,"Triangle",(function(){return ui})),n.d(t,"TriangleFanDrawMode",(function(){return Yt})),n.d(t,"TriangleStripDrawMode",(function(){return qt})),n.d(t,"TrianglesDrawMode",(function(){return Wt})),n.d(t,"TubeBufferGeometry",(function(){return qu})),n.d(t,"TubeGeometry",(function(){return Wu})),n.d(t,"UVMapping",(function(){return xe})),n.d(t,"Uint16Attribute",(function(){return Hp})),n.d(t,"Uint16BufferAttribute",(function(){return Ai})),n.d(t,"Uint32Attribute",(function(){return qp})),n.d(t,"Uint32BufferAttribute",(function(){return Ci})),n.d(t,"Uint8Attribute",(function(){return Vp})),n.d(t,"Uint8BufferAttribute",(function(){return Si})),n.d(t,"Uint8ClampedAttribute",(function(){return Up})),n.d(t,"Uint8ClampedBufferAttribute",(function(){return Ei})),n.d(t,"Uncharted2ToneMapping",(function(){return ge})),n.d(t,"Uniform",(function(){return ch})),n.d(t,"UniformsLib",(function(){return Co})),n.d(t,"UniformsUtils",(function(){return go})),n.d(t,"UnsignedByteType",(function(){return Ve})),n.d(t,"UnsignedInt248Type",(function(){return Je})),n.d(t,"UnsignedIntType",(function(){return qe})),n.d(t,"UnsignedShort4444Type",(function(){return $e})),n.d(t,"UnsignedShort5551Type",(function(){return Ze})),n.d(t,"UnsignedShort565Type",(function(){return Ke})),n.d(t,"UnsignedShortType",(function(){return He})),n.d(t,"VSMShadowMap",(function(){return A})),n.d(t,"Vector2",(function(){return Dn})),n.d(t,"Vector3",(function(){return jn})),n.d(t,"Vector4",(function(){return Yn})),n.d(t,"VectorKeyframeTrack",(function(){return dl})),n.d(t,"Vertex",(function(){return zp})),n.d(t,"VertexColors",(function(){return I})),n.d(t,"VideoTexture",(function(){return Cu})),n.d(t,"WebGLMultisampleRenderTarget",(function(){return $n})),n.d(t,"WebGLRenderTarget",(function(){return Xn})),n.d(t,"WebGLRenderTargetCube",(function(){return wo})),n.d(t,"WebGLRenderer",(function(){return ks})),n.d(t,"WebGLUtils",(function(){return Ss})),n.d(t,"WireframeGeometry",(function(){return Lu})),n.d(t,"WireframeHelper",(function(){return td})),n.d(t,"WrapAroundEnding",(function(){return Ht})),n.d(t,"XHRLoader",(function(){return nd})),n.d(t,"ZeroCurvatureEnding",(function(){return Ut})),n.d(t,"ZeroFactor",(function(){return q})),n.d(t,"ZeroSlopeEnding",(function(){return Gt})),n.d(t,"ZeroStencilOp",(function(){return sn})),n.d(t,"sRGBEncoding",(function(){return $t})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var d="112",m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},v={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},g=0,y=1,_=2,x=3,b=0,w=1,S=0,E=1,T=2,A=3,M=0,C=1,k=2,R=1,P=2,L=0,O=1,I=2,N=0,D=1,F=2,z=3,B=4,j=5,V=100,U=101,G=102,H=103,W=104,q=200,Y=201,X=202,$=203,Z=204,K=205,J=206,Q=207,ee=208,te=209,ne=210,re=0,ie=1,oe=2,ae=3,se=4,ue=5,ce=6,le=7,fe=0,he=1,pe=2,de=0,me=1,ve=2,ge=3,ye=4,_e=5,xe=300,be=301,we=302,Se=303,Ee=304,Te=305,Ae=306,Me=307,Ce=1e3,ke=1001,Re=1002,Pe=1003,Le=1004,Oe=1004,Ie=1005,Ne=1005,De=1006,Fe=1007,ze=1007,Be=1008,je=1008,Ve=1009,Ue=1010,Ge=1011,He=1012,We=1013,qe=1014,Ye=1015,Xe=1016,$e=1017,Ze=1018,Ke=1019,Je=1020,Qe=1021,et=1022,tt=1023,nt=1024,rt=1025,it=tt,ot=1026,at=1027,st=1028,ut=1029,ct=1030,lt=1031,ft=1032,ht=1033,pt=33776,dt=33777,mt=33778,vt=33779,gt=35840,yt=35841,_t=35842,xt=35843,bt=36196,wt=37808,St=37809,Et=37810,Tt=37811,At=37812,Mt=37813,Ct=37814,kt=37815,Rt=37816,Pt=37817,Lt=37818,Ot=37819,It=37820,Nt=37821,Dt=2200,Ft=2201,zt=2202,Bt=2300,jt=2301,Vt=2302,Ut=2400,Gt=2401,Ht=2402,Wt=0,qt=1,Yt=2,Xt=3e3,$t=3001,Zt=3007,Kt=3002,Jt=3003,Qt=3004,en=3005,tn=3006,nn=3200,rn=3201,on=0,an=1,sn=0,un=7680,cn=7681,ln=7682,fn=7683,hn=34055,pn=34056,dn=5386,mn=512,vn=513,gn=514,yn=515,_n=516,xn=517,bn=518,wn=519,Sn=35044,En=35048,Tn=35040,An=35045,Mn=35049,Cn=35041,kn=35046,Rn=35050,Pn=35042;function Ln(){}Object.assign(Ln.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var On=[],In=0;In<256;In++)On[In]=(In<16?"0":"")+In.toString(16);var Nn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(On[255&e]+On[e>>8&255]+On[e>>16&255]+On[e>>24&255]+"-"+On[255&t]+On[t>>8&255]+"-"+On[t>>16&15|64]+On[t>>24&255]+"-"+On[63&n|128]+On[n>>8&255]+"-"+On[n>>16&255]+On[n>>24&255]+On[255&r]+On[r>>8&255]+On[r>>16&255]+On[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Nn.DEG2RAD},radToDeg:function(e){return e*Nn.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Dn(e,t){this.x=e||0,this.y=t||0}function Fn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}Object.defineProperties(Dn.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Dn.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(Fn,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],f=i[o+0],h=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||s!==f||u!==h||c!==p){var m=1-a,v=s*f+u*h+c*p+l*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*g;if(s=s*m+f*b,u=u*m+h*b,c=c*m+p*b,l=l*m+d*b,m===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}}),Object.defineProperties(Fn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Fn.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),f=s(n/2),h=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"YXZ"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"ZXY"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l-f*h*p):"ZYX"===o?(this._x=f*c*l-u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l+f*h*p):"YZX"===o?(this._x=f*c*l+u*h*p,this._y=u*h*l+f*c*p,this._z=u*c*p-f*h*l,this._w=u*c*l-f*h*p):"XZY"===o&&(this._x=f*c*l-u*h*p,this._y=u*h*l-f*c*p,this._z=u*c*p+f*h*l,this._w=u*c*l+f*h*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],f=n[10],h=r+s+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(l-u)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>f?(t=2*Math.sqrt(1+r-s-f),this._w=(l-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>f?(t=2*Math.sqrt(1+s-r-f),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+l)/t):(t=2*Math.sqrt(1+f-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(u+l)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Nn.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),f=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var zn=new jn,Bn=new Fn;function jn(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(jn.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Bn.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Bn.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,f=-i*t-o*n-a*r;return this.x=u*s+f*-i+c*-a-l*-o,this.y=c*s+f*-o+l*-i-u*-a,this.z=l*s+f*-a+u*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return zn.copy(this).projectOnVector(e),this.sub(zn)},reflect:function(e){return this.sub(zn.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());0===t&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(e)/t;return Math.acos(Nn.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Vn,Un=new jn;function Gn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Gn.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Un.x=e.getX(t),Un.y=e.getY(t),Un.z=e.getZ(t),Un.applyMatrix3(this),e.setXYZ(t,Un.x,Un.y,Un.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],f=n[2],h=n[5],p=n[8],d=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],x=r[2],b=r[5],w=r[8];return i[0]=o*d+a*g+s*x,i[3]=o*m+a*y+s*b,i[6]=o*v+a*_+s*w,i[1]=u*d+c*g+l*x,i[4]=u*m+c*y+l*b,i[7]=u*v+c*_+l*w,i[2]=f*d+h*g+p*x,i[5]=f*m+h*y+p*b,i[8]=f*v+h*_+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],h=n[8],p=h*u-c*f,d=c*l-h*s,m=f*s-u*l,v=i*p+o*d+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*f-h*o)*y,r[2]=(c*o-a*u)*y,r[3]=d*y,r[4]=(h*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*l-f*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Hn={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Vn&&(Vn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Vn.width=e.width,Vn.height=e.height;var n=Vn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Vn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Wn=0;function qn(e,t,n,r,i,o,a,s,u,c){Object.defineProperty(this,"id",{value:Wn++}),this.uuid=Nn.generateUUID(),this.name="",this.image=void 0!==e?e:qn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:qn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ke,this.wrapT=void 0!==r?r:ke,this.magFilter=void 0!==i?i:De,this.minFilter=void 0!==o?o:Be,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:tt,this.internalFormat=null,this.type=void 0!==s?s:Ve,this.offset=new Dn(0,0),this.repeat=new Dn(1,1),this.center=new Dn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Xt,this.version=0,this.onUpdate=null}function Yn(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Xn(e,t,n){this.width=e,this.height=t,this.scissor=new Yn(0,0,e,t),this.scissorTest=!1,this.viewport=new Yn(0,0,e,t),n=n||{},this.texture=new qn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:De,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function $n(e,t,n){Xn.call(this,e,t,n),this.samples=4}qn.DEFAULT_IMAGE=void 0,qn.DEFAULT_MAPPING=xe,qn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:qn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Nn.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Hn.getDataURL(r[o]))}else i=Hn.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==xe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ce:e.x=e.x-Math.floor(e.x);break;case ke:e.x=e.x<0?0:1;break;case Re:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ce:e.y=e.y-Math.floor(e.y);break;case ke:e.y=e.y<0?0:1;break;case Re:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(qn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Yn.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Yn.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],f=o[9],h=o[2],p=o[6],d=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-h)<.01&&Math.abs(f-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+h)<.1&&Math.abs(f+p)<.1&&Math.abs(a+l+d-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(d+1)/2,y=(s+c)/4,_=(u+h)/4,x=(f+p)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((p-f)*(p-f)+(u-h)*(u-h)+(c-s)*(c-s));return Math.abs(b)<.001&&(b=1),this.x=(p-f)/b,this.y=(u-h)/b,this.z=(c-s)/b,this.w=Math.acos((a+l+d-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Xn.prototype=Object.assign(Object.create(Ln.prototype),{constructor:Xn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$n.prototype=Object.assign(Object.create(Xn.prototype),{constructor:$n,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Xn.prototype.copy.call(this,e),this.samples=e.samples,this}});var Zn=new jn,Kn=new rr,Jn=new jn(0,0,0),Qn=new jn(1,1,1),er=new jn,tr=new jn,nr=new jn;function rr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(rr.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,c,l,f,h,p,d,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=f,v[3]=h,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new rr).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/Zn.setFromMatrixColumn(e,0).length(),i=1/Zn.setFromMatrixColumn(e,1).length(),o=1/Zn.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var f=o*c,h=o*l,p=a*c,d=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=h+p*u,t[5]=f-d*u,t[9]=-a*s,t[2]=d-f*u,t[6]=p+h*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){f=o*c,h=o*l,p=a*c,d=a*l;t[0]=s*c,t[4]=p*u-h,t[8]=f*u+d,t[1]=s*l,t[5]=d*u+f,t[9]=h*u-p,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var _=o*s,x=o*u,b=a*s,w=a*u;t[0]=s*c,t[4]=w-_*l,t[8]=b*l+x,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=x*l+b,t[10]=_-w*l}else if("XZY"===e.order){_=o*s,x=o*u,b=a*s,w=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=_*l+w,t[5]=o*c,t[9]=x*l-b,t[2]=b*l-x,t[6]=a*c,t[10]=w*l+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Jn,e,Qn)},lookAt:function(e,t,n){var r=this.elements;return nr.subVectors(e,t),0===nr.lengthSq()&&(nr.z=1),nr.normalize(),er.crossVectors(n,nr),0===er.lengthSq()&&(1===Math.abs(n.z)?nr.x+=1e-4:nr.z+=1e-4,nr.normalize(),er.crossVectors(n,nr)),er.normalize(),tr.crossVectors(nr,er),r[0]=er.x,r[4]=tr.x,r[8]=nr.x,r[1]=er.y,r[5]=tr.y,r[9]=nr.y,r[2]=er.z,r[6]=tr.z,r[10]=nr.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],f=n[9],h=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=r[0],w=r[4],S=r[8],E=r[12],T=r[1],A=r[5],M=r[9],C=r[13],k=r[2],R=r[6],P=r[10],L=r[14],O=r[3],I=r[7],N=r[11],D=r[15];return i[0]=o*b+a*T+s*k+u*O,i[4]=o*w+a*A+s*R+u*I,i[8]=o*S+a*M+s*P+u*N,i[12]=o*E+a*C+s*L+u*D,i[1]=c*b+l*T+f*k+h*O,i[5]=c*w+l*A+f*R+h*I,i[9]=c*S+l*M+f*P+h*N,i[13]=c*E+l*C+f*L+h*D,i[2]=p*b+d*T+m*k+v*O,i[6]=p*w+d*A+m*R+v*I,i[10]=p*S+d*M+m*P+v*N,i[14]=p*E+d*C+m*L+v*D,i[3]=g*b+y*T+_*k+x*O,i[7]=g*w+y*A+_*R+x*I,i[11]=g*S+y*M+_*P+x*N,i[15]=g*E+y*C+_*L+x*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Zn.x=e.getX(t),Zn.y=e.getY(t),Zn.z=e.getZ(t),Zn.applyMatrix4(this),e.setXYZ(t,Zn.x,Zn.y,Zn.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],f=e[10],h=e[14];return e[3]*(+i*s*l-r*u*l-i*a*f+n*u*f+r*a*h-n*s*h)+e[7]*(+t*s*h-t*u*f+i*o*f-r*o*h+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*h-i*o*l+n*o*h+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*f+r*o*l-n*o*f+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],f=r[7],h=r[8],p=r[9],d=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],x=p*y*f-g*d*f+g*l*m-c*y*m-p*l*_+c*d*_,b=v*d*f-h*y*f-v*l*m+u*y*m+h*l*_-u*d*_,w=h*g*f-v*p*f+v*c*m-u*g*m-h*c*_+u*p*_,S=v*p*l-h*g*l-v*c*d+u*g*d+h*c*y-u*p*y,E=i*x+o*b+a*w+s*S;if(0===E){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var A=1/E;return n[0]=x*A,n[1]=(g*d*s-p*y*s-g*a*m+o*y*m+p*a*_-o*d*_)*A,n[2]=(c*y*s-g*l*s+g*a*f-o*y*f-c*a*_+o*l*_)*A,n[3]=(p*l*s-c*d*s-p*a*f+o*d*f+c*a*m-o*l*m)*A,n[4]=b*A,n[5]=(h*y*s-v*d*s+v*a*m-i*y*m-h*a*_+i*d*_)*A,n[6]=(v*l*s-u*y*s-v*a*f+i*y*f+u*a*_-i*l*_)*A,n[7]=(u*d*s-h*l*s+h*a*f-i*d*f-u*a*m+i*l*m)*A,n[8]=w*A,n[9]=(v*p*s-h*g*s-v*o*m+i*g*m+h*o*_-i*p*_)*A,n[10]=(u*g*s-v*c*s+v*o*f-i*g*f-u*o*_+i*c*_)*A,n[11]=(h*c*s-u*p*s-h*o*f+i*p*f+u*o*m-i*c*m)*A,n[12]=S*A,n[13]=(h*g*a-v*p*a+v*o*d-i*g*d-h*o*y+i*p*y)*A,n[14]=(v*c*a-u*g*a-v*o*l+i*g*l+u*o*y-i*c*y)*A,n[15]=(u*p*a-h*c*a+h*o*l-i*p*l-u*o*d+i*c*d)*A,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,m=o*l,v=a*l,g=s*u,y=s*c,_=s*l,x=n.x,b=n.y,w=n.z;return r[0]=(1-(d+v))*x,r[1]=(h+_)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-_)*b,r[5]=(1-(f+v))*b,r[6]=(m+g)*b,r[7]=0,r[8]=(p+y)*w,r[9]=(m-g)*w,r[10]=(1-(f+d))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=Zn.set(r[0],r[1],r[2]).length(),o=Zn.set(r[4],r[5],r[6]).length(),a=Zn.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Kn.copy(this);var s=1/i,u=1/o,c=1/a;return Kn.elements[0]*=s,Kn.elements[1]*=s,Kn.elements[2]*=s,Kn.elements[4]*=u,Kn.elements[5]*=u,Kn.elements[6]*=u,Kn.elements[8]*=c,Kn.elements[9]*=c,Kn.elements[10]*=c,t.setFromRotationMatrix(Kn),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,f=(n+r)*u,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var ir=new rr,or=new Fn;function ar(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ar.DefaultOrder}function sr(){this.mask=1}ar.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ar.DefaultOrder="XYZ",Object.defineProperties(ar.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(ar.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Nn.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],f=i[2],h=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===t?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return ir.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ir,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return or.setFromEuler(this),this.setFromQuaternion(or,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new jn(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(sr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!==(this.mask&e.mask)}});var ur=0,cr=new jn,lr=new Fn,fr=new rr,hr=new jn,pr=new jn,dr=new jn,mr=new Fn,vr=new jn(1,0,0),gr=new jn(0,1,0),yr=new jn(0,0,1),_r={type:"added"},xr={type:"removed"};function br(){Object.defineProperty(this,"id",{value:ur++}),this.uuid=Nn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=br.DefaultUp.clone();var e=new jn,t=new ar,n=new Fn,r=new jn(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rr},normalMatrix:{value:new Gn}}),this.matrix=new rr,this.matrixWorld=new rr,this.matrixAutoUpdate=br.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new sr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function wr(){br.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}br.DefaultUp=new jn(0,1,0),br.DefaultMatrixAutoUpdate=!0,br.prototype=Object.assign(Object.create(Ln.prototype),{constructor:br,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return lr.setFromAxisAngle(e,t),this.quaternion.multiply(lr),this},rotateOnWorldAxis:function(e,t){return lr.setFromAxisAngle(e,t),this.quaternion.premultiply(lr),this},rotateX:function(e){return this.rotateOnAxis(vr,e)},rotateY:function(e){return this.rotateOnAxis(gr,e)},rotateZ:function(e){return this.rotateOnAxis(yr,e)},translateOnAxis:function(e,t){return cr.copy(e).applyQuaternion(this.quaternion),this.position.add(cr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(vr,e)},translateY:function(e){return this.translateOnAxis(gr,e)},translateZ:function(e){return this.translateOnAxis(yr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(fr.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?hr.copy(e):hr.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),pr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fr.lookAt(pr,hr,this.up):fr.lookAt(hr,pr,this.up),this.quaternion.setFromRotationMatrix(fr),r&&(fr.extractRotation(r.matrixWorld),lr.setFromRotationMatrix(fr),this.quaternion.premultiply(lr.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xr)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),fr.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),fr.multiply(e.parent.matrixWorld)),e.applyMatrix(fr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new jn),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Fn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(pr,e,dr),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new jn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(pr,mr,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new jn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var f=m(e.geometries),h=m(e.materials),p=m(e.textures),d=m(e.images);a=m(e.shapes);f.length>0&&(n.geometries=f),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),wr.prototype=Object.assign(Object.create(br.prototype),{constructor:wr,isScene:!0,copy:function(e,t){return br.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Sr=[new jn,new jn,new jn,new jn,new jn,new jn,new jn,new jn],Er=new jn,Tr=new Dr,Ar=new jn,Mr=new jn,Cr=new jn,kr=new jn,Rr=new jn,Pr=new jn,Lr=new jn,Or=new jn,Ir=new jn,Nr=new jn;function Dr(e,t){this.min=void 0!==e?e:new jn(1/0,1/0,1/0),this.max=void 0!==t?t:new jn(-1/0,-1/0,-1/0)}function Fr(e,t,n,r,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){Nr.fromArray(e,o);var s=i.x*Math.abs(Nr.x)+i.y*Math.abs(Nr.y)+i.z*Math.abs(Nr.z),u=t.dot(Nr),c=n.dot(Nr),l=r.dot(Nr);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}Object.assign(Dr.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],f=e[s+2];c<t&&(t=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),f=e.getZ(s);c<t&&(t=c),l<n&&(n=l),f<r&&(r=f),c>i&&(i=c),l>o&&(o=l),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Er.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new jn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new jn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Tr.copy(t.boundingBox),Tr.applyMatrix4(e.matrixWorld),this.expandByPoint(Tr.min),this.expandByPoint(Tr.max));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new jn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Er),Er.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Lr),Or.subVectors(this.max,Lr),Ar.subVectors(e.a,Lr),Mr.subVectors(e.b,Lr),Cr.subVectors(e.c,Lr),kr.subVectors(Mr,Ar),Rr.subVectors(Cr,Mr),Pr.subVectors(Ar,Cr);var t=[0,-kr.z,kr.y,0,-Rr.z,Rr.y,0,-Pr.z,Pr.y,kr.z,0,-kr.x,Rr.z,0,-Rr.x,Pr.z,0,-Pr.x,-kr.y,kr.x,0,-Rr.y,Rr.x,0,-Pr.y,Pr.x,0];return!!Fr(t,Ar,Mr,Cr,Or)&&(!!Fr(t=[1,0,0,0,1,0,0,0,1],Ar,Mr,Cr,Or)&&(Ir.crossVectors(kr,Rr),Fr(t=[Ir.x,Ir.y,Ir.z],Ar,Mr,Cr,Or)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new jn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Er.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Er).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(Sr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sr)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var zr=new Dr;function Br(e,t){this.center=void 0!==e?e:new jn,this.radius=void 0!==t?t:0}Object.assign(Br.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):zr.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new jn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Dr),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var jr=new jn,Vr=new jn,Ur=new jn,Gr=new jn,Hr=new jn,Wr=new jn,qr=new jn;function Yr(e,t){this.origin=void 0!==e?e:new jn,this.direction=void 0!==t?t:new jn(0,0,-1)}Object.assign(Yr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new jn),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,jr)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new jn),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=jr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jr.copy(this.direction).multiplyScalar(t).add(this.origin),jr.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){Vr.copy(e).add(t).multiplyScalar(.5),Ur.copy(t).sub(e).normalize(),Gr.copy(this.origin).sub(Vr);var i,o,a,s,u=.5*e.distanceTo(t),c=-this.direction.dot(Ur),l=Gr.dot(this.direction),f=-Gr.dot(Ur),h=Gr.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(o=c*l-f,s=u*p,(i=c*f-l)>=0)if(o>=-s)if(o<=s){var d=1/p;a=(i*=d)*(i+c*(o*=d)+2*l)+o*(c*i+o+2*f)+h}else o=u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*f)+h;else o=-u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*f)+h;else o<=-s?a=-(i=Math.max(0,-(-c*u+l)))*i+(o=i>0?-u:Math.min(Math.max(-u,-f),u))*(o+2*f)+h:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-f),u))*(o+2*f)+h):a=-(i=Math.max(0,-(c*u+l)))*i+(o=i>0?u:Math.min(Math.max(-u,-f),u))*(o+2*f)+h;else o=c>0?-u:u,a=-(i=Math.max(0,-(c*o+l)))*i+o*(o+2*f)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Ur).multiplyScalar(o).add(Vr),a},intersectSphere:function(e,t){jr.subVectors(e.center,this.origin);var n=jr.dot(this.direction),r=jr.dot(jr)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(i=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(i=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(e.min.z-f.z)*l,s=(e.max.z-f.z)*l):(a=(e.max.z-f.z)*l,s=(e.min.z-f.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,jr)},intersectTriangle:function(e,t,n,r,i){Hr.subVectors(t,e),Wr.subVectors(n,e),qr.crossVectors(Hr,Wr);var o,a=this.direction.dot(qr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Gr.subVectors(this.origin,e);var s=o*this.direction.dot(Wr.crossVectors(Gr,Wr));if(s<0)return null;var u=o*this.direction.dot(Hr.cross(Gr));if(u<0)return null;if(s+u>a)return null;var c=-o*Gr.dot(qr);return c<0?null:this.at(c/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Xr=new jn,$r=new jn,Zr=new Gn;function Kr(e,t){this.normal=void 0!==e?e:new jn(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Kr.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=Xr.subVectors(n,t).cross($r.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new jn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new jn);var n=e.delta(Xr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new jn),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Zr.getNormalMatrix(e),r=this.coplanarPoint(Xr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Jr=new jn,Qr=new jn,ei=new jn,ti=new jn,ni=new jn,ri=new jn,ii=new jn,oi=new jn,ai=new jn,si=new jn;function ui(e,t,n){this.a=void 0!==e?e:new jn,this.b=void 0!==t?t:new jn,this.c=void 0!==n?n:new jn}Object.assign(ui,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new jn),r.subVectors(n,t),Jr.subVectors(e,t),r.cross(Jr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Jr.subVectors(r,t),Qr.subVectors(n,t),ei.subVectors(e,t);var o=Jr.dot(Jr),a=Jr.dot(Qr),s=Jr.dot(ei),u=Qr.dot(Qr),c=Qr.dot(ei),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new jn),0===l)return i.set(-2,-1,-1);var f=1/l,h=(u*s-a*c)*f,p=(o*c-a*s)*f;return i.set(1-h-p,p,h)},containsPoint:function(e,t,n,r){return ui.getBarycoord(e,t,n,r,ti),ti.x>=0&&ti.y>=0&&ti.x+ti.y<=1},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,ti),s.set(0,0),s.addScaledVector(i,ti.x),s.addScaledVector(o,ti.y),s.addScaledVector(a,ti.z),s},isFrontFacing:function(e,t,n,r){return Jr.subVectors(n,t),Qr.subVectors(e,t),Jr.cross(Qr).dot(r)<0}}),Object.assign(ui.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Jr.subVectors(this.c,this.b),Qr.subVectors(this.a,this.b),.5*Jr.cross(Qr).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new jn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ui.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Kr),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ui.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return ui.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return ui.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return ui.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new jn);var n,r,i=this.a,o=this.b,a=this.c;ni.subVectors(o,i),ri.subVectors(a,i),oi.subVectors(e,i);var s=ni.dot(oi),u=ri.dot(oi);if(s<=0&&u<=0)return t.copy(i);ai.subVectors(e,o);var c=ni.dot(ai),l=ri.dot(ai);if(c>=0&&l<=c)return t.copy(o);var f=s*l-c*u;if(f<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(ni,n);si.subVectors(e,a);var h=ni.dot(si),p=ri.dot(si);if(p>=0&&h<=p)return t.copy(a);var d=h*u-s*p;if(d<=0&&u>=0&&p<=0)return r=u/(u-p),t.copy(i).addScaledVector(ri,r);var m=c*p-h*l;if(m<=0&&l-c>=0&&h-p>=0)return ii.subVectors(a,o),r=(l-c)/(l-c+(h-p)),t.copy(o).addScaledVector(ii,r);var v=1/(m+d+f);return n=d*v,r=f*v,t.copy(i).addScaledVector(ni,n).addScaledVector(ri,r)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},li={h:0,s:0,l:0},fi={h:0,s:0,l:0};function hi(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function pi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function di(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function mi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function vi(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new jn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new hi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(hi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Nn.euclideanModulo(e,1),t=Nn.clamp(t,0,1),n=Nn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=pi(i,r,e+1/3),this.g=pi(i,r,e),this.b=pi(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=ci[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=di(e.r),this.g=di(e.g),this.b=di(e.b),this},copyLinearToSRGB:function(e){return this.r=mi(e.r),this.g=mi(e.g),this.b=mi(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(li),li.h+=e,li.s+=t,li.l+=n,this.setHSL(li.h,li.s,li.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(li),e.getHSL(fi);var n=Nn.lerp(li.h,fi.h,t),r=Nn.lerp(li.s,fi.s,t),i=Nn.lerp(li.l,fi.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),hi.NAMES=ci,Object.assign(vi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var gi=0;function yi(){Object.defineProperty(this,"id",{value:gi++}),this.uuid=Nn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=D,this.side=M,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=L,this.opacity=1,this.transparent=!1,this.blendSrc=Z,this.blendDst=K,this.blendEquation=V,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ae,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function _i(e){yi.call(this),this.type="MeshBasicMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}yi.prototype=Object.assign(Object.create(Ln.prototype),{constructor:yi,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===R;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==M&&(n.side=this.side),this.vertexColors!==L&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(yi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),_i.prototype=Object.create(yi.prototype),_i.prototype.constructor=_i,_i.prototype.isMeshBasicMaterial=!0,_i.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var xi=new jn;function bi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0}function wi(e,t,n){bi.call(this,new Int8Array(e),t,n)}function Si(e,t,n){bi.call(this,new Uint8Array(e),t,n)}function Ei(e,t,n){bi.call(this,new Uint8ClampedArray(e),t,n)}function Ti(e,t,n){bi.call(this,new Int16Array(e),t,n)}function Ai(e,t,n){bi.call(this,new Uint16Array(e),t,n)}function Mi(e,t,n){bi.call(this,new Int32Array(e),t,n)}function Ci(e,t,n){bi.call(this,new Uint32Array(e),t,n)}function ki(e,t,n){bi.call(this,new Float32Array(e),t,n)}function Ri(e,t,n){bi.call(this,new Float64Array(e),t,n)}function Pi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Li(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(bi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(bi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new hi),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Dn),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new jn),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Yn),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyMatrix3(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)xi.x=this.getX(t),xi.y=this.getY(t),xi.z=this.getZ(t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),wi.prototype=Object.create(bi.prototype),wi.prototype.constructor=wi,Si.prototype=Object.create(bi.prototype),Si.prototype.constructor=Si,Ei.prototype=Object.create(bi.prototype),Ei.prototype.constructor=Ei,Ti.prototype=Object.create(bi.prototype),Ti.prototype.constructor=Ti,Ai.prototype=Object.create(bi.prototype),Ai.prototype.constructor=Ai,Mi.prototype=Object.create(bi.prototype),Mi.prototype.constructor=Mi,Ci.prototype=Object.create(bi.prototype),Ci.prototype.constructor=Ci,ki.prototype=Object.create(bi.prototype),ki.prototype.constructor=ki,Ri.prototype=Object.create(bi.prototype),Ri.prototype.constructor=Ri,Object.assign(Pi.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var l,f=e.morphNormals,h=f.length;if(h>0){l=[];for(c=0;c<h;c++)l[c]={name:f[c].name,data:[]};this.morphTargets.normal=l}var p=e.skinIndices,d=e.skinWeights,m=p.length===r.length,v=d.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(x=i[0][c])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Dn,new Dn,new Dn));if(!0===a)void 0!==(x=i[1][c])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Dn,new Dn,new Dn));for(var S=0;S<u;S++){var E=s[S].vertices;t[S].data.push(E[g.a],E[g.b],E[g.c])}for(S=0;S<h;S++){var T=f[S].vertexNormals[c];l[S].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Oi=1,Ii=new rr,Ni=new br,Di=new jn,Fi=new Dr,zi=new Dr,Bi=new jn;function ji(){Object.defineProperty(this,"id",{value:Oi+=2}),this.uuid=Nn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ji.prototype=Object.assign(Object.create(Ln.prototype),{constructor:ji,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Li(e)>65535?Ci:Ai)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Gn).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ii.makeRotationX(e),this.applyMatrix(Ii),this},rotateY:function(e){return Ii.makeRotationY(e),this.applyMatrix(Ii),this},rotateZ:function(e){return Ii.makeRotationZ(e),this.applyMatrix(Ii),this},translate:function(e,t,n){return Ii.makeTranslation(e,t,n),this.applyMatrix(Ii),this},scale:function(e,t,n){return Ii.makeScale(e,t,n),this.applyMatrix(Ii),this},lookAt:function(e){return Ni.lookAt(e),Ni.updateMatrix(),this.applyMatrix(Ni.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Di).negate(),this.translate(Di.x,Di.y,Di.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new ki(3*t.vertices.length,3),r=new ki(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new ki(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ki(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Pi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new bi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new bi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new bi(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new bi(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new bi(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],c=0,l=u.length;c<l;c++){var f=u[c],h=new ki(3*f.data.length,3);h.name=f.name,s.push(h.copyVector3sArray(f.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new ki(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var d=new ki(4*e.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Dr);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Fi.setFromBufferAttribute(i),this.morphTargetsRelative?(Bi.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(Bi),Bi.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(Bi)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Br);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Fi.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];zi.setFromBufferAttribute(o),this.morphTargetsRelative?(Bi.addVectors(Fi.min,zi.min),Fi.expandByPoint(Bi),Bi.addVectors(Fi.max,zi.max),Fi.expandByPoint(Bi)):(Fi.expandByPoint(zi.min),Fi.expandByPoint(zi.max))}Fi.getCenter(n);var a=0;for(r=0,i=e.count;r<i;r++)Bi.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(Bi));if(t)for(r=0,i=t.length;r<i;r++){o=t[r];for(var s=this.morphTargetsRelative,u=0,c=o.count;u<c;u++)Bi.fromBufferAttribute(o,u),s&&(Di.fromBufferAttribute(e,u),Bi.add(Di)),a=Math.max(a,n.distanceToSquared(Bi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new bi(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,c=t.normal.array,l=new jn,f=new jn,h=new jn,p=new jn,d=new jn;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],u=3*m[i+2],l.fromArray(n,a),f.fromArray(n,s),h.fromArray(n,u),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),f.fromArray(n,i+3),h.fromArray(n,i+6),p.subVectors(h,f),d.subVectors(l,f),p.cross(d),c[i]=p.x,c[i+1]=p.y,c[i+2]=p.z,c[i+3]=p.x,c[i+4]=p.y,c[i+5]=p.z,c[i+6]=p.x,c[i+7]=p.y,c[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=a[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Bi.x=e.getX(t),Bi.y=e.getY(t),Bi.z=e.getZ(t),Bi.normalize(),e.setXYZ(t,Bi.x,Bi.y,Bi.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,u=t.length;s<u;s++){o=t[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new bi(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new ji,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],c=0,l=u.length;c<l;c++){o=e(u[c],n);s.push(o)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,h=(c=0,f.length);c<h;c++){var p=f[c];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(h=i[n]).toJSON();""!==h.name&&(o.name=h.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],c=[],l=0,f=u.length;l<f;l++){var h;o=(h=u[l]).toJSON();""!==h.name&&(o.name=h.name),c.push(o)}c.length>0&&(a[n]=c,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e},clone:function(){return(new ji).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],c=s[t];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[t]=u}this.morphTargetsRelative=e.morphTargetsRelative;var l=e.groups;for(n=0,r=l.length;n<r;n++){var f=l[n];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Vi=new rr,Ui=new Yr,Gi=new Br,Hi=new jn,Wi=new jn,qi=new jn,Yi=new jn,Xi=new jn,$i=new jn,Zi=new jn,Ki=new jn,Ji=new jn,Qi=new Dn,eo=new Dn,to=new Dn,no=new jn,ro=new jn;function io(e,t){br.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new ji,this.material=void 0!==t?t:new _i({color:16777215*Math.random()}),this.updateMorphTargets()}function oo(e,t,n,r,i,o,a,s){if(null===(t.side===C?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==k,s)))return null;ro.copy(s),ro.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(ro);return u<n.near||u>n.far?null:{distance:u,point:ro.clone(),object:e}}function ao(e,t,n,r,i,o,a,s,u,c,l,f){Hi.fromBufferAttribute(i,c),Wi.fromBufferAttribute(i,l),qi.fromBufferAttribute(i,f);var h=e.morphTargetInfluences;if(t.morphTargets&&o&&h){Zi.set(0,0,0),Ki.set(0,0,0),Ji.set(0,0,0);for(var p=0,d=o.length;p<d;p++){var m=h[p],v=o[p];0!==m&&(Yi.fromBufferAttribute(v,c),Xi.fromBufferAttribute(v,l),$i.fromBufferAttribute(v,f),a?(Zi.addScaledVector(Yi,m),Ki.addScaledVector(Xi,m),Ji.addScaledVector($i,m)):(Zi.addScaledVector(Yi.sub(Hi),m),Ki.addScaledVector(Xi.sub(Wi),m),Ji.addScaledVector($i.sub(qi),m)))}Hi.add(Zi),Wi.add(Ki),qi.add(Ji)}var g=oo(e,t,n,r,Hi,Wi,qi,no);if(g){s&&(Qi.fromBufferAttribute(s,c),eo.fromBufferAttribute(s,l),to.fromBufferAttribute(s,f),g.uv=ui.getUV(no,Hi,Wi,qi,Qi,eo,to,new Dn)),u&&(Qi.fromBufferAttribute(u,c),eo.fromBufferAttribute(u,l),to.fromBufferAttribute(u,f),g.uv2=ui.getUV(no,Hi,Wi,qi,Qi,eo,to,new Dn));var y=new vi(c,l,f);ui.getNormal(Hi,Wi,qi,y.normal),g.face=y}return g}io.prototype=Object.assign(Object.create(br.prototype),{constructor:io,isMesh:!0,copy:function(e){return br.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Gi.copy(r.boundingSphere),Gi.applyMatrix4(o),!1!==e.ray.intersectsSphere(Gi)&&(Vi.getInverse(o),Ui.copy(e.ray).applyMatrix4(Vi),null===r.boundingBox||!1!==Ui.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,u,c,l,f,h,p,d,m=r.index,v=r.attributes.position,g=r.morphAttributes.position,y=r.morphTargetsRelative,_=r.attributes.uv,x=r.attributes.uv2,b=r.groups,w=r.drawRange;if(null!==m)if(Array.isArray(i))for(c=0,f=b.length;c<f;c++)for(d=i[(p=b[c]).materialIndex],l=Math.max(p.start,w.start),h=Math.min(p.start+p.count,w.start+w.count);l<h;l+=3)a=m.getX(l),s=m.getX(l+1),u=m.getX(l+2),(n=ao(this,d,e,Ui,v,g,y,_,x,a,s,u))&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(c=Math.max(0,w.start),f=Math.min(m.count,w.start+w.count);c<f;c+=3)a=m.getX(c),s=m.getX(c+1),u=m.getX(c+2),(n=ao(this,i,e,Ui,v,g,y,_,x,a,s,u))&&(n.faceIndex=Math.floor(c/3),t.push(n));else if(void 0!==v)if(Array.isArray(i))for(c=0,f=b.length;c<f;c++)for(d=i[(p=b[c]).materialIndex],l=Math.max(p.start,w.start),h=Math.min(p.start+p.count,w.start+w.count);l<h;l+=3)(n=ao(this,d,e,Ui,v,g,y,_,x,a=l,s=l+1,u=l+2))&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(c=Math.max(0,w.start),f=Math.min(v.count,w.start+w.count);c<f;c+=3)(n=ao(this,i,e,Ui,v,g,y,_,x,a=c,s=c+1,u=c+2))&&(n.faceIndex=Math.floor(c/3),t.push(n))}else if(r.isGeometry){var S,E,T,A,M=Array.isArray(i),C=r.vertices,k=r.faces,R=r.faceVertexUvs[0];R.length>0&&(A=R);for(var P=0,L=k.length;P<L;P++){var O=k[P],I=M?i[O.materialIndex]:i;if(void 0!==I&&(S=C[O.a],E=C[O.b],T=C[O.c],n=oo(this,I,e,Ui,S,E,T,no))){if(A&&A[P]){var N=A[P];Qi.copy(N[0]),eo.copy(N[1]),to.copy(N[2]),n.uv=ui.getUV(no,S,E,T,Qi,eo,to,new Dn)}n.face=O,n.faceIndex=P,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var so=0,uo=new rr,co=new br,lo=new jn;function fo(){Object.defineProperty(this,"id",{value:so+=2}),this.uuid=Nn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}fo.prototype=Object.assign(Object.create(Ln.prototype),{constructor:fo,isGeometry:!0,applyMatrix:function(e){for(var t=(new Gn).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return uo.makeRotationX(e),this.applyMatrix(uo),this},rotateY:function(e){return uo.makeRotationY(e),this.applyMatrix(uo),this},rotateZ:function(e){return uo.makeRotationZ(e),this.applyMatrix(uo),this},translate:function(e,t,n){return uo.makeTranslation(e,t,n),this.applyMatrix(uo),this},scale:function(e,t,n){return uo.makeScale(e,t,n),this.applyMatrix(uo),this},lookAt:function(e){return co.lookAt(e),co.updateMatrix(),this.applyMatrix(co.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=0;c<i.length;c+=3)t.vertices.push((new jn).fromArray(i,c)),void 0!==a&&t.colors.push((new hi).fromArray(a,c));function l(e,n,r,i){var c=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],l=new vi(e,n,r,void 0===o?[]:[(new jn).fromArray(o,3*e),(new jn).fromArray(o,3*n),(new jn).fromArray(o,3*r)],c,i);t.faces.push(l),void 0!==s&&t.faceVertexUvs[0].push([(new Dn).fromArray(s,2*e),(new Dn).fromArray(s,2*n),(new Dn).fromArray(s,2*r)]),void 0!==u&&t.faceVertexUvs[1].push([(new Dn).fromArray(u,2*e),(new Dn).fromArray(u,2*n),(new Dn).fromArray(u,2*r)])}var f=e.groups;if(f.length>0)for(c=0;c<f.length;c++)for(var h=f[c],p=h.start,d=p,m=p+h.count;d<m;d+=3)void 0!==n?l(n[d],n[d+1],n[d+2],h.materialIndex):l(d,d+1,d+2,h.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)l(n[c],n[c+1],n[c+2]);else for(c=0;c<i.length/3;c+=3)l(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(lo).negate(),this.translate(lo.x,lo.y,lo.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new rr;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new jn,t=new jn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new jn;if(e){var s,u,c,l=new jn,f=new jn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],l.subVectors(c,u),f.subVectors(s,u),l.cross(f),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(o=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new fo;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new jn,c={a:new jn,b:new jn,c:new jn},a.push(u),s.push(c)}var u,c,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Dr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Br),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.colors,l=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Gn).getNormalMatrix(t));for(var f=0,h=a.length;f<h;f++){var p=a[f].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(f=0,h=l.length;f<h;f++)c.push(l[f].clone());for(f=0,h=u.length;f<h;f++){var d,m,v,g=u[f],y=g.vertexNormals,_=g.vertexColors;(d=new vi(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var x=0,b=y.length;x<b;x++)m=y[x].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),d.vertexNormals.push(m);d.color.copy(g.color);for(x=0,b=_.length;x<b;x++)v=_[x],d.vertexColors.push(v.clone());d.materialIndex=g.materialIndex+n,s.push(d)}for(f=0,h=e.faceVertexUvs.length;f<h;f++){var w=e.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);for(x=0,b=w.length;x<b;x++){for(var S=w[x],E=[],T=0,A=S.length;T<A;T++)E.push(S[T].clone());this.faceVertexUvs[f].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},c=[],l=[],f=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f)]?(u[t]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[t]];var h=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var d=h[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new jn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},f=[],h={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=S(_,0,0),_=S(_,1,!0),_=S(_,2,!1),_=S(_,3,d),_=S(_,4,m),_=S(_,5,v),_=S(_,6,g),_=S(_,7,y),a.push(_),a.push(p.a,p.b,p.c),a.push(p.materialIndex),d){var x=this.faceVertexUvs[0][i];a.push(A(x[0]),A(x[1]),A(x[2]))}if(m&&a.push(E(p.normal)),v){var b=p.vertexNormals;a.push(E(b[0]),E(b[1]),E(b[2]))}if(g&&a.push(T(p.color)),y){var w=p.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]||(u[t]=s.length/3,s.push(e.x,e.y,e.z)),u[t]}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]||(l[t]=c.length,c.push(e.getHex())),l[t]}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]||(h[t]=f.length/2,f.push(e.x,e.y)),h[t]}return e.data={},e.data.vertices=r,e.data.normals=s,c.length>0&&(e.data.colors=c),f.length>0&&(e.data.uvs=[f]),e.data.faces=a,e},clone:function(){return(new fo).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var f=l[r],h=[];for(o=0,a=f.length;o<a;o++){var p=f[o];h.push(p.clone())}this.faceVertexUvs[t].push(h)}}var d=e.morphTargets;for(t=0,n=d.length;t<n;t++){var m={};if(m.name=d[t].name,void 0!==d[t].vertices)for(m.vertices=[],r=0,i=d[t].vertices.length;r<i;r++)m.vertices.push(d[t].vertices[r].clone());if(void 0!==d[t].normals)for(m.normals=[],r=0,i=d[t].normals.length;r<i;r++)m.normals.push(d[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ho=function(e){s(n,e);var t=h(n);function n(e,r,i,a,s,u){var c;return o(this,n),(c=t.call(this)).type="BoxGeometry",c.parameters={width:e,height:r,depth:i,widthSegments:a,heightSegments:s,depthSegments:u},c.fromBufferGeometry(new po(e,r,i,a,s,u)),c.mergeVertices(),c}return n}(fo),po=function(e){s(n,e);var t=h(n);function n(e,r,a,s,u,c){var l;o(this,n),(l=t.call(this)).type="BoxBufferGeometry",l.parameters={width:e,height:r,depth:a,widthSegments:s,heightSegments:u,depthSegments:c};var f=i(l);e=e||1,r=r||1,a=a||1,s=Math.floor(s)||1,u=Math.floor(u)||1,c=Math.floor(c)||1;var h=[],p=[],d=[],m=[],v=0,g=0;function y(e,t,n,r,i,o,a,s,u,c,l){var y,_,x=o/u,b=a/c,w=o/2,S=a/2,E=s/2,T=u+1,A=c+1,M=0,C=0,k=new jn;for(_=0;_<A;_++){var R=_*b-S;for(y=0;y<T;y++){var P=y*x-w;k[e]=P*r,k[t]=R*i,k[n]=E,p.push(k.x,k.y,k.z),k[e]=0,k[t]=0,k[n]=s>0?1:-1,d.push(k.x,k.y,k.z),m.push(y/u),m.push(1-_/c),M+=1}}for(_=0;_<c;_++)for(y=0;y<u;y++){var L=v+y+T*_,O=v+y+T*(_+1),I=v+(y+1)+T*(_+1),N=v+(y+1)+T*_;h.push(L,O,N),h.push(O,I,N),C+=6}f.addGroup(g,C,l),g+=C,v+=M}return y("z","y","x",-1,-1,a,r,e,c,u,0),y("z","y","x",1,-1,a,r,-e,c,u,1),y("x","z","y",1,1,e,a,r,s,c,2),y("x","z","y",1,-1,e,a,-r,s,c,3),y("x","y","z",1,-1,e,r,a,s,u,4),y("x","y","z",-1,-1,e,r,-a,s,u,5),l.setIndex(h),l.setAttribute("position",new ki(p,3)),l.setAttribute("normal",new ki(d,3)),l.setAttribute("uv",new ki(m,2)),l}return n}(ji);function mo(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function vo(e){for(var t={},n=0;n<e.length;n++){var r=mo(e[n]);for(var i in r)t[i]=r[i]}return t}var go={clone:mo,merge:vo};function yo(e){yi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function _o(){br.call(this),this.type="Camera",this.matrixWorldInverse=new rr,this.projectionMatrix=new rr,this.projectionMatrixInverse=new rr}function xo(e,t,n,r){_o.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}yo.prototype=Object.create(yi.prototype),yo.prototype.constructor=yo,yo.prototype.isShaderMaterial=!0,yo.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mo(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},yo.prototype.toJSON=function(e){var t=yi.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},_o.prototype=Object.assign(Object.create(br.prototype),{constructor:_o,isCamera:!0,copy:function(e,t){return br.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new jn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){br.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),xo.prototype=Object.assign(Object.create(_o.prototype),{constructor:xo,isPerspectiveCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Nn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Nn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Nn.RAD2DEG*Math.atan(Math.tan(.5*Nn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Nn.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function bo(e,t,n,r){br.call(this),this.type="CubeCamera";var i=new xo(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new jn(1,0,0)),this.add(i);var o=new xo(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new jn(-1,0,0)),this.add(o);var a=new xo(90,1,e,t);a.up.set(0,0,1),a.lookAt(new jn(0,1,0)),this.add(a);var s=new xo(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new jn(0,-1,0)),this.add(s);var u=new xo(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new jn(0,0,1)),this.add(u);var c=new xo(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new jn(0,0,-1)),this.add(c),r=r||{format:et,magFilter:De,minFilter:De},this.renderTarget=new wo(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,u),r.texture.generateMipmaps=l,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function wo(e,t,n){Xn.call(this,e,t,n)}function So(e,t,n,r,i,o,a,s,u,c,l,f){qn.call(this,null,o,a,s,u,c,r,i,l,f),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==u?u:Pe,this.minFilter=void 0!==c?c:Pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}bo.prototype=Object.create(br.prototype),bo.prototype.constructor=bo,wo.prototype=Object.create(Xn.prototype),wo.prototype.constructor=wo,wo.prototype.isWebGLRenderTargetCube=!0,wo.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new wr,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new yo({type:"CubemapFromEquirect",uniforms:mo(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:C,blending:N});i.uniforms.tEquirect.value=t;var o=new io(new po(5,5,5),i);n.add(o);var a=new bo(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},So.prototype=Object.create(qn.prototype),So.prototype.constructor=So,So.prototype.isDataTexture=!0;var Eo=new Br,To=new jn;function Ao(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Kr,void 0!==t?t:new Kr,void 0!==n?n:new Kr,void 0!==r?r:new Kr,void 0!==i?i:new Kr,void 0!==o?o:new Kr]}Object.assign(Ao.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,d-f,y-m).normalize(),t[1].setComponents(a+r,l+s,d+f,y+m).normalize(),t[2].setComponents(a+i,l+u,d+h,y+v).normalize(),t[3].setComponents(a-i,l-u,d-h,y-v).normalize(),t[4].setComponents(a-o,l-c,d-p,y-g).normalize(),t[5].setComponents(a+o,l+c,d+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Eo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Eo)},intersectsSprite:function(e){return Eo.center.set(0,0,0),Eo.radius=.7071067811865476,Eo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Eo)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(To.x=r.normal.x>0?e.max.x:e.min.x,To.y=r.normal.y>0?e.max.y:e.min.y,To.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(To)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Mo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Co={common:{diffuse:{value:new hi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Gn},uv2Transform:{value:new Gn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Dn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new hi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Gn}},sprite:{diffuse:{value:new hi(15658734)},opacity:{value:1},center:{value:new Dn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Gn}}},ko={basic:{uniforms:vo([Co.common,Co.specularmap,Co.envmap,Co.aomap,Co.lightmap,Co.fog]),vertexShader:Mo.meshbasic_vert,fragmentShader:Mo.meshbasic_frag},lambert:{uniforms:vo([Co.common,Co.specularmap,Co.envmap,Co.aomap,Co.lightmap,Co.emissivemap,Co.fog,Co.lights,{emissive:{value:new hi(0)}}]),vertexShader:Mo.meshlambert_vert,fragmentShader:Mo.meshlambert_frag},phong:{uniforms:vo([Co.common,Co.specularmap,Co.envmap,Co.aomap,Co.lightmap,Co.emissivemap,Co.bumpmap,Co.normalmap,Co.displacementmap,Co.fog,Co.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Mo.meshphong_vert,fragmentShader:Mo.meshphong_frag},standard:{uniforms:vo([Co.common,Co.envmap,Co.aomap,Co.lightmap,Co.emissivemap,Co.bumpmap,Co.normalmap,Co.displacementmap,Co.roughnessmap,Co.metalnessmap,Co.fog,Co.lights,{emissive:{value:new hi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Mo.meshphysical_vert,fragmentShader:Mo.meshphysical_frag},toon:{uniforms:vo([Co.common,Co.specularmap,Co.aomap,Co.lightmap,Co.emissivemap,Co.bumpmap,Co.normalmap,Co.displacementmap,Co.gradientmap,Co.fog,Co.lights,{emissive:{value:new hi(0)},specular:{value:new hi(1118481)},shininess:{value:30}}]),vertexShader:Mo.meshtoon_vert,fragmentShader:Mo.meshtoon_frag},matcap:{uniforms:vo([Co.common,Co.bumpmap,Co.normalmap,Co.displacementmap,Co.fog,{matcap:{value:null}}]),vertexShader:Mo.meshmatcap_vert,fragmentShader:Mo.meshmatcap_frag},points:{uniforms:vo([Co.points,Co.fog]),vertexShader:Mo.points_vert,fragmentShader:Mo.points_frag},dashed:{uniforms:vo([Co.common,Co.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mo.linedashed_vert,fragmentShader:Mo.linedashed_frag},depth:{uniforms:vo([Co.common,Co.displacementmap]),vertexShader:Mo.depth_vert,fragmentShader:Mo.depth_frag},normal:{uniforms:vo([Co.common,Co.bumpmap,Co.normalmap,Co.displacementmap,{opacity:{value:1}}]),vertexShader:Mo.normal_vert,fragmentShader:Mo.normal_frag},sprite:{uniforms:vo([Co.sprite,Co.fog]),vertexShader:Mo.sprite_vert,fragmentShader:Mo.sprite_frag},background:{uniforms:{uvTransform:{value:new Gn},t2D:{value:null}},vertexShader:Mo.background_vert,fragmentShader:Mo.background_frag},cube:{uniforms:vo([Co.envmap,{opacity:{value:1}}]),vertexShader:Mo.cube_vert,fragmentShader:Mo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mo.equirect_vert,fragmentShader:Mo.equirect_frag},distanceRGBA:{uniforms:vo([Co.common,Co.displacementmap,{referencePosition:{value:new jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mo.distanceRGBA_vert,fragmentShader:Mo.distanceRGBA_frag},shadow:{uniforms:vo([Co.lights,Co.fog,{color:{value:new hi(0)},opacity:{value:1}}]),vertexShader:Mo.shadow_vert,fragmentShader:Mo.shadow_frag}};function Ro(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Po(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(!function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,i):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function Lo(e,t,n,r){fo.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Oo(e,t,n,r)),this.mergeVertices()}function Oo(e,t,n,r){ji.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,f=c+1,h=e/u,p=t/c,d=[],m=[],v=[],g=[];for(o=0;o<f;o++){var y=o*p-s;for(i=0;i<l;i++){var _=i*h-a;m.push(_,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var x=i+l*o,b=i+l*(o+1),w=i+1+l*(o+1),S=i+1+l*o;d.push(x,b,S),d.push(b,w,S)}this.setIndex(d),this.setAttribute("position",new ki(m,3)),this.setAttribute("normal",new ki(v,3)),this.setAttribute("uv",new ki(g,2))}function Io(e,t,n,r){var i,o,a=new hi(0),s=0,u=null,c=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),l(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){l(a,s=e)},render:function(t,r,f,h){var p=r.background,d=e.xr,m=d.getSession&&d.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(l(a,s),u=null,c=0):p&&p.isColor&&(l(p,1),h=!0,u=null,c=0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube||p.mapping===Ae)){void 0===o&&((o=new io(new po(1,1,1),new yo({type:"BackgroundCubeMaterial",uniforms:mo(ko.cube.uniforms),vertexShader:ko.cube.vertexShader,fragmentShader:ko.cube.fragmentShader,side:C,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var v=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.envMap.value=v,o.material.uniforms.flipEnvMap.value=v.isCubeTexture?-1:1,u===p&&c===v.version||(o.material.needsUpdate=!0,u=p,c=v.version),t.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===i&&((i=new io(new Oo(2,2),new yo({type:"BackgroundMaterial",uniforms:mo(ko.background.uniforms),vertexShader:ko.background.vertexShader,fragmentShader:ko.background.fragmentShader,side:M,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&c===p.version||(i.material.needsUpdate=!0,u=p,c=p.version),t.unshift(i,i.geometry,i.material,0,0,null))}}}function No(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(r,a,s,u){if(0!==u){var c,l;if(o)c=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](i,a,s,u),n.update(s,i,u)}}}function Do(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),l=e.getParameter(35660),f=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),d=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=l>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:f,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function Fo(){var e=this,t=null,n=0,r=!1,i=!1,o=new Kr,a=new Gn,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,r,i){var u=null!==t?t.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,f=n.matrixWorldInverse;a.getNormalMatrix(f),(null===c||c.length<l)&&(c=new Float32Array(l));for(var h=0,p=r;h!==u;++h,p+=4)o.copy(t[h]).applyMatrix4(f,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,l,f,h){if(!r||null===e||0===e.length||i&&!a)i?c(null):u();else{var p=i?0:n,d=4*p,m=f.clippingState||null;s.value=m,m=c(e,l,d,h);for(var v=0;v!==d;++v)m[v]=t[v];f.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function zo(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Bo(e,t,n){var r=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=r.get(a);for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var c=i.get(s);c&&(t.remove(c),i.delete(s)),n.memory.geometries--}function a(e){var n=[],r=e.index,o=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],f=s[u+1],h=s[u+2];n.push(l,f,f,h,h,l)}}else{s=o.array;a=o.version;for(u=0,c=s.length/3-1;u<c;u+=3){l=u+0,f=u+1,h=u+2;n.push(l,f,f,h,h,l)}}var p=new(Li(n)>65535?Ci:Ai)(n,1);p.version=a,t.update(p,34963);var d=i.get(e);d&&t.remove(d),i.set(e,p)}return{get:function(e,t){var i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ji).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return i.get(e)}}}function jo(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(r,u,c,l){if(0!==l){var f,h;if(s)f=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(f=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[h](i,c,o,u*a,l),n.update(c,i,l)}}}function Vo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Uo(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Go(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=void 0===s?0:s.length,c=t[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];t[i.id]=c}var f=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++){0!==(d=c[l])[1]&&(f&&i.deleteAttribute("morphTarget"+l),h&&i.deleteAttribute("morphNormal"+l))}for(l=0;l<u;l++){(d=c[l])[0]=l,d[1]=s[l]}c.sort(Uo);var p=0;for(l=0;l<8;l++){var d;if(d=c[l]){var m=d[0],v=d[1];if(v){f&&i.setAttribute("morphTarget"+l,f[m]),h&&i.setAttribute("morphNormal"+l,h[m]),n[l]=v,p+=v;continue}}n[l]=0}var g=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",g),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Ho(e,t,n,r){var i={};return{update:function(e){var o=r.render.frame,a=e.geometry,s=t.get(e,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=o),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function Wo(e,t,n,r,i,o,a,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:be,a=void 0!==a?a:et,qn.call(this,e,t,n,r,i,o,a,s,u,c),this.flipY=!1}function qo(e,t,n,r){qn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Pe,this.minFilter=Pe,this.wrapR=ke,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Yo(e,t,n,r){qn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Pe,this.minFilter=Pe,this.wrapR=ke,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ko.physical={uniforms:vo([ko.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new hi(0)},clearcoatNormalScale:{value:new Dn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Mo.meshphysical_vert,fragmentShader:Mo.meshphysical_frag},Lo.prototype=Object.create(fo.prototype),Lo.prototype.constructor=Lo,Oo.prototype=Object.create(ji.prototype),Oo.prototype.constructor=Oo,Wo.prototype=Object.create(qn.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isCubeTexture=!0,Object.defineProperty(Wo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),qo.prototype=Object.create(qn.prototype),qo.prototype.constructor=qo,qo.prototype.isDataTexture2DArray=!0,Yo.prototype=Object.create(qn.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isDataTexture3D=!0;var Xo=new qn,$o=new qo,Zo=new Yo,Ko=new Wo,Jo=[],Qo=[],ea=new Float32Array(16),ta=new Float32Array(9),na=new Float32Array(4);function ra(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Jo[i];if(void 0===o&&(o=new Float32Array(i),Jo[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function ia(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function oa(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function aa(e,t){var n=Qo[t];void 0===n&&(n=new Int32Array(t),Qo[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function sa(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ua(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ia(n,t))return;e.uniform2fv(this.addr,t),oa(n,t)}}function ca(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ia(n,t))return;e.uniform3fv(this.addr,t),oa(n,t)}}function la(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ia(n,t))return;e.uniform4fv(this.addr,t),oa(n,t)}}function fa(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ia(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),oa(n,t)}else{if(ia(n,r))return;na.set(r),e.uniformMatrix2fv(this.addr,!1,na),oa(n,r)}}function ha(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ia(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),oa(n,t)}else{if(ia(n,r))return;ta.set(r),e.uniformMatrix3fv(this.addr,!1,ta),oa(n,r)}}function pa(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ia(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),oa(n,t)}else{if(ia(n,r))return;ea.set(r),e.uniformMatrix4fv(this.addr,!1,ea),oa(n,r)}}function da(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Xo,i)}function ma(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||$o,i)}function va(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Zo,i)}function ga(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Ko,i)}function ya(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function _a(e,t){var n=this.cache;ia(n,t)||(e.uniform2iv(this.addr,t),oa(n,t))}function xa(e,t){var n=this.cache;ia(n,t)||(e.uniform3iv(this.addr,t),oa(n,t))}function ba(e,t){var n=this.cache;ia(n,t)||(e.uniform4iv(this.addr,t),oa(n,t))}function wa(e,t){e.uniform1fv(this.addr,t)}function Sa(e,t){e.uniform1iv(this.addr,t)}function Ea(e,t){e.uniform2iv(this.addr,t)}function Ta(e,t){e.uniform3iv(this.addr,t)}function Aa(e,t){e.uniform4iv(this.addr,t)}function Ma(e,t){var n=ra(t,this.size,2);e.uniform2fv(this.addr,n)}function Ca(e,t){var n=ra(t,this.size,3);e.uniform3fv(this.addr,n)}function ka(e,t){var n=ra(t,this.size,4);e.uniform4fv(this.addr,n)}function Ra(e,t){var n=ra(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Pa(e,t){var n=ra(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function La(e,t){var n=ra(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Oa(e,t,n){var r=t.length,i=aa(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Xo,i[o])}function Ia(e,t,n){var r=t.length,i=aa(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Ko,i[o])}function Na(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return sa;case 35664:return ua;case 35665:return ca;case 35666:return la;case 35674:return fa;case 35675:return ha;case 35676:return pa;case 35678:case 36198:return da;case 35679:return va;case 35680:return ga;case 36289:return ma;case 5124:case 35670:return ya;case 35667:case 35671:return _a;case 35668:case 35672:return xa;case 35669:case 35673:return ba}}(t.type)}function Da(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return wa;case 35664:return Ma;case 35665:return Ca;case 35666:return ka;case 35674:return Ra;case 35675:return Pa;case 35676:return La;case 35678:case 36198:case 36298:case 36306:return Oa;case 35680:case 36300:case 36308:return Ia;case 5124:case 35670:return Sa;case 35667:case 35671:return Ea;case 35668:case 35672:return Ta;case 35669:case 35673:return Aa}}(t.type)}function Fa(e){this.id=e,this.seq=[],this.map={}}Da.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),oa(t,e)},Fa.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var za=/([\w\d_]+)(\])?(\[|\.)?/g;function Ba(e,t){e.seq.push(t),e.map[t.id]=t}function ja(e,t,n){var r=e.name,i=r.length;for(za.lastIndex=0;;){var o=za.exec(r),a=za.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Ba(n,void 0===c?new Na(s,e,t):new Da(s,e,t));break}var l=n.map[s];void 0===l&&Ba(n,l=new Fa(s)),n=l}}function Va(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);ja(i,e.getUniformLocation(t,i.name),this)}}function Ua(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Va.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Va.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Va.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Va.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Ga=0;function Ha(e){switch(e){case Xt:return["Linear","( value )"];case $t:return["sRGB","( value )"];case Kt:return["RGBE","( value )"];case Qt:return["RGBM","( value, 7.0 )"];case en:return["RGBM","( value, 16.0 )"];case tn:return["RGBD","( value, 256.0 )"];case Zt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Jt:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Wa(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function qa(e,t){var n=Ha(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ya(e,t){var n=Ha(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xa(e,t){var n;switch(t){case me:n="Linear";break;case ve:n="Reinhard";break;case ge:n="Uncharted2";break;case ye:n="OptimizedCineon";break;case _e:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function $a(e){return""!==e}function Za(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ka(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ja=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qa(e){return e.replace(Ja,es)}function es(e,t){var n=Mo[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Qa(n)}var ts=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function ns(e){return e.replace(ts,rs)}function rs(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function is(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function os(e,t,n,r,i,o){var a,s,u=e.getContext(),c=r.defines,l=i.vertexShader,f=i.fragmentShader,h=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===E?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===T?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===A&&(t="SHADOWMAP_TYPE_VSM"),t}(o),p=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case be:case we:t="ENVMAP_TYPE_CUBE";break;case Ae:case Me:t="ENVMAP_TYPE_CUBE_UV";break;case Se:case Ee:t="ENVMAP_TYPE_EQUIREC";break;case Te:t="ENVMAP_TYPE_SPHERE"}return t}(o),d=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case we:case Ee:t="ENVMAP_MODE_REFRACTION"}return t}(o),m=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case fe:t="ENVMAP_BLENDING_MULTIPLY";break;case he:t="ENVMAP_BLENDING_MIX";break;case pe:t="ENVMAP_BLENDING_ADD"}return t}(o),v=e.gammaFactor>0?e.gammaFactor:1,g=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($a).join("\n")}(r.extensions,o,t),y=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),_=u.createProgram(),x=o.numMultiviewViews;if(r.isRawShaderMaterial?((a=[y].filter($a).join("\n")).length>0&&(a+="\n"),(s=[g,y].filter($a).join("\n")).length>0&&(s+="\n")):(a=[is(o),"#define SHADER_NAME "+i.name,y,o.instancing?"#define USE_INSTANCING":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($a).join("\n"),s=[g,is(o),"#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensions&&r.extensions.shaderTextureLOD||o.envMap)&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==de?"#define TONE_MAPPING":"",o.toneMapping!==de?Mo.tonemapping_pars_fragment:"",o.toneMapping!==de?Xa("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding||o.lightMapEncoding?Mo.encodings_pars_fragment:"",o.mapEncoding?qa("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?qa("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?qa("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?qa("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.lightMapEncoding?qa("lightMapTexelToLinear",o.lightMapEncoding):"",o.outputEncoding?Ya("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter($a).join("\n")),l=Ka(l=Za(l=Qa(l),o),o),f=Ka(f=Za(f=Qa(f),o),o),l=ns(l),f=ns(f),o.isWebGL2&&!r.isRawShaderMaterial){var b=!1,w=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(w)&&null!==f.match(w)&&(b=!0,l=l.replace(w,""),f=f.replace(w,"")),a=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,s=["#version 300 es\n","#define varying in",b?"":"out highp vec4 pc_fragColor;",b?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s,x>0&&(a=(a=a.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+x+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+x+"];","uniform mat4 projectionMatrices["+x+"];","uniform mat4 viewMatrices["+x+"];","uniform mat3 normalMatrices["+x+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),s=(s=s.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+x+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var S,M,C=s+f,k=Ua(u,35633,a+l),R=Ua(u,35632,C);if(u.attachShader(_,k),u.attachShader(_,R),void 0!==r.index0AttributeName?u.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&u.bindAttribLocation(_,0,"position"),u.linkProgram(_),e.debug.checkShaderErrors){var P=u.getProgramInfoLog(_).trim(),L=u.getShaderInfoLog(k).trim(),O=u.getShaderInfoLog(R).trim(),I=!0,N=!0;if(!1===u.getProgramParameter(_,35714)){I=!1;var D=Wa(u,k,"vertex"),F=Wa(u,R,"fragment");console.error("THREE.WebGLProgram: shader error: ",u.getError(),"35715",u.getProgramParameter(_,35715),"gl.getProgramInfoLog",P,D,F)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==O||(N=!1);N&&(this.diagnostics={runnable:I,material:r,programLog:P,vertexShader:{log:L,prefix:a},fragmentShader:{log:O,prefix:s}})}return u.deleteShader(k),u.deleteShader(R),this.getUniforms=function(){return void 0===S&&(S=new Va(u,_)),S},this.getAttributes=function(){return void 0===M&&(M=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(u,_)),M},this.destroy=function(){u.deleteProgram(_),this.program=void 0},this.name=i.name,this.id=Ga++,this.cacheKey=n,this.usedTimes=1,this.program=_,this.vertexShader=k,this.fragmentShader=R,this.numMultiviewViews=x,this}function as(e,t,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,u=n.maxVertexUniforms,c=n.vertexTextures,l={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function h(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Xt,t}this.getParameters=function(t,r,f,p,d,m,v){var g=p.fog,y=t.isMeshStandardMaterial?p.environment:null,_=t.envMap||y,x=l[t.type],b=v.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var n=u,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(v):0;null!==t.precision&&(s=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",s,"instead.");var w=e.getRenderTarget(),S=w&&w.isWebGLMultiviewRenderTarget?w.numViews:0;return{isWebGL2:i,shaderID:x,precision:s,instancing:!0===v.isInstancedMesh,supportsVertexTextures:c,numMultiviewViews:S,outputEncoding:null!==w?h(w.texture):e.outputEncoding,map:!!t.map,mapEncoding:h(t.map),matcap:!!t.matcap,matcapEncoding:h(t.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:h(_),envMapCubeUV:!!_&&(_.mapping===Ae||_.mapping===Me),lightMap:!!t.lightMap,lightMapEncoding:h(t.lightMap),aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:h(t.emissiveMap),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===an,tangentSpaceNormalMap:t.normalMapType===on,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!t.map||!!t.bumpMap||!!t.normalMap||!!t.specularMap||!!t.alphaMap||!!t.emissiveMap||!!t.roughnessMap||!!t.metalnessMap||!!t.clearcoatNormalMap||!!t.displacementMap,uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap)&&!!t.displacementMap,fog:!!g,useFog:t.fog,fogExp2:g&&g.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:o,skinning:t.skinning&&b>0,maxBones:b,useVertexTexture:a,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:d,numClipIntersection:m,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:t.toneMapped?e.toneMapping:de,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===k,flipSided:t.side===C,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCacheKey=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);if(void 0===t.isRawShaderMaterial){for(var o=0;o<f.length;o++)r.push(n[f[o]]);r.push(e.outputEncoding),r.push(e.gammaFactor)}return r.push(t.onBeforeCompile.toString()),r.join()},this.acquireProgram=function(n,i,o,a){for(var s,u=0,c=r.length;u<c;u++){var l=r[u];if(l.cacheKey===a){++(s=l).usedTimes;break}}return void 0===s&&(s=new os(e,t,a,n,i,o),r.push(s)),s},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function ss(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function us(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function cs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ls(){var e=[],t=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),t++,c}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).push(c)},unshift:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).unshift(c)},sort:function(e,t){n.length>1&&n.sort(e||us),r.length>1&&r.sort(t||cs)}}}function fs(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i,o=e.get(n);return void 0===o?(i=new ls,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):void 0===(i=o.get(r))&&(i=new ls,o.set(r,i)),i},dispose:function(){e=new WeakMap}}}function hs(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new jn,color:new hi,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dn};break;case"SpotLight":n={position:new jn,direction:new jn,color:new hi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dn};break;case"PointLight":n={position:new jn,color:new hi,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new jn,skyColor:new hi,groundColor:new hi};break;case"RectAreaLight":n={color:new hi,position:new jn,halfWidth:new jn,halfHeight:new jn}}return e[t.id]=n,n}}}var ps=0;function ds(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ms(){for(var e=new hs,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new jn);var r=new jn,i=new rr,o=new rr;return{setup:function(n,a,s){for(var u=0,c=0,l=0,f=0;f<9;f++)t.probe[f].set(0,0,0);var h=0,p=0,d=0,m=0,v=0,g=0,y=0,_=0,x=s.matrixWorldInverse;n.sort(ds),f=0;for(var b=n.length;f<b;f++){var w=n[f],S=w.color,E=w.intensity,T=w.distance,A=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)u+=S.r*E,c+=S.g*E,l+=S.b*E;else if(w.isLightProbe)for(var M=0;M<9;M++)t.probe[M].addScaledVector(w.sh.coefficients[M],E);else if(w.isDirectionalLight){if((k=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),k.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(x),k.shadow=w.castShadow,w.castShadow){var C=w.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize,t.directionalShadowMap[h]=A,t.directionalShadowMatrix[h]=w.shadow.matrix,g++}t.directional[h]=k,h++}else if(w.isSpotLight){if((k=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(x),k.color.copy(S).multiplyScalar(E),k.distance=T,k.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),k.direction.sub(r),k.direction.transformDirection(x),k.coneCos=Math.cos(w.angle),k.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),k.decay=w.decay,k.shadow=w.castShadow,w.castShadow){C=w.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize,t.spotShadowMap[d]=A,t.spotShadowMatrix[d]=w.shadow.matrix,_++}t.spot[d]=k,d++}else if(w.isRectAreaLight){(k=e.get(w)).color.copy(S).multiplyScalar(E),k.position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(x),o.identity(),i.copy(w.matrixWorld),i.premultiply(x),o.extractRotation(i),k.halfWidth.set(.5*w.width,0,0),k.halfHeight.set(0,.5*w.height,0),k.halfWidth.applyMatrix4(o),k.halfHeight.applyMatrix4(o),t.rectArea[m]=k,m++}else if(w.isPointLight){if((k=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),k.position.applyMatrix4(x),k.color.copy(w.color).multiplyScalar(w.intensity),k.distance=w.distance,k.decay=w.decay,k.shadow=w.castShadow,w.castShadow){C=w.shadow;k.shadowBias=C.bias,k.shadowRadius=C.radius,k.shadowMapSize=C.mapSize,k.shadowCameraNear=C.camera.near,k.shadowCameraFar=C.camera.far,t.pointShadowMap[p]=A,t.pointShadowMatrix[p]=w.shadow.matrix,y++}t.point[p]=k,p++}else if(w.isHemisphereLight){var k;(k=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),k.direction.transformDirection(x),k.direction.normalize(),k.skyColor.copy(w.color).multiplyScalar(E),k.groundColor.copy(w.groundColor).multiplyScalar(E),t.hemi[v]=k,v++}}t.ambient[0]=u,t.ambient[1]=c,t.ambient[2]=l;var R=t.hash;R.directionalLength===h&&R.pointLength===p&&R.spotLength===d&&R.rectAreaLength===m&&R.hemiLength===v&&R.numDirectionalShadows===g&&R.numPointShadows===y&&R.numSpotShadows===_||(t.directional.length=h,t.spot.length=d,t.rectArea.length=m,t.point.length=p,t.hemi.length=v,t.directionalShadowMap.length=g,t.pointShadowMap.length=y,t.spotShadowMap.length=_,t.directionalShadowMatrix.length=g,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=_,R.directionalLength=h,R.pointLength=p,R.spotLength=d,R.rectAreaLength=m,R.hemiLength=v,R.numDirectionalShadows=g,R.numPointShadows=y,R.numSpotShadows=_,t.version=ps++)},state:t}}function vs(){var e=new ms,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function gs(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i;return!1===e.has(n)?(i=new vs,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):!1===e.get(n).has(r)?(i=new vs,e.get(n).set(r,i)):i=e.get(n).get(r),i},dispose:function(){e=new WeakMap}}}function ys(e){yi.call(this),this.type="MeshDepthMaterial",this.depthPacking=nn,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function _s(e){yi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}ys.prototype=Object.create(yi.prototype),ys.prototype.constructor=ys,ys.prototype.isMeshDepthMaterial=!0,ys.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},_s.prototype=Object.create(yi.prototype),_s.prototype.constructor=_s,_s.prototype.isMeshDistanceMaterial=!0,_s.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function xs(e,t,n){var r=new Ao,i=new Dn,o=new Dn,a=new Yn,s=[],u=[],c={},l={0:C,1:M,2:k},f=new yo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Dn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),h=f.clone();h.defines.HORIZONAL_PASS=1;var p=new ji;p.setAttribute("position",new bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var d=new io(p,f),m=this;function v(n,r){var i=t.update(d);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,d,null),h.uniforms.shadow_pass.value=n.mapPass.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,h,d,null)}function g(e,t,n){var r=e<<0|t<<1|n<<2,i=s[r];return void 0===i&&(i=new ys({depthPacking:rn,morphTargets:e,skinning:t}),s[r]=i),i}function y(e,t,n){var r=e<<0|t<<1|n<<2,i=u[r];return void 0===i&&(i=new _s({morphTargets:e,skinning:t}),u[r]=i),i}function _(t,n,r,i,o,a){var s=t.geometry,u=null,f=g,h=t.customDepthMaterial;if(!0===r.isPointLight&&(f=y,h=t.customDistanceMaterial),void 0===h){var p=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0));var d=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?d=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),u=f(p,d,!0===t.isInstancedMesh)}else u=h;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=u.uuid,v=n.uuid,_=c[m];void 0===_&&(_={},c[m]=_);var x=_[v];void 0===x&&(x=u.clone(),_[v]=x),u=x}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===A?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:l[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function x(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===A)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var l=u.groups,f=0,h=l.length;f<h;f++){var p=l[f],d=c[p.materialIndex];if(d&&d.visible){var m=_(n,d,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,p)}}else if(c.visible){m=_(n,c,a,o.near,o.far,s);e.renderBufferDirect(o,null,u,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)x(v[g],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E,this.render=function(t,s,u){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var c=e.getRenderTarget(),l=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),h=e.state;h.setBlending(N),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,d=t.length;p<d;p++){var g=t[p],y=g.shadow;if(void 0!==y){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),o.copy(y.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",g,"has shadow exceeding max texture size, reducing"),i.x>n&&(o.x=Math.floor(n/_.x),i.x=o.x*_.x,y.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/_.y),i.y=o.y*_.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===A){var b={minFilter:De,magFilter:De,format:tt};y.map=new Xn(i.x,i.y,b),y.map.texture.name=g.name+".shadowMap",y.mapPass=new Xn(i.x,i.y,b),y.camera.updateProjectionMatrix()}if(null===y.map){b={minFilter:Pe,magFilter:Pe,format:tt};y.map=new Xn(i.x,i.y,b),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),S=0;S<w;S++){var E=y.getViewport(S);a.set(o.x*E.x,o.y*E.y,o.x*E.z,o.y*E.w),h.viewport(a),y.updateMatrices(g,S),r=y.getFrustum(),x(s,u,y.camera,g,this.type)}y.isPointLightShadow||this.type!==A||v(y,u)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(c,l,f)}}}function bs(e,t,n){var i,o,a=n.isWebGL2;var s=new function(){var t=!1,n=new Yn,r=null,i=new Yn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},u=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?we(2929):Se(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case re:e.depthFunc(512);break;case ie:e.depthFunc(519);break;case oe:e.depthFunc(513);break;case ae:e.depthFunc(515);break;case se:e.depthFunc(514);break;case ue:e.depthFunc(518);break;case ce:e.depthFunc(516);break;case le:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?we(2960):Se(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}},l=e.getParameter(34921),f=new Uint8Array(l),h=new Uint8Array(l),p=new Uint8Array(l),d={},m=null,v=null,x=null,b=null,w=null,S=null,E=null,T=null,A=null,M=!1,R=null,P=null,L=null,O=null,I=null,fe=e.getParameter(35661),he=!1,pe=0,de=e.getParameter(7938);-1!==de.indexOf("WebGL")?(pe=parseFloat(/^WebGL\ ([0-9])/.exec(de)[1]),he=pe>=1):-1!==de.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(de)[1]),he=pe>=2);var me=null,ve={},ge=new Yn,ye=new Yn;function _e(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var xe={};function be(n,r){(f[n]=1,0===h[n]&&(e.enableVertexAttribArray(n),h[n]=1),p[n]!==r)&&((a?e:t.get("ANGLE_instanced_arrays"))[a?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),p[n]=r)}function we(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function Se(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}xe[3553]=_e(3553,3553,1),xe[34067]=_e(34067,34069,6),s.setClear(0,0,0,1),u.setClear(1),c.setClear(0),we(2929),u.setFunc(ae),Ce(!1),ke(y),we(2884),Me(N);var Ee=(r(i={},V,32774),r(i,U,32778),r(i,G,32779),i);if(a)Ee[H]=32775,Ee[W]=32776;else{var Te=t.get("EXT_blend_minmax");null!==Te&&(Ee[H]=Te.MIN_EXT,Ee[W]=Te.MAX_EXT)}var Ae=(r(o={},q,0),r(o,Y,1),r(o,X,768),r(o,Z,770),r(o,ne,776),r(o,ee,774),r(o,J,772),r(o,$,769),r(o,K,771),r(o,te,775),r(o,Q,773),o);function Me(t,n,r,i,o,a,s,u){if(t!==N){if(v||(we(3042),v=!0),t===j)o=o||n,a=a||r,s=s||i,n===b&&o===E||(e.blendEquationSeparate(Ee[n],Ee[o]),b=n,E=o),r===w&&i===S&&a===T&&s===A||(e.blendFuncSeparate(Ae[r],Ae[i],Ae[a],Ae[s]),w=r,S=i,T=a,A=s),x=t,M=null;else if(t!==x||u!==M){if(b===V&&E===V||(e.blendEquation(32774),b=V,E=V),u)switch(t){case D:e.blendFuncSeparate(1,771,1,771);break;case F:e.blendFunc(1,1);break;case z:e.blendFuncSeparate(0,0,769,771);break;case B:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case D:e.blendFuncSeparate(770,771,1,771);break;case F:e.blendFunc(770,1);break;case z:e.blendFunc(0,769);break;case B:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}w=null,S=null,T=null,A=null,x=t,M=u}}else v&&(Se(3042),v=!1)}function Ce(t){R!==t&&(t?e.frontFace(2304):e.frontFace(2305),R=t)}function ke(t){t!==g?(we(2884),t!==P&&(t===y?e.cullFace(1029):t===_?e.cullFace(1028):e.cullFace(1032))):Se(2884),P=t}function Re(t,n,r){t?(we(32823),O===n&&I===r||(e.polygonOffset(n,r),O=n,I=r)):Se(32823)}function Pe(t){void 0===t&&(t=33984+fe-1),me!==t&&(e.activeTexture(t),me=t)}return{buffers:{color:s,depth:u,stencil:c},initAttributes:function(){for(var e=0,t=f.length;e<t;e++)f[e]=0},enableAttribute:function(e){be(e,0)},enableAttributeAndDivisor:be,disableUnusedAttributes:function(){for(var t=0,n=h.length;t!==n;++t)h[t]!==f[t]&&(e.disableVertexAttribArray(t),h[t]=0)},enable:we,disable:Se,useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:Me,setMaterial:function(e,t){e.side===k?Se(2884):we(2884);var n=e.side===C;t&&(n=!n),Ce(n),e.blending===D&&!1===e.transparent?Me(N):Me(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),u.setFunc(e.depthFunc),u.setTest(e.depthTest),u.setMask(e.depthWrite),s.setMask(e.colorWrite);var r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Re(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:Ce,setCullFace:ke,setLineWidth:function(t){t!==L&&(he&&e.lineWidth(t),L=t)},setPolygonOffset:Re,setScissorTest:function(e){e?we(3089):Se(3089)},activeTexture:Pe,bindTexture:function(t,n){null===me&&Pe();var r=ve[me];void 0===r&&(r={type:void 0,texture:void 0},ve[me]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||xe[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=ve[me];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===ge.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ge.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){for(var t=0;t<h.length;t++)1===h[t]&&(e.disableVertexAttribArray(t),h[t]=0);d={},me=null,ve={},m=null,x=null,R=null,P=null,s.reset(),u.reset(),c.reset()}}}function ws(e,t,n,i,o,a,s){var u,c,l,f=o.isWebGL2,h=o.maxTextures,p=o.maxCubemapSize,d=o.maxTextureSize,m=o.maxSamples,v=new WeakMap,g=!1;try{g="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function y(e,t){return g?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function _(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Nn.floorPowerOfTwo:Math.floor,a=o(i*e.width),s=o(i*e.height);void 0===l&&(l=y(a,s));var u=n?y(a,s):l;return u.width=a,u.height=s,u.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return Nn.isPowerOfTwo(e.width)&&Nn.isPowerOfTwo(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==Pe&&e.minFilter!==De}function w(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function S(n,r,i){if(!1===f)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325===o||33326===o||34842===o||34836===o?t.get("EXT_color_buffer_float"):34843!==o&&34837!==o||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),o}function E(e){return e===Pe||e===Le||e===Ie?9728:9729}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&v.delete(n),s.memory.textures--}function A(t){var n=t.target;n.removeEventListener("dispose",A),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(n.__webglColorTexture),e.deleteTexture(n.__webglDepthStencilTexture),s.memory.textures-=2;o=0;for(var a=n.__webglViewFramebuffers.length;o<a;o++)e.deleteFramebuffer(n.__webglViewFramebuffers[o])}i.remove(t.texture),i.remove(t)}(n),s.memory.textures--}var M=0;function C(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=s.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void N(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function k(t,r){if(6===t.image.length){var o=i.get(t);if(t.version>0&&o.__version!==t.version){I(o,t),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,c=[],l=0;l<6;l++)c[l]=s||u?u?t.image[l].image:t.image[l]:_(t.image[l],!1,!0,p);var h,d=c[0],m=x(d)||f,v=a.convert(t.format),g=a.convert(t.type),y=S(t.internalFormat,v,g);if(O(34067,t,m),s){for(l=0;l<6;l++){h=c[l].mipmaps;for(var E=0;E<h.length;E++){var T=h[E];t.format!==tt&&t.format!==et?null!==v?n.compressedTexImage2D(34069+l,E,y,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+l,E,y,T.width,T.height,0,v,g,T.data)}}o.__maxMipLevel=h.length-1}else{h=t.mipmaps;for(l=0;l<6;l++)if(u){n.texImage2D(34069+l,0,y,c[l].width,c[l].height,0,v,g,c[l].data);for(E=0;E<h.length;E++){var A=(T=h[E]).image[l].image;n.texImage2D(34069+l,E+1,y,A.width,A.height,0,v,g,A.data)}}else{n.texImage2D(34069+l,0,y,v,g,c[l]);for(E=0;E<h.length;E++){T=h[E];n.texImage2D(34069+l,E+1,y,v,g,T.image[l])}}o.__maxMipLevel=h.length}b(t,m)&&w(34067,t,d.width,d.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function R(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}var P=(r(u={},Ce,10497),r(u,ke,33071),r(u,Re,33648),u),L=(r(c={},Pe,9728),r(c,Le,9984),r(c,Ie,9986),r(c,De,9729),r(c,Fe,9985),r(c,Be,9987),c);function O(n,r,a){a?(e.texParameteri(n,10242,P[r.wrapS]),e.texParameteri(n,10243,P[r.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[r.wrapR]),e.texParameteri(n,10240,L[r.magFilter]),e.texParameteri(n,10241,L[r.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),r.wrapS===ke&&r.wrapT===ke||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(r.magFilter)),e.texParameteri(n,10241,E(r.minFilter)),r.minFilter!==Pe&&r.minFilter!==De&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(r.type===Ye&&null===t.get("OES_texture_float_linear"))return;if(r.type===Xe&&null===(f||t.get("OES_texture_half_float_linear")))return;(r.anisotropy>1||i.get(r).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}}function I(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T),t.__webglTexture=e.createTexture(),s.memory.textures++)}function N(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),I(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s=function(e){return!f&&(e.wrapS!==ke||e.wrapT!==ke||e.minFilter!==Pe&&e.minFilter!==De)}(r)&&!1===x(r.image),u=_(r.image,s,!1,d),c=x(u)||f,l=a.convert(r.format),h=a.convert(r.type),p=S(r.internalFormat,l,h);O(o,r,c);var m,v=r.mipmaps;if(r.isDepthTexture){if(p=6402,r.type===Ye){if(!1===f)throw new Error("Float Depth Texture only supported in WebGL2.0");p=36012}else f&&(p=33189);r.format===ot&&6402===p&&r.type!==He&&r.type!==qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=He,h=a.convert(r.type)),r.format===at&&(p=34041,r.type!==Je&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Je,h=a.convert(r.type))),n.texImage2D(3553,0,p,u.width,u.height,0,l,h,null)}else if(r.isDataTexture)if(v.length>0&&c){for(var g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,p,m.width,m.height,0,l,h,m.data);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,p,u.width,u.height,0,l,h,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(g=0,y=v.length;g<y;g++)m=v[g],r.format!==tt&&r.format!==et?null!==l?n.compressedTexImage2D(3553,g,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,g,p,m.width,m.height,0,l,h,m.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,p,u.width,u.height,u.depth,0,l,h,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,p,u.width,u.height,u.depth,0,l,h,u.data),t.__maxMipLevel=0;else if(v.length>0&&c){for(g=0,y=v.length;g<y;g++)m=v[g],n.texImage2D(3553,g,p,l,h,m);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,p,l,h,u),t.__maxMipLevel=0;b(r,c)&&w(o,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function D(t,r,o,s){var u=a.convert(r.texture.format),c=a.convert(r.texture.type),l=S(r.texture.internalFormat,u,c);n.texImage2D(s,0,l,r.width,r.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=B(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=B(n);e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var o=a.convert(n.texture.format),s=a.convert(n.texture.type),u=S(n.texture.internalFormat,o,s);if(r){i=B(n);e.renderbufferStorageMultisample(36161,i,u,n.width,n.height)}else e.renderbufferStorage(36161,u,n.width,n.height)}e.bindRenderbuffer(36161,null)}function z(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),C(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ot)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==at)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),F(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),F(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function B(e){return f&&e.isWebGLMultisampleRenderTarget?Math.min(m,e.samples):0}var j=!1,V=!1;this.allocateTextureUnit=function(){var e=M;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=C,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?N(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=k,this.setTextureCubeDynamic=R,this.setupRenderTarget=function(r){var o=i.get(r),u=i.get(r.texture);r.addEventListener("dispose",A),u.__webglTexture=e.createTexture(),s.memory.textures++;var c=!0===r.isWebGLRenderTargetCube,l=!0===r.isWebGLMultisampleRenderTarget,h=!0===r.isWebGLMultiviewRenderTarget,p=x(r)||f;if(c){o.__webglFramebuffer=[];for(var d=0;d<6;d++)o.__webglFramebuffer[d]=e.createFramebuffer()}else if(o.__webglFramebuffer=e.createFramebuffer(),l)if(f){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,o.__webglColorRenderbuffer);var m=a.convert(r.texture.format),v=a.convert(r.texture.type),g=S(r.texture.internalFormat,m,v),y=B(r);e.renderbufferStorageMultisample(36161,y,g,r.width,r.height),e.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),r.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),F(o.__webglDepthRenderbuffer,r,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(h){var _=r.width,E=r.height,T=r.numViews;e.bindFramebuffer(36160,o.__webglFramebuffer);var M=t.get("OVR_multiview2");s.memory.textures+=2;var C=e.createTexture();e.bindTexture(35866,C),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,_,E,T,0,6408,5121,null),M.framebufferTextureMultiviewOVR(36160,36064,C,0,0,T);var k=e.createTexture();e.bindTexture(35866,k),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,_,E,T,0,34041,34042,null),M.framebufferTextureMultiviewOVR(36160,33306,k,0,0,T);var R=new Array(T);for(d=0;d<T;++d)R[d]=e.createFramebuffer(),e.bindFramebuffer(36160,R[d]),e.framebufferTextureLayer(36160,36064,C,0,d);o.__webglColorTexture=C,o.__webglDepthStencilTexture=k,o.__webglViewFramebuffers=R,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(c){n.bindTexture(34067,u.__webglTexture),O(34067,r.texture,p);for(d=0;d<6;d++)D(o.__webglFramebuffer[d],r,36064,34069+d);b(r.texture,p)&&w(34067,r.texture,r.width,r.height),n.bindTexture(34067,null)}else h||(n.bindTexture(3553,u.__webglTexture),O(3553,r.texture,p),D(o.__webglFramebuffer,r,36064,3553),b(r.texture,p)&&w(3553,r.texture,r.width,r.height),n.bindTexture(3553,null));r.depthBuffer&&z(r)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(b(t,x(e)||f)){var r=e.isWebGLRenderTargetCube?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),w(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(f){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===j&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),j=!0),e=e.texture),C(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===V&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),V=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?k(e,t):R(e,t)}}function Ss(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Ve)return 5121;if(e===$e)return 32819;if(e===Ze)return 32820;if(e===Ke)return 33635;if(e===Ue)return 5120;if(e===Ge)return 5122;if(e===He)return 5123;if(e===We)return 5124;if(e===qe)return 5125;if(e===Ye)return 5126;if(e===Xe)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===Qe)return 6406;if(e===et)return 6407;if(e===tt)return 6408;if(e===nt)return 6409;if(e===rt)return 6410;if(e===ot)return 6402;if(e===at)return 34041;if(e===st)return 6403;if(e===ut)return 36244;if(e===ct)return 33319;if(e===lt)return 33320;if(e===ft)return 36248;if(e===ht)return 36249;if(e===pt||e===dt||e===mt||e===vt){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===pt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===dt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===mt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===vt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===gt||e===yt||e===_t||e===xt){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===gt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===yt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===_t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===xt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===bt?null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null:e===wt||e===St||e===Et||e===Tt||e===At||e===Mt||e===Ct||e===kt||e===Rt||e===Pt||e===Lt||e===Ot||e===It||e===Nt?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===Je?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Es(e,t,n,r){Xn.call(this,e,t,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function Ts(e,t){var n,r,i,o,a,s,u,c=e.extensions,l=e.properties,f=0;function h(e){return e.isArrayCamera?e.cameras:(a[0]=e,a)}this.isAvailable=function(){if(void 0===u){var e=c.get("OVR_multiview2");if(u=null!==e&&!1===t.getContextAttributes().antialias){f=t.getParameter(e.MAX_VIEWS_OVR),n=new Es(0,0,2),s=new Dn,o=[],i=[],a=[];for(var r=0;r<f;r++)o[r]=new rr,i[r]=new Gn}}return u},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>f)return!1;for(var n=1,r=t.length;n<r;n++)if(t[0].viewport.z!==t[n].viewport.z||t[0].viewport.w!==t[n].viewport.w)return!1;return!0}(t)&&(r=e.getRenderTarget(),function(t){if(r?s.set(r.width,r.height):e.getDrawingBufferSize(s),t.isArrayCamera){var i=t.cameras[0].viewport;n.setSize(i.z,i.w),n.setNumViews(t.cameras.length)}else n.setSize(s.x,s.y),n.setNumViews(2)}(t),e.setRenderTarget(n))},this.detachCamera=function(i){n===e.getRenderTarget()&&(e.setRenderTarget(r),function(e){var r=n,i=r.numViews,o=l.get(r).__webglViewFramebuffers,a=r.width,u=r.height;if(e.isArrayCamera)for(var c=0;c<i;c++){var f=e.cameras[c].viewport,h=f.x,p=f.y,d=h+f.z,m=p+f.w;t.bindFramebuffer(36008,o[c]),t.blitFramebuffer(0,0,a,u,h,p,d,m,16384,9728)}else t.bindFramebuffer(36008,o[0]),t.blitFramebuffer(0,0,a,u,0,0,s.x,s.y,16384,9728)}(i))},this.updateCameraProjectionMatricesUniform=function(e,n){for(var r=h(e),i=0;i<r.length;i++)o[i].copy(r[i].projectionMatrix);n.setValue(t,"projectionMatrices",o)},this.updateCameraViewMatricesUniform=function(e,n){for(var r=h(e),i=0;i<r.length;i++)o[i].copy(r[i].matrixWorldInverse);n.setValue(t,"viewMatrices",o)},this.updateObjectMatricesUniforms=function(e,n,r){for(var a=h(n),s=0;s<a.length;s++)o[s].multiplyMatrices(a[s].matrixWorldInverse,e.matrixWorld),i[s].getNormalMatrix(o[s]);r.setValue(t,"modelViewMatrices",o),r.setValue(t,"normalMatrices",i)}}function As(e){xo.call(this),this.cameras=e||[]}function Ms(){br.call(this),this.type="Group"}function Cs(e,t){var n=this,r=null,i=null,o="local-floor",a=null,s=[],u=new Map,c=new xo;c.layers.enable(1),c.viewport=new Yn;var l=new xo;l.layers.enable(2),l.viewport=new Yn;var f=new As([c,l]);function h(e){var t=u.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function p(){u.forEach((function(e,t){e.dispatchEvent({type:"disconnected",data:t}),e.visible=!1})),u.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),x.stop(),n.dispatchEvent({type:"sessionend"}),n.isPresenting=!1}function d(e){i=e,x.setContext(r),x.start(),n.dispatchEvent({type:"sessionstart"}),n.isPresenting=!0}function m(e){for(var t=r.inputSources,n=0;n<s.length;n++)u.set(t[n],s[n]);for(n=0;n<e.removed.length;n++){var i=e.removed[n];(o=u.get(i))&&(o.dispatchEvent({type:"disconnected",data:i}),u.delete(i))}for(n=0;n<e.added.length;n++){var o;i=e.added[n];(o=u.get(i))&&o.dispatchEvent({type:"connected",data:i})}}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Ms).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){o=e},this.getReferenceSpace=function(){return i},this.getSession=function(){return r},this.setSession=function(e){if(null!==(r=e)){r.addEventListener("select",h),r.addEventListener("selectstart",h),r.addEventListener("selectend",h),r.addEventListener("squeeze",h),r.addEventListener("squeezestart",h),r.addEventListener("squeezeend",h),r.addEventListener("end",p);var n=t.getContextAttributes(),i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil},a=new XRWebGLLayer(r,t,i);r.updateRenderState({baseLayer:a}),r.requestReferenceSpace(o).then(d),r.addEventListener("inputsourceschange",m)}};var v=new jn,g=new jn;function y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){var t=e.parent,n=f.cameras;y(f,t);for(var r=0;r<n.length;r++)y(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return function(e,t,n){v.setFromMatrixPosition(t.matrixWorld),g.setFromMatrixPosition(n.matrixWorld);var r=v.distanceTo(g),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],f=(o[8]+1)/o[0],h=a*l,p=a*f,d=r/(-l+f),m=d*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var y=a+d,_=s+d,x=h-m,b=p+(r-m),w=u*s/_*y,S=c*s/_*y;e.projectionMatrix.makePerspective(x,b,w,S,y,_)}(f,c,l),f};var _=null;var x=new Ro;x.setAnimationLoop((function(t,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,u=r.renderState.baseLayer;e.setFramebuffer(u.framebuffer);for(var c=0;c<o.length;c++){var l=o[c],h=u.getViewport(l),p=l.transform.inverse.matrix,d=f.cameras[c];d.matrix.fromArray(p).getInverse(d.matrix),d.projectionMatrix.fromArray(l.projectionMatrix),d.viewport.set(h.x,h.y,h.width,h.height),0===c&&f.matrix.copy(d.matrix)}}var m=r.inputSources;for(c=0;c<s.length;c++){var v=s[c],g=m[c];if(g){var y=n.getPose(g.targetRaySpace,i);if(null!==y){v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}_&&_(t,n)})),this.setAnimationLoop=function(e){_=e},this.dispose=function(){}}function ks(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,f=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Xt,this.physicallyCorrectLights=!1,this.toneMapping=me,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,m,v,g,y,_,x,b,w,S,E,T,A,M,k,R,P,L=this,O=!1,I=null,N=0,D=0,F=null,z=null,B=-1,j={geometry:null,program:null,wireframe:!1},V=null,U=null,G=new Yn,H=new Yn,W=null,q=t.width,Y=t.height,X=1,$=null,Z=null,K=new Yn(0,0,q,Y),J=new Yn(0,0,q,Y),Q=!1,ee=new Ao,te=new Fo,ne=!1,re=!1,ie=new rr,oe=new jn;function ae(){return null===F?X:1}try{var se={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l,xrCompatible:!0};if(t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",pe,!1),null===(p=n||t.getContext("webgl",se)||t.getContext("experimental-webgl",se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Me){throw console.error("THREE.WebGLRenderer: "+Me.message),Me}function ue(){d=new zo(p),!1===(m=new Do(p,d,e)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),P=new Ss(p,d,m),(v=new bs(p,d,m)).scissor(H.copy(J).multiplyScalar(X).floor()),v.viewport(G.copy(K).multiplyScalar(X).floor()),g=new Vo(p),y=new ss,_=new ws(p,d,v,y,m,P,g),x=new Po(p),b=new Bo(p,x,g),w=new Ho(p,b,x,g),M=new Go(p),S=new as(L,d,m),E=new fs,T=new gs,A=new Io(L,v,w,s),k=new No(p,d,g,m),R=new jo(p,d,g,m),g.programs=S.programs,L.capabilities=m,L.extensions=d,L.properties=y,L.renderLists=E,L.state=v,L.info=g}ue();var ce=new Cs(L,p);this.xr=ce;var le=new Ts(L,p),fe=new xs(L,w,m.maxTextureSize);function he(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1,ue()}function de(e){var t=e.target;t.removeEventListener("dispose",de),function(e){ve(e),y.remove(e)}(t)}function ve(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=fe,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(e){void 0!==e&&(X=e,this.setSize(q,Y,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Dn),e.set(q,Y)},this.setSize=function(e,n,r){ce.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=e,Y=n,t.width=Math.floor(e*X),t.height=Math.floor(n*X),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Dn),e.set(q*X,Y*X).floor()},this.setDrawingBufferSize=function(e,n,r){q=e,Y=n,X=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Yn),e.copy(G)},this.getViewport=function(e){return e.copy(K)},this.setViewport=function(e,t,n,r){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,r),v.viewport(G.copy(K).multiplyScalar(X).floor())},this.getScissor=function(e){return e.copy(J)},this.setScissor=function(e,t,n,r){e.isVector4?J.set(e.x,e.y,e.z,e.w):J.set(e,t,n,r),v.scissor(H.copy(J).multiplyScalar(X).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(e){v.setScissorTest(Q=e)},this.setOpaqueSort=function(e){$=e},this.setTransparentSort=function(e){Z=e},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",pe,!1),E.dispose(),T.dispose(),y.dispose(),w.dispose(),ce.dispose(),_e.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=y.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var r=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),v.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),v.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),v.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),v.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var ge=new wr;this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=ge);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Ee(e,t,r,i);v.setMaterial(r,a);var u=!1;j.geometry===n.id&&j.program===s.id&&j.wireframe===(!0===r.wireframe)||(j.geometry=n.id,j.program=s.id,j.wireframe=!0===r.wireframe,u=!0),(r.morphTargets||r.morphNormals)&&(M.update(i,n,r,s),u=!0);var c=n.index,l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;var f,h=1;!0===r.wireframe&&(c=b.getWireframeAttribute(n),h=2);var g=k;null!==c&&(f=x.get(c),(g=R).setIndex(f)),u&&(!function(e,t,n,r){if(!1===m.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===d.get("ANGLE_instanced_arrays"))return;v.initAttributes();var i=t.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized,f=c.itemSize;if(void 0===(S=x.get(c)))continue;var h=S.buffer,g=S.type,y=S.bytesPerElement;if(c.isInterleavedBufferAttribute){var _=c.data,b=_.stride,w=c.offset;_&&_.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(u,_.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=_.meshPerAttribute*_.count)):v.enableAttribute(u),p.bindBuffer(34962,h),p.vertexAttribPointer(u,f,g,l,b*y,w*y)}else c.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=c.meshPerAttribute*c.count)):v.enableAttribute(u),p.bindBuffer(34962,h),p.vertexAttribPointer(u,f,g,l,0,0)}else if("instanceMatrix"===s){var S;if(void 0===(S=x.get(e.instanceMatrix)))continue;h=S.buffer,g=S.type;v.enableAttributeAndDivisor(u+0,1),v.enableAttributeAndDivisor(u+1,1),v.enableAttributeAndDivisor(u+2,1),v.enableAttributeAndDivisor(u+3,1),p.bindBuffer(34962,h),p.vertexAttribPointer(u+0,4,g,!1,64,0),p.vertexAttribPointer(u+1,4,g,!1,64,16),p.vertexAttribPointer(u+2,4,g,!1,64,32),p.vertexAttribPointer(u+3,4,g,!1,64,48)}else if(void 0!==a){var E=a[s];if(void 0!==E)switch(E.length){case 2:p.vertexAttrib2fv(u,E);break;case 3:p.vertexAttrib3fv(u,E);break;case 4:p.vertexAttrib4fv(u,E);break;default:p.vertexAttrib1fv(u,E)}}}}v.disableUnusedAttributes()}(i,n,r,s),null!==c&&p.bindBuffer(34963,f.buffer));var y=null!==c?c.count:l.count,_=n.drawRange.start*h,w=n.drawRange.count*h,S=null!==o?o.start*h:0,E=null!==o?o.count*h:1/0,T=Math.max(_,S),A=Math.min(y,_+w,S+E)-1,C=Math.max(0,A-T+1);if(0!==C){if(i.isMesh)!0===r.wireframe?(v.setLineWidth(r.wireframeLinewidth*ae()),g.setMode(1)):g.setMode(4);else if(i.isLine){var P=r.linewidth;void 0===P&&(P=1),v.setLineWidth(P*ae()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);i.isInstancedMesh?g.renderInstances(n,T,C,i.count):n.isInstancedBufferGeometry?g.renderInstances(n,T,C,n.maxInstancedCount):g.render(T,C)}},this.compile=function(e,t){(h=T.get(e,t)).init(),e.traverse((function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Se(t.material[n],e,t);else Se(t.material,e,t)}))};var ye=null;var _e=new Ro;function xe(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ee.intersectsSprite(e)){r&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);var i=w.update(e);(o=e.material).visible&&f.push(e,i,o,n,oe.z,null)}}else if(e.isImmediateRenderObject)r&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie),f.push(e,null,e.material,n,oe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==g.render.frame&&(e.skeleton.update(),e.skeleton.frame=g.render.frame),!e.frustumCulled||ee.intersectsObject(e))){r&&oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);i=w.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&f.push(e,i,l,n,oe.z,c)}else o.visible&&f.push(e,i,o,n,oe.z,null)}var p=e.children;for(s=0,u=p.length;s<u;s++)xe(p[s],t,n,r)}}function be(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera)if(U=n,ce.enabled&&le.isAvailable())we(s,t,n,u,c,l);else for(var f=n.cameras,p=0,d=f.length;p<d;p++){var m=f[p];s.layers.test(m.layers)&&(v.viewport(G.copy(m.viewport)),h.setupLights(m),we(s,t,m,u,c,l))}else U=null,we(s,t,n,u,c,l)}}function we(e,t,n,r,i,o){if(e.onBeforeRender(L,t,n,r,i,o),h=T.get(t,U||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=Ee(n,t,i,e);v.setMaterial(i),j.geometry=null,j.program=null,j.wireframe=!1,function(e,t){e.render((function(e){L.renderBufferImmediate(e,t)}))}(e,a)}else L.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(L,t,n,r,i,o),h=T.get(t,U||n)}function Se(e,t,n){var r=y.get(e),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=S.getParameters(e,i.state,o,t,te.numPlanes,te.numIntersection,n),u=S.getProgramCacheKey(e,s),c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",de);else if(c.cacheKey!==u)ve(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}if(l){if(s.shaderID){var f=ko[s.shaderID];r.shader={name:e.type,uniforms:mo(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,L),u=S.getProgramCacheKey(e,s),c=S.acquireProgram(e,r.shader,s,u),r.program=c,r.environment=e.isMeshStandardMaterial?t.environment:null,r.outputEncoding=L.outputEncoding,e.program=c}var p=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<L.maxMorphTargets;d++)p["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<L.maxMorphNormals;d++)p["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=te.numPlanes,r.numIntersection=te.numIntersection,m.clippingPlanes=te.uniform),r.fog=t.fog,r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=Va.seqWithValue(v.seq,m);r.uniformsList=g}function Ee(e,t,n,r){_.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=y.get(n),s=h.state.lights;if(ne&&(re||e!==V)){var u=e===V&&n.id===B;te.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,a,u)}n.version===a.__version&&(void 0===a.program||n.fog&&a.fog!==i||a.environment!==o||a.needsLights&&a.lightsStateVersion!==s.state.version?n.needsUpdate=!0:void 0===a.numClippingPlanes||a.numClippingPlanes===te.numPlanes&&a.numIntersection===te.numIntersection?a.outputEncoding!==L.outputEncoding&&(n.needsUpdate=!0):n.needsUpdate=!0),n.version!==a.__version&&(Se(n,t,r),a.__version=n.version);var c,l,f=!1,d=!1,g=!1,x=a.program,b=x.getUniforms(),w=a.shader.uniforms;if(v.useProgram(x.program)&&(f=!0,d=!0,g=!0),n.id!==B&&(B=n.id,d=!0),f||V!==e){if(x.numMultiviewViews>0?le.updateCameraProjectionMatricesUniform(e,b):b.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),V!==e&&(V=e,d=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var S=b.map.cameraPosition;void 0!==S&&S.setValue(p,oe.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(x.numMultiviewViews>0?le.updateCameraViewMatricesUniform(e,b):b.setValue(p,"viewMatrix",e.matrixWorldInverse))}if(n.skinning){b.setOptional(p,r,"bindMatrix"),b.setOptional(p,r,"bindMatrixInverse");var E=r.skeleton;if(E){var T=E.bones;if(m.floatVertexTextures){if(void 0===E.boneTexture){var A=Math.sqrt(4*T.length);A=Nn.ceilPowerOfTwo(A),A=Math.max(A,4);var M=new Float32Array(A*A*4);M.set(E.boneMatrices);var k=new So(M,A,A,tt,Ye);E.boneMatrices=M,E.boneTexture=k,E.boneTextureSize=A}b.setValue(p,"boneTexture",E.boneTexture,_),b.setValue(p,"boneTextureSize",E.boneTextureSize)}else b.setOptional(p,E,"boneMatrices")}}return(d||a.receiveShadow!==r.receiveShadow)&&(a.receiveShadow=r.receiveShadow,b.setValue(p,"receiveShadow",r.receiveShadow)),d&&(b.setValue(p,"toneMappingExposure",L.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",L.toneMappingWhitePoint),a.needsLights&&(l=g,(c=w).ambientLightColor.needsUpdate=l,c.lightProbe.needsUpdate=l,c.directionalLights.needsUpdate=l,c.pointLights.needsUpdate=l,c.spotLights.needsUpdate=l,c.rectAreaLights.needsUpdate=l,c.hemisphereLights.needsUpdate=l),i&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,i),n.isMeshBasicMaterial?Te(w,n):n.isMeshLambertMaterial?(Te(w,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,n)):n.isMeshToonMaterial?(Te(w,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshPhongMaterial?(Te(w,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshStandardMaterial?(Te(w,n,o),n.isMeshPhysicalMaterial?function(e,t,n){Ae(e,t,n),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===C&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(w,n,o):Ae(w,n,o)):n.isMeshMatcapMaterial?(Te(w,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDepthMaterial?(Te(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDistanceMaterial?(Te(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,n)):n.isMeshNormalMaterial?(Te(w,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(w,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*X,e.scale.value=.5*Y,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(w,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(w,n):n.isShadowMaterial&&(w.color.value.copy(n.color),w.opacity.value=n.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=Co.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=Co.LTC_2),Va.upload(p,a.uniformsList,w,_),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Va.upload(p,a.uniformsList,w,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",r.center),x.numMultiviewViews>0?le.updateObjectMatricesUniforms(r,e,b):(b.setValue(p,"modelViewMatrix",r.modelViewMatrix),b.setValue(p,"normalMatrix",r.normalMatrix)),b.setValue(p,"modelMatrix",r.matrixWorld),x}function Te(e,t,n){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var r,i,o=t.envMap||n;o&&(e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=y.get(o).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),t.aoMap?i=t.aoMap:t.lightMap&&(i=t.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function Ae(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}_e.setAnimationLoop((function(e){ce.isPresenting||ye&&ye(e)})),"undefined"!==typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){ye=e,ce.setAnimationLoop(e),_e.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!O){j.geometry=null,j.program=null,j.wireframe=!1,B=-1,V=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ce.enabled&&ce.isPresenting&&(t=ce.getCamera(t)),(h=T.get(e,t)).init(),e.onBeforeRender(L,e,t,n||F),ie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ee.setFromMatrix(ie),re=this.localClippingEnabled,ne=te.init(this.clippingPlanes,re,t),(f=E.get(e,t)).init(),xe(e,t,0,L.sortObjects),!0===L.sortObjects&&f.sort($,Z),ne&&te.beginShadows();var i=h.state.shadowsArray;fe.render(i,e,t),h.setupLights(t),ne&&te.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ce.enabled&&le.isAvailable()&&le.attachCamera(t),A.render(f,e,t,r);var o=f.opaque,a=f.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&be(o,e,t,s),a.length&&be(a,e,t,s)}else o.length&&be(o,e,t),a.length&&be(a,e,t);e.onAfterRender(L,e,t),null!==F&&(_.updateRenderTargetMipmap(F),_.updateMultisampleRenderTarget(F)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),ce.enabled&&le.isAvailable()&&le.detachCamera(t),f=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){I!==e&&null===F&&p.bindFramebuffer(36160,e),I=e},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return F},this.setRenderTarget=function(e,t,n){F=e,N=t,D=n,e&&void 0===y.get(e).__webglFramebuffer&&_.setupRenderTarget(e);var r=I,i=!1;if(e){var o=y.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:o,G.copy(e.viewport),H.copy(e.scissor),W=e.scissorTest}else G.copy(K).multiplyScalar(X).floor(),H.copy(J).multiplyScalar(X).floor(),W=Q;if(z!==r&&(p.bindFramebuffer(36160,r),z=r),v.viewport(G),v.scissor(H),v.setScissorTest(W),i){var a=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=y.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==z&&(p.bindFramebuffer(36160,s),u=!0);try{var c=e.texture,l=c.format,f=c.type;if(l!==tt&&P.convert(l)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(f!==Ve&&P.convert(f)!==p.getParameter(35738)&&(f!==Ye||!(m.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float")))&&(f!==Xe||!(m.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,P.convert(l),P.convert(f),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&p.bindFramebuffer(36160,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=P.convert(t.format);_.setTexture2D(t,0),p.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),v.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=P.convert(n.format),s=P.convert(n.type);_.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):p.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image),v.unbindTexture()},this.initTexture=function(e){_.setTexture2D(e,0),v.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Rs(e,t){this.name="",this.color=new hi(e),this.density=void 0!==t?t:25e-5}function Ps(e,t,n){this.name="",this.color=new hi(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Ls(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0}Es.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Es,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Xn.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),As.prototype=Object.assign(Object.create(xo.prototype),{constructor:As,isArrayCamera:!0}),Ms.prototype=Object.assign(Object.create(br.prototype),{constructor:Ms,isGroup:!0}),Object.assign(Cs.prototype,Ln.prototype),Object.assign(Rs.prototype,{isFogExp2:!0,clone:function(){return new Rs(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ps.prototype,{isFog:!0,clone:function(){return new Ps(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ls.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ls.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Os,Is=new jn;function Ns(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Ds(e){yi.call(this),this.type="SpriteMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(Ns.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ns.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)Is.x=this.getX(t),Is.y=this.getY(t),Is.z=this.getZ(t),Is.applyMatrix4(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Ds.prototype=Object.create(yi.prototype),Ds.prototype.constructor=Ds,Ds.prototype.isSpriteMaterial=!0,Ds.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Fs=new jn,zs=new jn,Bs=new jn,js=new Dn,Vs=new Dn,Us=new rr,Gs=new jn,Hs=new jn,Ws=new jn,qs=new Dn,Ys=new Dn,Xs=new Dn;function $s(e){if(br.call(this),this.type="Sprite",void 0===Os){Os=new ji;var t=new Ls(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Os.setIndex([0,1,2,0,2,3]),Os.setAttribute("position",new Ns(t,3,0,!1)),Os.setAttribute("uv",new Ns(t,2,3,!1))}this.geometry=Os,this.material=void 0!==e?e:new Ds,this.center=new Dn(.5,.5)}function Zs(e,t,n,r,i,o){js.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Vs.x=o*js.x-i*js.y,Vs.y=i*js.x+o*js.y):Vs.copy(js),e.copy(t),e.x+=Vs.x,e.y+=Vs.y,e.applyMatrix4(Us)}$s.prototype=Object.assign(Object.create(br.prototype),{constructor:$s,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zs.setFromMatrixScale(this.matrixWorld),Us.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&zs.multiplyScalar(-Bs.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Zs(Gs.set(-.5,-.5,0),Bs,o,zs,n,r),Zs(Hs.set(.5,-.5,0),Bs,o,zs,n,r),Zs(Ws.set(.5,.5,0),Bs,o,zs,n,r),qs.set(0,0),Ys.set(1,0),Xs.set(1,1);var a=e.ray.intersectTriangle(Gs,Hs,Ws,!1,Fs);if(null!==a||(Zs(Hs.set(-.5,.5,0),Bs,o,zs,n,r),Ys.set(0,1),null!==(a=e.ray.intersectTriangle(Gs,Ws,Hs,!1,Fs)))){var s=e.ray.origin.distanceTo(Fs);s<e.near||s>e.far||t.push({distance:s,point:Fs.clone(),uv:ui.getUV(Fs,Gs,Hs,Ws,qs,Ys,Xs,new Dn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return br.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var Ks=new jn,Js=new jn;function Qs(){br.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function eu(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),io.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new rr,this.bindMatrixInverse=new rr}Qs.prototype=Object.assign(Object.create(br.prototype),{constructor:Qs,isLOD:!0,copy:function(e){br.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Ks.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Ks);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){Ks.setFromMatrixPosition(e.matrixWorld),Js.setFromMatrixPosition(this.matrixWorld);var n=Ks.distanceTo(Js);t[0].object.visible=!0;for(var r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),eu.prototype=Object.assign(Object.create(io.prototype),{constructor:eu,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Yn,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){io.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var tu=new rr,nu=new rr;function ru(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new rr)}}function iu(){br.call(this),this.type="Bone"}Object.assign(ru.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new rr;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:nu;tu.multiplyMatrices(a,t[i]),tu.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new ru(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),iu.prototype=Object.assign(Object.create(br.prototype),{constructor:iu,isBone:!0});var ou=new rr,au=new rr,su=[],uu=new io;function cu(e,t,n){io.call(this,e,t),this.instanceMatrix=new bi(new Float32Array(16*n),16),this.count=n}function lu(e){yi.call(this),this.type="LineBasicMaterial",this.color=new hi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}cu.prototype=Object.assign(Object.create(io.prototype),{constructor:cu,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(uu.geometry=this.geometry,uu.material=this.material,void 0!==uu.material)for(var i=0;i<r;i++)this.getMatrixAt(i,ou),au.multiplyMatrices(n,ou),uu.matrixWorld=au,uu.raycast(e,su),su.length>0&&(su[0].instanceId=i,su[0].object=this,t.push(su[0]),su.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),lu.prototype=Object.create(yi.prototype),lu.prototype.constructor=lu,lu.prototype.isLineBasicMaterial=!0,lu.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var fu=new jn,hu=new jn,pu=new rr,du=new Yr,mu=new Br;function vu(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),br.call(this),this.type="Line",this.geometry=void 0!==e?e:new ji,this.material=void 0!==t?t:new lu({color:16777215*Math.random()})}vu.prototype=Object.assign(Object.create(br.prototype),{constructor:vu,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)fu.fromBufferAttribute(t,r-1),hu.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=fu.distanceTo(hu);e.setAttribute("lineDistance",new ki(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;(n=e.lineDistances)[0]=0;for(r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),mu.copy(r.boundingSphere),mu.applyMatrix4(i),mu.radius+=n,!1!==e.ray.intersectsSphere(mu)){pu.getInverse(i),du.copy(e.ray).applyMatrix4(pu);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new jn,u=new jn,c=new jn,l=new jn,f=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var h=r.index,p=r.attributes.position.array;if(null!==h)for(var d=h.array,m=0,v=d.length-1;m<v;m+=f){var g=d[m],y=d[m+1];if(s.fromArray(p,3*g),u.fromArray(p,3*y),!(du.distanceSqToSegment(s,u,l,c)>a))l.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(l))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,v=p.length/3-1;m<v;m+=f){if(s.fromArray(p,3*m),u.fromArray(p,3*m+3),!(du.distanceSqToSegment(s,u,l,c)>a))l.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(l))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(r.isGeometry){var _=r.vertices,x=_.length;for(m=0;m<x-1;m+=f){var b;if(!(du.distanceSqToSegment(_[m],_[m+1],l,c)>a))l.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(l))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var gu=new jn,yu=new jn;function _u(e,t){vu.call(this,e,t),this.type="LineSegments"}function xu(e,t){vu.call(this,e,t),this.type="LineLoop"}function bu(e){yi.call(this),this.type="PointsMaterial",this.color=new hi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}_u.prototype=Object.assign(Object.create(vu.prototype),{constructor:_u,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)gu.fromBufferAttribute(t,r),yu.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+gu.distanceTo(yu);e.setAttribute("lineDistance",new ki(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,r=0,i=o.length;r<i;r+=2)gu.copy(o[r]),yu.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+gu.distanceTo(yu)}return this}}),xu.prototype=Object.assign(Object.create(vu.prototype),{constructor:xu,isLineLoop:!0}),bu.prototype=Object.create(yi.prototype),bu.prototype.constructor=bu,bu.prototype.isPointsMaterial=!0,bu.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var wu=new rr,Su=new Yr,Eu=new Br,Tu=new jn;function Au(e,t){br.call(this),this.type="Points",this.geometry=void 0!==e?e:new ji,this.material=void 0!==t?t:new bu({color:16777215*Math.random()}),this.updateMorphTargets()}function Mu(e,t,n,r,i,o,a){var s=Su.distanceSqToPoint(e);if(s<n){var u=new jn;Su.closestPointToPoint(e,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:a})}}function Cu(e,t,n,r,i,o,a,s,u){qn.call(this,e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:et,this.minFilter=void 0!==o?o:De,this.magFilter=void 0!==i?i:De,this.generateMipmaps=!1}function ku(e,t,n,r,i,o,a,s,u,c,l,f){qn.call(this,null,o,a,s,u,c,r,i,l,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ru(e,t,n,r,i,o,a,s,u){qn.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function Pu(e,t,n,r,i,o,a,s,u,c){if((c=void 0!==c?c:ot)!==ot&&c!==at)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ot&&(n=He),void 0===n&&c===at&&(n=Je),qn.call(this,null,r,i,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Pe,this.minFilter=void 0!==s?s:Pe,this.flipY=!1,this.generateMipmaps=!1}function Lu(e){ji.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,c,l,f=[],h=[0,0],p={},d=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[d[n]],u=v[d[(n+1)%3]],h[0]=Math.min(s,u),h[1]=Math.max(s,u),void 0===p[c=h[0]+","+h[1]]&&(p[c]={index1:h[0],index2:h[1]})}for(c in p)a=p[c],l=e.vertices[a.index1],f.push(l.x,l.y,l.z),l=e.vertices[a.index2],f.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,y,_,x,b,w,S;if(l=new jn,null!==e.index){for(g=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(t=b=(x=_[i]).start,r=b+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),u=y.getX(t+(n+1)%3),h[0]=Math.min(s,u),h[1]=Math.max(s,u),void 0===p[c=h[0]+","+h[1]]&&(p[c]={index1:h[0],index2:h[1]});for(c in p)a=p[c],l.fromBufferAttribute(g,a.index1),f.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),f.push(l.x,l.y,l.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)w=3*t+n,l.fromBufferAttribute(g,w),f.push(l.x,l.y,l.z),S=3*t+(n+1)%3,l.fromBufferAttribute(g,S),f.push(l.x,l.y,l.z)}this.setAttribute("position",new ki(f,3))}function Ou(e,t,n){fo.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Iu(e,t,n)),this.mergeVertices()}function Iu(e,t,n){ji.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=[],c=1e-5,l=new jn,f=new jn,h=new jn,p=new jn,d=new jn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,f),a.push(f.x,f.y,f.z),g-c>=0?(e(g-c,v,h),p.subVectors(f,h)):(e(g+c,v,h),p.subVectors(h,f)),v-c>=0?(e(g,v-c,h),d.subVectors(f,h)):(e(g,v+c,h),d.subVectors(h,f)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,_=r*m+i+1,x=(r+1)*m+i+1,b=(r+1)*m+i;o.push(y,_,b),o.push(_,x,b)}this.setIndex(o),this.setAttribute("position",new ki(a,3)),this.setAttribute("normal",new ki(s,3)),this.setAttribute("uv",new ki(u,2))}function Nu(e,t,n,r){fo.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Du(e,t,n,r)),this.mergeVertices()}function Du(e,t,n,r){ji.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var c=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),f=a-i;for(o=0;o<=f;o++)u[i][o]=0===o&&i===a?c:c.clone().lerp(l,o/f)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var h=Math.floor(o/2);o%2===0?(s(u[i][h+1]),s(u[i+1][h]),s(u[i][h])):(s(u[i][h+1]),s(u[i+1][h+1]),s(u[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new jn,r=new jn,i=new jn,o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new jn,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new jn,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=l(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new jn,t=new jn,n=new jn,r=new jn,a=new Dn,s=new Dn,u=new Dn,f=0,h=0;f<i.length;f+=9,h+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),n.set(i[f+6],i[f+7],i[f+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),u.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=l(r);c(a,h+0,e,p),c(s,h+2,t,p),c(u,h+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new ki(i,3)),this.setAttribute("normal",new ki(i.slice(),3)),this.setAttribute("uv",new ki(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Fu(e,t){fo.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zu(e,t)),this.mergeVertices()}function zu(e,t){Du.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Bu(e,t){fo.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ju(e,t)),this.mergeVertices()}function ju(e,t){Du.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Vu(e,t){fo.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Uu(e,t)),this.mergeVertices()}function Uu(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Du.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gu(e,t){fo.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hu(e,t)),this.mergeVertices()}function Hu(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Du.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wu(e,t,n,r,i,o){fo.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new qu(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function qu(e,t,n,r,i){ji.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new jn,c=new jn,l=new Dn,f=new jn,h=[],p=[],d=[],m=[];function v(i){f=e.getPointAt(i/t,f);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=r;s++){var d=s/r*Math.PI*2,m=Math.sin(d),v=-Math.cos(d);c.x=v*a.x+m*l.x,c.y=v*a.y+m*l.y,c.z=v*a.z+m*l.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=f.x+n*c.x,u.y=f.y+n*c.y,u.z=f.z+n*c.z,h.push(u.x,u.y,u.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)l.x=a/t,l.y=s/r,d.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new ki(h,3)),this.setAttribute("normal",new ki(p,3)),this.setAttribute("uv",new ki(d,2))}function Yu(e,t,n,r,i,o,a){fo.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Xu(e,t,n,r,i,o)),this.mergeVertices()}function Xu(e,t,n,r,i,o){ji.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],c=[],l=[],f=[],h=new jn,p=new jn,d=new jn,m=new jn,v=new jn,g=new jn,y=new jn;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(M(_,i,o,e,d),M(_+.01,i,o,e,m),g.subVectors(m,d),y.addVectors(m,d),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,b=-t*Math.cos(x),w=t*Math.sin(x);h.x=d.x+(b*y.x+w*v.x),h.y=d.y+(b*y.y+w*v.y),h.z=d.z+(b*y.z+w*v.z),c.push(h.x,h.y,h.z),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),f.push(a/n),f.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),E=(r+1)*s+(a-1),T=(r+1)*s+a,A=(r+1)*(s-1)+a;u.push(S,E,A),u.push(E,T,A)}function M(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.setAttribute("position",new ki(c,3)),this.setAttribute("normal",new ki(l,3)),this.setAttribute("uv",new ki(f,2))}function $u(e,t,n,r,i){fo.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Zu(e,t,n,r,i)),this.mergeVertices()}function Zu(e,t,n,r,i){ji.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],c=[],l=[],f=new jn,h=new jn,p=new jn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var d=a/r*i,m=o/n*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(d),h.y=(e+t*Math.cos(m))*Math.sin(d),h.z=t*Math.sin(m),u.push(h.x,h.y,h.z),f.x=e*Math.cos(d),f.y=e*Math.sin(d),p.subVectors(h,f).normalize(),c.push(p.x,p.y,p.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,_=(r+1)*o+a;s.push(v,g,_),s.push(g,y,_)}this.setIndex(s),this.setAttribute("position",new ki(u,3)),this.setAttribute("normal",new ki(c,3)),this.setAttribute("uv",new ki(l,2))}Au.prototype=Object.assign(Object.create(br.prototype),{constructor:Au,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eu.copy(n.boundingSphere),Eu.applyMatrix4(r),Eu.radius+=i,!1!==e.ray.intersectsSphere(Eu)){wu.getInverse(r),Su.copy(e.ray).applyMatrix4(wu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var c=s.array,l=0,f=c.length;l<f;l++){var h=c[l];Tu.fromArray(u,3*h),Mu(Tu,h,a,r,e,t,this)}else{l=0;for(var p=u.length/3;l<p;l++)Tu.fromArray(u,3*l),Mu(Tu,l,a,r,e,t,this)}}else{var d=n.vertices;for(l=0,p=d.length;l<p;l++)Mu(d[l],l,a,r,e,t,this)}}},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Cu.prototype=Object.assign(Object.create(qn.prototype),{constructor:Cu,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),ku.prototype=Object.create(qn.prototype),ku.prototype.constructor=ku,ku.prototype.isCompressedTexture=!0,Ru.prototype=Object.create(qn.prototype),Ru.prototype.constructor=Ru,Ru.prototype.isCanvasTexture=!0,Pu.prototype=Object.create(qn.prototype),Pu.prototype.constructor=Pu,Pu.prototype.isDepthTexture=!0,Lu.prototype=Object.create(ji.prototype),Lu.prototype.constructor=Lu,Ou.prototype=Object.create(fo.prototype),Ou.prototype.constructor=Ou,Iu.prototype=Object.create(ji.prototype),Iu.prototype.constructor=Iu,Nu.prototype=Object.create(fo.prototype),Nu.prototype.constructor=Nu,Du.prototype=Object.create(ji.prototype),Du.prototype.constructor=Du,Fu.prototype=Object.create(fo.prototype),Fu.prototype.constructor=Fu,zu.prototype=Object.create(Du.prototype),zu.prototype.constructor=zu,Bu.prototype=Object.create(fo.prototype),Bu.prototype.constructor=Bu,ju.prototype=Object.create(Du.prototype),ju.prototype.constructor=ju,Vu.prototype=Object.create(fo.prototype),Vu.prototype.constructor=Vu,Uu.prototype=Object.create(Du.prototype),Uu.prototype.constructor=Uu,Gu.prototype=Object.create(fo.prototype),Gu.prototype.constructor=Gu,Hu.prototype=Object.create(Du.prototype),Hu.prototype.constructor=Hu,Wu.prototype=Object.create(fo.prototype),Wu.prototype.constructor=Wu,qu.prototype=Object.create(ji.prototype),qu.prototype.constructor=qu,qu.prototype.toJSON=function(){var e=ji.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Yu.prototype=Object.create(fo.prototype),Yu.prototype.constructor=Yu,Xu.prototype=Object.create(ji.prototype),Xu.prototype.constructor=Xu,$u.prototype=Object.create(fo.prototype),$u.prototype.constructor=$u,Zu.prototype=Object.create(ji.prototype),Zu.prototype.constructor=Zu;var Ku=function(e,t,n){n=n||2;var r,i,o,a,s,u,c,l=t&&t.length,f=l?t[0]*n:e.length,h=Ju(e,0,f,n,!0),p=[];if(!h||h.next===h.prev)return p;if(l&&(h=function(e,t,n,r){var i,o,a,s,u,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(u=Ju(e,a,s,r,!1))===u.next&&(u.steiner=!0),c.push(uc(u));for(c.sort(oc),i=0;i<c.length;i++)ac(c[i],n),n=Qu(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var d=n;d<f;d+=n)(s=e[d])<r&&(r=s),(u=e[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return ec(h,p,n,r,i,c),p};function Ju(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=vc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=vc(o,e[o],e[o+1],a);return a&&hc(a,a.next)&&(gc(a),a=a.next),a}function Qu(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!hc(r,r.next)&&0!==fc(r.prev,r,r.next))r=r.next;else{if(gc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function ec(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=sc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?nc(e,r,i,o):tc(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),gc(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?ec(e=rc(e,t,n),t,n,r,i,o,2):2===a&&ic(e,t,n,r,i,o):ec(Qu(e),t,n,r,i,o,1);break}}}function tc(e){var t=e.prev,n=e,r=e.next;if(fc(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(cc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&fc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function nc(e,t,n,r){var i=e.prev,o=e,a=e.next;if(fc(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=sc(s,u,t,n,r),h=sc(c,l,t,n,r),p=e.prevZ,d=e.nextZ;p&&p.z>=f&&d&&d.z<=h;){if(p!==e.prev&&p!==e.next&&cc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fc(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&cc(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fc(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&cc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fc(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&cc(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&fc(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function rc(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!hc(i,o)&&pc(i,r,r.next,o)&&dc(i,o)&&dc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),gc(r),gc(r.next),r=e=o),r=r.next}while(r!==e);return r}function ic(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&lc(a,s)){var u=mc(a,s);return a=Qu(a,a.next),u=Qu(u,u.next),ec(a,t,n,r,i,o),void ec(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function oc(e,t){return e.x-t.x}function ac(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,f=n.y,h=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&cc(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&dc(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=mc(t,e);Qu(n,n.next)}}function sc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function uc(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function cc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function lc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&pc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&dc(e,t)&&dc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function fc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function hc(e,t){return e.x===t.x&&e.y===t.y}function pc(e,t,n,r){return!!(hc(e,n)&&hc(t,r)||hc(e,r)&&hc(n,t))||fc(e,t,n)>0!==fc(e,t,r)>0&&fc(n,r,e)>0!==fc(n,r,t)>0}function dc(e,t){return fc(e.prev,e,e.next)<0?fc(e,t,e.next)>=0&&fc(e,e.prev,t)>=0:fc(e,t,e.prev)<0||fc(e,e.next,t)<0}function mc(e,t){var n=new yc(e.i,e.x,e.y),r=new yc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vc(e,t,n,r){var i=new yc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var _c={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return _c.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];xc(e),bc(n,e);var o=e.length;t.forEach(xc);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,bc(n,t[a]);var s=Ku(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function xc(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function bc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function wc(e,t){fo.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Sc(e,t)),this.mergeVertices()}function Sc(e,t){ji.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,f=void 0!==t.bevelSize?t.bevelSize:l-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ec;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var v,g,y,_,x,b,w,S,E=!1;d&&(v=d.getSpacedPoints(s),E=!0,c=!1,g=d.computeFrenetFrames(s,!1),y=new jn,_=new jn,x=new jn),c||(p=0,l=0,f=0,h=0);var T=e.extractPoints(a),A=T.shape,M=T.holes;if(!_c.isClockWise(A))for(A=A.reverse(),w=0,S=M.length;w<S;w++)b=M[w],_c.isClockWise(b)&&(M[w]=b.reverse());var C=_c.triangulateShape(A,M),k=A;for(w=0,S=M.length;w<S;w++)b=M[w],A=A.concat(b);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var P,L,O,I,N,D,F=A.length,z=C.length;function B(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=a*a+s*s,f=a*c-s*u;if(Math.abs(f)>Number.EPSILON){var h=Math.sqrt(l),p=Math.sqrt(u*u+c*c),d=t.x-s/h,m=t.y+a/h,v=((n.x-c/p-d)*c-(n.y+u/p-m)*u)/(a*c-s*u),g=(r=d+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new Dn(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new Dn(r/o,i/o)}for(var j=[],V=0,U=k.length,G=U-1,H=V+1;V<U;V++,G++,H++)G===U&&(G=0),H===U&&(H=0),j[V]=B(k[V],k[G],k[H]);var W,q,Y=[],X=j.concat();for(w=0,S=M.length;w<S;w++){for(b=M[w],W=[],V=0,G=(U=b.length)-1,H=V+1;V<U;V++,G++,H++)G===U&&(G=0),H===U&&(H=0),W[V]=B(b[V],b[G],b[H]);Y.push(W),X=X.concat(W)}for(P=0;P<p;P++){for(O=P/p,I=l*Math.cos(O*Math.PI/2),L=f*Math.sin(O*Math.PI/2)+h,V=0,U=k.length;V<U;V++)Z((N=R(k[V],j[V],L)).x,N.y,-I);for(w=0,S=M.length;w<S;w++)for(b=M[w],W=Y[w],V=0,U=b.length;V<U;V++)Z((N=R(b[V],W[V],L)).x,N.y,-I)}for(L=f+h,V=0;V<F;V++)N=c?R(A[V],X[V],L):A[V],E?(_.copy(g.normals[0]).multiplyScalar(N.x),y.copy(g.binormals[0]).multiplyScalar(N.y),x.copy(v[0]).add(_).add(y),Z(x.x,x.y,x.z)):Z(N.x,N.y,0);for(q=1;q<=s;q++)for(V=0;V<F;V++)N=c?R(A[V],X[V],L):A[V],E?(_.copy(g.normals[q]).multiplyScalar(N.x),y.copy(g.binormals[q]).multiplyScalar(N.y),x.copy(v[q]).add(_).add(y),Z(x.x,x.y,x.z)):Z(N.x,N.y,u/s*q);for(P=p-1;P>=0;P--){for(O=P/p,I=l*Math.cos(O*Math.PI/2),L=f*Math.sin(O*Math.PI/2)+h,V=0,U=k.length;V<U;V++)Z((N=R(k[V],j[V],L)).x,N.y,u+I);for(w=0,S=M.length;w<S;w++)for(b=M[w],W=Y[w],V=0,U=b.length;V<U;V++)N=R(b[V],W[V],L),E?Z(N.x,N.y+v[s-1].y,v[s-1].x+I):Z(N.x,N.y,u+I)}function $(e,t){var n,r;for(V=e.length;--V>=0;){n=V,(r=V-1)<0&&(r=e.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=F*i,u=F*(i+1);J(t+n+a,t+r+a,t+r+u,t+n+u)}}}function Z(e,t,n){o.push(e),o.push(t),o.push(n)}function K(e,t,i){Q(e),Q(t),Q(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function J(e,t,i,o){Q(e),Q(t),Q(o),Q(t),Q(i),Q(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function Q(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(c){var t=0,i=F*t;for(V=0;V<z;V++)K((D=C[V])[2]+i,D[1]+i,D[0]+i);for(i=F*(t=s+2*p),V=0;V<z;V++)K((D=C[V])[0]+i,D[1]+i,D[2]+i)}else{for(V=0;V<z;V++)K((D=C[V])[2],D[1],D[0]);for(V=0;V<z;V++)K((D=C[V])[0]+F*s,D[1]+F*s,D[2]+F*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for($(k,t),t+=k.length,w=0,S=M.length;w<S;w++)$(b=M[w],t),t+=b.length;n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new ki(r,3)),this.setAttribute("uv",new ki(i,2)),this.computeVertexNormals()}wc.prototype=Object.create(fo.prototype),wc.prototype.constructor=wc,wc.prototype.toJSON=function(){var e=fo.prototype.toJSON.call(this);return Tc(this.parameters.shapes,this.parameters.options,e)},Sc.prototype=Object.create(ji.prototype),Sc.prototype.constructor=Sc,Sc.prototype.toJSON=function(){var e=ji.prototype.toJSON.call(this);return Tc(this.parameters.shapes,this.parameters.options,e)};var Ec={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new Dn(o,a),new Dn(s,u),new Dn(c,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],f=t[3*r+2],h=t[3*i],p=t[3*i+1],d=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new Dn(a,1-u),new Dn(c,1-f),new Dn(h,1-d),new Dn(m,1-g)]:[new Dn(s,1-u),new Dn(l,1-f),new Dn(p,1-d),new Dn(v,1-g)]}};function Tc(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Ac(e,t){fo.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Mc(e,t)),this.mergeVertices()}function Mc(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new fo;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Sc.call(this,r,t),this.type="TextBufferGeometry"}function Cc(e,t,n,r,i,o,a){fo.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new kc(e,t,n,r,i,o,a)),this.mergeVertices()}function kc(e,t,n,r,i,o,a){ji.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,c=Math.min(o+a,Math.PI),l=0,f=[],h=new jn,p=new jn,d=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],_=u/n,x=0;for(0==u&&0==o?x=.5/t:u==n&&c==Math.PI&&(x=-.5/t),s=0;s<=t;s++){var b=s/t;h.x=-e*Math.cos(r+b*i)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(r+b*i)*Math.sin(o+_*a),m.push(h.x,h.y,h.z),p.copy(h).normalize(),v.push(p.x,p.y,p.z),g.push(b+x,1-_),y.push(l++)}f.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var w=f[u][s+1],S=f[u][s],E=f[u+1][s],T=f[u+1][s+1];(0!==u||o>0)&&d.push(w,S,T),(u!==n-1||c<Math.PI)&&d.push(S,E,T)}this.setIndex(d),this.setAttribute("position",new ki(m,3)),this.setAttribute("normal",new ki(v,3)),this.setAttribute("uv",new ki(g,2))}function Rc(e,t,n,r,i,o){fo.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Pc(e,t,n,r,i,o)),this.mergeVertices()}function Pc(e,t,n,r,i,o){ji.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,c=[],l=[],f=[],h=[],p=e,d=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new jn,v=new Dn;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),l.push(m.x,m.y,m.z),f.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y);p+=d}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=a=u+g,_=a+n+1,x=a+n+2,b=a+1;c.push(y,_,b),c.push(_,x,b)}}this.setIndex(c),this.setAttribute("position",new ki(l,3)),this.setAttribute("normal",new ki(f,3)),this.setAttribute("uv",new ki(h,2))}function Lc(e,t,n,r){fo.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Oc(e,t,n,r)),this.mergeVertices()}function Oc(e,t,n,r){ji.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Nn.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],c=[],l=1/t,f=new jn,h=new Dn;for(o=0;o<=t;o++){var p=n+o*l*r,d=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)f.x=e[a].x*d,f.y=e[a].y,f.z=e[a].x*m,u.push(f.x,f.y,f.z),h.x=o/t,h.y=a/(e.length-1),c.push(h.x,h.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=i=a+o*e.length,g=i+e.length,y=i+e.length+1,_=i+1;s.push(v,g,_),s.push(g,y,_)}if(this.setIndex(s),this.setAttribute("position",new ki(u,3)),this.setAttribute("uv",new ki(c,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,b=new jn,w=new jn,S=new jn;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)b.x=x[a+0],b.y=x[a+1],b.z=x[a+2],w.x=x[i+a+0],w.y=x[i+a+1],w.z=x[i+a+2],S.addVectors(b,w).normalize(),x[a+0]=x[i+a+0]=S.x,x[a+1]=x[i+a+1]=S.y,x[a+2]=x[i+a+2]=S.z}}function Ic(e,t){fo.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Nc(e,t)),this.mergeVertices()}function Nc(e,t){ji.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var u=0;u<e.length;u++)c(e[u]),this.addGroup(a,s,u),a+=s,s=0;function c(e){var a,u,c,l=r.length/3,f=e.extractPoints(t),h=f.shape,p=f.holes;for(!1===_c.isClockWise(h)&&(h=h.reverse()),a=0,u=p.length;a<u;a++)c=p[a],!0===_c.isClockWise(c)&&(p[a]=c.reverse());var d=_c.triangulateShape(h,p);for(a=0,u=p.length;a<u;a++)c=p[a],h=h.concat(c);for(a=0,u=h.length;a<u;a++){var m=h[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=d.length;a<u;a++){var v=d[a],g=v[0]+l,y=v[1]+l,_=v[2]+l;n.push(g,y,_),s+=3}}this.setIndex(n),this.setAttribute("position",new ki(r,3)),this.setAttribute("normal",new ki(i,3)),this.setAttribute("uv",new ki(o,2))}function Dc(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Fc(e,t){ji.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Nn.DEG2RAD*t),u=[0,0],c={},l=["a","b","c"];e.isBufferGeometry?(o=new fo).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var f=o.vertices,h=o.faces,p=0,d=h.length;p<d;p++)for(var m=h[p],v=0;v<3;v++)n=m[l[v]],r=m[l[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===c[i=u[0]+","+u[1]]?c[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[i].face2=p;for(i in c){var g=c[i];if(void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=s){var y=f[g.index1];a.push(y.x,y.y,y.z),y=f[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new ki(a,3))}function zc(e,t,n,r,i,o,a,s){fo.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Bc(e,t,n,r,i,o,a,s)),this.mergeVertices()}function Bc(e,t,n,r,i,o,a,s){ji.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],l=[],f=[],h=[],p=0,d=[],m=n/2,v=0;function g(n){var i,o,d,g=new Dn,y=new jn,_=0,x=!0===n?e:t,b=!0===n?1:-1;for(o=p,i=1;i<=r;i++)l.push(0,m*b,0),f.push(0,b,0),h.push(.5,.5),p++;for(d=p,i=0;i<=r;i++){var w=i/r*s+a,S=Math.cos(w),E=Math.sin(w);y.x=x*E,y.y=m*b,y.z=x*S,l.push(y.x,y.y,y.z),f.push(0,b,0),g.x=.5*S+.5,g.y=.5*E*b+.5,h.push(g.x,g.y),p++}for(i=0;i<r;i++){var T=o+i,A=d+i;!0===n?c.push(A,A+1,T):c.push(A+1,A,T),_+=3}u.addGroup(v,_,!0===n?1:2),v+=_}!function(){var o,g,y=new jn,_=new jn,x=0,b=(t-e)/n;for(g=0;g<=i;g++){var w=[],S=g/i,E=S*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,A=T*s+a,M=Math.sin(A),C=Math.cos(A);_.x=E*M,_.y=-S*n+m,_.z=E*C,l.push(_.x,_.y,_.z),y.set(M,b,C).normalize(),f.push(y.x,y.y,y.z),h.push(T,1-S),w.push(p++)}d.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var k=d[g][o],R=d[g+1][o],P=d[g+1][o+1],L=d[g][o+1];c.push(k,R,L),c.push(R,P,L),x+=6}u.addGroup(v,x,0),v+=x}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new ki(l,3)),this.setAttribute("normal",new ki(f,3)),this.setAttribute("uv",new ki(h,2))}function jc(e,t,n,r,i,o,a){zc.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Vc(e,t,n,r,i,o,a){Bc.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Uc(e,t,n,r){fo.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Gc(e,t,n,r)),this.mergeVertices()}function Gc(e,t,n,r){ji.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],c=[],l=new jn,f=new Dn;for(s.push(0,0,0),u.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var h=n+o/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),u.push(0,0,1),f.x=(s[i]/e+1)/2,f.y=(s[i+1]/e+1)/2,c.push(f.x,f.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new ki(s,3)),this.setAttribute("normal",new ki(u,3)),this.setAttribute("uv",new ki(c,2))}Ac.prototype=Object.create(fo.prototype),Ac.prototype.constructor=Ac,Mc.prototype=Object.create(Sc.prototype),Mc.prototype.constructor=Mc,Cc.prototype=Object.create(fo.prototype),Cc.prototype.constructor=Cc,kc.prototype=Object.create(ji.prototype),kc.prototype.constructor=kc,Rc.prototype=Object.create(fo.prototype),Rc.prototype.constructor=Rc,Pc.prototype=Object.create(ji.prototype),Pc.prototype.constructor=Pc,Lc.prototype=Object.create(fo.prototype),Lc.prototype.constructor=Lc,Oc.prototype=Object.create(ji.prototype),Oc.prototype.constructor=Oc,Ic.prototype=Object.create(fo.prototype),Ic.prototype.constructor=Ic,Ic.prototype.toJSON=function(){var e=fo.prototype.toJSON.call(this);return Dc(this.parameters.shapes,e)},Nc.prototype=Object.create(ji.prototype),Nc.prototype.constructor=Nc,Nc.prototype.toJSON=function(){var e=ji.prototype.toJSON.call(this);return Dc(this.parameters.shapes,e)},Fc.prototype=Object.create(ji.prototype),Fc.prototype.constructor=Fc,zc.prototype=Object.create(fo.prototype),zc.prototype.constructor=zc,Bc.prototype=Object.create(ji.prototype),Bc.prototype.constructor=Bc,jc.prototype=Object.create(zc.prototype),jc.prototype.constructor=jc,Vc.prototype=Object.create(Bc.prototype),Vc.prototype.constructor=Vc,Uc.prototype=Object.create(fo.prototype),Uc.prototype.constructor=Uc,Gc.prototype=Object.create(ji.prototype),Gc.prototype.constructor=Gc;var Hc=Object.freeze({__proto__:null,WireframeGeometry:Lu,ParametricGeometry:Ou,ParametricBufferGeometry:Iu,TetrahedronGeometry:Fu,TetrahedronBufferGeometry:zu,OctahedronGeometry:Bu,OctahedronBufferGeometry:ju,IcosahedronGeometry:Vu,IcosahedronBufferGeometry:Uu,DodecahedronGeometry:Gu,DodecahedronBufferGeometry:Hu,PolyhedronGeometry:Nu,PolyhedronBufferGeometry:Du,TubeGeometry:Wu,TubeBufferGeometry:qu,TorusKnotGeometry:Yu,TorusKnotBufferGeometry:Xu,TorusGeometry:$u,TorusBufferGeometry:Zu,TextGeometry:Ac,TextBufferGeometry:Mc,SphereGeometry:Cc,SphereBufferGeometry:kc,RingGeometry:Rc,RingBufferGeometry:Pc,PlaneGeometry:Lo,PlaneBufferGeometry:Oo,LatheGeometry:Lc,LatheBufferGeometry:Oc,ShapeGeometry:Ic,ShapeBufferGeometry:Nc,ExtrudeGeometry:wc,ExtrudeBufferGeometry:Sc,EdgesGeometry:Fc,ConeGeometry:jc,ConeBufferGeometry:Vc,CylinderGeometry:zc,CylinderBufferGeometry:Bc,CircleGeometry:Uc,CircleBufferGeometry:Gc,BoxGeometry:ho,BoxBufferGeometry:po});function Wc(e){yi.call(this),this.type="ShadowMaterial",this.color=new hi(0),this.transparent=!0,this.setValues(e)}function qc(e){yo.call(this,e),this.type="RawShaderMaterial"}function Yc(e){yi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new hi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xc(e){Yc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Dn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function $c(e){yi.call(this),this.type="MeshPhongMaterial",this.color=new hi(16777215),this.specular=new hi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Zc(e){yi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new hi(16777215),this.specular=new hi(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Kc(e){yi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jc(e){yi.call(this),this.type="MeshLambertMaterial",this.color=new hi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new hi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Qc(e){yi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new hi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function el(e){lu.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Wc.prototype=Object.create(yi.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isShadowMaterial=!0,Wc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this},qc.prototype=Object.create(yo.prototype),qc.prototype.constructor=qc,qc.prototype.isRawShaderMaterial=!0,Yc.prototype=Object.create(yi.prototype),Yc.prototype.constructor=Yc,Yc.prototype.isMeshStandardMaterial=!0,Yc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Xc.prototype=Object.create(Yc.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isMeshPhysicalMaterial=!0,Xc.prototype.copy=function(e){return Yc.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new hi).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},$c.prototype=Object.create(yi.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshPhongMaterial=!0,$c.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zc.prototype=Object.create(yi.prototype),Zc.prototype.constructor=Zc,Zc.prototype.isMeshToonMaterial=!0,Zc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Kc.prototype=Object.create(yi.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isMeshNormalMaterial=!0,Kc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jc.prototype=Object.create(yi.prototype),Jc.prototype.constructor=Jc,Jc.prototype.isMeshLambertMaterial=!0,Jc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Qc.prototype=Object.create(yi.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isMeshMatcapMaterial=!0,Qc.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},el.prototype=Object.create(lu.prototype),el.prototype.constructor=el,el.prototype.isLineDashedMaterial=!0,el.prototype.copy=function(e){return lu.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var tl=Object.freeze({__proto__:null,ShadowMaterial:Wc,SpriteMaterial:Ds,RawShaderMaterial:qc,ShaderMaterial:yo,PointsMaterial:bu,MeshPhysicalMaterial:Xc,MeshStandardMaterial:Yc,MeshPhongMaterial:$c,MeshToonMaterial:Zc,MeshNormalMaterial:Kc,MeshLambertMaterial:Jc,MeshDepthMaterial:ys,MeshDistanceMaterial:_s,MeshBasicMaterial:_i,MeshMatcapMaterial:Qc,LineDashedMaterial:el,LineBasicMaterial:lu,Material:yi}),nl={arraySlice:function(e,t,n){return nl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],c=u.getValueSize(),l=[],f=[],h=0;h<u.times.length;++h){var p=u.times[h]*i;if(!(p<n||p>=r)){l.push(u.times[h]);for(var d=0;d<c;++d)f.push(u.values[h*c+d])}}0!==l.length&&(u.times=nl.convertArray(l,u.times.constructor),u.values=nl.convertArray(f,u.values.constructor),a.push(u))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o}};function rl(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function il(e,t,n,r){rl.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ol(e,t,n,r){rl.call(this,e,t,n,r)}function al(e,t,n,r){rl.call(this,e,t,n,r)}function sl(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nl.convertArray(t,this.TimeBufferType),this.values=nl.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function ul(e,t,n){sl.call(this,e,t,n)}function cl(e,t,n,r){sl.call(this,e,t,n,r)}function ll(e,t,n,r){sl.call(this,e,t,n,r)}function fl(e,t,n,r){rl.call(this,e,t,n,r)}function hl(e,t,n,r){sl.call(this,e,t,n,r)}function pl(e,t,n,r){sl.call(this,e,t,n,r)}function dl(e,t,n,r){sl.call(this,e,t,n,r)}function ml(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Nn.generateUUID(),this.duration<0&&this.resetDuration()}function vl(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ll;case"vector":case"vector2":case"vector3":case"vector4":return dl;case"color":return cl;case"quaternion":return hl;case"bool":case"boolean":return ul;case"string":return pl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];nl.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(rl.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(rl.prototype,{beforeStart_:rl.prototype.copySampleValue_,afterEnd_:rl.prototype.copySampleValue_}),il.prototype=Object.assign(Object.create(rl.prototype),{constructor:il,DefaultSettings_:{endingStart:Ut,endingEnd:Ut},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:i=e,a=2*t-n;break;case Ht:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:o=e,s=2*n-t;break;case Ht:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),d=p*p,m=d*p,v=-f*m+2*f*d-f*p,g=(1+f)*m+(-1.5-2*f)*d+(-.5+f)*p+1,y=(-1-h)*m+(1.5+h)*d+.5*p,_=h*m-h*d,x=0;x!==a;++x)i[x]=v*o[c+x]+g*o[u+x]+y*o[s+x]+_*o[l+x];return i}}),ol.prototype=Object.assign(Object.create(rl.prototype),{constructor:ol,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c,f=0;f!==a;++f)i[f]=o[u+f]*l+o[s+f]*c;return i}}),al.prototype=Object.assign(Object.create(rl.prototype),{constructor:al,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(sl,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:nl.convertArray(e.times,Array),values:nl.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(sl.prototype,{constructor:sl,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:jt,InterpolantFactoryMethodDiscrete:function(e){return new al(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ol(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new il(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Bt:t=this.InterpolantFactoryMethodDiscrete;break;case jt:t=this.InterpolantFactoryMethodLinear;break;case Vt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bt;case this.InterpolantFactoryMethodLinear:return jt;case this.InterpolantFactoryMethodSmooth:return Vt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=nl.arraySlice(n,i,o),this.values=nl.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&nl.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Vt,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,l=c-n,f=c+n,h=0;h!==n;++h){var p=t[c+h];if(p!==t[l+h]||p!==t[f+h]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var d=a*n,m=i*n;for(h=0;h!==n;++h)t[m+h]=t[d+h]}++i}}if(o>0){e[i]=e[o];for(d=o*n,m=i*n,h=0;h!==n;++h)t[m+h]=t[d+h];++i}return i!==e.length&&(this.times=nl.arraySlice(e,0,i),this.values=nl.arraySlice(t,0,i*n)),this},clone:function(){var e=nl.arraySlice(this.times,0),t=nl.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),ul.prototype=Object.assign(Object.create(sl.prototype),{constructor:ul,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Bt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cl.prototype=Object.assign(Object.create(sl.prototype),{constructor:cl,ValueTypeName:"color"}),ll.prototype=Object.assign(Object.create(sl.prototype),{constructor:ll,ValueTypeName:"number"}),fl.prototype=Object.assign(Object.create(rl.prototype),{constructor:fl,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),c=s+a;s!==c;s+=4)Fn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),hl.prototype=Object.assign(Object.create(sl.prototype),{constructor:hl,ValueTypeName:"quaternion",DefaultInterpolation:jt,InterpolantFactoryMethodLinear:function(e){return new fl(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),pl.prototype=Object.assign(Object.create(sl.prototype),{constructor:pl,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Bt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dl.prototype=Object.assign(Object.create(sl.prototype),{constructor:dl,ValueTypeName:"vector"}),Object.assign(ml,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(vl(n[i]).scale(r));return new ml(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(sl.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=nl.getKeyframeOrder(s);s=nl.sortedArray(s,1,c),u=nl.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new ll(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new ml(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var c=r[f=u[1]];c||(r[f]=c=[]),c.push(s)}}var l=[];for(var f in r)l.push(ml.CreateFromMorphTargetSequence(f,r[f],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];nl.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},f=0;f<c.length;f++)if(c[f].morphTargets)for(var h=0;h<c[f].morphTargets.length;h++)l[c[f].morphTargets[h]]=-1;for(var p in l){var d=[],m=[];for(h=0;h!==c[f].morphTargets.length;++h){var v=c[f];d.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new ll(".morphTargetInfluence["+p+"]",d,m))}o=l.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(dl,g+".position",c,"pos",r),n(hl,g+".quaternion",c,"rot",r),n(dl,g+".scale",c,"scl",r)}}return 0===r.length?null:new ml(i,o,r)}}),Object.assign(ml.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ml(this.name,this.duration,e)}});var gl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function yl(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],i=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}var _l=new yl;function xl(e){this.manager=void 0!==e?e:_l,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(xl.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var bl={};function wl(e){xl.call(this,e)}function Sl(e){xl.call(this,e)}function El(e){xl.call(this,e)}function Tl(e){xl.call(this,e)}function Al(e){xl.call(this,e)}function Ml(e){xl.call(this,e)}function Cl(e){xl.call(this,e)}function kl(){this.type="Curve",this.arcLengthDivisions=200}function Rl(e,t,n,r,i,o,a,s){kl.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Pl(e,t,n,r,i,o){Rl.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ll(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}wl.prototype=Object.assign(Object.create(xl.prototype),{constructor:wl,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===bl[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],c=a[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var l,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var h=new Uint8Array(c.length),p=0;p<c.length;p++)h[p]=c.charCodeAt(p);l="blob"===f?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var d=new DOMParser;l=d.parseFromString(c,s);break;case"json":l=JSON.parse(c);break;default:l=c}setTimeout((function(){t&&t(l),i.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{bl[e]=[],bl[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response,r=bl[e];if(delete bl[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),gl.add(e,n);for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=bl[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=bl[e];delete bl[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=bl[e];delete bl[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}bl[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Sl.prototype=Object.assign(Object.create(xl.prototype),{constructor:Sl,load:function(e,t,n,r){var i=this,o=new wl(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=ml.parse(e[n]);t.push(r)}return t}}),El.prototype=Object.assign(Object.create(xl.prototype),{constructor:El,load:function(e,t,n,r){var i=this,o=[],a=new ku;a.image=o;var s=new wl(this.manager);function u(u){s.load(e[u],(function(e){var n=i.parse(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=De),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,f=e.length;l<f;++l)u(l);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=De),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),Tl.prototype=Object.assign(Object.create(xl.prototype),{constructor:Tl,load:function(e,t,n,r){var i=this,o=new So,a=new wl(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ke,o.wrapT=void 0!==n.wrapT?n.wrapT:ke,o.magFilter=void 0!==n.magFilter?n.magFilter:De,o.minFilter=void 0!==n.minFilter?n.minFilter:De,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Be),1===n.mipmapCount&&(o.minFilter=De),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Al.prototype=Object.assign(Object.create(xl.prototype),{constructor:Al,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),gl.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),Ml.prototype=Object.assign(Object.create(xl.prototype),{constructor:Ml,load:function(e,t,n,r){var i=new Wo,o=new Al(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}),Cl.prototype=Object.assign(Object.create(xl.prototype),{constructor:Cl,load:function(e,t,n,r){var i=new qn,o=new Al(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?et:tt,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(kl.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new jn,a=[],s=[],u=[],c=new jn,l=new rr;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new jn,u[0]=new jn;var f=Number.MAX_VALUE,h=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=f&&(f=h,o.set(1,0,0)),p<=f&&(f=p,o.set(0,1,0)),d<=f&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),u[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Nn.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(c,i))),u[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Nn.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Rl.prototype=Object.create(kl.prototype),Rl.prototype.constructor=Rl,Rl.prototype.isEllipseCurve=!0,Rl.prototype.getPoint=function(e,t){for(var n=t||new Dn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=s-this.aX,h=u-this.aY;s=f*c-h*l+this.aX,u=f*l+h*c+this.aY}return n.set(s,u)},Rl.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Rl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Rl.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pl.prototype=Object.create(Rl.prototype),Pl.prototype.constructor=Pl,Pl.prototype.isArcCurve=!0;var Ol=new jn,Il=new Ll,Nl=new Ll,Dl=new Ll;function Fl(e,t,n,r){kl.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function zl(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Bl(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function jl(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Vl(e,t,n,r){kl.call(this),this.type="CubicBezierCurve",this.v0=e||new Dn,this.v1=t||new Dn,this.v2=n||new Dn,this.v3=r||new Dn}function Ul(e,t,n,r){kl.call(this),this.type="CubicBezierCurve3",this.v0=e||new jn,this.v1=t||new jn,this.v2=n||new jn,this.v3=r||new jn}function Gl(e,t){kl.call(this),this.type="LineCurve",this.v1=e||new Dn,this.v2=t||new Dn}function Hl(e,t){kl.call(this),this.type="LineCurve3",this.v1=e||new jn,this.v2=t||new jn}function Wl(e,t,n){kl.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Dn,this.v1=t||new Dn,this.v2=n||new Dn}function ql(e,t,n){kl.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new jn,this.v1=t||new jn,this.v2=n||new jn}function Yl(e){kl.call(this),this.type="SplineCurve",this.points=e||[]}Fl.prototype=Object.create(kl.prototype),Fl.prototype.constructor=Fl,Fl.prototype.isCatmullRomCurve3=!0,Fl.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new jn,s=this.points,u=s.length,c=(u-(this.closed?0:1))*e,l=Math.floor(c),f=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/u)+1)*u:0===f&&l===u-1&&(l=u-2,f=1),this.closed||l>0?n=s[(l-1)%u]:(Ol.subVectors(s[0],s[1]).add(s[0]),n=Ol),r=s[l%u],i=s[(l+1)%u],this.closed||l+2<u?o=s[(l+2)%u]:(Ol.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Ol),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),h),d=Math.pow(r.distanceToSquared(i),h),m=Math.pow(i.distanceToSquared(o),h);d<1e-4&&(d=1),p<1e-4&&(p=d),m<1e-4&&(m=d),Il.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,m),Nl.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,m),Dl.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,m)}else"catmullrom"===this.curveType&&(Il.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Nl.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Dl.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Il.calc(f),Nl.calc(f),Dl.calc(f)),a},Fl.prototype.copy=function(e){kl.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Fl.prototype.fromJSON=function(e){kl.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new jn).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Vl.prototype=Object.create(kl.prototype),Vl.prototype.constructor=Vl,Vl.prototype.isCubicBezierCurve=!0,Vl.prototype.getPoint=function(e,t){var n=t||new Dn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(jl(e,r.x,i.x,o.x,a.x),jl(e,r.y,i.y,o.y,a.y)),n},Vl.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Vl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Vl.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ul.prototype=Object.create(kl.prototype),Ul.prototype.constructor=Ul,Ul.prototype.isCubicBezierCurve3=!0,Ul.prototype.getPoint=function(e,t){var n=t||new jn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(jl(e,r.x,i.x,o.x,a.x),jl(e,r.y,i.y,o.y,a.y),jl(e,r.z,i.z,o.z,a.z)),n},Ul.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ul.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ul.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Gl.prototype=Object.create(kl.prototype),Gl.prototype.constructor=Gl,Gl.prototype.isLineCurve=!0,Gl.prototype.getPoint=function(e,t){var n=t||new Dn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Gl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Gl.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Gl.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Gl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Gl.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hl.prototype=Object.create(kl.prototype),Hl.prototype.constructor=Hl,Hl.prototype.isLineCurve3=!0,Hl.prototype.getPoint=function(e,t){var n=t||new jn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Hl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Hl.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hl.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Wl.prototype=Object.create(kl.prototype),Wl.prototype.constructor=Wl,Wl.prototype.isQuadraticBezierCurve=!0,Wl.prototype.getPoint=function(e,t){var n=t||new Dn,r=this.v0,i=this.v1,o=this.v2;return n.set(Bl(e,r.x,i.x,o.x),Bl(e,r.y,i.y,o.y)),n},Wl.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wl.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ql.prototype=Object.create(kl.prototype),ql.prototype.constructor=ql,ql.prototype.isQuadraticBezierCurve3=!0,ql.prototype.getPoint=function(e,t){var n=t||new jn,r=this.v0,i=this.v1,o=this.v2;return n.set(Bl(e,r.x,i.x,o.x),Bl(e,r.y,i.y,o.y),Bl(e,r.z,i.z,o.z)),n},ql.prototype.copy=function(e){return kl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ql.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ql.prototype.fromJSON=function(e){return kl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Yl.prototype=Object.create(kl.prototype),Yl.prototype.constructor=Yl,Yl.prototype.isSplineCurve=!0,Yl.prototype.getPoint=function(e,t){var n=t||new Dn,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(zl(a,s.x,u.x,c.x,l.x),zl(a,s.y,u.y,c.y,l.y)),n},Yl.prototype.copy=function(e){kl.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Yl.prototype.toJSON=function(){var e=kl.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Yl.prototype.fromJSON=function(e){kl.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Dn).fromArray(r))}return this};var Xl=Object.freeze({__proto__:null,ArcCurve:Pl,CatmullRomCurve3:Fl,CubicBezierCurve:Vl,CubicBezierCurve3:Ul,EllipseCurve:Rl,LineCurve:Gl,LineCurve3:Hl,QuadraticBezierCurve:Wl,QuadraticBezierCurve3:ql,SplineCurve:Yl});function $l(){kl.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Zl(e){$l.call(this),this.type="Path",this.currentPoint=new Dn,e&&this.setFromPoints(e)}function Kl(e){Zl.call(this,e),this.uuid=Nn.generateUUID(),this.type="Shape",this.holes=[]}function Jl(e,t){br.call(this),this.type="Light",this.color=new hi(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ql(e,t,n){Jl.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(br.DefaultUp),this.updateMatrix(),this.groundColor=new hi(t)}function ef(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Dn(512,512),this.map=null,this.mapPass=null,this.matrix=new rr,this._frustum=new Ao,this._frameExtents=new Dn(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)]}function tf(){ef.call(this,new xo(50,1,.5,500))}function nf(e,t,n,r,i,o){Jl.call(this,e,t),this.type="SpotLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new tf}function rf(){ef.call(this,new xo(90,1,.5,500)),this._frameExtents=new Dn(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new jn(1,0,0),new jn(-1,0,0),new jn(0,0,1),new jn(0,0,-1),new jn(0,1,0),new jn(0,-1,0)],this._cubeUps=[new jn(0,1,0),new jn(0,1,0),new jn(0,1,0),new jn(0,1,0),new jn(0,0,1),new jn(0,0,-1)]}function of(e,t,n,r){Jl.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new rf}function af(e,t,n,r,i,o){_o.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function sf(){ef.call(this,new af(-5,5,5,-5,.5,500))}function uf(e,t){Jl.call(this,e,t),this.type="DirectionalLight",this.position.copy(br.DefaultUp),this.updateMatrix(),this.target=new br,this.shadow=new sf}function cf(e,t){Jl.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function lf(e,t,n,r){Jl.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ff(e){xl.call(this,e),this.textures={}}$l.prototype=Object.assign(Object.create(kl.prototype),{constructor:$l,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Gl(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){kl.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=kl.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){kl.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Xl[r.type]).fromJSON(r))}return this}}),Zl.prototype=Object.assign(Object.create($l.prototype),{constructor:Zl,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Gl(this.currentPoint.clone(),new Dn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new Wl(this.currentPoint.clone(),new Dn(e,t),new Dn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){var a=new Vl(this.currentPoint.clone(),new Dn(e,t),new Dn(n,r),new Dn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new Yl([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){var u=new Rl(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return $l.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=$l.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return $l.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Kl.prototype=Object.assign(Object.create(Zl.prototype),{constructor:Kl,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Zl.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Zl.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Zl.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Zl).fromJSON(r))}return this}}),Jl.prototype=Object.assign(Object.create(br.prototype),{constructor:Jl,isLight:!0,copy:function(e){return br.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ql.prototype=Object.assign(Object.create(Jl.prototype),{constructor:Ql,isHemisphereLight:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ef.prototype,{_projScreenMatrix:new rr,_lightPositionWorld:new jn,_lookTarget:new jn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),tf.prototype=Object.assign(Object.create(ef.prototype),{constructor:tf,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Nn.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),ef.prototype.updateMatrices.call(this,e)}}),nf.prototype=Object.assign(Object.create(Jl.prototype),{constructor:nf,isSpotLight:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),rf.prototype=Object.assign(Object.create(ef.prototype),{constructor:rf,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(a)}}),of.prototype=Object.assign(Object.create(Jl.prototype),{constructor:of,isPointLight:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),af.prototype=Object.assign(Object.create(_o.prototype),{constructor:af,isOrthographicCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/u))+l*(this.view.width/u),s=(a-=f*(this.view.offsetY/c))-f*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=br.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),sf.prototype=Object.assign(Object.create(ef.prototype),{constructor:sf,isDirectionalLightShadow:!0,updateMatrices:function(e){ef.prototype.updateMatrices.call(this,e)}}),uf.prototype=Object.assign(Object.create(Jl.prototype),{constructor:uf,isDirectionalLight:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),cf.prototype=Object.assign(Object.create(Jl.prototype),{constructor:cf,isAmbientLight:!0}),lf.prototype=Object.assign(Object.create(Jl.prototype),{constructor:lf,isRectAreaLight:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Jl.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ff.prototype=Object.assign(Object.create(xl.prototype),{constructor:ff,load:function(e,t,n,r){var i=this,o=new wl(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new tl[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new hi).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new hi).setHex(o.value);break;case"v2":r.uniforms[i].value=(new Dn).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new jn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Yn).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new Gn).fromArray(o.value);case"m4":r.uniforms[i].value=(new rr).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new Dn).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Dn).fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var hf={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function pf(){ji.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function df(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),bi.call(this,e,t,n),this.meshPerAttribute=r||1}function mf(e){xl.call(this,e)}pf.prototype=Object.assign(Object.create(ji.prototype),{constructor:pf,isInstancedBufferGeometry:!0,copy:function(e){return ji.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=ji.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),df.prototype=Object.assign(Object.create(bi.prototype),{constructor:df,isInstancedBufferAttribute:!0,copy:function(e){return bi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=bi.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),mf.prototype=Object.assign(Object.create(xl.prototype),{constructor:mf,load:function(e,t,n,r){var i=this,o=new wl(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new pf:new ji,n=e.data.index;if(void 0!==n){var r=new vf[n.type](n.array);t.setIndex(new bi(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new vf[a.type](a.array),new(a.isInstancedBufferAttribute?df:bi)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var u=e.data.morphAttributes;if(u)for(var o in u){for(var c=u[o],l=[],f=0,h=c.length;f<h;f++){a=c[f],s=new bi(r=new vf[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),l.push(s)}t.morphAttributes[o]=l}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){f=0;for(var d=p.length;f!==d;++f){var m=p[f];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new jn;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new Br(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var vf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function gf(e){xl.call(this,e)}gf.prototype=Object.assign(Object.create(xl.prototype),{constructor:gf,load:function(e,t,n,r){var i=this,o=""===this.path?hf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new wl(i.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Kl).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new mf,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Hc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Hc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Hc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Hc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Hc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Hc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Hc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Hc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Hc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Hc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Hc[s.type]((new Xl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Hc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Hc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,l=s.shapes.length;c<l;c++){var f=t[s.shapes[c]];u.push(f)}a=new Hc[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,l=s.shapes.length;c<l;c++){f=t[s.shapes[c]];u.push(f)}var h=s.options.extrudePath;void 0!==h&&(s.options.extrudePath=(new Xl[h.type]).fromJSON(h)),a=new Hc[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new ff;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=ml.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Al(new yl(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],c=u.url;if(Array.isArray(c)){r[u.uuid]=[];for(var l=0,f=c.length;l<f;l++){var h=c[l],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;r[u.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Wo(t[s.image]):new qn(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,_f)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],xf),a.wrapT=n(s.wrap[1],xf)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,bf)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,bf)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new wr,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new hi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Ps(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Rs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new xo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new af(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new cf(e.color,e.intensity);break;case"DirectionalLight":r=new uf(e.color,e.intensity);break;case"PointLight":r=new of(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new lf(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new nf(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Ql(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new eu(a,s):new io(a,s);break;case"InstancedMesh":a=i(e.geometry),s=o(e.material);var u=e.count,c=e.instanceMatrix;(r=new cu(a,s,u)).instanceMatrix=new bi(new Float32Array(c.array),16);break;case"LOD":r=new Qs;break;case"Line":r=new vu(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new xu(i(e.geometry),o(e.material));break;case"LineSegments":r=new _u(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Au(i(e.geometry),o(e.material));break;case"Sprite":r=new $s(o(e.material));break;case"Group":r=new Ms;break;default:r=new br}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,f=0;f<l.length;f++)r.add(this.parseObject(l[f],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);for(var h=e.levels,p=0;p<h.length;p++){var d=h[p],m=r.getObjectByProperty("uuid",d.object);void 0!==m&&r.addLevel(m,d.distance)}}return r}});var yf,_f={UVMapping:xe,CubeReflectionMapping:be,CubeRefractionMapping:we,EquirectangularReflectionMapping:Se,EquirectangularRefractionMapping:Ee,SphericalReflectionMapping:Te,CubeUVReflectionMapping:Ae,CubeUVRefractionMapping:Me},xf={RepeatWrapping:Ce,ClampToEdgeWrapping:ke,MirroredRepeatWrapping:Re},bf={NearestFilter:Pe,NearestMipmapNearestFilter:Le,NearestMipmapLinearFilter:Ie,LinearFilter:De,LinearMipmapNearestFilter:Fe,LinearMipmapLinearFilter:Be};function wf(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),xl.call(this,e),this.options=void 0}function Sf(){this.type="ShapePath",this.color=new hi,this.subPaths=[],this.currentPath=null}function Ef(e){this.type="Font",this.data=e}function Tf(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,c,l,f,h,p,d=new Sf;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,d.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,d.lineTo(a,s);break;case"q":u=m[v++]*t+n,c=m[v++]*t+r,l=m[v++]*t+n,f=m[v++]*t+r,d.quadraticCurveTo(l,f,u,c);break;case"b":u=m[v++]*t+n,c=m[v++]*t+r,l=m[v++]*t+n,f=m[v++]*t+r,h=m[v++]*t+n,p=m[v++]*t+r,d.bezierCurveTo(l,f,h,p,u,c)}}return{offsetX:o.ha*t,path:d}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function Af(e){xl.call(this,e)}wf.prototype=Object.assign(Object.create(xl.prototype),{constructor:wf,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){gl.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Sf.prototype,{moveTo:function(e,t){return this.currentPath=new Zl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Kl;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],u=-u,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=c*(e.x-a.x)-u*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=_c.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],(u=new Kl).curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=e?!l:l;var f,h,p=[],d=[],m=[],v=0;d[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(f=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&d[v]&&v++,d[v]={s:new Kl,p:f},d[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){for(var _=!1,x=[],b=0,w=d.length;b<w;b++)p[b]=[];for(b=0,w=d.length;b<w;b++)for(var S=m[b],E=0;E<S.length;E++){for(var T=S[E],A=!0,M=0;M<d.length;M++)r(T.p,d[M].p)&&(b!==M&&x.push({froms:b,tos:M,hole:E}),A?(A=!1,p[M].push(T)):_=!0);A&&p[b].push(T)}x.length>0&&(_||(m=p))}g=0;for(var C=d.length;g<C;g++){u=d[g].s,c.push(u);for(var k=0,R=(h=m[g]).length;k<R;k++)u.holes.push(h[k].h)}return c}}),Object.assign(Ef.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var f=Tf(l,i,s,u,n);s+=f.offsetX,a.push(f.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Af.prototype=Object.assign(Object.create(xl.prototype),{constructor:Af,load:function(e,t,n,r){var i=this,o=new wl(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Ef(e)}});var Mf={getContext:function(){return void 0===yf&&(yf=new(window.AudioContext||window.webkitAudioContext)),yf},setContext:function(e){yf=e}};function Cf(e){xl.call(this,e)}function kf(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new jn)}function Rf(e,t){Jl.call(this,void 0,t),this.sh=void 0!==e?e:new kf}function Pf(e,t,n){Rf.call(this,void 0,n);var r=(new hi).set(e),i=(new hi).set(t),o=new jn(r.r,r.g,r.b),a=new jn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Lf(e,t){Rf.call(this,void 0,t);var n=(new hi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Cf.prototype=Object.assign(Object.create(xl.prototype),{constructor:Cf,load:function(e,t,n,r){var i=new wl(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var n=e.slice(0);Mf.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(kf.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(kf,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),Rf.prototype=Object.assign(Object.create(Jl.prototype),{constructor:Rf,isLightProbe:!0,copy:function(e){return Jl.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Jl.prototype.toJSON.call(this,e)}}),Pf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Pf,isHemisphereLightProbe:!0,copy:function(e){return Rf.prototype.copy.call(this,e),this},toJSON:function(e){return Rf.prototype.toJSON.call(this,e)}}),Lf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Lf,isAmbientLightProbe:!0,copy:function(e){return Rf.prototype.copy.call(this,e),this},toJSON:function(e){return Rf.prototype.toJSON.call(this,e)}});var Of=new rr,If=new rr;function Nf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Df(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Nf.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(Nn.DEG2RAD*t.fov*.5)/t.zoom;If.elements[12]=-o,Of.elements[12]=o,n=-s*t.aspect+a,r=s*t.aspect+a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-a,r=s*t.aspect-a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(If),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Of)}}),Object.assign(Df.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Ff=new jn,zf=new Fn,Bf=new jn,jf=new jn;function Vf(){br.call(this),this.type="AudioListener",this.context=Mf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Df}function Uf(e){br.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Vf.prototype=Object.assign(Object.create(br.prototype),{constructor:Vf,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){br.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ff,zf,Bf),jf.set(0,0,-1).applyQuaternion(zf),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ff.x,r),t.positionY.linearRampToValueAtTime(Ff.y,r),t.positionZ.linearRampToValueAtTime(Ff.z,r),t.forwardX.linearRampToValueAtTime(jf.x,r),t.forwardY.linearRampToValueAtTime(jf.y,r),t.forwardZ.linearRampToValueAtTime(jf.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Ff.x,Ff.y,Ff.z),t.setOrientation(jf.x,jf.y,jf.z,n.x,n.y,n.z)}}),Uf.prototype=Object.assign(Object.create(br.prototype),{constructor:Uf,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Gf=new jn,Hf=new Fn,Wf=new jn,qf=new jn;function Yf(e){Uf.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Xf(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function $f(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Yf.prototype=Object.assign(Object.create(Uf.prototype),{constructor:Yf,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(br.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Gf,Hf,Wf),qf.set(0,0,1).applyQuaternion(Hf);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Gf.x,n),t.positionY.linearRampToValueAtTime(Gf.y,n),t.positionZ.linearRampToValueAtTime(Gf.z,n),t.orientationX.linearRampToValueAtTime(qf.x,n),t.orientationY.linearRampToValueAtTime(qf.y,n),t.orientationZ.linearRampToValueAtTime(qf.z,n)}else t.setPosition(Gf.x,Gf.y,Gf.z),t.setOrientation(qf.x,qf.y,qf.z)}}}),Object.assign(Xf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign($f.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Fn.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Zf=new RegExp("[\\[\\]\\.:\\/]","g"),Kf="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Jf=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Qf=/(WCOD+)?/.source.replace("WCOD",Kf),eh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),th=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),nh=new RegExp("^"+Jf+Qf+eh+th+"$"),rh=["material","materials","bones"];function ih(e,t,n){var r=n||oh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function oh(e,t,n){this.path=t,this.parsedPath=n||oh.parseTrackName(t),this.node=oh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ah(){this.uuid=Nn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function sh(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Ut,endingEnd:Ut},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ft,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function uh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ch(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function lh(e,t,n){Ls.call(this,e,t),this.meshPerAttribute=n||1}function fh(e,t,n,r){this.ray=new Yr(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function hh(e,t){return e.distance-t.distance}function ph(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)ph(i[o],t,n,!0)}function dh(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function mh(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(ih.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(oh,{Composite:ih,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new oh.Composite(e,t,n):new oh(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Zf,"")},parseTrackName:function(e){var t=nh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==rh.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(oh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=oh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(oh.prototype,{_getValue_unbound:oh.prototype.getValue,_setValue_unbound:oh.prototype.setValue}),Object.assign(ah.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var f=arguments[c],h=f.uuid,p=r[h];if(void 0===p){p=t++,r[h]=p,e.push(f);for(var d=0,m=s;d!==m;++d)a[d].push(new oh(f,i[d],o[d]))}else if(p<n){u=e[p];var v=--n,g=e[v];r[g.uuid]=p,e[p]=g,r[h]=v,e[v]=f;for(d=0,m=s;d!==m;++d){var y=a[d],_=y[v],x=y[p];y[p]=_,void 0===x&&(x=new oh(f,i[d],o[d])),y[v]=x}}else e[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=t){var l=t++,f=e[l];n[f.uuid]=c,e[c]=f,n[u]=l,e[l]=s;for(var h=0,p=i;h!==p;++h){var d=r[h],m=d[l],v=d[c];d[c]=m,d[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var f=--n,h=e[f],p=e[y=--t];r[h.uuid]=l,e[l]=h,r[p.uuid]=f,e[f]=p,e.pop();for(var d=0,m=o;d!==m;++d){var v=(_=i[d])[f],g=_[y];_[l]=v,_[f]=g,_.pop()}}else{var y;r[(p=e[y=--t]).uuid]=l,e[l]=p,e.pop();for(d=0,m=o;d!==m;++d){var _;(_=i[d])[l]=_[y],_.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var f=c,h=s.length;f!==h;++f){var p=s[f];l[f]=new oh(p,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(sh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,f=u.length;l!==f;++l)u[l].evaluate(a),c[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===zt;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(r===Dt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1===(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:Ut:Ht,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:Ut:Ht)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),uh.prototype=Object.assign(Object.create(Ln.prototype),{constructor:uh,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var f=r[l],h=f.name,p=c[h];if(void 0!==p)o[l]=p;else{if(void 0!==(p=o[l])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var d=t&&t._propertyBindings[l].binding.parsedPath;++(p=new $f(oh.create(n,h,d),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),o[l]=p}a[l].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ol(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?ml.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new sh(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?ml.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ch.prototype.clone=function(){return new ch(void 0===this.value.clone?this.value:this.value.clone())},lh.prototype=Object.assign(Object.create(Ls.prototype),{constructor:lh,isInstancedInterleavedBuffer:!0,copy:function(e){return Ls.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(fh.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return ph(e,this,r,t),r.sort(hh),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)ph(e[i],this,r,t);return r.sort(hh),r}}),Object.assign(dh.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Nn.clamp(t/this.radius,-1,1))),this}}),Object.assign(mh.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var vh=new Dn;function gh(e,t){this.min=void 0!==e?e:new Dn(1/0,1/0),this.max=void 0!==t?t:new Dn(-1/0,-1/0)}Object.assign(gh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=vh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Dn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Dn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Dn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Dn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return vh.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var yh=new jn,_h=new jn;function xh(e,t){this.start=void 0!==e?e:new jn,this.end=void 0!==t?t:new jn}function bh(e){br.call(this),this.material=e,this.render=function(){}}Object.assign(xh.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new jn),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new jn),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new jn),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){yh.subVectors(e,this.start),_h.subVectors(this.end,this.start);var n=_h.dot(_h),r=_h.dot(yh)/n;return t&&(r=Nn.clamp(r,0,1)),r},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new jn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),bh.prototype=Object.create(br.prototype),bh.prototype.constructor=bh,bh.prototype.isImmediateRenderObject=!0;var wh=new jn;function Sh(e,t){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ji,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new ki(r,3));var u=new lu({fog:!1});this.cone=new _u(n,u),this.add(this.cone),this.update()}Sh.prototype=Object.create(br.prototype),Sh.prototype.constructor=Sh,Sh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Sh.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),wh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(wh),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Eh=new jn,Th=new rr,Ah=new rr;function Mh(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new ji,r=[],i=[],o=new hi(0,0,1),a=new hi(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new ki(r,3)),n.setAttribute("color",new ki(i,3));var c=new lu({vertexColors:I,depthTest:!1,depthWrite:!1,transparent:!0});_u.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Ch(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new kc(t,4,2),i=new _i({wireframe:!0,fog:!1});io.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Mh.prototype=Object.create(_u.prototype),Mh.prototype.constructor=Mh,Mh.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Ah.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(Th.multiplyMatrices(Ah,a.matrixWorld),Eh.setFromMatrixPosition(Th),r.setXYZ(o,Eh.x,Eh.y,Eh.z),Th.multiplyMatrices(Ah,a.parent.matrixWorld),Eh.setFromMatrixPosition(Th),r.setXYZ(o+1,Eh.x,Eh.y,Eh.z),o+=2)}n.getAttribute("position").needsUpdate=!0,br.prototype.updateMatrixWorld.call(this,e)},Ch.prototype=Object.create(io.prototype),Ch.prototype.constructor=Ch,Ch.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ch.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var kh=new jn,Rh=new hi,Ph=new hi;function Lh(e,t,n){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new ju(t);r.rotateY(.5*Math.PI),this.material=new _i({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=I);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new bi(o,3)),this.add(new io(r,this.material)),this.update()}function Oh(e,t,n,r){e=e||10,t=t||10,n=new hi(void 0!==n?n:4473924),r=new hi(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],c=0,l=0,f=-a;c<=t;c++,f+=o){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);var h=c===i?n:r;h.toArray(u,l),l+=3,h.toArray(u,l),l+=3,h.toArray(u,l),l+=3,h.toArray(u,l),l+=3}var p=new ji;p.setAttribute("position",new ki(s,3)),p.setAttribute("color",new ki(u,3));var d=new lu({vertexColors:I});_u.call(this,p,d)}function Ih(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new hi(void 0!==i?i:4473924),o=new hi(void 0!==o?o:8947848);var a,s,u,c,l,f,h,p=[],d=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,p.push(0,0,0),p.push(a,0,s),h=1&c?i:o,d.push(h.r,h.g,h.b),d.push(h.r,h.g,h.b);for(c=0;c<=n;c++)for(h=1&c?i:o,f=e-e/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),d.push(h.r,h.g,h.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),d.push(h.r,h.g,h.b);var m=new ji;m.setAttribute("position",new ki(p,3)),m.setAttribute("color",new ki(d,3));var v=new lu({vertexColors:I});_u.call(this,m,v)}Lh.prototype=Object.create(br.prototype),Lh.prototype.constructor=Lh,Lh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Lh.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Rh.copy(this.light.color),Ph.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Rh:Ph;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(kh.setFromMatrixPosition(this.light.matrixWorld).negate())},Oh.prototype=Object.assign(Object.create(_u.prototype),{constructor:Oh,copy:function(e){return _u.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Ih.prototype=Object.create(_u.prototype),Ih.prototype.constructor=Ih;var Nh=new jn,Dh=new jn,Fh=new jn;function zh(e,t,n){br.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new ji;r.setAttribute("position",new ki([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new lu({fog:!1});this.lightPlane=new vu(r,i),this.add(this.lightPlane),(r=new ji).setAttribute("position",new ki([0,0,0,0,0,1],3)),this.targetLine=new vu(r,i),this.add(this.targetLine),this.update()}zh.prototype=Object.create(br.prototype),zh.prototype.constructor=zh,zh.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},zh.prototype.update=function(){Nh.setFromMatrixPosition(this.light.matrixWorld),Dh.setFromMatrixPosition(this.light.target.matrixWorld),Fh.subVectors(Dh,Nh),this.lightPlane.lookAt(Dh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dh),this.targetLine.scale.z=Fh.length()};var Bh=new jn,jh=new _o;function Vh(e){var t=new ji,n=new lu({color:16777215,vertexColors:O}),r=[],i=[],o={},a=new hi(16755200),s=new hi(16711680),u=new hi(43775),c=new hi(16777215),l=new hi(3355443);function f(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}f("n1","n2",a),f("n2","n4",a),f("n4","n3",a),f("n3","n1",a),f("f1","f2",a),f("f2","f4",a),f("f4","f3",a),f("f3","f1",a),f("n1","f1",a),f("n2","f2",a),f("n3","f3",a),f("n4","f4",a),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",u),f("u2","u3",u),f("u3","u1",u),f("c","t",c),f("p","c",l),f("cn1","cn2",l),f("cn3","cn4",l),f("cf1","cf2",l),f("cf3","cf4",l),t.setAttribute("position",new ki(r,3)),t.setAttribute("color",new ki(i,3)),_u.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Uh(e,t,n,r,i,o,a){Bh.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],Bh.x,Bh.y,Bh.z)}Vh.prototype=Object.create(_u.prototype),Vh.prototype.constructor=Vh,Vh.prototype.update=function(){var e=this.geometry,t=this.pointMap;jh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Uh("c",t,e,jh,0,0,-1),Uh("t",t,e,jh,0,0,1),Uh("n1",t,e,jh,-1,-1,-1),Uh("n2",t,e,jh,1,-1,-1),Uh("n3",t,e,jh,-1,1,-1),Uh("n4",t,e,jh,1,1,-1),Uh("f1",t,e,jh,-1,-1,1),Uh("f2",t,e,jh,1,-1,1),Uh("f3",t,e,jh,-1,1,1),Uh("f4",t,e,jh,1,1,1),Uh("u1",t,e,jh,.7,1.1,-1),Uh("u2",t,e,jh,-.7,1.1,-1),Uh("u3",t,e,jh,0,2,-1),Uh("cf1",t,e,jh,-1,0,1),Uh("cf2",t,e,jh,1,0,1),Uh("cf3",t,e,jh,0,-1,1),Uh("cf4",t,e,jh,0,1,1),Uh("cn1",t,e,jh,-1,0,-1),Uh("cn2",t,e,jh,1,0,-1),Uh("cn3",t,e,jh,0,-1,-1),Uh("cn4",t,e,jh,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Gh=new Dr;function Hh(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ji;i.setIndex(new bi(n,1)),i.setAttribute("position",new bi(r,3)),_u.call(this,i,new lu({color:t})),this.matrixAutoUpdate=!1,this.update()}function Wh(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ji;r.setIndex(new bi(n,1)),r.setAttribute("position",new ki([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),_u.call(this,r,new lu({color:t})),this.geometry.computeBoundingSphere()}function qh(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new ji;i.setAttribute("position",new ki([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),vu.call(this,i,new lu({color:r}));var o=new ji;o.setAttribute("position",new ki([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new io(o,new _i({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}Hh.prototype=Object.create(_u.prototype),Hh.prototype.constructor=Hh,Hh.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Gh.setFromObject(this.object),!Gh.isEmpty()){var t=Gh.min,n=Gh.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Hh.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Hh.prototype.copy=function(e){return _u.prototype.copy.call(this,e),this.object=e.object,this},Hh.prototype.clone=function(){return(new this.constructor).copy(this)},Wh.prototype=Object.create(_u.prototype),Wh.prototype.constructor=Wh,Wh.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),br.prototype.updateMatrixWorld.call(this,e))},qh.prototype=Object.create(vu.prototype),qh.prototype.constructor=qh,qh.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?C:M,this.lookAt(this.plane.normal),br.prototype.updateMatrixWorld.call(this,e)};var Yh,Xh,$h=new jn;function Zh(e,t,n,r,i,o){br.call(this),void 0===e&&(e=new jn(0,0,1)),void 0===t&&(t=new jn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Yh&&((Yh=new ji).setAttribute("position",new ki([0,0,0,0,1,0],3)),(Xh=new Bc(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new vu(Yh,new lu({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new io(Xh,new _i({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Kh(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ji;n.setAttribute("position",new ki(t,3)),n.setAttribute("color",new ki([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new lu({vertexColors:I});_u.call(this,n,r)}Zh.prototype=Object.create(br.prototype),Zh.prototype.constructor=Zh,Zh.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$h.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle($h,t)}},Zh.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Zh.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Zh.prototype.copy=function(e){return br.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Zh.prototype.clone=function(){return(new this.constructor).copy(this)},Kh.prototype=Object.create(_u.prototype),Kh.prototype.constructor=Kh;var Jh=Math.pow(2,8),Qh=[.125,.215,.35,.446,.526,.582],ep=5+Qh.length,tp=(r(p={},Xt,0),r(p,$t,1),r(p,Kt,2),r(p,Qt,3),r(p,en,4),r(p,tn,5),r(p,Zt,6),p),np=new af,rp=function(e){var t=new Float32Array(e),n=new jn(0,1,0),r=new qc({defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:tp[Xt]},outputEncoding:{value:tp[Xt]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:N,depthTest:!1,depthWrite:!1});return r.type="SphericalGaussianBlur",r}(20),ip=null,op=null,ap=function(){for(var e=[],t=[],n=[],r=8,i=0;i<ep;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;i>4?a=Qh[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],f=new Float32Array(108),h=new Float32Array(72),p=new Float32Array(36),d=0;d<6;d++){var m=d%3*2/3-1,v=d>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];f.set(g,18*d),h.set(l,12*d);var y=[d,d,d,d,d,d];p.set(y,6*d)}var _=new ji;_.setAttribute("position",new bi(f,3)),_.setAttribute("uv",new bi(h,2)),_.setAttribute("faceIndex",new bi(p,1)),e.push(_),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),sp=ap._lodPlanes,up=ap._sizeLods,cp=ap._sigmas,lp=null,fp=null,hp=(1+Math.sqrt(5))/2,pp=1/hp,dp=[new jn(1,1,1),new jn(-1,1,1),new jn(1,1,-1),new jn(-1,1,-1),new jn(0,hp,pp),new jn(0,hp,-pp),new jn(pp,0,hp),new jn(-pp,0,hp),new jn(hp,pp,0),new jn(-hp,pp,0)];function mp(e){fp=e,_p(rp)}function vp(e){var t={magFilter:Pe,minFilter:Pe,generateMipmaps:!1,type:e?e.type:Ve,format:e?e.format:it,encoding:e?e.encoding:Kt,depthBuffer:!1,stencilBuffer:!1},n=xp(t);return n.depthBuffer=!e,lp=xp(t),n}function gp(){lp.dispose(),fp.setRenderTarget(null);var e=fp.getSize(new Dn);fp.setViewport(0,0,e.x,e.y)}function yp(e,t,n,r){var i=new xo(90,1,t,n),o=[1,1,1,1,-1,1],a=[1,1,-1,-1,-1,1],s=fp.outputEncoding,u=fp.toneMapping,c=fp.toneMappingExposure,l=fp.getClearColor(),f=fp.getClearAlpha();fp.toneMapping=me,fp.toneMappingExposure=1,fp.outputEncoding=Xt,e.scale.z*=-1;var h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();var p=Math.max(h.r,h.g,h.b),d=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);h=h.multiplyScalar(Math.pow(2,-d));var m=(d+128)/255;fp.setClearColor(h,m),e.background=null}fp.setRenderTarget(r);for(var v=0;v<6;v++){var g=v%3;0==g?(i.up.set(0,o[v],0),i.lookAt(a[v],0,0)):1==g?(i.up.set(0,0,o[v]),i.lookAt(0,a[v],0)):(i.up.set(0,o[v],0),i.lookAt(0,0,a[v])),bp(g*Jh,v>2?Jh:0,Jh,Jh),fp.render(e,i)}fp.toneMapping=u,fp.toneMappingExposure=c,fp.outputEncoding=s,fp.setClearColor(l,f),e.scale.z*=-1}function _p(e){var t=new wr;t.add(new io(sp[0],e)),fp.compile(t,np)}function xp(e){var t=new Xn(3*Jh,3*Jh,e);return t.texture.mapping=Ae,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function bp(e,t,n,r){var i=1/fp.getPixelRatio();e*=i,t*=i,n*=i,r*=i,fp.setViewport(e,t,n,r),fp.setScissor(e,t,n,r)}function wp(e){var t=fp.autoClear;fp.autoClear=!1;for(var n=1;n<ep;n++){Sp(e,n-1,n,Math.sqrt(cp[n]*cp[n]-cp[n-1]*cp[n-1]),dp[(n-1)%dp.length])}fp.autoClear=t}function Sp(e,t,n,r,i){Ep(e,lp,t,n,r,"latitudinal",i),Ep(lp,e,n,n,r,"longitudinal",i)}function Ep(e,t,n,r,i,o,a){"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new wr;s.add(new io(sp[r],rp));var u=rp.uniforms,c=up[n]-1,l=isFinite(i)?Math.PI/(2*c):2*Math.PI/39,f=i/l,h=isFinite(i)?1+Math.floor(3*f):20;h>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(h," samples when the maximum is set to ").concat(20));for(var p=[],d=0,m=0;m<20;++m){var v=m/f,g=Math.exp(-v*v/2);p.push(g),0==m?d+=g:m<h&&(d+=2*g)}for(m=0;m<p.length;m++)p[m]=p[m]/d;u.envMap.value=e.texture,u.samples.value=h,u.weights.value=p,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=l,u.mipInt.value=8-n,u.inputEncoding.value=tp[e.texture.encoding],u.outputEncoding.value=tp[e.texture.encoding];var y=up[r],_=(v=3*Math.max(0,Jh-2*y),(0===r?0:2*Jh)+2*y*(r>4?r-8+4:0));fp.setRenderTarget(t),bp(v,_,3*y,2*y),fp.render(s,np)}function Tp(){var e=new qc({uniforms:{envMap:{value:null},texelSize:{value:new Dn(1,1)},inputEncoding:{value:tp[Xt]},outputEncoding:{value:tp[Xt]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:N,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function Ap(){var e=new qc({uniforms:{envMap:{value:null},inputEncoding:{value:tp[Xt]},outputEncoding:{value:tp[Xt]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n".concat("\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t","\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t"),blending:N,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Mp(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new vi(e,t,n,i,o,a)}mp.prototype={constructor:mp,fromScene:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=vp();return yp(e,n,r,i),t>0&&Sp(i,0,0,t),wp(i),gp(),i.scissorTest=!1,i},fromEquirectangular:function(e){return e.magFilter=Pe,e.minFilter=Pe,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){var t=vp(e);return function(e,t){var n=new wr;e.isCubeTexture?null==op&&(op=Ap()):null==ip&&(ip=Tp());var r=e.isCubeTexture?op:ip;n.add(new io(sp[0],r));var i=r.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height);i.inputEncoding.value=tp[e.encoding],i.outputEncoding.value=tp[e.encoding],fp.setRenderTarget(t),bp(0,0,3*Jh,2*Jh),fp.render(n,np)}(e,t),wp(t),gp(),t.scissorTest=!1,t},compileCubemapShader:function(){null==op&&_p(op=Ap())},compileEquirectangularShader:function(){null==ip&&_p(ip=Tp())},dispose:function(){rp.dispose(),null!=op&&op.dispose(),null!=ip&&ip.dispose();for(var e=0;e<sp.length;e++)sp[e].dispose()}};var Cp=0,kp=1;function Rp(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Pp(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Lp(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Au(e,t)}function Op(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new $s(e)}function Ip(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Au(e,t)}function Np(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new bu(e)}function Dp(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new bu(e)}function Fp(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new bu(e)}function zp(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new jn(e,t,n)}function Bp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new bi(e,t).setDynamic(!0)}function jp(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new wi(e,t)}function Vp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Si(e,t)}function Up(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ei(e,t)}function Gp(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ti(e,t)}function Hp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ai(e,t)}function Wp(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Mi(e,t)}function qp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ci(e,t)}function Yp(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ki(e,t)}function Xp(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ri(e,t)}function $p(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fl.call(this,e),this.type="catmullrom",this.closed=!0}function Zp(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Fl.call(this,e),this.type="catmullrom"}function Kp(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Fl.call(this,e),this.type="catmullrom"}function Jp(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Kh(e)}function Qp(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Hh(e,t)}function ed(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _u(new Fc(e.geometry),new lu({color:void 0!==t?t:16777215}))}function td(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _u(new Lu(e.geometry),new lu({color:void 0!==t?t:16777215}))}function nd(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new wl(e)}function rd(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Tl(e)}kl.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(kl.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign($l.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new fo,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new jn(i.x,i.y,i.z||0))}return t}}),Object.assign(Zl.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),$p.prototype=Object.create(Fl.prototype),Zp.prototype=Object.create(Fl.prototype),Kp.prototype=Object.create(Fl.prototype),Object.assign(Kp.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Oh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Mh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(xl.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hf.extractUrlBase(e)}}),xl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(gf.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(gh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Dr.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),xh.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Nn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Nn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Nn.ceilPowerOfTwo(e)}}),Object.assign(Gn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(rr.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new jn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Kr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Fn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Yr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ui.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ui,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ui.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ui.getNormal(e,t,n,r)}}),Object.assign(Kl.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new wc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ic(this,e)}}),Object.assign(Dn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Yn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(fo.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(br.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(br.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(io.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(io.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Wt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Qs.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ru.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),eu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(kl.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),xo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Jl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(bi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(bi.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Sn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ji.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new bi(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)}}),Object.defineProperties(ji.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ls.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Ls.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Sn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Sc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ch.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(yi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new hi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===R}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties($c.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(yo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(ks.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(ks.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?$t:Xt}}}),Object.defineProperties(xs.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(wo.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Xn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Uf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Cf).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Xf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},bo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var id={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function od(){console.error("THREE.CanvasRenderer has been removed")}function ad(){console.error("THREE.JSONLoader has been removed.")}Hn.crossOrigin=void 0,Hn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Cl;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Hn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ml;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Hn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Hn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var sd={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function ud(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}}))},function(e,t,n){"use strict";e.exports=n(544)},function(e,t,n){(function(e,r){var i;(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",m="[object Map]",v="[object Number]",g="[object Object]",y="[object RegExp]",_="[object Set]",x="[object String]",b="[object Symbol]",w="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",T="[object Float32Array]",A="[object Float64Array]",M="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",R="[object Uint8Array]",P="[object Uint16Array]",L="[object Uint32Array]",O=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,z=RegExp(D.source),B=RegExp(F.source),j=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(q.source),X=/^\s+|\s+$/g,$=/^\s+/,Z=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="[\\ud800-\\udfff]",me="["+pe+"]",ve="["+he+"]",ge="\\d+",ye="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",xe="[^\\ud800-\\udfff"+pe+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",be="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",Ee="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ae="(?:"+_e+"|"+xe+")",Me="(?:"+Te+"|"+xe+")",Ce="(?:"+ve+"|"+be+")"+"?",ke="[\\ufe0e\\ufe0f]?"+Ce+("(?:\\u200d(?:"+[we,Se,Ee].join("|")+")[\\ufe0e\\ufe0f]?"+Ce+")*"),Re="(?:"+[ye,Se,Ee].join("|")+")"+ke,Pe="(?:"+[we+ve+"?",ve,Se,Ee,de].join("|")+")",Le=RegExp("['\u2019]","g"),Oe=RegExp(ve,"g"),Ie=RegExp(be+"(?="+be+")|"+Pe+ke,"g"),Ne=RegExp([Te+"?"+_e+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[me,Te,"$"].join("|")+")",Me+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[me,Te+Ae,"$"].join("|")+")",Te+"?"+Ae+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Te+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Re].join("|"),"g"),De=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Be=-1,je={};je[T]=je[A]=je[M]=je[C]=je[k]=je[R]=je["[object Uint8ClampedArray]"]=je[P]=je[L]=!0,je[u]=je[c]=je[S]=je[l]=je[E]=je[f]=je[h]=je[p]=je[m]=je[v]=je[g]=je[y]=je[_]=je[x]=je[w]=!1;var Ve={};Ve[u]=Ve[c]=Ve[S]=Ve[E]=Ve[l]=Ve[f]=Ve[T]=Ve[A]=Ve[M]=Ve[C]=Ve[k]=Ve[m]=Ve[v]=Ve[g]=Ve[y]=Ve[_]=Ve[x]=Ve[b]=Ve[R]=Ve["[object Uint8ClampedArray]"]=Ve[P]=Ve[L]=!0,Ve[h]=Ve[p]=Ve[w]=!1;var Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,He=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,qe="object"==typeof self&&self&&self.Object===Object&&self,Ye=We||qe||Function("return this")(),Xe=t&&!t.nodeType&&t,$e=Xe&&"object"==typeof r&&r&&!r.nodeType&&r,Ze=$e&&$e.exports===Xe,Ke=Ze&&We.process,Je=function(){try{var e=$e&&$e.require&&$e.require("util").types;return e||Ke&&Ke.binding&&Ke.binding("util")}catch(t){}}(),Qe=Je&&Je.isArrayBuffer,et=Je&&Je.isDate,tt=Je&&Je.isMap,nt=Je&&Je.isRegExp,rt=Je&&Je.isSet,it=Je&&Je.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ft(e,t){return!!(null==e?0:e.length)&&bt(e,t,0)>-1}function ht(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function vt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function gt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=Tt("length");function _t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function xt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function bt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):xt(e,St,n)}function wt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function St(e){return e!==e}function Et(e,t){var n=null==e?0:e.length;return n?Ct(e,t)/n:NaN}function Tt(e){return function(t){return null==t?void 0:t[e]}}function At(e){return function(t){return null==e?void 0:e[t]}}function Mt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ct(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Rt(e){return function(t){return e(t)}}function Pt(e,t){return pt(t,(function(t){return e[t]}))}function Lt(e,t){return e.has(t)}function Ot(e,t){for(var n=-1,r=e.length;++n<r&&bt(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Dt=At({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ft=At({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zt(e){return"\\"+Ue[e]}function Bt(e){return De.test(e)}function jt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Vt(e,t){return function(n){return e(t(n))}}function Ut(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Wt(e){return Bt(e)?function(e){var t=Ie.lastIndex=0;for(;Ie.test(e);)++t;return t}(e):yt(e)}function qt(e){return Bt(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split("")}(e)}var Yt=At({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Xt=function e(t){var n=(t=null==t?Ye:Xt.defaults(Ye.Object(),t,Xt.pick(Ye,ze))).Array,r=t.Date,i=t.Error,he=t.Function,pe=t.Math,de=t.Object,me=t.RegExp,ve=t.String,ge=t.TypeError,ye=n.prototype,_e=he.prototype,xe=de.prototype,be=t["__core-js_shared__"],we=_e.toString,Se=xe.hasOwnProperty,Ee=0,Te=function(){var e=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ae=xe.toString,Me=we.call(de),Ce=Ye._,ke=me("^"+we.call(Se).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ze?t.Buffer:void 0,Pe=t.Symbol,Ie=t.Uint8Array,De=Re?Re.allocUnsafe:void 0,Ue=Vt(de.getPrototypeOf,de),We=de.create,qe=xe.propertyIsEnumerable,Xe=ye.splice,$e=Pe?Pe.isConcatSpreadable:void 0,Ke=Pe?Pe.iterator:void 0,Je=Pe?Pe.toStringTag:void 0,yt=function(){try{var e=Ji(de,"defineProperty");return e({},"",{}),e}catch(t){}}(),At=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,$t=r&&r.now!==Ye.Date.now&&r.now,Zt=t.setTimeout!==Ye.setTimeout&&t.setTimeout,Kt=pe.ceil,Jt=pe.floor,Qt=de.getOwnPropertySymbols,en=Re?Re.isBuffer:void 0,tn=t.isFinite,nn=ye.join,rn=Vt(de.keys,de),on=pe.max,an=pe.min,sn=r.now,un=t.parseInt,cn=pe.random,ln=ye.reverse,fn=Ji(t,"DataView"),hn=Ji(t,"Map"),pn=Ji(t,"Promise"),dn=Ji(t,"Set"),mn=Ji(t,"WeakMap"),vn=Ji(de,"create"),gn=mn&&new mn,yn={},_n=Ao(fn),xn=Ao(hn),bn=Ao(pn),wn=Ao(dn),Sn=Ao(mn),En=Pe?Pe.prototype:void 0,Tn=En?En.valueOf:void 0,An=En?En.toString:void 0;function Mn(e){if(Ga(e)&&!La(e)&&!(e instanceof Pn)){if(e instanceof Rn)return e;if(Se.call(e,"__wrapped__"))return Mo(e)}return new Rn(e)}var Cn=function(){function e(){}return function(t){if(!Ua(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function kn(){}function Rn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Pn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function On(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new In;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new On(e);this.size=t.size}function Fn(e,t){var n=La(e),r=!n&&Pa(e),i=!n&&!r&&Da(e),o=!n&&!r&&!i&&Ka(e),a=n||r||i||o,s=a?kt(e.length,ve):[],u=s.length;for(var c in e)!t&&!Se.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||oo(c,u))||s.push(c);return s}function zn(e){var t=e.length;return t?e[Nr(0,t-1)]:void 0}function Bn(e,t){return So(vi(e),Xn(t,0,e.length))}function jn(e){return So(vi(e))}function Vn(e,t,n){(void 0!==n&&!Ca(e[t],n)||void 0===n&&!(t in e))&&qn(e,t,n)}function Un(e,t,n){var r=e[t];Se.call(e,t)&&Ca(r,n)&&(void 0!==n||t in e)||qn(e,t,n)}function Gn(e,t){for(var n=e.length;n--;)if(Ca(e[n][0],t))return n;return-1}function Hn(e,t,n,r){return Qn(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Wn(e,t){return e&&gi(t,_s(t),e)}function qn(e,t,n){"__proto__"==t&&yt?yt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Yn(e,t){for(var r=-1,i=t.length,o=n(i),a=null==e;++r<i;)o[r]=a?void 0:ds(e,t[r]);return o}function Xn(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function $n(e,t,n,r,i,o){var a,s=1&t,c=2&t,h=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Ua(e))return e;var w=La(e);if(w){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return vi(e,a)}else{var O=to(e),I=O==p||O==d;if(Da(e))return li(e,s);if(O==g||O==u||I&&!i){if(a=c||I?{}:ro(e),!s)return c?function(e,t){return gi(e,eo(e),t)}(e,function(e,t){return e&&gi(t,xs(t),e)}(a,e)):function(e,t){return gi(e,Qi(e),t)}(e,Wn(a,e))}else{if(!Ve[O])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case S:return fi(e);case l:case f:return new r(+e);case E:return function(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case A:case M:case C:case k:case R:case"[object Uint8ClampedArray]":case P:case L:return hi(e,n);case m:return new r;case v:case x:return new r(e);case y:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case b:return i=e,Tn?de(Tn.call(i)):{}}var i}(e,O,s)}}o||(o=new Dn);var N=o.get(e);if(N)return N;o.set(e,a),Xa(e)?e.forEach((function(r){a.add($n(r,t,n,r,e,o))})):Ha(e)&&e.forEach((function(r,i){a.set(i,$n(r,t,n,i,e,o))}));var D=w?void 0:(h?c?Wi:Hi:c?xs:_s)(e);return st(D||e,(function(r,i){D&&(r=e[i=r]),Un(a,i,$n(r,t,n,i,e,o))})),a}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=de(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Kn(e,t,n){if("function"!=typeof e)throw new ge(o);return _o((function(){e.apply(void 0,n)}),t)}function Jn(e,t,n,r){var i=-1,o=ft,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=pt(t,Rt(n))),r?(o=ht,a=!1):t.length>=200&&(o=Lt,a=!1,t=new Nn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}Mn.templateSettings={escape:j,evaluate:V,interpolate:U,variable:"",imports:{_:Mn}},Mn.prototype=kn.prototype,Mn.prototype.constructor=Mn,Rn.prototype=Cn(kn.prototype),Rn.prototype.constructor=Rn,Pn.prototype=Cn(kn.prototype),Pn.prototype.constructor=Pn,Ln.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ln.prototype.get=function(e){var t=this.__data__;if(vn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},Ln.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:Se.call(t,e)},Ln.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},On.prototype.clear=function(){this.__data__=[],this.size=0},On.prototype.delete=function(e){var t=this.__data__,n=Gn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},On.prototype.get=function(e){var t=this.__data__,n=Gn(t,e);return n<0?void 0:t[n][1]},On.prototype.has=function(e){return Gn(this.__data__,e)>-1},On.prototype.set=function(e,t){var n=this.__data__,r=Gn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},In.prototype.clear=function(){this.size=0,this.__data__={hash:new Ln,map:new(hn||On),string:new Ln}},In.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},In.prototype.get=function(e){return Zi(this,e).get(e)},In.prototype.has=function(e){return Zi(this,e).has(e)},In.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Nn.prototype.add=Nn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new On,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof On){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new In(r)}return n.set(e,t),this.size=n.size,this};var Qn=xi(sr),er=xi(ur,!0);function tr(e,t){var n=!0;return Qn(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function nr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a===a&&!Za(a):n(a,s)))var s=a,u=o}return u}function rr(e,t){var n=[];return Qn(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ir(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=io),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?ir(s,t-1,n,r,i):dt(i,s):r||(i[i.length]=s)}return i}var or=bi(),ar=bi(!0);function sr(e,t){return e&&or(e,t,_s)}function ur(e,t){return e&&ar(e,t,_s)}function cr(e,t){return lt(t,(function(t){return Ba(e[t])}))}function lr(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[To(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return La(e)?r:dt(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Je&&Je in de(e)?function(e){var t=Se.call(e,Je),n=e[Je];try{e[Je]=void 0;var r=!0}catch(o){}var i=Ae.call(e);r&&(t?e[Je]=n:delete e[Je]);return i}(e):function(e){return Ae.call(e)}(e)}function pr(e,t){return e>t}function dr(e,t){return null!=e&&Se.call(e,t)}function mr(e,t){return null!=e&&t in de(e)}function vr(e,t,r){for(var i=r?ht:ft,o=e[0].length,a=e.length,s=a,u=n(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=pt(f,Rt(t))),c=an(f.length,c),u[s]=!r&&(t||o>=120&&f.length>=120)?new Nn(s&&f):void 0}f=e[0];var h=-1,p=u[0];e:for(;++h<o&&l.length<c;){var d=f[h],m=t?t(d):d;if(d=r||0!==d?d:0,!(p?Lt(p,m):i(l,m,r))){for(s=a;--s;){var v=u[s];if(!(v?Lt(v,m):i(e[s],m,r)))continue e}p&&p.push(m),l.push(d)}}return l}function gr(e,t,n){var r=null==(e=mo(e,t=ai(t,e)))?e:e[To(zo(t))];return null==r?void 0:ot(r,e,n)}function yr(e){return Ga(e)&&hr(e)==u}function _r(e,t,n,r,i){return e===t||(null==e||null==t||!Ga(e)&&!Ga(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var a=La(e),s=La(t),p=a?c:to(e),d=s?c:to(t),w=(p=p==u?g:p)==g,T=(d=d==u?g:d)==g,A=p==d;if(A&&Da(e)){if(!Da(t))return!1;a=!0,w=!1}if(A&&!w)return o||(o=new Dn),a||Ka(e)?Ui(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new Ie(e),new Ie(t)));case l:case f:case v:return Ca(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case x:return e==t+"";case m:var s=jt;case _:var u=1&r;if(s||(s=Gt),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var p=Ui(s(e),s(t),r,i,o,a);return a.delete(e),p;case b:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,p,n,r,i,o);if(!(1&n)){var M=w&&Se.call(e,"__wrapped__"),C=T&&Se.call(t,"__wrapped__");if(M||C){var k=M?e.value():e,R=C?t.value():t;return o||(o=new Dn),i(k,R,n,r,o)}}if(!A)return!1;return o||(o=new Dn),function(e,t,n,r,i,o){var a=1&n,s=Hi(e),u=s.length,c=Hi(t).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in t:Se.call(t,f)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var d=!0;o.set(e,t),o.set(t,e);var m=a;for(;++l<u;){f=s[l];var v=e[f],g=t[f];if(r)var y=a?r(g,v,f,t,e,o):r(v,g,f,e,t,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){d=!1;break}m||(m="constructor"==f)}if(d&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,o)}(e,t,n,r,_r,i))}function xr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=de(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Dn;if(r)var h=r(c,l,u,e,t,f);if(!(void 0===h?_r(l,c,3,r,f):h))return!1}}return!0}function br(e){return!(!Ua(e)||(t=e,Te&&Te in t))&&(Ba(e)?ke:ae).test(Ao(e));var t}function wr(e){return"function"==typeof e?e:null==e?Ws:"object"==typeof e?La(e)?Cr(e[0],e[1]):Mr(e):eu(e)}function Sr(e){if(!lo(e))return rn(e);var t=[];for(var n in de(e))Se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Er(e){if(!Ua(e))return function(e){var t=[];if(null!=e)for(var n in de(e))t.push(n);return t}(e);var t=lo(e),n=[];for(var r in e)("constructor"!=r||!t&&Se.call(e,r))&&n.push(r);return n}function Tr(e,t){return e<t}function Ar(e,t){var r=-1,i=Ia(e)?n(e.length):[];return Qn(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Mr(e){var t=Ki(e);return 1==t.length&&t[0][2]?ho(t[0][0],t[0][1]):function(n){return n===e||xr(n,e,t)}}function Cr(e,t){return so(e)&&fo(t)?ho(To(e),t):function(n){var r=ds(n,e);return void 0===r&&r===t?ms(n,e):_r(t,r,3)}}function kr(e,t,n,r,i){e!==t&&or(t,(function(o,a){if(i||(i=new Dn),Ua(o))!function(e,t,n,r,i,o,a){var s=go(e,n),u=go(t,n),c=a.get(u);if(c)return void Vn(e,n,c);var l=o?o(s,u,n+"",e,t,a):void 0,f=void 0===l;if(f){var h=La(u),p=!h&&Da(u),d=!h&&!p&&Ka(u);l=u,h||p||d?La(s)?l=s:Na(s)?l=vi(s):p?(f=!1,l=li(u,!0)):d?(f=!1,l=hi(u,!0)):l=[]:qa(u)||Pa(u)?(l=s,Pa(s)?l=os(s):Ua(s)&&!Ba(s)||(l=ro(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));Vn(e,n,l)}(e,t,a,n,kr,r,i);else{var s=r?r(go(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Vn(e,a,s)}}),xs)}function Rr(e,t){var n=e.length;if(n)return oo(t+=t<0?n:0,n)?e[t]:void 0}function Pr(e,t,n){t=t.length?pt(t,(function(e){return La(e)?function(t){return lr(t,1===e.length?e[0]:e)}:e})):[Ws];var r=-1;return t=pt(t,Rt($i())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ar(e,(function(e,n,i){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=pi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Lr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=lr(e,a);n(s,a)&&jr(o,ai(a,e),s)}return o}function Or(e,t,n,r){var i=r?wt:bt,o=-1,a=t.length,s=e;for(e===t&&(t=vi(t)),n&&(s=pt(e,Rt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Xe.call(s,u,1),Xe.call(e,u,1);return e}function Ir(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;oo(i)?Xe.call(e,i,1):Jr(e,i)}}return e}function Nr(e,t){return e+Jt(cn()*(t-e+1))}function Dr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return xo(po(e,t,Ws),e+"")}function zr(e){return zn(Cs(e))}function Br(e,t){var n=Cs(e);return So(n,Xn(t,0,n.length))}function jr(e,t,n,r){if(!Ua(e))return e;for(var i=-1,o=(t=ai(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=To(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Ua(l)?l:oo(t[i+1])?[]:{})}Un(s,u,c),s=s[u]}return e}var Vr=gn?function(e,t){return gn.set(e,t),e}:Ws,Ur=yt?function(e,t){return yt(e,"toString",{configurable:!0,enumerable:!1,value:Us(t),writable:!0})}:Ws;function Gr(e){return So(Cs(e))}function Hr(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function Wr(e,t){var n;return Qn(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function qr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Za(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Yr(e,t,Ws,n)}function Yr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,s=null===t,u=Za(t),c=void 0===t;i<o;){var l=Jt((i+o)/2),f=n(e[l]),h=void 0!==f,p=null===f,d=f===f,m=Za(f);if(a)var v=r||d;else v=c?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!m):!p&&!m&&(r?f<=t:f<t);v?i=l+1:o=l}return an(o,4294967294)}function Xr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ca(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function $r(e){return"number"==typeof e?e:Za(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(La(e))return pt(e,Zr)+"";if(Za(e))return An?An.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Kr(e,t,n){var r=-1,i=ft,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=ht;else if(o>=200){var c=t?null:Di(e);if(c)return Gt(c);a=!1,i=Lt,u=new Nn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function Jr(e,t){return null==(e=mo(e,t=ai(t,e)))||delete e[To(zo(t))]}function Qr(e,t,n,r){return jr(e,t,n(lr(e,t)),r)}function ei(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Hr(e,r?0:o,r?o+1:i):Hr(e,r?o+1:0,r?i:o)}function ti(e,t){var n=e;return n instanceof Pn&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))}),n)}function ni(e,t,r){var i=e.length;if(i<2)return i?Kr(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Jn(a[o]||s,e[u],t,r));return Kr(ir(a,1),t,r)}function ri(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function ii(e){return Na(e)?e:[]}function oi(e){return"function"==typeof e?e:Ws}function ai(e,t){return La(e)?e:so(e,t)?[e]:Eo(as(e))}var si=Fr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var ci=At||function(e){return Ye.clearTimeout(e)};function li(e,t){if(t)return e.slice();var n=e.length,r=De?De(n):new e.constructor(n);return e.copy(r),r}function fi(e){var t=new e.constructor(e.byteLength);return new Ie(t).set(new Ie(e)),t}function hi(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=Za(e),a=void 0!==t,s=null===t,u=t===t,c=Za(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function di(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=on(a-s,0),f=n(c+l),h=!i;++u<c;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[r[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function mi(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,f=on(a-u,0),h=n(f+l),p=!i;++o<f;)h[o]=e[o];for(var d=o;++c<l;)h[d+c]=t[c];for(;++s<u;)(p||o<a)&&(h[d+r[s]]=e[o++]);return h}function vi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function gi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?qn(n,s,u):Un(n,s,u)}return n}function yi(e,t){return function(n,r){var i=La(n)?at:Hn,o=t?t():{};return i(n,e,$i(r,2),o)}}function _i(e){return Fr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&ao(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=de(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function xi(e,t){return function(n,r){if(null==n)return n;if(!Ia(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=de(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function bi(e){return function(t,n,r){for(var i=-1,o=de(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function wi(e){return function(t){var n=Bt(t=as(t))?qt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function Si(e){return function(t){return mt(Bs(Ps(t).replace(Le,"")),e,"")}}function Ei(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Cn(e.prototype),r=e.apply(n,t);return Ua(r)?r:n}}function Ti(e){return function(t,n,r){var i=de(t);if(!Ia(t)){var o=$i(n,3);t=_s(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Ai(e){return Gi((function(t){var n=t.length,r=n,i=Rn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ge(o);if(i&&!s&&"wrapper"==Yi(a))var s=new Rn([],!0)}for(r=s?r:n;++r<n;){var u=Yi(a=t[r]),c="wrapper"==u?qi(a):void 0;s=c&&uo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Yi(c[0])].apply(s,c[3]):1==a.length&&uo(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&La(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Mi(e,t,r,i,o,a,s,u,c,l){var f=128&t,h=1&t,p=2&t,d=24&t,m=512&t,v=p?void 0:Ei(e);return function g(){for(var y=arguments.length,_=n(y),x=y;x--;)_[x]=arguments[x];if(d)var b=Xi(g),w=Nt(_,b);if(i&&(_=di(_,i,o,d)),a&&(_=mi(_,a,s,d)),y-=w,d&&y<l){var S=Ut(_,b);return Ii(e,t,Mi,g.placeholder,r,_,S,u,c,l-y)}var E=h?r:this,T=p?E[e]:e;return y=_.length,u?_=vo(_,u):m&&y>1&&_.reverse(),f&&c<y&&(_.length=c),this&&this!==Ye&&this instanceof g&&(T=v||Ei(T)),T.apply(E,_)}}function Ci(e,t){return function(n,r){return function(e,t,n,r){return sr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function ki(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=$r(n),r=$r(r)),i=e(n,r)}return i}}function Ri(e){return Gi((function(t){return t=pt(t,Rt($i())),Fr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function Pi(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Dr(t,e):t;var r=Dr(t,Kt(e/Wt(t)));return Bt(t)?ui(qt(r),0,e).join(""):r.slice(0,e)}function Li(e){return function(t,r,i){return i&&"number"!=typeof i&&ao(t,r,i)&&(r=i=void 0),t=ts(t),void 0===r?(r=t,t=0):r=ts(r),function(e,t,r,i){for(var o=-1,a=on(Kt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,i=void 0===i?t<r?1:-1:ts(i),e)}}function Oi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=is(t),n=is(n)),e(t,n)}}function Ii(e,t,n,r,i,o,a,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],h=n.apply(void 0,f);return uo(e)&&yo(h,f),h.placeholder=r,bo(h,e,t)}function Ni(e){var t=pe[e];return function(e,n){if(e=is(e),(n=null==n?0:an(ns(n),292))&&tn(e)){var r=(as(e)+"e").split("e");return+((r=(as(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Di=dn&&1/Gt(new dn([,-0]))[1]==1/0?function(e){return new dn(e)}:Zs;function Fi(e){return function(t){var n=to(t);return n==m?jt(t):n==_?Ht(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function zi(e,t,r,i,s,u,c,l){var f=2&t;if(!f&&"function"!=typeof e)throw new ge(o);var h=i?i.length:0;if(h||(t&=-97,i=s=void 0),c=void 0===c?c:on(ns(c),0),l=void 0===l?l:ns(l),h-=s?s.length:0,64&t){var p=i,d=s;i=s=void 0}var m=f?void 0:qi(e),v=[e,t,r,i,s,p,d,u,c,l];if(m&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?di(c,u,t[4]):u,e[4]=c?Ut(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?mi(c,u,t[6]):u,e[6]=c?Ut(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(v,m),e=v[0],t=v[1],r=v[2],i=v[3],s=v[4],!(l=v[9]=void 0===v[9]?f?0:e.length:on(v[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,r){var i=Ei(e);return function o(){for(var a=arguments.length,s=n(a),u=a,c=Xi(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:Ut(s,c);if((a-=l.length)<r)return Ii(e,t,Mi,o.placeholder,void 0,s,l,void 0,void 0,r-a);var f=this&&this!==Ye&&this instanceof o?i:e;return ot(f,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Mi.apply(void 0,v):function(e,t,r,i){var o=1&t,a=Ei(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==Ye&&this instanceof t?a:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return ot(h,o?r:this,f)}}(e,t,r,i);else var g=function(e,t,n){var r=1&t,i=Ei(e);return function t(){var o=this&&this!==Ye&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,r);return bo((m?Vr:yo)(g,v),e,t)}function Bi(e,t,n,r){return void 0===e||Ca(e,xe[n])&&!Se.call(r,n)?t:e}function ji(e,t,n,r,i,o){return Ua(e)&&Ua(t)&&(o.set(t,e),kr(e,t,void 0,ji,o),o.delete(t)),e}function Vi(e){return qa(e)?void 0:e}function Ui(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,p=2&n?new Nn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var d=e[f],m=t[f];if(r)var v=a?r(m,d,f,t,e,o):r(d,m,f,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!gt(t,(function(e,t){if(!Lt(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(d!==m&&!i(d,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Gi(e){return xo(po(e,void 0,Oo),e+"")}function Hi(e){return fr(e,_s,Qi)}function Wi(e){return fr(e,xs,eo)}var qi=gn?function(e){return gn.get(e)}:Zs;function Yi(e){for(var t=e.name+"",n=yn[t],r=Se.call(yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Xi(e){return(Se.call(Mn,"placeholder")?Mn:e).placeholder}function $i(){var e=Mn.iteratee||qs;return e=e===qs?wr:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ki(e){for(var t=_s(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fo(i)]}return t}function Ji(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return br(n)?n:void 0}var Qi=Qt?function(e){return null==e?[]:(e=de(e),lt(Qt(e),(function(t){return qe.call(e,t)})))}:ru,eo=Qt?function(e){for(var t=[];e;)dt(t,Qi(e)),e=Ue(e);return t}:ru,to=hr;function no(e,t,n){for(var r=-1,i=(t=ai(t,e)).length,o=!1;++r<i;){var a=To(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Va(i)&&oo(a,i)&&(La(e)||Pa(e))}function ro(e){return"function"!=typeof e.constructor||lo(e)?{}:Cn(Ue(e))}function io(e){return La(e)||Pa(e)||!!($e&&e&&e[$e])}function oo(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function ao(e,t,n){if(!Ua(n))return!1;var r=typeof t;return!!("number"==r?Ia(n)&&oo(t,n.length):"string"==r&&t in n)&&Ca(n[t],e)}function so(e,t){if(La(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Za(e))||(H.test(e)||!G.test(e)||null!=t&&e in de(t))}function uo(e){var t=Yi(e),n=Mn[t];if("function"!=typeof n||!(t in Pn.prototype))return!1;if(e===n)return!0;var r=qi(n);return!!r&&e===r[0]}(fn&&to(new fn(new ArrayBuffer(1)))!=E||hn&&to(new hn)!=m||pn&&"[object Promise]"!=to(pn.resolve())||dn&&to(new dn)!=_||mn&&to(new mn)!=w)&&(to=function(e){var t=hr(e),n=t==g?e.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case _n:return E;case xn:return m;case bn:return"[object Promise]";case wn:return _;case Sn:return w}return t});var co=be?Ba:iu;function lo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xe)}function fo(e){return e===e&&!Ua(e)}function ho(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in de(n)))}}function po(e,t,r){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=on(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=n(t+1);++o<t;)u[o]=i[o];return u[t]=r(s),ot(e,this,u)}}function mo(e,t){return t.length<2?e:lr(e,Hr(t,0,-1))}function vo(e,t){for(var n=e.length,r=an(t.length,n),i=vi(e);r--;){var o=t[r];e[r]=oo(o,n)?i[o]:void 0}return e}function go(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var yo=wo(Vr),_o=Zt||function(e,t){return Ye.setTimeout(e,t)},xo=wo(Ur);function bo(e,t,n){var r=t+"";return xo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(Q):[]}(r),n)))}function wo(e){var t=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function So(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Nr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var Eo=function(e){var t=wa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function To(e){if("string"==typeof e||Za(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ao(e){if(null!=e){try{return we.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Mo(e){if(e instanceof Pn)return e.clone();var t=new Rn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Co=Fr((function(e,t){return Na(e)?Jn(e,ir(t,1,Na,!0)):[]})),ko=Fr((function(e,t){var n=zo(t);return Na(n)&&(n=void 0),Na(e)?Jn(e,ir(t,1,Na,!0),$i(n,2)):[]})),Ro=Fr((function(e,t){var n=zo(t);return Na(n)&&(n=void 0),Na(e)?Jn(e,ir(t,1,Na,!0),void 0,n):[]}));function Po(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),xt(e,$i(t,3),i)}function Lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ns(n),i=n<0?on(r+i,0):an(i,r-1)),xt(e,$i(t,3),i,!0)}function Oo(e){return(null==e?0:e.length)?ir(e,1):[]}function Io(e){return e&&e.length?e[0]:void 0}var No=Fr((function(e){var t=pt(e,ii);return t.length&&t[0]===e[0]?vr(t):[]})),Do=Fr((function(e){var t=zo(e),n=pt(e,ii);return t===zo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?vr(n,$i(t,2)):[]})),Fo=Fr((function(e){var t=zo(e),n=pt(e,ii);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?vr(n,void 0,t):[]}));function zo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Bo=Fr(jo);function jo(e,t){return e&&e.length&&t&&t.length?Or(e,t):e}var Vo=Gi((function(e,t){var n=null==e?0:e.length,r=Yn(e,t);return Ir(e,pt(t,(function(e){return oo(e,n)?+e:e})).sort(pi)),r}));function Uo(e){return null==e?e:ln.call(e)}var Go=Fr((function(e){return Kr(ir(e,1,Na,!0))})),Ho=Fr((function(e){var t=zo(e);return Na(t)&&(t=void 0),Kr(ir(e,1,Na,!0),$i(t,2))})),Wo=Fr((function(e){var t=zo(e);return t="function"==typeof t?t:void 0,Kr(ir(e,1,Na,!0),void 0,t)}));function qo(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Na(e))return t=on(e.length,t),!0})),kt(t,(function(t){return pt(e,Tt(t))}))}function Yo(e,t){if(!e||!e.length)return[];var n=qo(e);return null==t?n:pt(n,(function(e){return ot(t,void 0,e)}))}var Xo=Fr((function(e,t){return Na(e)?Jn(e,t):[]})),$o=Fr((function(e){return ni(lt(e,Na))})),Zo=Fr((function(e){var t=zo(e);return Na(t)&&(t=void 0),ni(lt(e,Na),$i(t,2))})),Ko=Fr((function(e){var t=zo(e);return t="function"==typeof t?t:void 0,ni(lt(e,Na),void 0,t)})),Jo=Fr(qo);var Qo=Fr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yo(e,n)}));function ea(e){var t=Mn(e);return t.__chain__=!0,t}function ta(e,t){return t(e)}var na=Gi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Yn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Pn&&oo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ta,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ra=yi((function(e,t,n){Se.call(e,n)?++e[n]:qn(e,n,1)}));var ia=Ti(Po),oa=Ti(Lo);function aa(e,t){return(La(e)?st:Qn)(e,$i(t,3))}function sa(e,t){return(La(e)?ut:er)(e,$i(t,3))}var ua=yi((function(e,t,n){Se.call(e,n)?e[n].push(t):qn(e,n,[t])}));var ca=Fr((function(e,t,r){var i=-1,o="function"==typeof t,a=Ia(e)?n(e.length):[];return Qn(e,(function(e){a[++i]=o?ot(t,e,r):gr(e,t,r)})),a})),la=yi((function(e,t,n){qn(e,n,t)}));function fa(e,t){return(La(e)?pt:Ar)(e,$i(t,3))}var ha=yi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var pa=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ao(e,t[0],t[1])?t=[]:n>2&&ao(t[0],t[1],t[2])&&(t=[t[0]]),Pr(e,ir(t,1),[])})),da=$t||function(){return Ye.Date.now()};function ma(e,t,n){return t=n?void 0:t,zi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function va(e,t){var n;if("function"!=typeof t)throw new ge(o);return e=ns(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ga=Fr((function(e,t,n){var r=1;if(n.length){var i=Ut(n,Xi(ga));r|=32}return zi(e,r,t,n,i)})),ya=Fr((function(e,t,n){var r=3;if(n.length){var i=Ut(n,Xi(ya));r|=32}return zi(t,r,e,n,i)}));function _a(e,t,n){var r,i,a,s,u,c,l=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new ge(o);function d(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function m(e){return l=e,u=_o(g,t),f?d(e):s}function v(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-l>=a}function g(){var e=da();if(v(e))return y(e);u=_o(g,function(e){var n=t-(e-c);return h?an(n,a-(e-l)):n}(e))}function y(e){return u=void 0,p&&r?d(e):(r=i=void 0,s)}function _(){var e=da(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return m(c);if(h)return ci(u),u=_o(g,t),d(c)}return void 0===u&&(u=_o(g,t)),s}return t=is(t)||0,Ua(n)&&(f=!!n.leading,a=(h="maxWait"in n)?on(is(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==u&&ci(u),l=0,r=c=i=u=void 0},_.flush=function(){return void 0===u?s:y(da())},_}var xa=Fr((function(e,t){return Kn(e,1,t)})),ba=Fr((function(e,t,n){return Kn(e,is(t)||0,n)}));function wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(o);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(wa.Cache||In),n}function Sa(e){if("function"!=typeof e)throw new ge(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}wa.Cache=In;var Ea=si((function(e,t){var n=(t=1==t.length&&La(t[0])?pt(t[0],Rt($i())):pt(ir(t,1),Rt($i()))).length;return Fr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Ta=Fr((function(e,t){return zi(e,32,void 0,t,Ut(t,Xi(Ta)))})),Aa=Fr((function(e,t){return zi(e,64,void 0,t,Ut(t,Xi(Aa)))})),Ma=Gi((function(e,t){return zi(e,256,void 0,void 0,void 0,t)}));function Ca(e,t){return e===t||e!==e&&t!==t}var ka=Oi(pr),Ra=Oi((function(e,t){return e>=t})),Pa=yr(function(){return arguments}())?yr:function(e){return Ga(e)&&Se.call(e,"callee")&&!qe.call(e,"callee")},La=n.isArray,Oa=Qe?Rt(Qe):function(e){return Ga(e)&&hr(e)==S};function Ia(e){return null!=e&&Va(e.length)&&!Ba(e)}function Na(e){return Ga(e)&&Ia(e)}var Da=en||iu,Fa=et?Rt(et):function(e){return Ga(e)&&hr(e)==f};function za(e){if(!Ga(e))return!1;var t=hr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qa(e)}function Ba(e){if(!Ua(e))return!1;var t=hr(e);return t==p||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ja(e){return"number"==typeof e&&e==ns(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ua(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ga(e){return null!=e&&"object"==typeof e}var Ha=tt?Rt(tt):function(e){return Ga(e)&&to(e)==m};function Wa(e){return"number"==typeof e||Ga(e)&&hr(e)==v}function qa(e){if(!Ga(e)||hr(e)!=g)return!1;var t=Ue(e);if(null===t)return!0;var n=Se.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&we.call(n)==Me}var Ya=nt?Rt(nt):function(e){return Ga(e)&&hr(e)==y};var Xa=rt?Rt(rt):function(e){return Ga(e)&&to(e)==_};function $a(e){return"string"==typeof e||!La(e)&&Ga(e)&&hr(e)==x}function Za(e){return"symbol"==typeof e||Ga(e)&&hr(e)==b}var Ka=it?Rt(it):function(e){return Ga(e)&&Va(e.length)&&!!je[hr(e)]};var Ja=Oi(Tr),Qa=Oi((function(e,t){return e<=t}));function es(e){if(!e)return[];if(Ia(e))return $a(e)?qt(e):vi(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=to(e);return(t==m?jt:t==_?Gt:Cs)(e)}function ts(e){return e?(e=is(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ns(e){var t=ts(e),n=t%1;return t===t?n?t-n:t:0}function rs(e){return e?Xn(ns(e),0,4294967295):0}function is(e){if("number"==typeof e)return e;if(Za(e))return NaN;if(Ua(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ua(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(X,"");var n=oe.test(e);return n||se.test(e)?He(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function os(e){return gi(e,xs(e))}function as(e){return null==e?"":Zr(e)}var ss=_i((function(e,t){if(lo(t)||Ia(t))gi(t,_s(t),e);else for(var n in t)Se.call(t,n)&&Un(e,n,t[n])})),us=_i((function(e,t){gi(t,xs(t),e)})),cs=_i((function(e,t,n,r){gi(t,xs(t),e,r)})),ls=_i((function(e,t,n,r){gi(t,_s(t),e,r)})),fs=Gi(Yn);var hs=Fr((function(e,t){e=de(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&ao(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=xs(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(void 0===l||Ca(l,xe[c])&&!Se.call(e,c))&&(e[c]=o[c])}return e})),ps=Fr((function(e){return e.push(void 0,ji),ot(ws,void 0,e)}));function ds(e,t,n){var r=null==e?void 0:lr(e,t);return void 0===r?n:r}function ms(e,t){return null!=e&&no(e,t,mr)}var vs=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=n}),Us(Ws)),gs=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]}),$i),ys=Fr(gr);function _s(e){return Ia(e)?Fn(e):Sr(e)}function xs(e){return Ia(e)?Fn(e,!0):Er(e)}var bs=_i((function(e,t,n){kr(e,t,n)})),ws=_i((function(e,t,n,r){kr(e,t,n,r)})),Ss=Gi((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=ai(t,e),r||(r=t.length>1),t})),gi(e,Wi(e),n),r&&(n=$n(n,7,Vi));for(var i=t.length;i--;)Jr(n,t[i]);return n}));var Es=Gi((function(e,t){return null==e?{}:function(e,t){return Lr(e,t,(function(t,n){return ms(e,n)}))}(e,t)}));function Ts(e,t){if(null==e)return{};var n=pt(Wi(e),(function(e){return[e]}));return t=$i(t),Lr(e,n,(function(e,n){return t(e,n[0])}))}var As=Fi(_s),Ms=Fi(xs);function Cs(e){return null==e?[]:Pt(e,_s(e))}var ks=Si((function(e,t,n){return t=t.toLowerCase(),e+(n?Rs(t):t)}));function Rs(e){return zs(as(e).toLowerCase())}function Ps(e){return(e=as(e))&&e.replace(ce,Dt).replace(Oe,"")}var Ls=Si((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Os=Si((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Is=wi("toLowerCase");var Ns=Si((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ds=Si((function(e,t,n){return e+(n?" ":"")+zs(t)}));var Fs=Si((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),zs=wi("toUpperCase");function Bs(e,t,n){return e=as(e),void 0===(t=n?void 0:t)?function(e){return Fe.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var js=Fr((function(e,t){try{return ot(e,void 0,t)}catch(n){return za(n)?n:new i(n)}})),Vs=Gi((function(e,t){return st(t,(function(t){t=To(t),qn(e,t,ga(e[t],e))})),e}));function Us(e){return function(){return e}}var Gs=Ai(),Hs=Ai(!0);function Ws(e){return e}function qs(e){return wr("function"==typeof e?e:$n(e,1))}var Ys=Fr((function(e,t){return function(n){return gr(n,e,t)}})),Xs=Fr((function(e,t){return function(n){return gr(e,n,t)}}));function $s(e,t,n){var r=_s(t),i=cr(t,r);null!=n||Ua(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,_s(t)));var o=!(Ua(n)&&"chain"in n)||!!n.chain,a=Ba(e);return st(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,dt([this.value()],arguments))})})),e}function Zs(){}var Ks=Ri(pt),Js=Ri(ct),Qs=Ri(gt);function eu(e){return so(e)?Tt(To(e)):function(e){return function(t){return lr(t,e)}}(e)}var tu=Li(),nu=Li(!0);function ru(){return[]}function iu(){return!1}var ou=ki((function(e,t){return e+t}),0),au=Ni("ceil"),su=ki((function(e,t){return e/t}),1),uu=Ni("floor");var cu=ki((function(e,t){return e*t}),1),lu=Ni("round"),fu=ki((function(e,t){return e-t}),0);return Mn.after=function(e,t){if("function"!=typeof t)throw new ge(o);return e=ns(e),function(){if(--e<1)return t.apply(this,arguments)}},Mn.ary=ma,Mn.assign=ss,Mn.assignIn=us,Mn.assignInWith=cs,Mn.assignWith=ls,Mn.at=fs,Mn.before=va,Mn.bind=ga,Mn.bindAll=Vs,Mn.bindKey=ya,Mn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return La(e)?e:[e]},Mn.chain=ea,Mn.chunk=function(e,t,r){t=(r?ao(e,t,r):void 0===t)?1:on(ns(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=n(Kt(i/t));o<i;)s[a++]=Hr(e,o,o+=t);return s},Mn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Mn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return dt(La(r)?vi(r):[r],ir(t,1))},Mn.cond=function(e){var t=null==e?0:e.length,n=$i();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new ge(o);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},Mn.conforms=function(e){return function(e){var t=_s(e);return function(n){return Zn(n,e,t)}}($n(e,1))},Mn.constant=Us,Mn.countBy=ra,Mn.create=function(e,t){var n=Cn(e);return null==t?n:Wn(n,t)},Mn.curry=function e(t,n,r){var i=zi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.curryRight=function e(t,n,r){var i=zi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.debounce=_a,Mn.defaults=hs,Mn.defaultsDeep=ps,Mn.defer=xa,Mn.delay=ba,Mn.difference=Co,Mn.differenceBy=ko,Mn.differenceWith=Ro,Mn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||void 0===t?1:ns(t))<0?0:t,r):[]},Mn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||void 0===t?1:ns(t)))<0?0:t):[]},Mn.dropRightWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!0,!0):[]},Mn.dropWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!0):[]},Mn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ao(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ns(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ns(r))<0&&(r+=i),r=n>r?0:rs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Mn.filter=function(e,t){return(La(e)?lt:rr)(e,$i(t,3))},Mn.flatMap=function(e,t){return ir(fa(e,t),1)},Mn.flatMapDeep=function(e,t){return ir(fa(e,t),1/0)},Mn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ns(n),ir(fa(e,t),n)},Mn.flatten=Oo,Mn.flattenDeep=function(e){return(null==e?0:e.length)?ir(e,1/0):[]},Mn.flattenDepth=function(e,t){return(null==e?0:e.length)?ir(e,t=void 0===t?1:ns(t)):[]},Mn.flip=function(e){return zi(e,512)},Mn.flow=Gs,Mn.flowRight=Hs,Mn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Mn.functions=function(e){return null==e?[]:cr(e,_s(e))},Mn.functionsIn=function(e){return null==e?[]:cr(e,xs(e))},Mn.groupBy=ua,Mn.initial=function(e){return(null==e?0:e.length)?Hr(e,0,-1):[]},Mn.intersection=No,Mn.intersectionBy=Do,Mn.intersectionWith=Fo,Mn.invert=vs,Mn.invertBy=gs,Mn.invokeMap=ca,Mn.iteratee=qs,Mn.keyBy=la,Mn.keys=_s,Mn.keysIn=xs,Mn.map=fa,Mn.mapKeys=function(e,t){var n={};return t=$i(t,3),sr(e,(function(e,r,i){qn(n,t(e,r,i),e)})),n},Mn.mapValues=function(e,t){var n={};return t=$i(t,3),sr(e,(function(e,r,i){qn(n,r,t(e,r,i))})),n},Mn.matches=function(e){return Mr($n(e,1))},Mn.matchesProperty=function(e,t){return Cr(e,$n(t,1))},Mn.memoize=wa,Mn.merge=bs,Mn.mergeWith=ws,Mn.method=Ys,Mn.methodOf=Xs,Mn.mixin=$s,Mn.negate=Sa,Mn.nthArg=function(e){return e=ns(e),Fr((function(t){return Rr(t,e)}))},Mn.omit=Ss,Mn.omitBy=function(e,t){return Ts(e,Sa($i(t)))},Mn.once=function(e){return va(2,e)},Mn.orderBy=function(e,t,n,r){return null==e?[]:(La(t)||(t=null==t?[]:[t]),La(n=r?void 0:n)||(n=null==n?[]:[n]),Pr(e,t,n))},Mn.over=Ks,Mn.overArgs=Ea,Mn.overEvery=Js,Mn.overSome=Qs,Mn.partial=Ta,Mn.partialRight=Aa,Mn.partition=ha,Mn.pick=Es,Mn.pickBy=Ts,Mn.property=eu,Mn.propertyOf=function(e){return function(t){return null==e?void 0:lr(e,t)}},Mn.pull=Bo,Mn.pullAll=jo,Mn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,$i(n,2)):e},Mn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,void 0,n):e},Mn.pullAt=Vo,Mn.range=tu,Mn.rangeRight=nu,Mn.rearg=Ma,Mn.reject=function(e,t){return(La(e)?lt:rr)(e,Sa($i(t,3)))},Mn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=$i(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Ir(e,i),n},Mn.rest=function(e,t){if("function"!=typeof e)throw new ge(o);return Fr(e,t=void 0===t?t:ns(t))},Mn.reverse=Uo,Mn.sampleSize=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ns(t),(La(e)?Bn:Br)(e,t)},Mn.set=function(e,t,n){return null==e?e:jr(e,t,n)},Mn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:jr(e,t,n,r)},Mn.shuffle=function(e){return(La(e)?jn:Gr)(e)},Mn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ao(e,t,n)?(t=0,n=r):(t=null==t?0:ns(t),n=void 0===n?r:ns(n)),Hr(e,t,n)):[]},Mn.sortBy=pa,Mn.sortedUniq=function(e){return e&&e.length?Xr(e):[]},Mn.sortedUniqBy=function(e,t){return e&&e.length?Xr(e,$i(t,2)):[]},Mn.split=function(e,t,n){return n&&"number"!=typeof n&&ao(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=as(e))&&("string"==typeof t||null!=t&&!Ya(t))&&!(t=Zr(t))&&Bt(e)?ui(qt(e),0,n):e.split(t,n):[]},Mn.spread=function(e,t){if("function"!=typeof e)throw new ge(o);return t=null==t?0:on(ns(t),0),Fr((function(n){var r=n[t],i=ui(n,0,t);return r&&dt(i,r),ot(e,this,i)}))},Mn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Mn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||void 0===t?1:ns(t))<0?0:t):[]},Mn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||void 0===t?1:ns(t)))<0?0:t,r):[]},Mn.takeRightWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!1,!0):[]},Mn.takeWhile=function(e,t){return e&&e.length?ei(e,$i(t,3)):[]},Mn.tap=function(e,t){return t(e),e},Mn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ge(o);return Ua(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_a(e,t,{leading:r,maxWait:t,trailing:i})},Mn.thru=ta,Mn.toArray=es,Mn.toPairs=As,Mn.toPairsIn=Ms,Mn.toPath=function(e){return La(e)?pt(e,To):Za(e)?[e]:vi(Eo(as(e)))},Mn.toPlainObject=os,Mn.transform=function(e,t,n){var r=La(e),i=r||Da(e)||Ka(e);if(t=$i(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ua(e)&&Ba(o)?Cn(Ue(e)):{}}return(i?st:sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Mn.unary=function(e){return ma(e,1)},Mn.union=Go,Mn.unionBy=Ho,Mn.unionWith=Wo,Mn.uniq=function(e){return e&&e.length?Kr(e):[]},Mn.uniqBy=function(e,t){return e&&e.length?Kr(e,$i(t,2)):[]},Mn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Kr(e,void 0,t):[]},Mn.unset=function(e,t){return null==e||Jr(e,t)},Mn.unzip=qo,Mn.unzipWith=Yo,Mn.update=function(e,t,n){return null==e?e:Qr(e,t,oi(n))},Mn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Qr(e,t,oi(n),r)},Mn.values=Cs,Mn.valuesIn=function(e){return null==e?[]:Pt(e,xs(e))},Mn.without=Xo,Mn.words=Bs,Mn.wrap=function(e,t){return Ta(oi(t),e)},Mn.xor=$o,Mn.xorBy=Zo,Mn.xorWith=Ko,Mn.zip=Jo,Mn.zipObject=function(e,t){return ri(e||[],t||[],Un)},Mn.zipObjectDeep=function(e,t){return ri(e||[],t||[],jr)},Mn.zipWith=Qo,Mn.entries=As,Mn.entriesIn=Ms,Mn.extend=us,Mn.extendWith=cs,$s(Mn,Mn),Mn.add=ou,Mn.attempt=js,Mn.camelCase=ks,Mn.capitalize=Rs,Mn.ceil=au,Mn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=is(n))===n?n:0),void 0!==t&&(t=(t=is(t))===t?t:0),Xn(is(e),t,n)},Mn.clone=function(e){return $n(e,4)},Mn.cloneDeep=function(e){return $n(e,5)},Mn.cloneDeepWith=function(e,t){return $n(e,5,t="function"==typeof t?t:void 0)},Mn.cloneWith=function(e,t){return $n(e,4,t="function"==typeof t?t:void 0)},Mn.conformsTo=function(e,t){return null==t||Zn(e,t,_s(t))},Mn.deburr=Ps,Mn.defaultTo=function(e,t){return null==e||e!==e?t:e},Mn.divide=su,Mn.endsWith=function(e,t,n){e=as(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Xn(ns(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Mn.eq=Ca,Mn.escape=function(e){return(e=as(e))&&B.test(e)?e.replace(F,Ft):e},Mn.escapeRegExp=function(e){return(e=as(e))&&Y.test(e)?e.replace(q,"\\$&"):e},Mn.every=function(e,t,n){var r=La(e)?ct:tr;return n&&ao(e,t,n)&&(t=void 0),r(e,$i(t,3))},Mn.find=ia,Mn.findIndex=Po,Mn.findKey=function(e,t){return _t(e,$i(t,3),sr)},Mn.findLast=oa,Mn.findLastIndex=Lo,Mn.findLastKey=function(e,t){return _t(e,$i(t,3),ur)},Mn.floor=uu,Mn.forEach=aa,Mn.forEachRight=sa,Mn.forIn=function(e,t){return null==e?e:or(e,$i(t,3),xs)},Mn.forInRight=function(e,t){return null==e?e:ar(e,$i(t,3),xs)},Mn.forOwn=function(e,t){return e&&sr(e,$i(t,3))},Mn.forOwnRight=function(e,t){return e&&ur(e,$i(t,3))},Mn.get=ds,Mn.gt=ka,Mn.gte=Ra,Mn.has=function(e,t){return null!=e&&no(e,t,dr)},Mn.hasIn=ms,Mn.head=Io,Mn.identity=Ws,Mn.includes=function(e,t,n,r){e=Ia(e)?e:Cs(e),n=n&&!r?ns(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),$a(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&bt(e,t,n)>-1},Mn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),bt(e,t,i)},Mn.inRange=function(e,t,n){return t=ts(t),void 0===n?(n=t,t=0):n=ts(n),function(e,t,n){return e>=an(t,n)&&e<on(t,n)}(e=is(e),t,n)},Mn.invoke=ys,Mn.isArguments=Pa,Mn.isArray=La,Mn.isArrayBuffer=Oa,Mn.isArrayLike=Ia,Mn.isArrayLikeObject=Na,Mn.isBoolean=function(e){return!0===e||!1===e||Ga(e)&&hr(e)==l},Mn.isBuffer=Da,Mn.isDate=Fa,Mn.isElement=function(e){return Ga(e)&&1===e.nodeType&&!qa(e)},Mn.isEmpty=function(e){if(null==e)return!0;if(Ia(e)&&(La(e)||"string"==typeof e||"function"==typeof e.splice||Da(e)||Ka(e)||Pa(e)))return!e.length;var t=to(e);if(t==m||t==_)return!e.size;if(lo(e))return!Sr(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0},Mn.isEqual=function(e,t){return _r(e,t)},Mn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?_r(e,t,void 0,n):!!r},Mn.isError=za,Mn.isFinite=function(e){return"number"==typeof e&&tn(e)},Mn.isFunction=Ba,Mn.isInteger=ja,Mn.isLength=Va,Mn.isMap=Ha,Mn.isMatch=function(e,t){return e===t||xr(e,t,Ki(t))},Mn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,xr(e,t,Ki(t),n)},Mn.isNaN=function(e){return Wa(e)&&e!=+e},Mn.isNative=function(e){if(co(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return br(e)},Mn.isNil=function(e){return null==e},Mn.isNull=function(e){return null===e},Mn.isNumber=Wa,Mn.isObject=Ua,Mn.isObjectLike=Ga,Mn.isPlainObject=qa,Mn.isRegExp=Ya,Mn.isSafeInteger=function(e){return ja(e)&&e>=-9007199254740991&&e<=9007199254740991},Mn.isSet=Xa,Mn.isString=$a,Mn.isSymbol=Za,Mn.isTypedArray=Ka,Mn.isUndefined=function(e){return void 0===e},Mn.isWeakMap=function(e){return Ga(e)&&to(e)==w},Mn.isWeakSet=function(e){return Ga(e)&&"[object WeakSet]"==hr(e)},Mn.join=function(e,t){return null==e?"":nn.call(e,t)},Mn.kebabCase=Ls,Mn.last=zo,Mn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ns(n))<0?on(r+i,0):an(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):xt(e,St,i,!0)},Mn.lowerCase=Os,Mn.lowerFirst=Is,Mn.lt=Ja,Mn.lte=Qa,Mn.max=function(e){return e&&e.length?nr(e,Ws,pr):void 0},Mn.maxBy=function(e,t){return e&&e.length?nr(e,$i(t,2),pr):void 0},Mn.mean=function(e){return Et(e,Ws)},Mn.meanBy=function(e,t){return Et(e,$i(t,2))},Mn.min=function(e){return e&&e.length?nr(e,Ws,Tr):void 0},Mn.minBy=function(e,t){return e&&e.length?nr(e,$i(t,2),Tr):void 0},Mn.stubArray=ru,Mn.stubFalse=iu,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=cu,Mn.nth=function(e,t){return e&&e.length?Rr(e,ns(t)):void 0},Mn.noConflict=function(){return Ye._===this&&(Ye._=Ce),this},Mn.noop=Zs,Mn.now=da,Mn.pad=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Pi(Jt(i),n)+e+Pi(Kt(i),n)},Mn.padEnd=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;return t&&r<t?e+Pi(t-r,n):e},Mn.padStart=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;return t&&r<t?Pi(t-r,n)+e:e},Mn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(as(e).replace($,""),t||0)},Mn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ao(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ts(e),void 0===t?(t=e,e=0):t=ts(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return an(e+i*(t-e+Ge("1e-"+((i+"").length-1))),t)}return Nr(e,t)},Mn.reduce=function(e,t,n){var r=La(e)?mt:Mt,i=arguments.length<3;return r(e,$i(t,4),n,i,Qn)},Mn.reduceRight=function(e,t,n){var r=La(e)?vt:Mt,i=arguments.length<3;return r(e,$i(t,4),n,i,er)},Mn.repeat=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ns(t),Dr(as(e),t)},Mn.replace=function(){var e=arguments,t=as(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mn.result=function(e,t,n){var r=-1,i=(t=ai(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[To(t[r])];void 0===o&&(r=i,o=n),e=Ba(o)?o.call(e):o}return e},Mn.round=lu,Mn.runInContext=e,Mn.sample=function(e){return(La(e)?zn:zr)(e)},Mn.size=function(e){if(null==e)return 0;if(Ia(e))return $a(e)?Wt(e):e.length;var t=to(e);return t==m||t==_?e.size:Sr(e).length},Mn.snakeCase=Ns,Mn.some=function(e,t,n){var r=La(e)?gt:Wr;return n&&ao(e,t,n)&&(t=void 0),r(e,$i(t,3))},Mn.sortedIndex=function(e,t){return qr(e,t)},Mn.sortedIndexBy=function(e,t,n){return Yr(e,t,$i(n,2))},Mn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=qr(e,t);if(r<n&&Ca(e[r],t))return r}return-1},Mn.sortedLastIndex=function(e,t){return qr(e,t,!0)},Mn.sortedLastIndexBy=function(e,t,n){return Yr(e,t,$i(n,2),!0)},Mn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=qr(e,t,!0)-1;if(Ca(e[n],t))return n}return-1},Mn.startCase=Ds,Mn.startsWith=function(e,t,n){return e=as(e),n=null==n?0:Xn(ns(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},Mn.subtract=fu,Mn.sum=function(e){return e&&e.length?Ct(e,Ws):0},Mn.sumBy=function(e,t){return e&&e.length?Ct(e,$i(t,2)):0},Mn.template=function(e,t,n){var r=Mn.templateSettings;n&&ao(e,t,n)&&(t=void 0),e=as(e),t=cs({},t,r,Bi);var i,o,a=cs({},t.imports,r.imports,Bi),s=_s(a),u=Pt(a,s),c=0,l=t.interpolate||le,f="__p += '",h=me((t.escape||le).source+"|"+l.source+"|"+(l===U?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Be+"]")+"\n";e.replace(h,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(fe,zt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var d=Se.call(t,"variable")&&t.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(O,""):f).replace(I,"$1").replace(N,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=js((function(){return he(s,p+"return "+f).apply(void 0,u)}));if(m.source=f,za(m))throw m;return m},Mn.times=function(e,t){if((e=ns(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=kt(r,t=$i(t));++n<e;)t(n);return i},Mn.toFinite=ts,Mn.toInteger=ns,Mn.toLength=rs,Mn.toLower=function(e){return as(e).toLowerCase()},Mn.toNumber=is,Mn.toSafeInteger=function(e){return e?Xn(ns(e),-9007199254740991,9007199254740991):0===e?e:0},Mn.toString=as,Mn.toUpper=function(e){return as(e).toUpperCase()},Mn.trim=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace(X,"");if(!e||!(t=Zr(t)))return e;var r=qt(e),i=qt(t);return ui(r,Ot(r,i),It(r,i)+1).join("")},Mn.trimEnd=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Zr(t)))return e;var r=qt(e);return ui(r,0,It(r,qt(t))+1).join("")},Mn.trimStart=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace($,"");if(!e||!(t=Zr(t)))return e;var r=qt(e);return ui(r,Ot(r,qt(t))).join("")},Mn.truncate=function(e,t){var n=30,r="...";if(Ua(t)){var i="separator"in t?t.separator:i;n="length"in t?ns(t.length):n,r="omission"in t?Zr(t.omission):r}var o=(e=as(e)).length;if(Bt(e)){var a=qt(e);o=a.length}if(n>=o)return e;var s=n-Wt(r);if(s<1)return r;var u=a?ui(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ya(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=me(i.source,as(re.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(Zr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},Mn.unescape=function(e){return(e=as(e))&&z.test(e)?e.replace(D,Yt):e},Mn.uniqueId=function(e){var t=++Ee;return as(e)+t},Mn.upperCase=Fs,Mn.upperFirst=zs,Mn.each=aa,Mn.eachRight=sa,Mn.first=Io,$s(Mn,function(){var e={};return sr(Mn,(function(t,n){Se.call(Mn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Mn.VERSION="4.17.20",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mn[e].placeholder=Mn})),st(["drop","take"],(function(e,t){Pn.prototype[e]=function(n){n=void 0===n?1:on(ns(n),0);var r=this.__filtered__&&!t?new Pn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Pn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Pn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:$i(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Pn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Pn.prototype[e]=function(){return this.__filtered__?new Pn(this):this[n](1)}})),Pn.prototype.compact=function(){return this.filter(Ws)},Pn.prototype.find=function(e){return this.filter(e).head()},Pn.prototype.findLast=function(e){return this.reverse().find(e)},Pn.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new Pn(this):this.map((function(n){return gr(n,e,t)}))})),Pn.prototype.reject=function(e){return this.filter(Sa($i(e)))},Pn.prototype.slice=function(e,t){e=ns(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ns(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pn.prototype.toArray=function(){return this.take(4294967295)},sr(Pn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Mn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Mn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Pn,u=a[0],c=s||La(t),l=function(e){var t=i.apply(Mn,dt([e],a));return r&&f?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,d=s&&!h;if(!o&&c){t=d?t:new Pn(this);var m=e.apply(t,a);return m.__actions__.push({func:ta,args:[l],thisArg:void 0}),new Rn(m,f)}return p&&d?e.apply(this,a):(m=this.thru(l),p?r?m.value()[0]:m.value():m)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(La(i)?i:[],e)}return this[n]((function(n){return t.apply(La(n)?n:[],e)}))}})),sr(Pn.prototype,(function(e,t){var n=Mn[t];if(n){var r=n.name+"";Se.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[Mi(void 0,2).name]=[{name:"wrapper",func:void 0}],Pn.prototype.clone=function(){var e=new Pn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},Pn.prototype.reverse=function(){if(this.__filtered__){var e=new Pn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=La(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=an(t,e+a);break;case"takeRight":e=on(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=an(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return ti(e,this.__actions__);var d=[];e:for(;u--&&h<p;){for(var m=-1,v=e[c+=t];++m<f;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(2==_)v=x;else if(!x){if(1==_)continue e;break e}}d[h++]=v}return d},Mn.prototype.at=na,Mn.prototype.chain=function(){return ea(this)},Mn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},Mn.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mn.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var r=Mo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Mn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pn){var t=e;return this.__actions__.length&&(t=new Pn(this)),(t=t.reverse()).__actions__.push({func:ta,args:[Uo],thisArg:void 0}),new Rn(t,this.__chain__)}return this.thru(Uo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ti(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,Ke&&(Mn.prototype[Ke]=function(){return this}),Mn}();Ye._=Xt,void 0===(i=function(){return Xt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(29),n(73)(e))},function(e,t,n){var r=n(9),i=n(30).f,o=n(35),a=n(32),s=n(143),u=n(213),c=n(91);e.exports=function(e,t){var n,l,f,h,p,d=e.target,m=e.global,v=e.stat;if(n=m?r:v?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in t){if(h=t[l],f=e.noTargetGet?(p=i(n,l))&&p.value:n[l],!c(m?l:d+(v?".":"#")+l,e.forced)&&void 0!==f){if(typeof h===typeof f)continue;u(h,f)}(e.sham||f&&f.sham)&&o(h,"sham",!0),a(n,l,h,e)}}},function(e,t,n){var r=n(570);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var r=n(568).runInContext();e.exports=n(276)(r,r)},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(29))},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(10);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return V}));var r=n(1),i=n.n(r),o=(n(275),i.a.createContext(null));var a=function(e){e()},s={notify:function(){}};function u(){var e=a,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var c=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=u())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},e}();var l=function(e){var t=e.store,n=e.context,a=e.children,s=Object(r.useMemo)((function(){var e=new c(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),u=Object(r.useMemo)((function(){return t.getState()}),[t]);Object(r.useEffect)((function(){var e=s.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[s,u]);var l=n||o;return i.a.createElement(l.Provider,{value:s},a)};function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var p=n(205),d=n.n(p),m=n(339),v="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,g=[],y=[null,null];function _(e,t){var n=e[1];return[t.payload,n+1]}function x(e,t,n){v((function(){return e.apply(void 0,t)}),n)}function b(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function w(e,t,n,r,i,o,a,s,u,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(p){n=p,f=p}n||(f=null),e===o.current?a.current||u():(o.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var S=function(){return[null,0]};function E(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,u=n.methodName,l=void 0===u?"connectAdvanced":u,p=n.renderCountProp,v=void 0===p?void 0:p,E=n.shouldHandleStateChanges,T=void 0===E||E,A=n.storeKey,M=void 0===A?"store":A,C=(n.withRef,n.forwardRef),k=void 0!==C&&C,R=n.context,P=void 0===R?o:R,L=h(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),O=P;return function(t){var n=t.displayName||t.name||"Component",o=s(n),a=f({},L,{getDisplayName:s,methodName:l,renderCountProp:v,shouldHandleStateChanges:T,storeKey:M,displayName:o,wrappedComponentName:n,WrappedComponent:t}),u=L.pure;var p=u?r.useMemo:function(e){return e()};function E(n){var o=Object(r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=h(n,["reactReduxForwardedRef"]);return[n.context,e,t]}),[n]),s=o[0],u=o[1],l=o[2],d=Object(r.useMemo)((function(){return s&&s.Consumer&&Object(m.isContextConsumer)(i.a.createElement(s.Consumer,null))?s:O}),[s,O]),v=Object(r.useContext)(d),E=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(v)&&Boolean(v.store);var A=E?n.store:v.store,M=Object(r.useMemo)((function(){return function(t){return e(t.dispatch,a)}(A)}),[A]),C=Object(r.useMemo)((function(){if(!T)return y;var e=new c(A,E?null:v.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[A,E,v]),k=C[0],R=C[1],P=Object(r.useMemo)((function(){return E?v:f({},v,{subscription:k})}),[E,v,k]),L=Object(r.useReducer)(_,g,S),I=L[0][0],N=L[1];if(I&&I.error)throw I.error;var D=Object(r.useRef)(),F=Object(r.useRef)(l),z=Object(r.useRef)(),B=Object(r.useRef)(!1),j=p((function(){return z.current&&l===F.current?z.current:M(A.getState(),l)}),[A,I,l]);x(b,[F,D,B,l,j,z,R]),x(w,[T,A,k,M,F,D,B,z,R,N],[A,k,M]);var V=Object(r.useMemo)((function(){return i.a.createElement(t,f({},j,{ref:u}))}),[u,t,j]);return Object(r.useMemo)((function(){return T?i.a.createElement(d.Provider,{value:P},V):V}),[d,V,P])}var A=u?i.a.memo(E):E;if(A.WrappedComponent=t,A.displayName=o,k){var C=i.a.forwardRef((function(e,t){return i.a.createElement(A,f({},e,{reactReduxForwardedRef:t}))}));return C.displayName=o,C.WrappedComponent=t,d()(C,t)}return d()(A,t)}}function T(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function A(e,t){if(T(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!T(e[n[i]],t[n[i]]))return!1;return!0}var M=n(86);function C(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function k(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function R(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=k(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=k(i),i=r(t,n)),i},r}}var P=[function(e){return"function"===typeof e?R(e):void 0},function(e){return e?void 0:C((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?C((function(t){return Object(M.b)(e,t)})):void 0}];var L=[function(e){return"function"===typeof e?R(e):void 0},function(e){return e?void 0:C((function(){return{}}))}];function O(e,t,n){return f({},n,e,t)}var I=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return O}}];function N(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function D(e,t,n,r,i){var o,a,s,u,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,p=!1;function d(i,p){var d=!f(p,a),m=!l(i,o);return o=i,a=p,d&&m?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):d?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?function(){var t=e(o,a),r=!h(t,s);return s=t,r&&(c=n(s,u,a)),c}():c}return function(i,l){return p?d(i,l):(s=e(o=i,a=l),u=t(r,a),c=n(s,u,a),p=!0,c)}}function F(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=h(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?D:N)(a,s,u,e,o)}function z(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}function j(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?E:n,i=t.mapStateToPropsFactories,o=void 0===i?L:i,a=t.mapDispatchToPropsFactories,s=void 0===a?P:a,u=t.mergePropsFactories,c=void 0===u?I:u,l=t.selectorFactory,p=void 0===l?F:l;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,l=void 0===u||u,d=a.areStatesEqual,m=void 0===d?B:d,v=a.areOwnPropsEqual,g=void 0===v?A:v,y=a.areStatePropsEqual,_=void 0===y?A:y,x=a.areMergedPropsEqual,b=void 0===x?A:x,w=h(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=z(e,o,"mapStateToProps"),E=z(t,s,"mapDispatchToProps"),T=z(n,c,"mergeProps");return r(p,f({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:E,initMergeProps:T,pure:l,areStatesEqual:m,areOwnPropsEqual:g,areStatePropsEqual:_,areMergedPropsEqual:b},w))}}var V=j();var U,G=n(85);U=G.unstable_batchedUpdates,a=U},function(e,t,n){var r=n(9),i=n(145),o=n(24),a=n(88),s=n(149),u=n(216),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(s&&o(l,e)?c[e]=l[e]:c[e]=f("Symbol."+e)),c[e]}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(5);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(44),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r,i=n(249),o=n(15),a=n(9),s=n(10),u=n(24),c=n(97),l=n(35),f=n(32),h=n(22).f,p=n(50),d=n(80),m=n(13),v=n(88),g=a.Int8Array,y=g&&g.prototype,_=a.Uint8ClampedArray,x=_&&_.prototype,b=g&&p(g),w=y&&p(y),S=Object.prototype,E=S.isPrototypeOf,T=m("toStringTag"),A=v("TYPED_ARRAY_TAG"),M=i&&!!d&&"Opera"!==c(a.opera),C=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R=function(e){return s(e)&&u(k,c(e))};for(r in k)a[r]||(M=!1);if((!M||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},M))for(r in k)a[r]&&d(a[r],b);if((!M||!w||w===S)&&(w=b.prototype,M))for(r in k)a[r]&&d(a[r].prototype,w);if(M&&p(x)!==w&&d(x,w),o&&!u(w,T))for(r in C=!0,h(w,T,{get:function(){return s(this)?this[A]:void 0}}),k)a[r]&&l(a[r],A,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:C&&A,aTypedArray:function(e){if(R(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(d){if(E.call(b,e))return e}else for(var t in k)if(u(k,r)){var n=a[t];if(n&&(e===n||E.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in k){var i=a[r];i&&u(i.prototype,e)&&delete i.prototype[e]}w[e]&&!n||f(w,e,n?t:M&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(d){if(n)for(r in k)(i=a[r])&&u(i,e)&&delete i[e];if(b[e]&&!n)return;try{return f(b,e,n?t:M&&g[e]||t)}catch(s){}}for(r in k)!(i=a[r])||i[e]&&!n||f(i,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||u(k,t)},isTypedArray:R,TypedArray:b,TypedArrayPrototype:w}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(169);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(68),i=n(38);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t,n){var r=n(15),i=n(210),o=n(11),a=n(48),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(34);e.exports=function(e){return Object(r(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(552),i=n(553),o=n(273),a=n(554);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t){e.exports=function(e){return e<-2}},function(e,t,n){e.exports=function(e,t,n,i){var o,a=i?i-1:1/0;return function(i){if(r(i))return e.enter(n),o=0,s(i);return t(i)};function s(i){return r(i)&&o++<a?(e.consume(i),s):(e.exit(n),t(i))}};var r=n(56)},function(e,t,n){var r=n(61),i=n(87),o=n(23),a=n(16),s=n(93),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f;return function(p,d,m,v){for(var g,y,_=o(p),x=i(_),b=r(d,m,3),w=a(x.length),S=0,E=v||s,T=t?E(p,w):n?E(p,0):void 0;w>S;S++)if((h||S in x)&&(y=b(g=x[S],S,_),e))if(t)T[S]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:u.call(T,g)}else if(l)return!1;return f?-1:c||l?l:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(15),i=n(108),o=n(58),a=n(39),s=n(48),u=n(24),c=n(210),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var r=n(214),i=n(24),o=n(220),a=n(22).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(9),i=n(35),o=n(24),a=n(143),s=n(144),u=n(40),c=u.get,l=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(u?!h&&e[t]&&(c=!0):delete e[t],c?e[t]=n:i(e,t,n)):c?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t){function n(e,t,n){this.f=e,this.once=t,this.priority=n}function r(){this.handlers=[]}function i(e,t){for(var n=0;n<e.handlers.length&&!(e.handlers[n].priority<t.priority);n++);e.handlers=e.handlers.slice(0,n).concat(t).concat(e.handlers.slice(n))}function o(){r.call(this)}function a(){r.call(this)}function s(){r.call(this)}t.Subscription=r,r.prototype.handlersForDispatch=function(){for(var e=this.handlers,t=null,n=e.length-1;n>=0;n--)e[n].once&&(t||(t=e.slice()),t.splice(n,1));return t&&(this.handlers=t),e},r.prototype.add=function(e,t){i(this,new n(e,!1,t||0))},r.prototype.addOnce=function(e,t){i(this,new n(e,!0,t||0))},r.prototype.remove=function(e){for(var t=0;t<this.handlers.length;t++)if(this.handlers[t].f==e)return void(this.handlers=this.handlers.slice(0,t).concat(this.handlers.slice(t+1)))},r.prototype.hasHandler=function(){return this.handlers.length>0},r.prototype.dispatch=function(){for(var e=this.handlersForDispatch(),t=0;t<e.length;t++)e[t].f.apply(null,arguments)},t.PipelineSubscription=o,o.prototype=new r,o.prototype.dispatch=function(e){for(var t=this.handlersForDispatch(),n=0;n<t.length;n++)e=t[n].f(e);return e},t.StoppableSubscription=a,a.prototype=new r,a.prototype.dispatch=function(){for(var e=this.handlersForDispatch(),t=0;t<e.length;t++){var n=e[t].f.apply(null,arguments);if(n)return n}},t.DOMSubscription=s,s.prototype=new r,s.prototype.dispatch=function(e){for(var t=this.handlersForDispatch(),n=0;n<t.length;n++)if(t[n].f(e)||e.defaultPrevented)return!0;return!1}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(15),i=n(22),o=n(58);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(15),i=n(5),o=n(24),a=Object.defineProperty,s={},u=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],c=!!o(t,"ACCESSORS")&&t.ACCESSORS,l=o(t,0)?t[0]:u,f=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(c&&!r)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,l,f)}))}},function(e,t,n){var r=n(281),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(87),i=n(34);e.exports=function(e){return r(i(e))}},function(e,t,n){var r,i,o,a=n(212),s=n(9),u=n(10),c=n(35),l=n(24),f=n(109),h=n(89),p=s.WeakMap;if(a){var d=new p,m=d.get,v=d.has,g=d.set;r=function(e,t){return g.call(d,e,t),t},i=function(e){return m.call(d,e)||{}},o=function(e){return v.call(d,e)}}else{var y=f("state");h[y]=!0,r=function(e,t){return c(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(34),i=/"/g;e.exports=function(e,t,n,o){var a=String(r(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+t+">"}},function(e,t,n){var r=n(5);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(559),i=n(560),o=n(273),a=n(561);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(214),i=n(9),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(24),i=n(23),o=n(109),a=n(156),s=o("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=!1},function(e,t,n){var r=n(22).f,i=n(24),o=n(13)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(3),i=n(9),o=n(15),a=n(168),s=n(17),u=n(158),c=n(63),l=n(58),f=n(35),h=n(16),p=n(250),d=n(265),m=n(48),v=n(24),g=n(97),y=n(10),_=n(60),x=n(80),b=n(70).f,w=n(266),S=n(28).forEach,E=n(81),T=n(22),A=n(30),M=n(40),C=n(115),k=M.get,R=M.set,P=T.f,L=A.f,O=Math.round,I=i.RangeError,N=u.ArrayBuffer,D=u.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,z=s.TYPED_ARRAY_TAG,B=s.TypedArray,j=s.TypedArrayPrototype,V=s.aTypedArrayConstructor,U=s.isTypedArray,G=function(e,t){for(var n=0,r=t.length,i=new(V(e))(r);r>n;)i[n]=t[n++];return i},H=function(e,t){P(e,t,{get:function(){return k(this)[t]}})},W=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},q=function(e,t){return U(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Y=function(e,t){return q(e,t=m(t,!0))?l(2,e[t]):L(e,t)},X=function(e,t,n){return!(q(e,t=m(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)};o?(F||(A.f=Y,T.f=X,H(j,"buffer"),H(j,"byteOffset"),H(j,"byteLength"),H(j,"length")),r({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:Y,defineProperty:X}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,l="set"+e,m=i[s],v=m,g=v&&v.prototype,T={},A=function(e,t){P(e,t,{get:function(){return function(e,t){var n=k(e);return n.view[u](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=k(e);n&&(r=(r=O(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};F?a&&(v=t((function(e,t,n,r){return c(e,v,s),C(y(t)?W(t)?void 0!==r?new m(t,d(n,o),r):void 0!==n?new m(t,d(n,o)):new m(t):U(t)?G(v,t):w.call(v,t):new m(p(t)),e,v)})),x&&x(v,B),S(b(m),(function(e){e in v||f(v,e,m[e])})),v.prototype=g):(v=t((function(e,t,n,r){c(e,v,s);var i,a,u,l=0,f=0;if(y(t)){if(!W(t))return U(t)?G(v,t):w.call(v,t);i=t,f=d(n,o);var m=t.byteLength;if(void 0===r){if(m%o)throw I("Wrong length");if((a=m-f)<0)throw I("Wrong length")}else if((a=h(r)*o)+f>m)throw I("Wrong length");u=a/o}else u=p(t),i=new N(a=u*o);for(R(e,{buffer:i,byteOffset:f,byteLength:a,length:u,view:new D(i)});l<u;)A(e,l++)})),x&&x(v,B),g=v.prototype=_(j)),g.constructor!==v&&f(g,"constructor",v),z&&f(g,z,s),T[s]=v,r({global:!0,forced:v!=m,sham:!F},T),"BYTES_PER_ELEMENT"in v||f(v,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in g||f(g,"BYTES_PER_ELEMENT",o),E(s)}):e.exports=function(){}},function(e,t){e.exports=function(e){return-2===e||-1===e||32===e}},function(e,t){e.exports=function(e){return e<0||32===e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(44),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r,i=n(11),o=n(217),a=n(147),s=n(89),u=n(218),c=n(142),l=n(109),f=l("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}d=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):function(){var e,t=c("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F}();for(var e=a.length;e--;)delete d.prototype[a[e]];return d()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[f]=e):n=d(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(45);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(13),i=n(60),o=n(22),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(11),i=n(45),o=n(13)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e,t,n,r){var i,o,a=e.length,s=0;t=t<0?-t>a?0:a+t:t>a?a:t;if(n=n>0?n:0,r.length<1e4)return(o=Array.from(r)).unshift(t,n),[].splice.apply(e,o);i=[].splice.apply(e,[t,n]);for(;s<r.length;)(o=r.slice(s,s+1e4)).unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4;return i}},function(e,t,n){e.exports=function(e){return function(t){return e.test(r(t))}};var r=n(133)},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return p}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),s="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),u="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),c="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=o&&(u||+o[1]<57)||s&&u,f=0;f<10;f++)r[48+f]=r[96+f]=String(f);for(f=1;f<=24;f++)r[f+111]="F"+f;for(f=65;f<=90;f++)r[f]=String.fromCharCode(f+32),i[f]=String.fromCharCode(f);for(var h in r)i.hasOwnProperty(h)||(i[h]=r[h]);function p(e){var t=!(l&&(e.ctrlKey||e.altKey||e.metaKey)||(a||c)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?i:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}},function(e,t,n){var r=n(215),i=n(147).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(48),i=n(22),o=n(58);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){var r=n(89),i=n(10),o=n(24),a=n(22).f,s=n(88),u=n(98),c=s("meta"),l=0,f=Object.isExtensible||function(){return!0},h=function(e){a(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!f(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},getWeakData:function(e,t){if(!o(e,c)){if(!f(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},onFreeze:function(e){return u&&p.REQUIRED&&f(e)&&!o(e,c)&&h(e),e}};r[c]=!0},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(170),i=t.ValidationError=function(e,t,n,r,i,o){if(Array.isArray(r)?(this.path=r,this.property=r.reduce((function(e,t){return e+f(t)}),"instance")):void 0!==r&&(this.property=r),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}void 0!==t&&(this.instance=t),this.name=i,this.argument=o,this.stack=this.toString()};i.prototype.toString=function(){return this.property+" "+this.message};var o=t.ValidatorResult=function(e,t,n,r){this.instance=e,this.schema=t,this.options=n,this.path=r.path,this.propertyPath=r.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&!0===n.disableFormat};function a(e,t){return t+": "+e.toString()+"\n"}function s(e){Error.captureStackTrace&&Error.captureStackTrace(this,s),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}o.prototype.addError=function(e){var t;if("string"==typeof e)t=new i(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new i(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new s(this);if(this.throwError)throw t;return t},o.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},o.prototype.toString=function(e){return this.errors.map(a).join("")},Object.defineProperty(o.prototype,"valid",{get:function(){return!this.errors.length}}),e.exports.ValidatorResultError=s,s.prototype=new Error,s.prototype.constructor=s,s.prototype.name="Validation Error";var u=t.SchemaError=function e(t,n){this.message=t,this.schema=n,Error.call(this,t),Error.captureStackTrace(this,e)};u.prototype=Object.create(Error.prototype,{constructor:{value:u,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var c=t.SchemaContext=function(e,t,n,r,i){this.schema=e,this.options=t,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce((function(e,t){return e+f(t)}),"instance")):this.propertyPath=n,this.base=r,this.schemas=i};c.prototype.resolve=function(e){return r.resolve(this.base,e)},c.prototype.makeChild=function(e,t){var n=void 0===t?this.path:this.path.concat([t]),i=e.$id||e.id,o=r.resolve(this.base,i||""),a=new c(e,this.options,n,o,Object.create(this.schemas));return i&&!a.schemas[o]&&(a.schemas[o]=e),a};var l=t.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"===typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(n){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};l.regexp=l.regex,l.pattern=l.regex,l.ipv4=l["ip-address"],t.isFormat=function(e,t,n){if("string"===typeof e&&void 0!==l[t]){if(l[t]instanceof RegExp)return l[t].test(e);if("function"===typeof l[t])return l[t](e)}else if(n&&n.customFormats&&"function"===typeof n.customFormats[t])return n.customFormats[t](e);return!0};var f=t.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function h(e,t,n,r){"object"===typeof n?t[r]=m(e[r],n):-1===e.indexOf(n)&&t.push(n)}function p(e,t,n){t[n]=e[n]}function d(e,t,n,r){"object"===typeof t[r]&&t[r]&&e[r]?n[r]=m(e[r],t[r]):n[r]=t[r]}function m(e,t){var n=Array.isArray(t),r=n&&[]||{};return n?(e=e||[],r=r.concat(e),t.forEach(h.bind(null,e,r))):(e&&"object"===typeof e&&Object.keys(e).forEach(p.bind(null,e,r)),Object.keys(t).forEach(d.bind(null,e,t,r))),r}function v(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}t.deepCompareStrict=function e(t,n){if(typeof t!==typeof n)return!1;if(Array.isArray(t))return!!Array.isArray(n)&&(t.length===n.length&&t.every((function(r,i){return e(t[i],n[i])})));if("object"===typeof t){if(!t||!n)return t===n;var r=Object.keys(t),i=Object.keys(n);return r.length===i.length&&r.every((function(r){return e(t[r],n[r])}))}return t===n},e.exports.deepMerge=m,t.objectGetPath=function(e,t){for(var n,r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var i=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e},t.encodePath=function(e){return e.map(v).join("")},t.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!==typeof e&&(e=Number(e));var n=e.toString().split("e");if(2===n.length){if("-"!==n[1][0])return t;t=Number(n[1].slice(1))}var r=n[0].split(".");return 2===r.length&&(t+=r[1].length),t},t.isSchema=function(e){return"object"===typeof e&&e||"boolean"===typeof e}},function(e,t,n){var r=n(581),i=n(586);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(84),i=n(582),o=n(583),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,n){e.exports=function(e){return r({},e)};var r=n(135)},function(e,t,n){(function(e,r){var i;(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",d="[object GeneratorFunction]",m="[object Map]",v="[object Number]",g="[object Object]",y="[object RegExp]",_="[object Set]",x="[object String]",b="[object Symbol]",w="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",T="[object Float32Array]",A="[object Float64Array]",M="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",R="[object Uint8Array]",P="[object Uint16Array]",L="[object Uint32Array]",O=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,z=RegExp(D.source),B=RegExp(F.source),j=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(q.source),X=/^\s+|\s+$/g,$=/^\s+/,Z=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,ee=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,oe=/^0b[01]+$/i,ae=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ue=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="[\\ud800-\\udfff]",me="["+pe+"]",ve="["+he+"]",ge="\\d+",ye="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",xe="[^\\ud800-\\udfff"+pe+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",be="\\ud83c[\\udffb-\\udfff]",we="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",Ee="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ae="(?:"+_e+"|"+xe+")",Me="(?:"+Te+"|"+xe+")",Ce="(?:"+ve+"|"+be+")"+"?",ke="[\\ufe0e\\ufe0f]?"+Ce+("(?:\\u200d(?:"+[we,Se,Ee].join("|")+")[\\ufe0e\\ufe0f]?"+Ce+")*"),Re="(?:"+[ye,Se,Ee].join("|")+")"+ke,Pe="(?:"+[we+ve+"?",ve,Se,Ee,de].join("|")+")",Le=RegExp("['\u2019]","g"),Oe=RegExp(ve,"g"),Ie=RegExp(be+"(?="+be+")|"+Pe+ke,"g"),Ne=RegExp([Te+"?"+_e+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[me,Te,"$"].join("|")+")",Me+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[me,Te+Ae,"$"].join("|")+")",Te+"?"+Ae+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Te+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Re].join("|"),"g"),De=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Be=-1,je={};je[T]=je[A]=je[M]=je[C]=je[k]=je[R]=je["[object Uint8ClampedArray]"]=je[P]=je[L]=!0,je[u]=je[c]=je[S]=je[l]=je[E]=je[f]=je[h]=je[p]=je[m]=je[v]=je[g]=je[y]=je[_]=je[x]=je[w]=!1;var Ve={};Ve[u]=Ve[c]=Ve[S]=Ve[E]=Ve[l]=Ve[f]=Ve[T]=Ve[A]=Ve[M]=Ve[C]=Ve[k]=Ve[m]=Ve[v]=Ve[g]=Ve[y]=Ve[_]=Ve[x]=Ve[b]=Ve[R]=Ve["[object Uint8ClampedArray]"]=Ve[P]=Ve[L]=!0,Ve[h]=Ve[p]=Ve[w]=!1;var Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,He=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,qe="object"==typeof self&&self&&self.Object===Object&&self,Ye=We||qe||Function("return this")(),Xe=t&&!t.nodeType&&t,$e=Xe&&"object"==typeof r&&r&&!r.nodeType&&r,Ze=$e&&$e.exports===Xe,Ke=Ze&&We.process,Je=function(){try{var e=$e&&$e.require&&$e.require("util").types;return e||Ke&&Ke.binding&&Ke.binding("util")}catch(t){}}(),Qe=Je&&Je.isArrayBuffer,et=Je&&Je.isDate,tt=Je&&Je.isMap,nt=Je&&Je.isRegExp,rt=Je&&Je.isSet,it=Je&&Je.isTypedArray;function ot(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function at(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function ft(e,t){return!!(null==e?0:e.length)&&bt(e,t,0)>-1}function ht(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function vt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function gt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=Tt("length");function _t(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function xt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function bt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):xt(e,St,n)}function wt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function St(e){return e!==e}function Et(e,t){var n=null==e?0:e.length;return n?Ct(e,t)/n:NaN}function Tt(e){return function(t){return null==t?void 0:t[e]}}function At(e){return function(t){return null==e?void 0:e[t]}}function Mt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ct(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Rt(e){return function(t){return e(t)}}function Pt(e,t){return pt(t,(function(t){return e[t]}))}function Lt(e,t){return e.has(t)}function Ot(e,t){for(var n=-1,r=e.length;++n<r&&bt(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Dt=At({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Ft=At({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function zt(e){return"\\"+Ue[e]}function Bt(e){return De.test(e)}function jt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Vt(e,t){return function(n){return e(t(n))}}function Ut(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Wt(e){return Bt(e)?function(e){var t=Ie.lastIndex=0;for(;Ie.test(e);)++t;return t}(e):yt(e)}function qt(e){return Bt(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split("")}(e)}var Yt=At({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Xt=function e(t){var n=(t=null==t?Ye:Xt.defaults(Ye.Object(),t,Xt.pick(Ye,ze))).Array,r=t.Date,i=t.Error,he=t.Function,pe=t.Math,de=t.Object,me=t.RegExp,ve=t.String,ge=t.TypeError,ye=n.prototype,_e=he.prototype,xe=de.prototype,be=t["__core-js_shared__"],we=_e.toString,Se=xe.hasOwnProperty,Ee=0,Te=function(){var e=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ae=xe.toString,Me=we.call(de),Ce=Ye._,ke=me("^"+we.call(Se).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ze?t.Buffer:void 0,Pe=t.Symbol,Ie=t.Uint8Array,De=Re?Re.allocUnsafe:void 0,Ue=Vt(de.getPrototypeOf,de),We=de.create,qe=xe.propertyIsEnumerable,Xe=ye.splice,$e=Pe?Pe.isConcatSpreadable:void 0,Ke=Pe?Pe.iterator:void 0,Je=Pe?Pe.toStringTag:void 0,yt=function(){try{var e=Ji(de,"defineProperty");return e({},"",{}),e}catch(t){}}(),At=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,$t=r&&r.now!==Ye.Date.now&&r.now,Zt=t.setTimeout!==Ye.setTimeout&&t.setTimeout,Kt=pe.ceil,Jt=pe.floor,Qt=de.getOwnPropertySymbols,en=Re?Re.isBuffer:void 0,tn=t.isFinite,nn=ye.join,rn=Vt(de.keys,de),on=pe.max,an=pe.min,sn=r.now,un=t.parseInt,cn=pe.random,ln=ye.reverse,fn=Ji(t,"DataView"),hn=Ji(t,"Map"),pn=Ji(t,"Promise"),dn=Ji(t,"Set"),mn=Ji(t,"WeakMap"),vn=Ji(de,"create"),gn=mn&&new mn,yn={},_n=Ao(fn),xn=Ao(hn),bn=Ao(pn),wn=Ao(dn),Sn=Ao(mn),En=Pe?Pe.prototype:void 0,Tn=En?En.valueOf:void 0,An=En?En.toString:void 0;function Mn(e){if(Ga(e)&&!La(e)&&!(e instanceof Pn)){if(e instanceof Rn)return e;if(Se.call(e,"__wrapped__"))return Mo(e)}return new Rn(e)}var Cn=function(){function e(){}return function(t){if(!Ua(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function kn(){}function Rn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Pn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function On(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new In;++t<n;)this.add(e[t])}function Dn(e){var t=this.__data__=new On(e);this.size=t.size}function Fn(e,t){var n=La(e),r=!n&&Pa(e),i=!n&&!r&&Da(e),o=!n&&!r&&!i&&Ka(e),a=n||r||i||o,s=a?kt(e.length,ve):[],u=s.length;for(var c in e)!t&&!Se.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||oo(c,u))||s.push(c);return s}function zn(e){var t=e.length;return t?e[Nr(0,t-1)]:void 0}function Bn(e,t){return So(vi(e),Xn(t,0,e.length))}function jn(e){return So(vi(e))}function Vn(e,t,n){(void 0!==n&&!Ca(e[t],n)||void 0===n&&!(t in e))&&qn(e,t,n)}function Un(e,t,n){var r=e[t];Se.call(e,t)&&Ca(r,n)&&(void 0!==n||t in e)||qn(e,t,n)}function Gn(e,t){for(var n=e.length;n--;)if(Ca(e[n][0],t))return n;return-1}function Hn(e,t,n,r){return Qn(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Wn(e,t){return e&&gi(t,_s(t),e)}function qn(e,t,n){"__proto__"==t&&yt?yt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Yn(e,t){for(var r=-1,i=t.length,o=n(i),a=null==e;++r<i;)o[r]=a?void 0:ds(e,t[r]);return o}function Xn(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function $n(e,t,n,r,i,o){var a,s=1&t,c=2&t,h=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Ua(e))return e;var w=La(e);if(w){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Se.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return vi(e,a)}else{var O=to(e),I=O==p||O==d;if(Da(e))return li(e,s);if(O==g||O==u||I&&!i){if(a=c||I?{}:ro(e),!s)return c?function(e,t){return gi(e,eo(e),t)}(e,function(e,t){return e&&gi(t,xs(t),e)}(a,e)):function(e,t){return gi(e,Qi(e),t)}(e,Wn(a,e))}else{if(!Ve[O])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case S:return fi(e);case l:case f:return new r(+e);case E:return function(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case A:case M:case C:case k:case R:case"[object Uint8ClampedArray]":case P:case L:return hi(e,n);case m:return new r;case v:case x:return new r(e);case y:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case b:return i=e,Tn?de(Tn.call(i)):{}}var i}(e,O,s)}}o||(o=new Dn);var N=o.get(e);if(N)return N;o.set(e,a),Xa(e)?e.forEach((function(r){a.add($n(r,t,n,r,e,o))})):Ha(e)&&e.forEach((function(r,i){a.set(i,$n(r,t,n,i,e,o))}));var D=w?void 0:(h?c?Wi:Hi:c?xs:_s)(e);return st(D||e,(function(r,i){D&&(r=e[i=r]),Un(a,i,$n(r,t,n,i,e,o))})),a}function Zn(e,t,n){var r=n.length;if(null==e)return!r;for(e=de(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}function Kn(e,t,n){if("function"!=typeof e)throw new ge(o);return _o((function(){e.apply(void 0,n)}),t)}function Jn(e,t,n,r){var i=-1,o=ft,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=pt(t,Rt(n))),r?(o=ht,a=!1):t.length>=200&&(o=Lt,a=!1,t=new Nn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}Mn.templateSettings={escape:j,evaluate:V,interpolate:U,variable:"",imports:{_:Mn}},Mn.prototype=kn.prototype,Mn.prototype.constructor=Mn,Rn.prototype=Cn(kn.prototype),Rn.prototype.constructor=Rn,Pn.prototype=Cn(kn.prototype),Pn.prototype.constructor=Pn,Ln.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Ln.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ln.prototype.get=function(e){var t=this.__data__;if(vn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},Ln.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:Se.call(t,e)},Ln.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},On.prototype.clear=function(){this.__data__=[],this.size=0},On.prototype.delete=function(e){var t=this.__data__,n=Gn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},On.prototype.get=function(e){var t=this.__data__,n=Gn(t,e);return n<0?void 0:t[n][1]},On.prototype.has=function(e){return Gn(this.__data__,e)>-1},On.prototype.set=function(e,t){var n=this.__data__,r=Gn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},In.prototype.clear=function(){this.size=0,this.__data__={hash:new Ln,map:new(hn||On),string:new Ln}},In.prototype.delete=function(e){var t=Zi(this,e).delete(e);return this.size-=t?1:0,t},In.prototype.get=function(e){return Zi(this,e).get(e)},In.prototype.has=function(e){return Zi(this,e).has(e)},In.prototype.set=function(e,t){var n=Zi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Nn.prototype.add=Nn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.clear=function(){this.__data__=new On,this.size=0},Dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dn.prototype.get=function(e){return this.__data__.get(e)},Dn.prototype.has=function(e){return this.__data__.has(e)},Dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof On){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new In(r)}return n.set(e,t),this.size=n.size,this};var Qn=xi(sr),er=xi(ur,!0);function tr(e,t){var n=!0;return Qn(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function nr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a===a&&!Za(a):n(a,s)))var s=a,u=o}return u}function rr(e,t){var n=[];return Qn(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function ir(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=io),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?ir(s,t-1,n,r,i):dt(i,s):r||(i[i.length]=s)}return i}var or=bi(),ar=bi(!0);function sr(e,t){return e&&or(e,t,_s)}function ur(e,t){return e&&ar(e,t,_s)}function cr(e,t){return lt(t,(function(t){return Ba(e[t])}))}function lr(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[To(t[n++])];return n&&n==r?e:void 0}function fr(e,t,n){var r=t(e);return La(e)?r:dt(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Je&&Je in de(e)?function(e){var t=Se.call(e,Je),n=e[Je];try{e[Je]=void 0;var r=!0}catch(o){}var i=Ae.call(e);r&&(t?e[Je]=n:delete e[Je]);return i}(e):function(e){return Ae.call(e)}(e)}function pr(e,t){return e>t}function dr(e,t){return null!=e&&Se.call(e,t)}function mr(e,t){return null!=e&&t in de(e)}function vr(e,t,r){for(var i=r?ht:ft,o=e[0].length,a=e.length,s=a,u=n(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=pt(f,Rt(t))),c=an(f.length,c),u[s]=!r&&(t||o>=120&&f.length>=120)?new Nn(s&&f):void 0}f=e[0];var h=-1,p=u[0];e:for(;++h<o&&l.length<c;){var d=f[h],m=t?t(d):d;if(d=r||0!==d?d:0,!(p?Lt(p,m):i(l,m,r))){for(s=a;--s;){var v=u[s];if(!(v?Lt(v,m):i(e[s],m,r)))continue e}p&&p.push(m),l.push(d)}}return l}function gr(e,t,n){var r=null==(e=mo(e,t=ai(t,e)))?e:e[To(zo(t))];return null==r?void 0:ot(r,e,n)}function yr(e){return Ga(e)&&hr(e)==u}function _r(e,t,n,r,i){return e===t||(null==e||null==t||!Ga(e)&&!Ga(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var a=La(e),s=La(t),p=a?c:to(e),d=s?c:to(t),w=(p=p==u?g:p)==g,T=(d=d==u?g:d)==g,A=p==d;if(A&&Da(e)){if(!Da(t))return!1;a=!0,w=!1}if(A&&!w)return o||(o=new Dn),a||Ka(e)?Ui(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new Ie(e),new Ie(t)));case l:case f:case v:return Ca(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case x:return e==t+"";case m:var s=jt;case _:var u=1&r;if(s||(s=Gt),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var p=Ui(s(e),s(t),r,i,o,a);return a.delete(e),p;case b:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,p,n,r,i,o);if(!(1&n)){var M=w&&Se.call(e,"__wrapped__"),C=T&&Se.call(t,"__wrapped__");if(M||C){var k=M?e.value():e,R=C?t.value():t;return o||(o=new Dn),i(k,R,n,r,o)}}if(!A)return!1;return o||(o=new Dn),function(e,t,n,r,i,o){var a=1&n,s=Hi(e),u=s.length,c=Hi(t).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in t:Se.call(t,f)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var d=!0;o.set(e,t),o.set(t,e);var m=a;for(;++l<u;){f=s[l];var v=e[f],g=t[f];if(r)var y=a?r(g,v,f,t,e,o):r(v,g,f,e,t,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){d=!1;break}m||(m="constructor"==f)}if(d&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,o)}(e,t,n,r,_r,i))}function xr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=de(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new Dn;if(r)var h=r(c,l,u,e,t,f);if(!(void 0===h?_r(l,c,3,r,f):h))return!1}}return!0}function br(e){return!(!Ua(e)||(t=e,Te&&Te in t))&&(Ba(e)?ke:ae).test(Ao(e));var t}function wr(e){return"function"==typeof e?e:null==e?Ws:"object"==typeof e?La(e)?Cr(e[0],e[1]):Mr(e):eu(e)}function Sr(e){if(!lo(e))return rn(e);var t=[];for(var n in de(e))Se.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Er(e){if(!Ua(e))return function(e){var t=[];if(null!=e)for(var n in de(e))t.push(n);return t}(e);var t=lo(e),n=[];for(var r in e)("constructor"!=r||!t&&Se.call(e,r))&&n.push(r);return n}function Tr(e,t){return e<t}function Ar(e,t){var r=-1,i=Ia(e)?n(e.length):[];return Qn(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Mr(e){var t=Ki(e);return 1==t.length&&t[0][2]?ho(t[0][0],t[0][1]):function(n){return n===e||xr(n,e,t)}}function Cr(e,t){return so(e)&&fo(t)?ho(To(e),t):function(n){var r=ds(n,e);return void 0===r&&r===t?ms(n,e):_r(t,r,3)}}function kr(e,t,n,r,i){e!==t&&or(t,(function(o,a){if(i||(i=new Dn),Ua(o))!function(e,t,n,r,i,o,a){var s=go(e,n),u=go(t,n),c=a.get(u);if(c)return void Vn(e,n,c);var l=o?o(s,u,n+"",e,t,a):void 0,f=void 0===l;if(f){var h=La(u),p=!h&&Da(u),d=!h&&!p&&Ka(u);l=u,h||p||d?La(s)?l=s:Na(s)?l=vi(s):p?(f=!1,l=li(u,!0)):d?(f=!1,l=hi(u,!0)):l=[]:qa(u)||Pa(u)?(l=s,Pa(s)?l=os(s):Ua(s)&&!Ba(s)||(l=ro(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));Vn(e,n,l)}(e,t,a,n,kr,r,i);else{var s=r?r(go(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Vn(e,a,s)}}),xs)}function Rr(e,t){var n=e.length;if(n)return oo(t+=t<0?n:0,n)?e[t]:void 0}function Pr(e,t,n){t=t.length?pt(t,(function(e){return La(e)?function(t){return lr(t,1===e.length?e[0]:e)}:e})):[Ws];var r=-1;return t=pt(t,Rt($i())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ar(e,(function(e,n,i){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=pi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Lr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=lr(e,a);n(s,a)&&jr(o,ai(a,e),s)}return o}function Or(e,t,n,r){var i=r?wt:bt,o=-1,a=t.length,s=e;for(e===t&&(t=vi(t)),n&&(s=pt(e,Rt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Xe.call(s,u,1),Xe.call(e,u,1);return e}function Ir(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;oo(i)?Xe.call(e,i,1):Jr(e,i)}}return e}function Nr(e,t){return e+Jt(cn()*(t-e+1))}function Dr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Jt(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return xo(po(e,t,Ws),e+"")}function zr(e){return zn(Cs(e))}function Br(e,t){var n=Cs(e);return So(n,Xn(t,0,n.length))}function jr(e,t,n,r){if(!Ua(e))return e;for(var i=-1,o=(t=ai(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=To(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=Ua(l)?l:oo(t[i+1])?[]:{})}Un(s,u,c),s=s[u]}return e}var Vr=gn?function(e,t){return gn.set(e,t),e}:Ws,Ur=yt?function(e,t){return yt(e,"toString",{configurable:!0,enumerable:!1,value:Us(t),writable:!0})}:Ws;function Gr(e){return So(Cs(e))}function Hr(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function Wr(e,t){var n;return Qn(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function qr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Za(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Yr(e,t,Ws,n)}function Yr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,s=null===t,u=Za(t),c=void 0===t;i<o;){var l=Jt((i+o)/2),f=n(e[l]),h=void 0!==f,p=null===f,d=f===f,m=Za(f);if(a)var v=r||d;else v=c?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!m):!p&&!m&&(r?f<=t:f<t);v?i=l+1:o=l}return an(o,4294967294)}function Xr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ca(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function $r(e){return"number"==typeof e?e:Za(e)?NaN:+e}function Zr(e){if("string"==typeof e)return e;if(La(e))return pt(e,Zr)+"";if(Za(e))return An?An.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Kr(e,t,n){var r=-1,i=ft,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=ht;else if(o>=200){var c=t?null:Di(e);if(c)return Gt(c);a=!1,i=Lt,u=new Nn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function Jr(e,t){return null==(e=mo(e,t=ai(t,e)))||delete e[To(zo(t))]}function Qr(e,t,n,r){return jr(e,t,n(lr(e,t)),r)}function ei(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Hr(e,r?0:o,r?o+1:i):Hr(e,r?o+1:0,r?i:o)}function ti(e,t){var n=e;return n instanceof Pn&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,dt([e],t.args))}),n)}function ni(e,t,r){var i=e.length;if(i<2)return i?Kr(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Jn(a[o]||s,e[u],t,r));return Kr(ir(a,1),t,r)}function ri(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}function ii(e){return Na(e)?e:[]}function oi(e){return"function"==typeof e?e:Ws}function ai(e,t){return La(e)?e:so(e,t)?[e]:Eo(as(e))}var si=Fr;function ui(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var ci=At||function(e){return Ye.clearTimeout(e)};function li(e,t){if(t)return e.slice();var n=e.length,r=De?De(n):new e.constructor(n);return e.copy(r),r}function fi(e){var t=new e.constructor(e.byteLength);return new Ie(t).set(new Ie(e)),t}function hi(e,t){var n=t?fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function pi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,o=Za(e),a=void 0!==t,s=null===t,u=t===t,c=Za(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function di(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=on(a-s,0),f=n(c+l),h=!i;++u<c;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[r[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}function mi(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,f=on(a-u,0),h=n(f+l),p=!i;++o<f;)h[o]=e[o];for(var d=o;++c<l;)h[d+c]=t[c];for(;++s<u;)(p||o<a)&&(h[d+r[s]]=e[o++]);return h}function vi(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function gi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?qn(n,s,u):Un(n,s,u)}return n}function yi(e,t){return function(n,r){var i=La(n)?at:Hn,o=t?t():{};return i(n,e,$i(r,2),o)}}function _i(e){return Fr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&ao(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=de(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function xi(e,t){return function(n,r){if(null==n)return n;if(!Ia(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=de(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function bi(e){return function(t,n,r){for(var i=-1,o=de(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function wi(e){return function(t){var n=Bt(t=as(t))?qt(t):void 0,r=n?n[0]:t.charAt(0),i=n?ui(n,1).join(""):t.slice(1);return r[e]()+i}}function Si(e){return function(t){return mt(Bs(Ps(t).replace(Le,"")),e,"")}}function Ei(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Cn(e.prototype),r=e.apply(n,t);return Ua(r)?r:n}}function Ti(e){return function(t,n,r){var i=de(t);if(!Ia(t)){var o=$i(n,3);t=_s(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}}function Ai(e){return Gi((function(t){var n=t.length,r=n,i=Rn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new ge(o);if(i&&!s&&"wrapper"==Yi(a))var s=new Rn([],!0)}for(r=s?r:n;++r<n;){var u=Yi(a=t[r]),c="wrapper"==u?qi(a):void 0;s=c&&uo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Yi(c[0])].apply(s,c[3]):1==a.length&&uo(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&La(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Mi(e,t,r,i,o,a,s,u,c,l){var f=128&t,h=1&t,p=2&t,d=24&t,m=512&t,v=p?void 0:Ei(e);return function g(){for(var y=arguments.length,_=n(y),x=y;x--;)_[x]=arguments[x];if(d)var b=Xi(g),w=Nt(_,b);if(i&&(_=di(_,i,o,d)),a&&(_=mi(_,a,s,d)),y-=w,d&&y<l){var S=Ut(_,b);return Ii(e,t,Mi,g.placeholder,r,_,S,u,c,l-y)}var E=h?r:this,T=p?E[e]:e;return y=_.length,u?_=vo(_,u):m&&y>1&&_.reverse(),f&&c<y&&(_.length=c),this&&this!==Ye&&this instanceof g&&(T=v||Ei(T)),T.apply(E,_)}}function Ci(e,t){return function(n,r){return function(e,t,n,r){return sr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function ki(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Zr(n),r=Zr(r)):(n=$r(n),r=$r(r)),i=e(n,r)}return i}}function Ri(e){return Gi((function(t){return t=pt(t,Rt($i())),Fr((function(n){var r=this;return e(t,(function(e){return ot(e,r,n)}))}))}))}function Pi(e,t){var n=(t=void 0===t?" ":Zr(t)).length;if(n<2)return n?Dr(t,e):t;var r=Dr(t,Kt(e/Wt(t)));return Bt(t)?ui(qt(r),0,e).join(""):r.slice(0,e)}function Li(e){return function(t,r,i){return i&&"number"!=typeof i&&ao(t,r,i)&&(r=i=void 0),t=ts(t),void 0===r?(r=t,t=0):r=ts(r),function(e,t,r,i){for(var o=-1,a=on(Kt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,i=void 0===i?t<r?1:-1:ts(i),e)}}function Oi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=is(t),n=is(n)),e(t,n)}}function Ii(e,t,n,r,i,o,a,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],h=n.apply(void 0,f);return uo(e)&&yo(h,f),h.placeholder=r,bo(h,e,t)}function Ni(e){var t=pe[e];return function(e,n){if(e=is(e),(n=null==n?0:an(ns(n),292))&&tn(e)){var r=(as(e)+"e").split("e");return+((r=(as(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Di=dn&&1/Gt(new dn([,-0]))[1]==1/0?function(e){return new dn(e)}:Zs;function Fi(e){return function(t){var n=to(t);return n==m?jt(t):n==_?Ht(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function zi(e,t,r,i,s,u,c,l){var f=2&t;if(!f&&"function"!=typeof e)throw new ge(o);var h=i?i.length:0;if(h||(t&=-97,i=s=void 0),c=void 0===c?c:on(ns(c),0),l=void 0===l?l:ns(l),h-=s?s.length:0,64&t){var p=i,d=s;i=s=void 0}var m=f?void 0:qi(e),v=[e,t,r,i,s,p,d,u,c,l];if(m&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?di(c,u,t[4]):u,e[4]=c?Ut(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?mi(c,u,t[6]):u,e[6]=c?Ut(e[5],a):t[6]);(u=t[7])&&(e[7]=u);128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(v,m),e=v[0],t=v[1],r=v[2],i=v[3],s=v[4],!(l=v[9]=void 0===v[9]?f?0:e.length:on(v[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,r){var i=Ei(e);return function o(){for(var a=arguments.length,s=n(a),u=a,c=Xi(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:Ut(s,c);if((a-=l.length)<r)return Ii(e,t,Mi,o.placeholder,void 0,s,l,void 0,void 0,r-a);var f=this&&this!==Ye&&this instanceof o?i:e;return ot(f,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Mi.apply(void 0,v):function(e,t,r,i){var o=1&t,a=Ei(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==Ye&&this instanceof t?a:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return ot(h,o?r:this,f)}}(e,t,r,i);else var g=function(e,t,n){var r=1&t,i=Ei(e);return function t(){var o=this&&this!==Ye&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,r);return bo((m?Vr:yo)(g,v),e,t)}function Bi(e,t,n,r){return void 0===e||Ca(e,xe[n])&&!Se.call(r,n)?t:e}function ji(e,t,n,r,i,o){return Ua(e)&&Ua(t)&&(o.set(t,e),kr(e,t,void 0,ji,o),o.delete(t)),e}function Vi(e){return qa(e)?void 0:e}function Ui(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,p=2&n?new Nn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var d=e[f],m=t[f];if(r)var v=a?r(m,d,f,t,e,o):r(d,m,f,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!gt(t,(function(e,t){if(!Lt(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(d!==m&&!i(d,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Gi(e){return xo(po(e,void 0,Oo),e+"")}function Hi(e){return fr(e,_s,Qi)}function Wi(e){return fr(e,xs,eo)}var qi=gn?function(e){return gn.get(e)}:Zs;function Yi(e){for(var t=e.name+"",n=yn[t],r=Se.call(yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Xi(e){return(Se.call(Mn,"placeholder")?Mn:e).placeholder}function $i(){var e=Mn.iteratee||qs;return e=e===qs?wr:e,arguments.length?e(arguments[0],arguments[1]):e}function Zi(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ki(e){for(var t=_s(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fo(i)]}return t}function Ji(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return br(n)?n:void 0}var Qi=Qt?function(e){return null==e?[]:(e=de(e),lt(Qt(e),(function(t){return qe.call(e,t)})))}:ru,eo=Qt?function(e){for(var t=[];e;)dt(t,Qi(e)),e=Ue(e);return t}:ru,to=hr;function no(e,t,n){for(var r=-1,i=(t=ai(t,e)).length,o=!1;++r<i;){var a=To(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Va(i)&&oo(a,i)&&(La(e)||Pa(e))}function ro(e){return"function"!=typeof e.constructor||lo(e)?{}:Cn(Ue(e))}function io(e){return La(e)||Pa(e)||!!($e&&e&&e[$e])}function oo(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ue.test(e))&&e>-1&&e%1==0&&e<t}function ao(e,t,n){if(!Ua(n))return!1;var r=typeof t;return!!("number"==r?Ia(n)&&oo(t,n.length):"string"==r&&t in n)&&Ca(n[t],e)}function so(e,t){if(La(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Za(e))||(H.test(e)||!G.test(e)||null!=t&&e in de(t))}function uo(e){var t=Yi(e),n=Mn[t];if("function"!=typeof n||!(t in Pn.prototype))return!1;if(e===n)return!0;var r=qi(n);return!!r&&e===r[0]}(fn&&to(new fn(new ArrayBuffer(1)))!=E||hn&&to(new hn)!=m||pn&&"[object Promise]"!=to(pn.resolve())||dn&&to(new dn)!=_||mn&&to(new mn)!=w)&&(to=function(e){var t=hr(e),n=t==g?e.constructor:void 0,r=n?Ao(n):"";if(r)switch(r){case _n:return E;case xn:return m;case bn:return"[object Promise]";case wn:return _;case Sn:return w}return t});var co=be?Ba:iu;function lo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xe)}function fo(e){return e===e&&!Ua(e)}function ho(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in de(n)))}}function po(e,t,r){return t=on(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=on(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=n(t+1);++o<t;)u[o]=i[o];return u[t]=r(s),ot(e,this,u)}}function mo(e,t){return t.length<2?e:lr(e,Hr(t,0,-1))}function vo(e,t){for(var n=e.length,r=an(t.length,n),i=vi(e);r--;){var o=t[r];e[r]=oo(o,n)?i[o]:void 0}return e}function go(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var yo=wo(Vr),_o=Zt||function(e,t){return Ye.setTimeout(e,t)},xo=wo(Ur);function bo(e,t,n){var r=t+"";return xo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(K,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!ft(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(Q):[]}(r),n)))}function wo(e){var t=0,n=0;return function(){var r=sn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function So(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Nr(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var Eo=function(e){var t=wa(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,i){t.push(r?i.replace(te,"$1"):n||e)})),t}));function To(e){if("string"==typeof e||Za(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ao(e){if(null!=e){try{return we.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Mo(e){if(e instanceof Pn)return e.clone();var t=new Rn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Co=Fr((function(e,t){return Na(e)?Jn(e,ir(t,1,Na,!0)):[]})),ko=Fr((function(e,t){var n=zo(t);return Na(n)&&(n=void 0),Na(e)?Jn(e,ir(t,1,Na,!0),$i(n,2)):[]})),Ro=Fr((function(e,t){var n=zo(t);return Na(n)&&(n=void 0),Na(e)?Jn(e,ir(t,1,Na,!0),void 0,n):[]}));function Po(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),xt(e,$i(t,3),i)}function Lo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ns(n),i=n<0?on(r+i,0):an(i,r-1)),xt(e,$i(t,3),i,!0)}function Oo(e){return(null==e?0:e.length)?ir(e,1):[]}function Io(e){return e&&e.length?e[0]:void 0}var No=Fr((function(e){var t=pt(e,ii);return t.length&&t[0]===e[0]?vr(t):[]})),Do=Fr((function(e){var t=zo(e),n=pt(e,ii);return t===zo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?vr(n,$i(t,2)):[]})),Fo=Fr((function(e){var t=zo(e),n=pt(e,ii);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?vr(n,void 0,t):[]}));function zo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Bo=Fr(jo);function jo(e,t){return e&&e.length&&t&&t.length?Or(e,t):e}var Vo=Gi((function(e,t){var n=null==e?0:e.length,r=Yn(e,t);return Ir(e,pt(t,(function(e){return oo(e,n)?+e:e})).sort(pi)),r}));function Uo(e){return null==e?e:ln.call(e)}var Go=Fr((function(e){return Kr(ir(e,1,Na,!0))})),Ho=Fr((function(e){var t=zo(e);return Na(t)&&(t=void 0),Kr(ir(e,1,Na,!0),$i(t,2))})),Wo=Fr((function(e){var t=zo(e);return t="function"==typeof t?t:void 0,Kr(ir(e,1,Na,!0),void 0,t)}));function qo(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Na(e))return t=on(e.length,t),!0})),kt(t,(function(t){return pt(e,Tt(t))}))}function Yo(e,t){if(!e||!e.length)return[];var n=qo(e);return null==t?n:pt(n,(function(e){return ot(t,void 0,e)}))}var Xo=Fr((function(e,t){return Na(e)?Jn(e,t):[]})),$o=Fr((function(e){return ni(lt(e,Na))})),Zo=Fr((function(e){var t=zo(e);return Na(t)&&(t=void 0),ni(lt(e,Na),$i(t,2))})),Ko=Fr((function(e){var t=zo(e);return t="function"==typeof t?t:void 0,ni(lt(e,Na),void 0,t)})),Jo=Fr(qo);var Qo=Fr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yo(e,n)}));function ea(e){var t=Mn(e);return t.__chain__=!0,t}function ta(e,t){return t(e)}var na=Gi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Yn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Pn&&oo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ta,args:[i],thisArg:void 0}),new Rn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var ra=yi((function(e,t,n){Se.call(e,n)?++e[n]:qn(e,n,1)}));var ia=Ti(Po),oa=Ti(Lo);function aa(e,t){return(La(e)?st:Qn)(e,$i(t,3))}function sa(e,t){return(La(e)?ut:er)(e,$i(t,3))}var ua=yi((function(e,t,n){Se.call(e,n)?e[n].push(t):qn(e,n,[t])}));var ca=Fr((function(e,t,r){var i=-1,o="function"==typeof t,a=Ia(e)?n(e.length):[];return Qn(e,(function(e){a[++i]=o?ot(t,e,r):gr(e,t,r)})),a})),la=yi((function(e,t,n){qn(e,n,t)}));function fa(e,t){return(La(e)?pt:Ar)(e,$i(t,3))}var ha=yi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var pa=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ao(e,t[0],t[1])?t=[]:n>2&&ao(t[0],t[1],t[2])&&(t=[t[0]]),Pr(e,ir(t,1),[])})),da=$t||function(){return Ye.Date.now()};function ma(e,t,n){return t=n?void 0:t,zi(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function va(e,t){var n;if("function"!=typeof t)throw new ge(o);return e=ns(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ga=Fr((function(e,t,n){var r=1;if(n.length){var i=Ut(n,Xi(ga));r|=32}return zi(e,r,t,n,i)})),ya=Fr((function(e,t,n){var r=3;if(n.length){var i=Ut(n,Xi(ya));r|=32}return zi(t,r,e,n,i)}));function _a(e,t,n){var r,i,a,s,u,c,l=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new ge(o);function d(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function m(e){return l=e,u=_o(g,t),f?d(e):s}function v(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-l>=a}function g(){var e=da();if(v(e))return y(e);u=_o(g,function(e){var n=t-(e-c);return h?an(n,a-(e-l)):n}(e))}function y(e){return u=void 0,p&&r?d(e):(r=i=void 0,s)}function _(){var e=da(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===u)return m(c);if(h)return ci(u),u=_o(g,t),d(c)}return void 0===u&&(u=_o(g,t)),s}return t=is(t)||0,Ua(n)&&(f=!!n.leading,a=(h="maxWait"in n)?on(is(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==u&&ci(u),l=0,r=c=i=u=void 0},_.flush=function(){return void 0===u?s:y(da())},_}var xa=Fr((function(e,t){return Kn(e,1,t)})),ba=Fr((function(e,t,n){return Kn(e,is(t)||0,n)}));function wa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(o);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(wa.Cache||In),n}function Sa(e){if("function"!=typeof e)throw new ge(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}wa.Cache=In;var Ea=si((function(e,t){var n=(t=1==t.length&&La(t[0])?pt(t[0],Rt($i())):pt(ir(t,1),Rt($i()))).length;return Fr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return ot(e,this,r)}))})),Ta=Fr((function(e,t){return zi(e,32,void 0,t,Ut(t,Xi(Ta)))})),Aa=Fr((function(e,t){return zi(e,64,void 0,t,Ut(t,Xi(Aa)))})),Ma=Gi((function(e,t){return zi(e,256,void 0,void 0,void 0,t)}));function Ca(e,t){return e===t||e!==e&&t!==t}var ka=Oi(pr),Ra=Oi((function(e,t){return e>=t})),Pa=yr(function(){return arguments}())?yr:function(e){return Ga(e)&&Se.call(e,"callee")&&!qe.call(e,"callee")},La=n.isArray,Oa=Qe?Rt(Qe):function(e){return Ga(e)&&hr(e)==S};function Ia(e){return null!=e&&Va(e.length)&&!Ba(e)}function Na(e){return Ga(e)&&Ia(e)}var Da=en||iu,Fa=et?Rt(et):function(e){return Ga(e)&&hr(e)==f};function za(e){if(!Ga(e))return!1;var t=hr(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qa(e)}function Ba(e){if(!Ua(e))return!1;var t=hr(e);return t==p||t==d||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ja(e){return"number"==typeof e&&e==ns(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ua(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ga(e){return null!=e&&"object"==typeof e}var Ha=tt?Rt(tt):function(e){return Ga(e)&&to(e)==m};function Wa(e){return"number"==typeof e||Ga(e)&&hr(e)==v}function qa(e){if(!Ga(e)||hr(e)!=g)return!1;var t=Ue(e);if(null===t)return!0;var n=Se.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&we.call(n)==Me}var Ya=nt?Rt(nt):function(e){return Ga(e)&&hr(e)==y};var Xa=rt?Rt(rt):function(e){return Ga(e)&&to(e)==_};function $a(e){return"string"==typeof e||!La(e)&&Ga(e)&&hr(e)==x}function Za(e){return"symbol"==typeof e||Ga(e)&&hr(e)==b}var Ka=it?Rt(it):function(e){return Ga(e)&&Va(e.length)&&!!je[hr(e)]};var Ja=Oi(Tr),Qa=Oi((function(e,t){return e<=t}));function es(e){if(!e)return[];if(Ia(e))return $a(e)?qt(e):vi(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=to(e);return(t==m?jt:t==_?Gt:Cs)(e)}function ts(e){return e?(e=is(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ns(e){var t=ts(e),n=t%1;return t===t?n?t-n:t:0}function rs(e){return e?Xn(ns(e),0,4294967295):0}function is(e){if("number"==typeof e)return e;if(Za(e))return NaN;if(Ua(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ua(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(X,"");var n=oe.test(e);return n||se.test(e)?He(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function os(e){return gi(e,xs(e))}function as(e){return null==e?"":Zr(e)}var ss=_i((function(e,t){if(lo(t)||Ia(t))gi(t,_s(t),e);else for(var n in t)Se.call(t,n)&&Un(e,n,t[n])})),us=_i((function(e,t){gi(t,xs(t),e)})),cs=_i((function(e,t,n,r){gi(t,xs(t),e,r)})),ls=_i((function(e,t,n,r){gi(t,_s(t),e,r)})),fs=Gi(Yn);var hs=Fr((function(e,t){e=de(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&ao(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=xs(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(void 0===l||Ca(l,xe[c])&&!Se.call(e,c))&&(e[c]=o[c])}return e})),ps=Fr((function(e){return e.push(void 0,ji),ot(ws,void 0,e)}));function ds(e,t,n){var r=null==e?void 0:lr(e,t);return void 0===r?n:r}function ms(e,t){return null!=e&&no(e,t,mr)}var vs=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=n}),Us(Ws)),gs=Ci((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),Se.call(e,t)?e[t].push(n):e[t]=[n]}),$i),ys=Fr(gr);function _s(e){return Ia(e)?Fn(e):Sr(e)}function xs(e){return Ia(e)?Fn(e,!0):Er(e)}var bs=_i((function(e,t,n){kr(e,t,n)})),ws=_i((function(e,t,n,r){kr(e,t,n,r)})),Ss=Gi((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=ai(t,e),r||(r=t.length>1),t})),gi(e,Wi(e),n),r&&(n=$n(n,7,Vi));for(var i=t.length;i--;)Jr(n,t[i]);return n}));var Es=Gi((function(e,t){return null==e?{}:function(e,t){return Lr(e,t,(function(t,n){return ms(e,n)}))}(e,t)}));function Ts(e,t){if(null==e)return{};var n=pt(Wi(e),(function(e){return[e]}));return t=$i(t),Lr(e,n,(function(e,n){return t(e,n[0])}))}var As=Fi(_s),Ms=Fi(xs);function Cs(e){return null==e?[]:Pt(e,_s(e))}var ks=Si((function(e,t,n){return t=t.toLowerCase(),e+(n?Rs(t):t)}));function Rs(e){return zs(as(e).toLowerCase())}function Ps(e){return(e=as(e))&&e.replace(ce,Dt).replace(Oe,"")}var Ls=Si((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Os=Si((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Is=wi("toLowerCase");var Ns=Si((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ds=Si((function(e,t,n){return e+(n?" ":"")+zs(t)}));var Fs=Si((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),zs=wi("toUpperCase");function Bs(e,t,n){return e=as(e),void 0===(t=n?void 0:t)?function(e){return Fe.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(ee)||[]}(e):e.match(t)||[]}var js=Fr((function(e,t){try{return ot(e,void 0,t)}catch(n){return za(n)?n:new i(n)}})),Vs=Gi((function(e,t){return st(t,(function(t){t=To(t),qn(e,t,ga(e[t],e))})),e}));function Us(e){return function(){return e}}var Gs=Ai(),Hs=Ai(!0);function Ws(e){return e}function qs(e){return wr("function"==typeof e?e:$n(e,1))}var Ys=Fr((function(e,t){return function(n){return gr(n,e,t)}})),Xs=Fr((function(e,t){return function(n){return gr(e,n,t)}}));function $s(e,t,n){var r=_s(t),i=cr(t,r);null!=n||Ua(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,_s(t)));var o=!(Ua(n)&&"chain"in n)||!!n.chain,a=Ba(e);return st(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,dt([this.value()],arguments))})})),e}function Zs(){}var Ks=Ri(pt),Js=Ri(ct),Qs=Ri(gt);function eu(e){return so(e)?Tt(To(e)):function(e){return function(t){return lr(t,e)}}(e)}var tu=Li(),nu=Li(!0);function ru(){return[]}function iu(){return!1}var ou=ki((function(e,t){return e+t}),0),au=Ni("ceil"),su=ki((function(e,t){return e/t}),1),uu=Ni("floor");var cu=ki((function(e,t){return e*t}),1),lu=Ni("round"),fu=ki((function(e,t){return e-t}),0);return Mn.after=function(e,t){if("function"!=typeof t)throw new ge(o);return e=ns(e),function(){if(--e<1)return t.apply(this,arguments)}},Mn.ary=ma,Mn.assign=ss,Mn.assignIn=us,Mn.assignInWith=cs,Mn.assignWith=ls,Mn.at=fs,Mn.before=va,Mn.bind=ga,Mn.bindAll=Vs,Mn.bindKey=ya,Mn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return La(e)?e:[e]},Mn.chain=ea,Mn.chunk=function(e,t,r){t=(r?ao(e,t,r):void 0===t)?1:on(ns(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=n(Kt(i/t));o<i;)s[a++]=Hr(e,o,o+=t);return s},Mn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Mn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return dt(La(r)?vi(r):[r],ir(t,1))},Mn.cond=function(e){var t=null==e?0:e.length,n=$i();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new ge(o);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var i=e[r];if(ot(i[0],this,n))return ot(i[1],this,n)}}))},Mn.conforms=function(e){return function(e){var t=_s(e);return function(n){return Zn(n,e,t)}}($n(e,1))},Mn.constant=Us,Mn.countBy=ra,Mn.create=function(e,t){var n=Cn(e);return null==t?n:Wn(n,t)},Mn.curry=function e(t,n,r){var i=zi(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.curryRight=function e(t,n,r){var i=zi(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},Mn.debounce=_a,Mn.defaults=hs,Mn.defaultsDeep=ps,Mn.defer=xa,Mn.delay=ba,Mn.difference=Co,Mn.differenceBy=ko,Mn.differenceWith=Ro,Mn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||void 0===t?1:ns(t))<0?0:t,r):[]},Mn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||void 0===t?1:ns(t)))<0?0:t):[]},Mn.dropRightWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!0,!0):[]},Mn.dropWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!0):[]},Mn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ao(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ns(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ns(r))<0&&(r+=i),r=n>r?0:rs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Mn.filter=function(e,t){return(La(e)?lt:rr)(e,$i(t,3))},Mn.flatMap=function(e,t){return ir(fa(e,t),1)},Mn.flatMapDeep=function(e,t){return ir(fa(e,t),1/0)},Mn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ns(n),ir(fa(e,t),n)},Mn.flatten=Oo,Mn.flattenDeep=function(e){return(null==e?0:e.length)?ir(e,1/0):[]},Mn.flattenDepth=function(e,t){return(null==e?0:e.length)?ir(e,t=void 0===t?1:ns(t)):[]},Mn.flip=function(e){return zi(e,512)},Mn.flow=Gs,Mn.flowRight=Hs,Mn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Mn.functions=function(e){return null==e?[]:cr(e,_s(e))},Mn.functionsIn=function(e){return null==e?[]:cr(e,xs(e))},Mn.groupBy=ua,Mn.initial=function(e){return(null==e?0:e.length)?Hr(e,0,-1):[]},Mn.intersection=No,Mn.intersectionBy=Do,Mn.intersectionWith=Fo,Mn.invert=vs,Mn.invertBy=gs,Mn.invokeMap=ca,Mn.iteratee=qs,Mn.keyBy=la,Mn.keys=_s,Mn.keysIn=xs,Mn.map=fa,Mn.mapKeys=function(e,t){var n={};return t=$i(t,3),sr(e,(function(e,r,i){qn(n,t(e,r,i),e)})),n},Mn.mapValues=function(e,t){var n={};return t=$i(t,3),sr(e,(function(e,r,i){qn(n,r,t(e,r,i))})),n},Mn.matches=function(e){return Mr($n(e,1))},Mn.matchesProperty=function(e,t){return Cr(e,$n(t,1))},Mn.memoize=wa,Mn.merge=bs,Mn.mergeWith=ws,Mn.method=Ys,Mn.methodOf=Xs,Mn.mixin=$s,Mn.negate=Sa,Mn.nthArg=function(e){return e=ns(e),Fr((function(t){return Rr(t,e)}))},Mn.omit=Ss,Mn.omitBy=function(e,t){return Ts(e,Sa($i(t)))},Mn.once=function(e){return va(2,e)},Mn.orderBy=function(e,t,n,r){return null==e?[]:(La(t)||(t=null==t?[]:[t]),La(n=r?void 0:n)||(n=null==n?[]:[n]),Pr(e,t,n))},Mn.over=Ks,Mn.overArgs=Ea,Mn.overEvery=Js,Mn.overSome=Qs,Mn.partial=Ta,Mn.partialRight=Aa,Mn.partition=ha,Mn.pick=Es,Mn.pickBy=Ts,Mn.property=eu,Mn.propertyOf=function(e){return function(t){return null==e?void 0:lr(e,t)}},Mn.pull=Bo,Mn.pullAll=jo,Mn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,$i(n,2)):e},Mn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Or(e,t,void 0,n):e},Mn.pullAt=Vo,Mn.range=tu,Mn.rangeRight=nu,Mn.rearg=Ma,Mn.reject=function(e,t){return(La(e)?lt:rr)(e,Sa($i(t,3)))},Mn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=$i(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Ir(e,i),n},Mn.rest=function(e,t){if("function"!=typeof e)throw new ge(o);return Fr(e,t=void 0===t?t:ns(t))},Mn.reverse=Uo,Mn.sampleSize=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ns(t),(La(e)?Bn:Br)(e,t)},Mn.set=function(e,t,n){return null==e?e:jr(e,t,n)},Mn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:jr(e,t,n,r)},Mn.shuffle=function(e){return(La(e)?jn:Gr)(e)},Mn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ao(e,t,n)?(t=0,n=r):(t=null==t?0:ns(t),n=void 0===n?r:ns(n)),Hr(e,t,n)):[]},Mn.sortBy=pa,Mn.sortedUniq=function(e){return e&&e.length?Xr(e):[]},Mn.sortedUniqBy=function(e,t){return e&&e.length?Xr(e,$i(t,2)):[]},Mn.split=function(e,t,n){return n&&"number"!=typeof n&&ao(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=as(e))&&("string"==typeof t||null!=t&&!Ya(t))&&!(t=Zr(t))&&Bt(e)?ui(qt(e),0,n):e.split(t,n):[]},Mn.spread=function(e,t){if("function"!=typeof e)throw new ge(o);return t=null==t?0:on(ns(t),0),Fr((function(n){var r=n[t],i=ui(n,0,t);return r&&dt(i,r),ot(e,this,i)}))},Mn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Mn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||void 0===t?1:ns(t))<0?0:t):[]},Mn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||void 0===t?1:ns(t)))<0?0:t,r):[]},Mn.takeRightWhile=function(e,t){return e&&e.length?ei(e,$i(t,3),!1,!0):[]},Mn.takeWhile=function(e,t){return e&&e.length?ei(e,$i(t,3)):[]},Mn.tap=function(e,t){return t(e),e},Mn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ge(o);return Ua(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),_a(e,t,{leading:r,maxWait:t,trailing:i})},Mn.thru=ta,Mn.toArray=es,Mn.toPairs=As,Mn.toPairsIn=Ms,Mn.toPath=function(e){return La(e)?pt(e,To):Za(e)?[e]:vi(Eo(as(e)))},Mn.toPlainObject=os,Mn.transform=function(e,t,n){var r=La(e),i=r||Da(e)||Ka(e);if(t=$i(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ua(e)&&Ba(o)?Cn(Ue(e)):{}}return(i?st:sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Mn.unary=function(e){return ma(e,1)},Mn.union=Go,Mn.unionBy=Ho,Mn.unionWith=Wo,Mn.uniq=function(e){return e&&e.length?Kr(e):[]},Mn.uniqBy=function(e,t){return e&&e.length?Kr(e,$i(t,2)):[]},Mn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Kr(e,void 0,t):[]},Mn.unset=function(e,t){return null==e||Jr(e,t)},Mn.unzip=qo,Mn.unzipWith=Yo,Mn.update=function(e,t,n){return null==e?e:Qr(e,t,oi(n))},Mn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Qr(e,t,oi(n),r)},Mn.values=Cs,Mn.valuesIn=function(e){return null==e?[]:Pt(e,xs(e))},Mn.without=Xo,Mn.words=Bs,Mn.wrap=function(e,t){return Ta(oi(t),e)},Mn.xor=$o,Mn.xorBy=Zo,Mn.xorWith=Ko,Mn.zip=Jo,Mn.zipObject=function(e,t){return ri(e||[],t||[],Un)},Mn.zipObjectDeep=function(e,t){return ri(e||[],t||[],jr)},Mn.zipWith=Qo,Mn.entries=As,Mn.entriesIn=Ms,Mn.extend=us,Mn.extendWith=cs,$s(Mn,Mn),Mn.add=ou,Mn.attempt=js,Mn.camelCase=ks,Mn.capitalize=Rs,Mn.ceil=au,Mn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=is(n))===n?n:0),void 0!==t&&(t=(t=is(t))===t?t:0),Xn(is(e),t,n)},Mn.clone=function(e){return $n(e,4)},Mn.cloneDeep=function(e){return $n(e,5)},Mn.cloneDeepWith=function(e,t){return $n(e,5,t="function"==typeof t?t:void 0)},Mn.cloneWith=function(e,t){return $n(e,4,t="function"==typeof t?t:void 0)},Mn.conformsTo=function(e,t){return null==t||Zn(e,t,_s(t))},Mn.deburr=Ps,Mn.defaultTo=function(e,t){return null==e||e!==e?t:e},Mn.divide=su,Mn.endsWith=function(e,t,n){e=as(e),t=Zr(t);var r=e.length,i=n=void 0===n?r:Xn(ns(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Mn.eq=Ca,Mn.escape=function(e){return(e=as(e))&&B.test(e)?e.replace(F,Ft):e},Mn.escapeRegExp=function(e){return(e=as(e))&&Y.test(e)?e.replace(q,"\\$&"):e},Mn.every=function(e,t,n){var r=La(e)?ct:tr;return n&&ao(e,t,n)&&(t=void 0),r(e,$i(t,3))},Mn.find=ia,Mn.findIndex=Po,Mn.findKey=function(e,t){return _t(e,$i(t,3),sr)},Mn.findLast=oa,Mn.findLastIndex=Lo,Mn.findLastKey=function(e,t){return _t(e,$i(t,3),ur)},Mn.floor=uu,Mn.forEach=aa,Mn.forEachRight=sa,Mn.forIn=function(e,t){return null==e?e:or(e,$i(t,3),xs)},Mn.forInRight=function(e,t){return null==e?e:ar(e,$i(t,3),xs)},Mn.forOwn=function(e,t){return e&&sr(e,$i(t,3))},Mn.forOwnRight=function(e,t){return e&&ur(e,$i(t,3))},Mn.get=ds,Mn.gt=ka,Mn.gte=Ra,Mn.has=function(e,t){return null!=e&&no(e,t,dr)},Mn.hasIn=ms,Mn.head=Io,Mn.identity=Ws,Mn.includes=function(e,t,n,r){e=Ia(e)?e:Cs(e),n=n&&!r?ns(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),$a(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&bt(e,t,n)>-1},Mn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ns(n);return i<0&&(i=on(r+i,0)),bt(e,t,i)},Mn.inRange=function(e,t,n){return t=ts(t),void 0===n?(n=t,t=0):n=ts(n),function(e,t,n){return e>=an(t,n)&&e<on(t,n)}(e=is(e),t,n)},Mn.invoke=ys,Mn.isArguments=Pa,Mn.isArray=La,Mn.isArrayBuffer=Oa,Mn.isArrayLike=Ia,Mn.isArrayLikeObject=Na,Mn.isBoolean=function(e){return!0===e||!1===e||Ga(e)&&hr(e)==l},Mn.isBuffer=Da,Mn.isDate=Fa,Mn.isElement=function(e){return Ga(e)&&1===e.nodeType&&!qa(e)},Mn.isEmpty=function(e){if(null==e)return!0;if(Ia(e)&&(La(e)||"string"==typeof e||"function"==typeof e.splice||Da(e)||Ka(e)||Pa(e)))return!e.length;var t=to(e);if(t==m||t==_)return!e.size;if(lo(e))return!Sr(e).length;for(var n in e)if(Se.call(e,n))return!1;return!0},Mn.isEqual=function(e,t){return _r(e,t)},Mn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?_r(e,t,void 0,n):!!r},Mn.isError=za,Mn.isFinite=function(e){return"number"==typeof e&&tn(e)},Mn.isFunction=Ba,Mn.isInteger=ja,Mn.isLength=Va,Mn.isMap=Ha,Mn.isMatch=function(e,t){return e===t||xr(e,t,Ki(t))},Mn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,xr(e,t,Ki(t),n)},Mn.isNaN=function(e){return Wa(e)&&e!=+e},Mn.isNative=function(e){if(co(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return br(e)},Mn.isNil=function(e){return null==e},Mn.isNull=function(e){return null===e},Mn.isNumber=Wa,Mn.isObject=Ua,Mn.isObjectLike=Ga,Mn.isPlainObject=qa,Mn.isRegExp=Ya,Mn.isSafeInteger=function(e){return ja(e)&&e>=-9007199254740991&&e<=9007199254740991},Mn.isSet=Xa,Mn.isString=$a,Mn.isSymbol=Za,Mn.isTypedArray=Ka,Mn.isUndefined=function(e){return void 0===e},Mn.isWeakMap=function(e){return Ga(e)&&to(e)==w},Mn.isWeakSet=function(e){return Ga(e)&&"[object WeakSet]"==hr(e)},Mn.join=function(e,t){return null==e?"":nn.call(e,t)},Mn.kebabCase=Ls,Mn.last=zo,Mn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ns(n))<0?on(r+i,0):an(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):xt(e,St,i,!0)},Mn.lowerCase=Os,Mn.lowerFirst=Is,Mn.lt=Ja,Mn.lte=Qa,Mn.max=function(e){return e&&e.length?nr(e,Ws,pr):void 0},Mn.maxBy=function(e,t){return e&&e.length?nr(e,$i(t,2),pr):void 0},Mn.mean=function(e){return Et(e,Ws)},Mn.meanBy=function(e,t){return Et(e,$i(t,2))},Mn.min=function(e){return e&&e.length?nr(e,Ws,Tr):void 0},Mn.minBy=function(e,t){return e&&e.length?nr(e,$i(t,2),Tr):void 0},Mn.stubArray=ru,Mn.stubFalse=iu,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=cu,Mn.nth=function(e,t){return e&&e.length?Rr(e,ns(t)):void 0},Mn.noConflict=function(){return Ye._===this&&(Ye._=Ce),this},Mn.noop=Zs,Mn.now=da,Mn.pad=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Pi(Jt(i),n)+e+Pi(Kt(i),n)},Mn.padEnd=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;return t&&r<t?e+Pi(t-r,n):e},Mn.padStart=function(e,t,n){e=as(e);var r=(t=ns(t))?Wt(e):0;return t&&r<t?Pi(t-r,n)+e:e},Mn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),un(as(e).replace($,""),t||0)},Mn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ao(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ts(e),void 0===t?(t=e,e=0):t=ts(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return an(e+i*(t-e+Ge("1e-"+((i+"").length-1))),t)}return Nr(e,t)},Mn.reduce=function(e,t,n){var r=La(e)?mt:Mt,i=arguments.length<3;return r(e,$i(t,4),n,i,Qn)},Mn.reduceRight=function(e,t,n){var r=La(e)?vt:Mt,i=arguments.length<3;return r(e,$i(t,4),n,i,er)},Mn.repeat=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ns(t),Dr(as(e),t)},Mn.replace=function(){var e=arguments,t=as(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mn.result=function(e,t,n){var r=-1,i=(t=ai(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[To(t[r])];void 0===o&&(r=i,o=n),e=Ba(o)?o.call(e):o}return e},Mn.round=lu,Mn.runInContext=e,Mn.sample=function(e){return(La(e)?zn:zr)(e)},Mn.size=function(e){if(null==e)return 0;if(Ia(e))return $a(e)?Wt(e):e.length;var t=to(e);return t==m||t==_?e.size:Sr(e).length},Mn.snakeCase=Ns,Mn.some=function(e,t,n){var r=La(e)?gt:Wr;return n&&ao(e,t,n)&&(t=void 0),r(e,$i(t,3))},Mn.sortedIndex=function(e,t){return qr(e,t)},Mn.sortedIndexBy=function(e,t,n){return Yr(e,t,$i(n,2))},Mn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=qr(e,t);if(r<n&&Ca(e[r],t))return r}return-1},Mn.sortedLastIndex=function(e,t){return qr(e,t,!0)},Mn.sortedLastIndexBy=function(e,t,n){return Yr(e,t,$i(n,2),!0)},Mn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=qr(e,t,!0)-1;if(Ca(e[n],t))return n}return-1},Mn.startCase=Ds,Mn.startsWith=function(e,t,n){return e=as(e),n=null==n?0:Xn(ns(n),0,e.length),t=Zr(t),e.slice(n,n+t.length)==t},Mn.subtract=fu,Mn.sum=function(e){return e&&e.length?Ct(e,Ws):0},Mn.sumBy=function(e,t){return e&&e.length?Ct(e,$i(t,2)):0},Mn.template=function(e,t,n){var r=Mn.templateSettings;n&&ao(e,t,n)&&(t=void 0),e=as(e),t=cs({},t,r,Bi);var i,o,a=cs({},t.imports,r.imports,Bi),s=_s(a),u=Pt(a,s),c=0,l=t.interpolate||le,f="__p += '",h=me((t.escape||le).source+"|"+l.source+"|"+(l===U?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(Se.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Be+"]")+"\n";e.replace(h,(function(t,n,r,a,s,u){return r||(r=a),f+=e.slice(c,u).replace(fe,zt),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),f+="';\n";var d=Se.call(t,"variable")&&t.variable;d||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(O,""):f).replace(I,"$1").replace(N,"$1;"),f="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=js((function(){return he(s,p+"return "+f).apply(void 0,u)}));if(m.source=f,za(m))throw m;return m},Mn.times=function(e,t){if((e=ns(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=kt(r,t=$i(t));++n<e;)t(n);return i},Mn.toFinite=ts,Mn.toInteger=ns,Mn.toLength=rs,Mn.toLower=function(e){return as(e).toLowerCase()},Mn.toNumber=is,Mn.toSafeInteger=function(e){return e?Xn(ns(e),-9007199254740991,9007199254740991):0===e?e:0},Mn.toString=as,Mn.toUpper=function(e){return as(e).toUpperCase()},Mn.trim=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace(X,"");if(!e||!(t=Zr(t)))return e;var r=qt(e),i=qt(t);return ui(r,Ot(r,i),It(r,i)+1).join("")},Mn.trimEnd=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace(Z,"");if(!e||!(t=Zr(t)))return e;var r=qt(e);return ui(r,0,It(r,qt(t))+1).join("")},Mn.trimStart=function(e,t,n){if((e=as(e))&&(n||void 0===t))return e.replace($,"");if(!e||!(t=Zr(t)))return e;var r=qt(e);return ui(r,Ot(r,qt(t))).join("")},Mn.truncate=function(e,t){var n=30,r="...";if(Ua(t)){var i="separator"in t?t.separator:i;n="length"in t?ns(t.length):n,r="omission"in t?Zr(t.omission):r}var o=(e=as(e)).length;if(Bt(e)){var a=qt(e);o=a.length}if(n>=o)return e;var s=n-Wt(r);if(s<1)return r;var u=a?ui(a,0,s).join(""):e.slice(0,s);if(void 0===i)return u+r;if(a&&(s+=u.length-s),Ya(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=me(i.source,as(re.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,void 0===f?s:f)}}else if(e.indexOf(Zr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},Mn.unescape=function(e){return(e=as(e))&&z.test(e)?e.replace(D,Yt):e},Mn.uniqueId=function(e){var t=++Ee;return as(e)+t},Mn.upperCase=Fs,Mn.upperFirst=zs,Mn.each=aa,Mn.eachRight=sa,Mn.first=Io,$s(Mn,function(){var e={};return sr(Mn,(function(t,n){Se.call(Mn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Mn.VERSION="4.17.20",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mn[e].placeholder=Mn})),st(["drop","take"],(function(e,t){Pn.prototype[e]=function(n){n=void 0===n?1:on(ns(n),0);var r=this.__filtered__&&!t?new Pn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Pn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Pn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:$i(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Pn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Pn.prototype[e]=function(){return this.__filtered__?new Pn(this):this[n](1)}})),Pn.prototype.compact=function(){return this.filter(Ws)},Pn.prototype.find=function(e){return this.filter(e).head()},Pn.prototype.findLast=function(e){return this.reverse().find(e)},Pn.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new Pn(this):this.map((function(n){return gr(n,e,t)}))})),Pn.prototype.reject=function(e){return this.filter(Sa($i(e)))},Pn.prototype.slice=function(e,t){e=ns(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ns(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pn.prototype.toArray=function(){return this.take(4294967295)},sr(Pn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Mn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Mn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Pn,u=a[0],c=s||La(t),l=function(e){var t=i.apply(Mn,dt([e],a));return r&&f?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(s=c=!1);var f=this.__chain__,h=!!this.__actions__.length,p=o&&!f,d=s&&!h;if(!o&&c){t=d?t:new Pn(this);var m=e.apply(t,a);return m.__actions__.push({func:ta,args:[l],thisArg:void 0}),new Rn(m,f)}return p&&d?e.apply(this,a):(m=this.thru(l),p?r?m.value()[0]:m.value():m)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(La(i)?i:[],e)}return this[n]((function(n){return t.apply(La(n)?n:[],e)}))}})),sr(Pn.prototype,(function(e,t){var n=Mn[t];if(n){var r=n.name+"";Se.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[Mi(void 0,2).name]=[{name:"wrapper",func:void 0}],Pn.prototype.clone=function(){var e=new Pn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},Pn.prototype.reverse=function(){if(this.__filtered__){var e=new Pn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Pn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=La(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=an(t,e+a);break;case"takeRight":e=on(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=an(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return ti(e,this.__actions__);var d=[];e:for(;u--&&h<p;){for(var m=-1,v=e[c+=t];++m<f;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(2==_)v=x;else if(!x){if(1==_)continue e;break e}}d[h++]=v}return d},Mn.prototype.at=na,Mn.prototype.chain=function(){return ea(this)},Mn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},Mn.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mn.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var r=Mo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Mn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Pn){var t=e;return this.__actions__.length&&(t=new Pn(this)),(t=t.reverse()).__actions__.push({func:ta,args:[Uo],thisArg:void 0}),new Rn(t,this.__chain__)}return this.thru(Uo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ti(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,Ke&&(Mn.prototype[Ke]=function(){return this}),Mn}();Ye._=Xt,void 0===(i=function(){return Xt}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(29),n(73)(e))},function(e,t,n){var r=n(47);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(11),i=n(243);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){"use strict";var r=n(49),i=n(22),o=n(13),a=n(15),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(32);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(34),i="["+n(117)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(37).Symbol;e.exports=r},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(545)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r=n(206),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],f=l,h=!1;function p(){f===l&&(f=l.slice())}function d(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),f.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=f.indexOf(e);f.splice(n,1),l=null}}}function v(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,c=u(c,e)}finally{h=!1}for(var t=l=f,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,v({type:o.REPLACE})}function y(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e}return v({type:o.INIT}),(i={dispatch:v,subscribe:m,getState:d,replaceReducer:g})[r.a]=y,i}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(c){a=c}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var c=s[o],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){var p=u(c,t);throw new Error(p)}i[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"===typeof e)return l(e,t);if("object"!==typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=l(i,t))}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return d({},n,{dispatch:r=m.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){var r=n(5),i=n(47),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(39),i=n(16),o=n(59),a=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(5),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(215),i=n(147);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(10),i=n(79),o=n(13)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(5),i=n(13),o=n(150),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports={}},function(e,t,n){var r=n(97),i=n(95),o=n(13)("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(153),i=n(47),o=n(13)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(5);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var r=n(11),i=n(152),o=n(16),a=n(61),s=n(96),u=n(237),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,f){var h,p,d,m,v,g,y,_=a(t,n,l?2:1);if(f)h=e;else{if("function"!=typeof(p=s(e)))throw TypeError("Target is not iterable");if(i(p)){for(d=0,m=o(e.length);m>d;d++)if((v=l?_(r(y=e[d])[0],y[1]):_(e[d]))&&v instanceof c)return v;return new c(!1)}h=p.call(e)}for(g=h.next;!(y=g.call(h)).done;)if("object"==typeof(v=u(h,_,y.value,l))&&v&&v instanceof c)return v;return new c(!1)}).stop=function(e){return new c(!0,e)}},function(e,t,n){var r=n(76),i=n(51);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(647),i=n(189),o=n(648),a=n(649),s=n(280),u=n(76),c=n(282),l=c(r),f=c(i),h=c(o),p=c(a),d=c(s),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,n){var r=n(100);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){e.exports=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?r(n[2].sliceStream(n[1])):0};var r=n(322)},function(e,t,n){var r=n(67);e.exports=r(/[\dA-Za-z]/)},function(e,t,n){e.exports=n(272)},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r,i;r=[n(2)],void 0===(i=function(e){function t(r){if(t.is(r,"function"))return n?r():e.on("raphael.DOMload",r);if(t.is(r,R))return t._engine.create[p](t,r.splice(0,3+t.is(r[0],k))).add(r);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var o=i.pop();return n?o.call(t._engine.create[p](t,i)):e.on("raphael.DOMload",(function(){o.call(t._engine.create[p](t,i))}))}return t._engine.create[p](t,arguments)}t.version="2.3.0",t.eve=e;var n,r,i,o,a=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,c="hasOwnProperty",l={doc:document,win:window},f={was:Object.prototype[c].call(l.win,"Raphael"),is:l.win.Raphael},h=function(){this.ca=this.customAttributes={}},p="apply",d="concat",m="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,v="",g=" ",y=String,_="split",x="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[_](g),b={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},w=y.prototype.toLowerCase,S=Math,E=S.max,T=S.min,A=S.abs,M=S.pow,C=S.PI,k="number",R="array",P=Object.prototype.toString,L=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),O={NaN:1,Infinity:1,"-Infinity":1},I=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,N=S.round,D=parseFloat,F=parseInt,z=y.prototype.toUpperCase,B=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},j=t._availableAnimAttrs={blur:k,"clip-rect":"csv",cx:k,cy:k,fill:"colour","fill-opacity":k,"font-size":k,height:k,opacity:k,path:"path",r:k,rx:k,ry:k,stroke:"colour","stroke-opacity":k,"stroke-width":k,transform:"transform",width:k,x:k,y:k},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,U={hs:1,rg:1},G=/,?([achlmqrstvxz]),?/gi,H=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,W=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,q=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Y=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),X=function(e,t){return D(e)-D(t)},$=function(e){return e},Z=t._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},K=function(e,t,n,r){return null==r&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},J=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return K(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return K(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return Z(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return Z(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return Z(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return Z(t.x,t.y,t.width,t.height)}},Q=t.mapPath=function(e,t){if(!t)return e;var n,r,i,o,a,s,u;for(i=0,a=(e=Me(e)).length;i<a;i++)for(o=1,s=(u=e[i]).length;o<s;o+=2)n=t.x(u[o],u[o+1]),r=t.y(u[o],u[o+1]),u[o]=n,u[o+1]=r;return e};if(t._g=l,t.type=l.win.SVGAngle||l.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ee,te=l.doc.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return t.type=v;te=null}function ne(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[c](n)&&(t[n]=ne(e[n]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=h,t.fn=r=h.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=w.call(t))?!O[c](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||P.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,r,i,o,a){if(null==o){var s=e-r,u=n-i;return s||u?(180+180*S.atan2(-u,-s)/C+360)%360:0}return t.angle(e,n,o,a)-t.angle(r,i,o,a)},t.rad=function(e){return e%360*C/180},t.deg=function(e){return Math.round(180*e/C%360*1e3)/1e3},t.snapTo=function(e,n,r){if(r=t.is(r,"finite")?r:10,t.is(e,R)){for(var i=e.length;i--;)if(A(e[i]-n)<=r)return e[i]}else{var o=n%(e=+e);if(o<r)return n-o;if(o>e-r)return n-o+e}return n},t.createUUID=(i=/[xy]/g,o=function(e){var t=16*S.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,o).toUpperCase()}),t.setWindow=function(n){e("raphael.setWindow",t,l.win,n),l.win=n,l.doc=l.win.document,t._engine.initWin&&t._engine.initWin(l.win)};var re=function(e){if(t.vml){var n,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(e){n=createPopup().document.body}var o=n.createTextRange();re=ce((function(e){try{n.style.color=y(e).replace(r,v);var t=o.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var a=l.doc.createElement("i");a.title="Rapha\xebl Colour Picker",a.style.display="none",l.doc.body.appendChild(a),re=ce((function(e){return a.style.color=e,l.doc.defaultView.getComputedStyle(a,v).getPropertyValue("color")}))}return re(e)},ie=function(){return"hsb("+[this.h,this.s,this.b]+")"},oe=function(){return"hsl("+[this.h,this.s,this.l]+")"},ae=function(){return this.hex},se=function(e,n,r){if(null==n&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r),null==n&&t.is(e,"string")){var i=t.getRGB(e);e=i.r,n=i.g,r=i.b}return(e>1||n>1||r>1)&&(e/=255,n/=255,r/=255),[e,n,r]},ue=function(e,n,r,i){var o={r:e*=255,g:n*=255,b:r*=255,hex:t.rgb(e,n,r),toString:ae};return t.is(i,"finite")&&(o.opacity=i),o};function ce(e,t,n){return function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("\u2400"),a=r.cache=r.cache||{},s=r.count=r.count||[];return a[c](o)?(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(s,o),n?n(a[o]):a[o]):(s.length>=1e3&&delete a[s.shift()],s.push(o),a[o]=e[p](t,i),n?n(a[o]):a[o])}}function le(){return this.hex}function fe(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?o[3]={x:+e[0],y:+e[1]}:i-2==r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=ae,e},t.hsb2rgb=function(e,t,n,r){var i,o,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,r=e.o,e=e.h),s=(u=n*t)*(1-A((e=(e*=360)%360/60)%2-1)),i=o=a=n-u,ue(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.hsl2rgb=function(e,t,n,r){var i,o,a,s,u;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),s=(u=2*t*(n<.5?n:1-n))*(1-A((e=(e*=360)%360/60)%2-1)),i=o=a=n-u/2,ue(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],r)},t.rgb2hsb=function(e,t,n){var r,i;return e=(n=se(e,t,n))[0],t=n[1],n=n[2],{h:((0==(i=(r=E(e,t,n))-T(e,t,n))?null:r==e?(t-n)/i:r==t?(n-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/r,b:r,toString:ie}},t.rgb2hsl=function(e,t,n){var r,i,o,a;return e=(n=se(e,t,n))[0],t=n[1],n=n[2],r=((i=E(e,t,n))+(o=T(e,t,n)))/2,{h:((0==(a=i-o)?null:i==e?(t-n)/a:i==t?(n-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:r<.5?a/(2*r):a/(2-2*r),l:r,toString:oe}},t._path2string=function(){return this.join(",").replace(G,"$1")},t._preload=function(e,t){var n=l.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,l.doc.body.removeChild(this)},n.onerror=function(){l.doc.body.removeChild(this)},l.doc.body.appendChild(n),n.src=e},t.getRGB=ce((function(e){if(!e||(e=y(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:le};!U[c](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var n,r,i,o,a,s,u=e.match(L);return u?(u[2]&&(i=F(u[2].substring(5),16),r=F(u[2].substring(3,5),16),n=F(u[2].substring(1,3),16)),u[3]&&(i=F((a=u[3].charAt(3))+a,16),r=F((a=u[3].charAt(2))+a,16),n=F((a=u[3].charAt(1))+a,16)),u[4]&&(s=u[4][_](V),n=D(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=D(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=D(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(o=D(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100)),u[5]?(s=u[5][_](V),n=D(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=D(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=D(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(n/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(o=D(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),t.hsb2rgb(n,r,i,o)):u[6]?(s=u[6][_](V),n=D(s[0]),"%"==s[0].slice(-1)&&(n*=2.55),r=D(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),i=D(s[2]),"%"==s[2].slice(-1)&&(i*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(n/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(o=D(s[3])),s[3]&&"%"==s[3].slice(-1)&&(o/=100),t.hsl2rgb(n,r,i,o)):((u={r:n,g:r,b:i,toString:le}).hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),t.is(o,"finite")&&(u.opacity=o),u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le}}),t),t.hsb=ce((function(e,n,r){return t.hsb2rgb(e,n,r).hex})),t.hsl=ce((function(e,n,r){return t.hsl2rgb(e,n,r).hex})),t.rgb=ce((function(e,t,n){function r(e){return e+.5|0}return"#"+(16777216|r(n)|r(t)<<8|r(e)<<16).toString(16).slice(1)})),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=he(e);if(n.arr)return _e(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,R)&&t.is(e[0],R)&&(i=_e(e)),i.length||y(e).replace(H,(function(e,t,n){var o=[],a=t.toLowerCase();if(n.replace(q,(function(e,t){t&&o.push(+t)})),"m"==a&&o.length>2&&(i.push([t][d](o.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)i.push([t][d](o));else for(;o.length>=r[a]&&(i.push([t][d](o.splice(0,r[a]))),r[a]););})),i.toString=t._path2string,n.arr=_e(i),i},t.parseTransformString=ce((function(e){if(!e)return null;var n=[];return t.is(e,R)&&t.is(e[0],R)&&(n=_e(e)),n.length||y(e).replace(W,(function(e,t,r){var i=[];w.call(t),r.replace(q,(function(e,t){t&&i.push(+t)})),n.push([t][d](i))})),n.toString=t._path2string,n}),this,(function(e){if(!e)return e;for(var t=[],n=0;n<e.length;n++){for(var r=[],i=0;i<e[n].length;i++)r.push(e[n][i]);t.push(r)}return t}));var he=function e(t){var n=e.ps=e.ps||{};return n[t]?n[t].sleep=100:n[t]={sleep:100},setTimeout((function(){for(var e in n)n[c](e)&&e!=t&&(n[e].sleep--,!n[e].sleep&&delete n[e])})),n[t]};function pe(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}function de(e,t,n,r,i,o,a,s,u){null==u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=c*l[p]+c,m=pe(d,e,n,i,a),v=pe(d,t,r,o,s),g=m*m+v*v;h+=f[p]*S.sqrt(g)}return c*h}function me(e,t,n,r,i,o,a,s){if(!(E(e,n)<T(i,a)||T(e,n)>E(i,a)||E(t,r)<T(o,s)||T(t,r)>E(o,s))){var u=(e-n)*(o-s)-(t-r)*(i-a);if(u){var c=((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/u,l=((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/u,f=+c.toFixed(2),h=+l.toFixed(2);if(!(f<+T(e,n).toFixed(2)||f>+E(e,n).toFixed(2)||f<+T(i,a).toFixed(2)||f>+E(i,a).toFixed(2)||h<+T(t,r).toFixed(2)||h>+E(t,r).toFixed(2)||h<+T(o,s).toFixed(2)||h>+E(o,s).toFixed(2)))return{x:c,y:l}}}}function ve(e,n,r){var i=t.bezierBBox(e),o=t.bezierBBox(n);if(!t.isBBoxIntersect(i,o))return r?0:[];for(var a=de.apply(0,e),s=de.apply(0,n),u=E(~~(a/5),1),c=E(~~(s/5),1),l=[],f=[],h={},p=r?0:[],d=0;d<u+1;d++){var m=t.findDotsAtSegment.apply(t,e.concat(d/u));l.push({x:m.x,y:m.y,t:d/u})}for(d=0;d<c+1;d++)m=t.findDotsAtSegment.apply(t,n.concat(d/c)),f.push({x:m.x,y:m.y,t:d/c});for(d=0;d<u;d++)for(var v=0;v<c;v++){var g=l[d],y=l[d+1],_=f[v],x=f[v+1],b=A(y.x-g.x)<.001?"y":"x",w=A(x.x-_.x)<.001?"y":"x",S=me(g.x,g.y,y.x,y.y,_.x,_.y,x.x,x.y);if(S){if(h[S.x.toFixed(4)]==S.y.toFixed(4))continue;h[S.x.toFixed(4)]=S.y.toFixed(4);var M=g.t+A((S[b]-g[b])/(y[b]-g[b]))*(y.t-g.t),C=_.t+A((S[w]-_[w])/(x[w]-_[w]))*(x.t-_.t);M>=0&&M<=1.001&&C>=0&&C<=1.001&&(r?p++:p.push({x:S.x,y:S.y,t1:T(M,1),t2:T(C,1)}))}}return p}function ge(e,n,r){e=t._path2curve(e),n=t._path2curve(n);for(var i,o,a,s,u,c,l,f,h,p,d=r?0:[],m=0,v=e.length;m<v;m++){var g=e[m];if("M"==g[0])i=u=g[1],o=c=g[2];else{"C"==g[0]?(h=[i,o].concat(g.slice(1)),i=h[6],o=h[7]):(h=[i,o,i,o,u,c,u,c],i=u,o=c);for(var y=0,_=n.length;y<_;y++){var x=n[y];if("M"==x[0])a=l=x[1],s=f=x[2];else{"C"==x[0]?(p=[a,s].concat(x.slice(1)),a=p[6],s=p[7]):(p=[a,s,a,s,l,f,l,f],a=l,s=f);var b=ve(h,p,r);if(r)d+=b;else{for(var w=0,S=b.length;w<S;w++)b[w].segment1=m,b[w].segment2=y,b[w].bez1=h,b[w].bez2=p;d=d.concat(b)}}}}}return d}t.findDotsAtSegment=function(e,t,n,r,i,o,a,s,u){var c=1-u,l=M(c,3),f=M(c,2),h=u*u,p=h*u,d=l*e+3*f*u*n+3*c*u*u*i+p*a,m=l*t+3*f*u*r+3*c*u*u*o+p*s,v=e+2*u*(n-e)+h*(i-2*n+e),g=t+2*u*(r-t)+h*(o-2*r+t),y=n+2*u*(i-n)+h*(a-2*i+n),_=r+2*u*(o-r)+h*(s-2*o+r),x=c*e+u*n,b=c*t+u*r,w=c*i+u*a,E=c*o+u*s,T=90-180*S.atan2(v-y,g-_)/C;return(v>y||g<_)&&(T+=180),{x:d,y:m,m:{x:v,y:g},n:{x:y,y:_},start:{x:x,y:b},end:{x:w,y:E},alpha:T}},t.bezierBBox=function(e,n,r,i,o,a,s,u){t.is(e,"array")||(e=[e,n,r,i,o,a,s,u]);var c=Ae.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var r=t.isPointInsideBBox;return r(n,e.x,e.y)||r(n,e.x2,e.y)||r(n,e.x,e.y2)||r(n,e.x2,e.y2)||r(e,n.x,n.y)||r(e,n.x2,n.y)||r(e,n.x,n.y2)||r(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return ge(e,t)},t.pathIntersectionNumber=function(e,t){return ge(e,t,1)},t.isPointInsidePath=function(e,n,r){var i=t.pathBBox(e);return t.isPointInsideBBox(i,n,r)&&ge(e,[["M",n,r],["H",i.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var ye=t.pathBBox=function(e){var t=he(e);if(t.bbox)return ne(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var n,r=0,i=0,o=[],a=[],s=0,u=(e=Me(e)).length;s<u;s++)if("M"==(n=e[s])[0])r=n[1],i=n[2],o.push(r),a.push(i);else{var c=Ae(r,i,n[1],n[2],n[3],n[4],n[5],n[6]);o=o[d](c.min.x,c.max.x),a=a[d](c.min.y,c.max.y),r=n[5],i=n[6]}var l=T[p](0,o),f=T[p](0,a),h=E[p](0,o),m=E[p](0,a),v=h-l,g=m-f,y={x:l,y:f,x2:h,y2:m,width:v,height:g,cx:l+v/2,cy:f+g/2};return t.bbox=ne(y),y},_e=function(e){var n=ne(e);return n.toString=t._path2string,n},xe=t._pathToRelative=function(e){var n=he(e);if(n.rel)return _e(n.rel);t.is(e,R)&&t.is(e&&e[0],R)||(e=t.parsePathString(e));var r=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=e[0][1],s=o=e[0][2],u++,r.push(["M",i,o]));for(var c=u,l=e.length;c<l;c++){var f=r[c]=[],h=e[c];if(h[0]!=w.call(h[0]))switch(f[0]=w.call(h[0]),f[0]){case"a":f[1]=h[1],f[2]=h[2],f[3]=h[3],f[4]=h[4],f[5]=h[5],f[6]=+(h[6]-i).toFixed(3),f[7]=+(h[7]-o).toFixed(3);break;case"v":f[1]=+(h[1]-o).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var p=1,d=h.length;p<d;p++)f[p]=+(h[p]-(p%2?i:o)).toFixed(3)}else{f=r[c]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+o);for(var m=0,v=h.length;m<v;m++)r[c][m]=h[m]}var g=r[c].length;switch(r[c][0]){case"z":i=a,o=s;break;case"h":i+=+r[c][g-1];break;case"v":o+=+r[c][g-1];break;default:i+=+r[c][g-2],o+=+r[c][g-1]}}return r.toString=t._path2string,n.rel=_e(r),r},be=t._pathToAbsolute=function(e){var n=he(e);if(n.abs)return _e(n.abs);if(t.is(e,R)&&t.is(e&&e[0],R)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=+e[0][1],s=o=+e[0][2],u++,r[0]=["M",i,o]);for(var c,l,f=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=u,p=e.length;h<p;h++){if(r.push(c=[]),(l=e[h])[0]!=z.call(l[0]))switch(c[0]=z.call(l[0]),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+(l[6]+i),c[7]=+(l[7]+o);break;case"V":c[1]=+l[1]+o;break;case"H":c[1]=+l[1]+i;break;case"R":for(var m=[i,o][d](l.slice(1)),v=2,g=m.length;v<g;v++)m[v]=+m[v]+i,m[++v]=+m[v]+o;r.pop(),r=r[d](fe(m,f));break;case"M":a=+l[1]+i,s=+l[2]+o;default:for(v=1,g=l.length;v<g;v++)c[v]=+l[v]+(v%2?i:o)}else if("R"==l[0])m=[i,o][d](l.slice(1)),r.pop(),r=r[d](fe(m,f)),c=["R"][d](l.slice(-2));else for(var y=0,_=l.length;y<_;y++)c[y]=l[y];switch(c[0]){case"Z":i=a,o=s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];default:i=c[c.length-2],o=c[c.length-1]}}return r.toString=t._path2string,n.abs=_e(r),r},we=function(e,t,n,r){return[e,t,n,r,n,r]},Se=function(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]},Ee=function e(t,n,r,i,o,a,s,u,c,l){var f,h=120*C/180,p=C/180*(+o||0),m=[],v=ce((function(e,t,n){return{x:e*S.cos(n)-t*S.sin(n),y:e*S.sin(n)+t*S.cos(n)}}));if(l)k=l[0],R=l[1],T=l[2],M=l[3];else{t=(f=v(t,n,-p)).x,n=f.y,u=(f=v(u,c,-p)).x,c=f.y,S.cos(C/180*o),S.sin(C/180*o);var g=(t-u)/2,y=(n-c)/2,x=g*g/(r*r)+y*y/(i*i);x>1&&(r*=x=S.sqrt(x),i*=x);var b=r*r,w=i*i,E=(a==s?-1:1)*S.sqrt(A((b*w-b*y*y-w*g*g)/(b*y*y+w*g*g))),T=E*r*y/i+(t+u)/2,M=E*-i*g/r+(n+c)/2,k=S.asin(((n-M)/i).toFixed(9)),R=S.asin(((c-M)/i).toFixed(9));(k=t<T?C-k:k)<0&&(k=2*C+k),(R=u<T?C-R:R)<0&&(R=2*C+R),s&&k>R&&(k-=2*C),!s&&R>k&&(R-=2*C)}var P=R-k;if(A(P)>h){var L=R,O=u,I=c;R=k+h*(s&&R>k?1:-1),m=e(u=T+r*S.cos(R),c=M+i*S.sin(R),r,i,o,0,s,O,I,[R,L,T,M])}P=R-k;var N=S.cos(k),D=S.sin(k),F=S.cos(R),z=S.sin(R),B=S.tan(P/4),j=4/3*r*B,V=4/3*i*B,U=[t,n],G=[t+j*D,n-V*N],H=[u+j*z,c-V*F],W=[u,c];if(G[0]=2*U[0]-G[0],G[1]=2*U[1]-G[1],l)return[G,H,W][d](m);for(var q=[],Y=0,X=(m=[G,H,W][d](m).join()[_](",")).length;Y<X;Y++)q[Y]=Y%2?v(m[Y-1],m[Y],p).y:v(m[Y],m[Y+1],p).x;return q},Te=function(e,t,n,r,i,o,a,s,u){var c=1-u;return{x:M(c,3)*e+3*M(c,2)*u*n+3*c*u*u*i+M(u,3)*a,y:M(c,3)*t+3*M(c,2)*u*r+3*c*u*u*o+M(u,3)*s}},Ae=ce((function(e,t,n,r,i,o,a,s){var u,c=i-2*n+e-(a-2*i+n),l=2*(n-e)-2*(i-n),f=e-n,h=(-l+S.sqrt(l*l-4*c*f))/2/c,d=(-l-S.sqrt(l*l-4*c*f))/2/c,m=[t,s],v=[e,a];return A(h)>"1e12"&&(h=.5),A(d)>"1e12"&&(d=.5),h>0&&h<1&&(u=Te(e,t,n,r,i,o,a,s,h),v.push(u.x),m.push(u.y)),d>0&&d<1&&(u=Te(e,t,n,r,i,o,a,s,d),v.push(u.x),m.push(u.y)),c=o-2*r+t-(s-2*o+r),f=t-r,h=(-(l=2*(r-t)-2*(o-r))+S.sqrt(l*l-4*c*f))/2/c,d=(-l-S.sqrt(l*l-4*c*f))/2/c,A(h)>"1e12"&&(h=.5),A(d)>"1e12"&&(d=.5),h>0&&h<1&&(u=Te(e,t,n,r,i,o,a,s,h),v.push(u.x),m.push(u.y)),d>0&&d<1&&(u=Te(e,t,n,r,i,o,a,s,d),v.push(u.x),m.push(u.y)),{min:{x:T[p](0,v),y:T[p](0,m)},max:{x:E[p](0,v),y:E[p](0,m)}}})),Me=t._path2curve=ce((function(e,t){var n=!t&&he(e);if(!t&&n.curve)return _e(n.curve);for(var r=be(e),i=t&&be(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][d](Ee[p](0,[t.x,t.y][d](e.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i][d](e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][d](Se(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][d](Se(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][d](we(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][d](we(t.x,t.y,e[1],t.y));break;case"V":e=["C"][d](we(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][d](we(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)l[t]="A",i&&(f[t]="A"),e.splice(t++,0,["C"][d](n.splice(0,6)));e.splice(t,1),g=E(r.length,i&&i.length||0)}},c=function(e,t,n,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],g=E(r.length,i&&i.length||0))},l=[],f=[],h="",m="",v=0,g=E(r.length,i&&i.length||0);v<g;v++){r[v]&&(h=r[v][0]),"C"!=h&&(l[v]=h,v&&(m=l[v-1])),r[v]=s(r[v],o,m),"A"!=l[v]&&"C"==h&&(l[v]="C"),u(r,v),i&&(i[v]&&(h=i[v][0]),"C"!=h&&(f[v]=h,v&&(m=f[v-1])),i[v]=s(i[v],a,m),"A"!=f[v]&&"C"==h&&(f[v]="C"),u(i,v)),c(r,i,o,a,v),c(i,r,a,o,v);var y=r[v],_=i&&i[v],x=y.length,b=i&&_.length;o.x=y[x-2],o.y=y[x-1],o.bx=D(y[x-4])||o.x,o.by=D(y[x-3])||o.y,a.bx=i&&(D(_[b-4])||a.x),a.by=i&&(D(_[b-3])||a.y),a.x=i&&_[b-2],a.y=i&&_[b-1]}return i||(n.curve=_e(r)),i?[r,i]:r}),null,_e),Ce=(t._parseDots=ce((function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=t.getRGB(a[1]),o.color.error)return null;o.opacity=o.color.opacity,o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),n.push(o)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){for(var s=D(n[r-1].offset||0),u=0,c=r+1;c<i;c++)if(n[c].offset){u=n[c].offset;break}u||(u=100,c=i);for(var l=((u=D(u))-s)/(c-r+1);r<c;r++)s+=l,n[r].offset=s+"%"}return n})),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),ke=(t._tofront=function(e,t){t.top!==e&&(Ce(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Ce(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,n){Ce(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,n){Ce(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var n=ye(e),r={_:{transform:v},getBBox:function(){return n}};return Re(r,t),r.matrix}),Re=(t.transformPath=function(e,t){return Q(e,ke(e,t))},t._extractTransform=function(e,n){if(null==n)return e._.transform;n=y(n).replace(/\.{3}|\u2026/g,e._.transform||v);var r,i,o=t.parseTransformString(n),a=0,s=1,u=1,c=e._,l=new Oe;if(c.transform=o||[],o)for(var f=0,h=o.length;f<h;f++){var p,d,m,g,_,x=o[f],b=x.length,w=y(x[0]).toLowerCase(),S=x[0]!=w,E=S?l.invert():0;"t"==w&&3==b?S?(p=E.x(0,0),d=E.y(0,0),m=E.x(x[1],x[2]),g=E.y(x[1],x[2]),l.translate(m-p,g-d)):l.translate(x[1],x[2]):"r"==w?2==b?(_=_||e.getBBox(1),l.rotate(x[1],_.x+_.width/2,_.y+_.height/2),a+=x[1]):4==b&&(S?(m=E.x(x[2],x[3]),g=E.y(x[2],x[3]),l.rotate(x[1],m,g)):l.rotate(x[1],x[2],x[3]),a+=x[1]):"s"==w?2==b||3==b?(_=_||e.getBBox(1),l.scale(x[1],x[b-1],_.x+_.width/2,_.y+_.height/2),s*=x[1],u*=x[b-1]):5==b&&(S?(m=E.x(x[3],x[4]),g=E.y(x[3],x[4]),l.scale(x[1],x[2],m,g)):l.scale(x[1],x[2],x[3],x[4]),s*=x[1],u*=x[2]):"m"==w&&7==b&&l.add(x[1],x[2],x[3],x[4],x[5],x[6]),c.dirtyT=1,e.matrix=l}e.matrix=l,c.sx=s,c.sy=u,c.deg=a,c.dx=r=l.e,c.dy=i=l.f,1==s&&1==u&&!a&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+i):c.dirtyT=1}),Pe=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Le=t._equaliseTransform=function(e,n){n=y(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var r,i,o,a,s=E(e.length,n.length),u=[],c=[],l=0;l<s;l++){if(o=e[l]||Pe(n[l]),a=n[l]||Pe(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(u[l]=[],c[l]=[],r=0,i=E(o.length,a.length);r<i;r++)r in o&&(u[l][r]=o[r]),r in a&&(c[l][r]=a[r])}return{from:u,to:c}};function Oe(e,t,n,r,i,o){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,n,r,i){var o;if(null!=(o=null!=i||t.is(e,"object")?e:l.doc.getElementById(e)))return o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:r}:{container:1,x:e,y:n,width:r,height:i}},t.pathToRelative=xe,t._engine={},t.path2curve=Me,t.matrix=function(e,t,n,r,i,o){return new Oe(e,t,n,r,i,o)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,r,i,o){var a,s,u,c,l=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[e,n,i],[t,r,o],[0,0,1]];for(e&&e instanceof Oe&&(h=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(c=0,u=0;u<3;u++)c+=f[a][u]*h[u][s];l[a][s]=c}this.a=l[0][0],this.b=l[1][0],this.c=l[0][1],this.d=l[1][1],this.e=l[0][2],this.f=l[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Oe(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Oe(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){null==t&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+S.cos(e).toFixed(9),o=+S.sin(e).toFixed(9);this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[y.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=S.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=S.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley;var o=-i[0][1],a=i[1][1];return a<0?(e.rotate=t.deg(S.acos(a)),o<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(S.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[_]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:v)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:v)+(t.rotate?"r"+[t.rotate,0,0]:v)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Oe.prototype);for(var Ie=function(){this.returnValue=!1},Ne=function(){return this.originalEvent.preventDefault()},De=function(){this.cancelBubble=!0},Fe=function(){return this.originalEvent.stopPropagation()},ze=function(e){var t=l.doc.documentElement.scrollTop||l.doc.body.scrollTop,n=l.doc.documentElement.scrollLeft||l.doc.body.scrollLeft;return{x:e.clientX+n,y:e.clientY+t}},Be=l.doc.addEventListener?function(e,t,n,r){var i=function(e){var t=ze(e);return n.call(r,e,t.x,t.y)};if(e.addEventListener(t,i,!1),m&&b[t]){var o=function(t){for(var i=ze(t),o=t,a=0,s=t.targetTouches&&t.targetTouches.length;a<s;a++)if(t.targetTouches[a].target==e){(t=t.targetTouches[a]).originalEvent=o,t.preventDefault=Ne,t.stopPropagation=Fe;break}return n.call(r,t,i.x,i.y)};e.addEventListener(b[t],o,!1)}return function(){return e.removeEventListener(t,i,!1),m&&b[t]&&e.removeEventListener(b[t],o,!1),!0}}:l.doc.attachEvent?function(e,t,n,r){var i=function(e){e=e||l.win.event;var t=l.doc.documentElement.scrollTop||l.doc.body.scrollTop,i=l.doc.documentElement.scrollLeft||l.doc.body.scrollLeft,o=e.clientX+i,a=e.clientY+t;return e.preventDefault=e.preventDefault||Ie,e.stopPropagation=e.stopPropagation||De,n.call(r,e,o,a)};return e.attachEvent("on"+t,i),function(){return e.detachEvent("on"+t,i),!0}}:void 0,je=[],Ve=function(t){for(var n,r=t.clientX,i=t.clientY,o=l.doc.documentElement.scrollTop||l.doc.body.scrollTop,a=l.doc.documentElement.scrollLeft||l.doc.body.scrollLeft,s=je.length;s--;){if(n=je[s],m&&t.touches){for(var u,c=t.touches.length;c--;)if((u=t.touches[c]).identifier==n.el._drag.id){r=u.clientX,i=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var f,h=n.el.node,p=h.nextSibling,d=h.parentNode,v=h.style.display;l.win.opera&&d.removeChild(h),h.style.display="none",f=n.el.paper.getElementByPoint(r,i),h.style.display=v,l.win.opera&&(p?d.insertBefore(h,p):d.appendChild(h)),f&&e("raphael.drag.over."+n.el.id,n.el,f),r+=a,i+=o,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},Ue=function n(r){t.unmousemove(Ve).unmouseup(n);for(var i,o=je.length;o--;)(i=je[o]).el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,r);je=[]},Ge=t.el={},He=x.length;He--;)!function(e){t[e]=Ge[e]=function(n,r){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:Be(this.shape||this.node||l.doc,e,n,r||this)})),this},t["un"+e]=Ge["un"+e]=function(n){for(var r=this.events||[],i=r.length;i--;)r[i].name!=e||!t.is(n,"undefined")&&r[i].f!=n||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(x[He]);Ge.data=function(n,r){var i=Y[this.id]=Y[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(t.is(n,"object")){for(var o in n)n[c](o)&&this.data(o,n[o]);return this}return e("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=r,e("raphael.data.set."+this.id,this,r,n),this},Ge.removeData=function(e){return null==e?delete Y[this.id]:Y[this.id]&&delete Y[this.id][e],this},Ge.getData=function(){return ne(Y[this.id]||{})},Ge.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},Ge.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var We=[];function qe(){return this.x+g+this.y+g+this.width+" \xd7 "+this.height}Ge.drag=function(n,r,i,o,a,s){function u(u){(u.originalEvent||u).preventDefault();var c=u.clientX,f=u.clientY,h=l.doc.documentElement.scrollTop||l.doc.body.scrollTop,p=l.doc.documentElement.scrollLeft||l.doc.body.scrollLeft;if(this._drag.id=u.identifier,m&&u.touches)for(var d,v=u.touches.length;v--;)if(d=u.touches[v],this._drag.id=d.identifier,d.identifier==this._drag.id){c=d.clientX,f=d.clientY;break}this._drag.x=c+p,this._drag.y=f+h,!je.length&&t.mousemove(Ve).mouseup(Ue),je.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),n&&e.on("raphael.drag.move."+this.id,n),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,a||o||this,this._drag.x,this._drag.y,u)}return this._drag={},We.push({el:this,start:u}),this.mousedown(u),this},Ge.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Ge.undrag=function(){for(var n=We.length;n--;)We[n].el==this&&(this.unmousedown(We[n].start),We.splice(n,1),e.unbind("raphael.drag.*."+this.id));!We.length&&t.unmousemove(Ve).unmouseup(Ue),je=[]},r.circle=function(e,n,r){var i=t._engine.circle(this,e||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},r.rect=function(e,n,r,i,o){var a=t._engine.rect(this,e||0,n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},r.ellipse=function(e,n,r,i){var o=t._engine.ellipse(this,e||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(o),o},r.path=function(e){e&&!t.is(e,"string")&&!t.is(e[0],R)&&(e+=v);var n=t._engine.path(t.format[p](t,arguments),this);return this.__set__&&this.__set__.push(n),n},r.image=function(e,n,r,i,o){var a=t._engine.image(this,e||"about:blank",n||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},r.text=function(e,n,r){var i=t._engine.text(this,e||0,n||0,y(r));return this.__set__&&this.__set__.push(i),i},r.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new ft(e);return this.__set__&&this.__set__.push(n),n.paper=this,n.type="set",n},r.setStart=function(e){this.__set__=e||this.set()},r.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},r.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},r.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},r.setViewBox=function(e,n,r,i,o){return t._engine.setViewBox.call(this,e,n,r,i,o)},r.top=r.bottom=null,r.raphael=t,r.getElementByPoint=function(e,t){var n,r,i,o,a,s,u,c=this.canvas,f=l.doc.elementFromPoint(e,t);if(l.win.opera&&"svg"==f.tagName){var h=(r=(n=c).getBoundingClientRect(),o=(i=n.ownerDocument).body,s=(a=i.documentElement).clientTop||o.clientTop||0,u=a.clientLeft||o.clientLeft||0,{y:r.top+(l.win.pageYOffset||a.scrollTop||o.scrollTop)-s,x:r.left+(l.win.pageXOffset||a.scrollLeft||o.scrollLeft)-u}),p=c.createSVGRect();p.x=e-h.x,p.y=t-h.y,p.width=p.height=1;var d=c.getIntersectionList(p,null);d.length&&(f=d[d.length-1])}if(!f)return null;for(;f.parentNode&&f!=c.parentNode&&!f.raphael;)f=f.parentNode;return f==this.canvas.parentNode&&(f=c),f&&f.raphael?this.getById(f.raphaelid):null},r.getElementsByBBox=function(e){var n=this.set();return this.forEach((function(r){t.isBBoxIntersect(r.getBBox(),e)&&n.push(r)})),n},r.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},r.forEach=function(e,t){for(var n=this.bottom;n;){if(!1===e.call(t,n))return this;n=n.next}return this},r.getElementsByPoint=function(e,t){var n=this.set();return this.forEach((function(r){r.isPointInside(e,t)&&n.push(r)})),n},Ge.isPointInside=function(e,n){var r=this.realPath=J[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=t.transformPath(r,this.attr("transform"))),t.isPointInsidePath(r,e,n)},Ge.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=J[this.type](this),t.bboxwt=ye(this.realPath),t.bboxwt.toString=qe,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=J[this.type](this)),t.bbox=ye(Q(this.realPath,this.matrix)),t.bbox.toString=qe,t.dirty=t.dirtyT=0),t.bbox)},Ge.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ge.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),o=this.realPath||J[this.type](this);o=this.matrix?Q(o,this.matrix):o;for(var a=1;a<n+1;a++)i.push(r.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*a).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var Ye=function(e,n,r,i,o,a,s,u,c){return null==c?de(e,n,r,i,o,a,s,u):t.findDotsAtSegment(e,n,r,i,o,a,s,u,function(e,t,n,r,i,o,a,s,u){if(!(u<0||de(e,t,n,r,i,o,a,s)<u)){var c,l=.5,f=1-l;for(c=de(e,t,n,r,i,o,a,s,f);A(c-u)>.01;)c=de(e,t,n,r,i,o,a,s,f+=(c<u?1:-1)*(l/=2));return f}}(e,n,r,i,o,a,s,u,c))},Xe=function(e,n){return function(r,i,o){for(var a,s,u,c,l,f="",h={},p=0,d=0,m=(r=Me(r)).length;d<m;d++){if("M"==(u=r[d])[0])a=+u[1],s=+u[2];else{if(p+(c=Ye(a,s,u[1],u[2],u[3],u[4],u[5],u[6]))>i){if(n&&!h.start){if(f+=["C"+(l=Ye(a,s,u[1],u[2],u[3],u[4],u[5],u[6],i-p)).start.x,l.start.y,l.m.x,l.m.y,l.x,l.y],o)return f;h.start=f,f=["M"+l.x,l.y+"C"+l.n.x,l.n.y,l.end.x,l.end.y,u[5],u[6]].join(),p+=c,a=+u[5],s=+u[6];continue}if(!e&&!n)return{x:(l=Ye(a,s,u[1],u[2],u[3],u[4],u[5],u[6],i-p)).x,y:l.y,alpha:l.alpha}}p+=c,a=+u[5],s=+u[6]}f+=u.shift()+u}return h.end=f,(l=e?p:n?h:t.findDotsAtSegment(a,s,u[0],u[1],u[2],u[3],u[4],u[5],1)).alpha&&(l={x:l.x,y:l.y,alpha:l.alpha}),l}},$e=Xe(1),Ze=Xe(),Ke=Xe(0,1);t.getTotalLength=$e,t.getPointAtLength=Ze,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return Ke(e,t).end;var r=Ke(e,n,1);return t?Ke(r,t).end:r},Ge.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():$e(e)},Ge.getPointAtLength=function(e){var t=this.getPath();if(t)return Ze(t,e)},Ge.getPath=function(){var e,n=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return n&&(e=n(this)),e},Ge.getSubpath=function(e,n){var r=this.getPath();if(r)return t.getSubpath(r,e,n)};var Je=t.easing_formulas={linear:function(e){return e},"<":function(e){return M(e,1.7)},">":function(e){return M(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=-n-t,o=M(A(r),1/3)*(r<0?-1:1)+M(A(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:M(2,-10*e)*S.sin(2*C*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};Je.easeIn=Je["ease-in"]=Je["<"],Je.easeOut=Je["ease-out"]=Je[">"],Je.easeInOut=Je["ease-in-out"]=Je["<>"],Je["back-in"]=Je.backIn,Je["back-out"]=Je.backOut;var Qe=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function n(){for(var r=+new Date,i=0;i<Qe.length;i++){var o=Qe[i];if(!o.el.removed&&!o.paused){var a,s,u=r-o.start,l=o.ms,f=o.easing,h=o.from,p=o.diff,m=o.to,v=(o.t,o.el),y={},_={};if(o.initstatus?(u=(o.initstatus*o.anim.top-o.prev)/(o.percent-o.prev)*l,o.status=o.initstatus,delete o.initstatus,o.stop&&Qe.splice(i--,1)):o.status=(o.prev+(o.percent-o.prev)*(u/l))/o.anim.top,!(u<0))if(u<l){var x=f(u/l);for(var b in h)if(h[c](b)){switch(j[b]){case k:a=+h[b]+x*l*p[b];break;case"colour":a="rgb("+[nt(N(h[b].r+x*l*p[b].r)),nt(N(h[b].g+x*l*p[b].g)),nt(N(h[b].b+x*l*p[b].b))].join(",")+")";break;case"path":a=[];for(var w=0,S=h[b].length;w<S;w++){a[w]=[h[b][w][0]];for(var E=1,T=h[b][w].length;E<T;E++)a[w][E]=+h[b][w][E]+x*l*p[b][w][E];a[w]=a[w].join(g)}a=a.join(g);break;case"transform":if(p[b].real)for(a=[],w=0,S=h[b].length;w<S;w++)for(a[w]=[h[b][w][0]],E=1,T=h[b][w].length;E<T;E++)a[w][E]=h[b][w][E]+x*l*p[b][w][E];else{var A=function(e){return+h[b][e]+x*l*p[b][e]};a=[["m",A(0),A(1),A(2),A(3),A(4),A(5)]]}break;case"csv":if("clip-rect"==b)for(a=[],w=4;w--;)a[w]=+h[b][w]+x*l*p[b][w];break;default:var M=[][d](h[b]);for(a=[],w=v.paper.customAttributes[b].length;w--;)a[w]=+M[w]+x*l*p[b][w]}y[b]=a}v.attr(y),function(t,n,r){setTimeout((function(){e("raphael.anim.frame."+t,n,r)}))}(v.id,v,o.anim)}else{if(function(n,r,i){setTimeout((function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),t.is(n,"function")&&n.call(r)}))}(o.callback,v,o.anim),v.attr(m),Qe.splice(i--,1),o.repeat>1&&!o.next){for(s in m)m[c](s)&&(_[s]=o.totalOrigin[s]);o.el.attr(_),ot(o.anim,o.el,o.anim.percents[0],null,o.totalOrigin,o.repeat-1)}o.next&&!o.stop&&ot(o.anim,o.el,o.next,null,o.totalOrigin,o.repeat)}}}Qe.length&&et(n)},nt=function(e){return e>255?255:e<0?0:e};function rt(e,t,n,r,i,o){var a=3*t,s=3*(r-t)-a,u=1-a-s,c=3*n,l=3*(i-n)-c,f=1-c-l;function h(e){return((u*e+s)*e+a)*e}return function(e,t){var n=function(e,t){var n,r,i,o,c,l;for(i=e,l=0;l<8;l++){if(o=h(i)-e,A(o)<t)return i;if(A(c=(3*u*i+2*s)*i+a)<1e-6)break;i-=o/c}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=h(i),A(o-e)<t)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}(e,t);return((f*n+l)*n+c)*n}(e,1/(200*o))}function it(e,t){var n=[],r={};if(this.ms=t,this.times=1,e){for(var i in e)e[c](i)&&(r[D(i)]=e[i],n.push(D(i)));n.sort(X)}this.anim=r,this.top=n[n.length-1],this.percents=n}function ot(n,r,i,o,s,u){i=D(i);var l,f,h,p,m,v,g=n.ms,x={},b={},w={};if(o)for(E=0,T=Qe.length;E<T;E++){var S=Qe[E];if(S.el.id==r.id&&S.anim==n){S.percent!=i?(Qe.splice(E,1),h=1):f=S,r.attr(S.totalOrigin);break}}else o=+b;for(var E=0,T=n.percents.length;E<T;E++){if(n.percents[E]==i||n.percents[E]>o*n.top){i=n.percents[E],m=n.percents[E-1]||0,g=g/n.top*(i-m),p=n.percents[E+1],l=n.anim[i];break}o&&r.attr(n.anim[n.percents[E]])}if(l){if(f)f.initstatus=o,f.start=new Date-f.ms*o;else{for(var A in l)if(l[c](A)&&(j[c](A)||r.paper.customAttributes[c](A)))switch(x[A]=r.attr(A),null==x[A]&&(x[A]=B[A]),b[A]=l[A],j[A]){case k:w[A]=(b[A]-x[A])/g;break;case"colour":x[A]=t.getRGB(x[A]);var M=t.getRGB(b[A]);w[A]={r:(M.r-x[A].r)/g,g:(M.g-x[A].g)/g,b:(M.b-x[A].b)/g};break;case"path":var C=Me(x[A],b[A]),R=C[1];for(x[A]=C[0],w[A]=[],E=0,T=x[A].length;E<T;E++){w[A][E]=[0];for(var P=1,L=x[A][E].length;P<L;P++)w[A][E][P]=(R[E][P]-x[A][E][P])/g}break;case"transform":var O=r._,N=Le(O[A],b[A]);if(N)for(x[A]=N.from,b[A]=N.to,w[A]=[],w[A].real=!0,E=0,T=x[A].length;E<T;E++)for(w[A][E]=[x[A][E][0]],P=1,L=x[A][E].length;P<L;P++)w[A][E][P]=(b[A][E][P]-x[A][E][P])/g;else{var F=r.matrix||new Oe,z={_:{transform:O.transform},getBBox:function(){return r.getBBox(1)}};x[A]=[F.a,F.b,F.c,F.d,F.e,F.f],Re(z,b[A]),b[A]=z._.transform,w[A]=[(z.matrix.a-F.a)/g,(z.matrix.b-F.b)/g,(z.matrix.c-F.c)/g,(z.matrix.d-F.d)/g,(z.matrix.e-F.e)/g,(z.matrix.f-F.f)/g]}break;case"csv":var V=y(l[A])[_](a),U=y(x[A])[_](a);if("clip-rect"==A)for(x[A]=U,w[A]=[],E=U.length;E--;)w[A][E]=(V[E]-x[A][E])/g;b[A]=V;break;default:for(V=[][d](l[A]),U=[][d](x[A]),w[A]=[],E=r.paper.customAttributes[A].length;E--;)w[A][E]=((V[E]||0)-(U[E]||0))/g}var G=l.easing,H=t.easing_formulas[G];if(!H)if((H=y(G).match(I))&&5==H.length){var W=H;H=function(e){return rt(e,+W[1],+W[2],+W[3],+W[4],g)}}else H=$;if(S={anim:n,percent:i,timestamp:v=l.start||n.start||+new Date,start:v+(n.del||0),status:0,initstatus:o||0,stop:!1,ms:g,easing:H,from:x,diff:w,to:b,el:r,callback:l.callback,prev:m,next:p,repeat:u||n.times,origin:r.attr(),totalOrigin:s},Qe.push(S),o&&!f&&!h&&(S.stop=!0,S.start=new Date-g*o,1==Qe.length))return tt();h&&(S.start=new Date-S.ms*o),1==Qe.length&&et(tt)}e("raphael.anim.start."+r.id,r,n)}}function at(e){for(var t=0;t<Qe.length;t++)Qe[t].el.paper==e&&Qe.splice(t--,1)}Ge.animateWith=function(e,n,r,i,o,a){if(this.removed)return a&&a.call(this),this;var s=r instanceof it?r:t.animation(r,i,o,a);ot(s,this,s.percents[0],null,this.attr());for(var u=0,c=Qe.length;u<c;u++)if(Qe[u].anim==n&&Qe[u].el==e){Qe[c-1].start=Qe[u].start;break}return this},Ge.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},it.prototype.delay=function(e){var t=new it(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},it.prototype.repeat=function(e){var t=new it(this.anim,this.ms);return t.del=this.del,t.times=S.floor(E(e,0))||1,t},t.animation=function(e,n,r,i){if(e instanceof it)return e;!t.is(r,"function")&&r||(i=i||r||null,r=null),e=Object(e),n=+n||0;var o,a,s={};for(a in e)e[c](a)&&D(a)!=a&&D(a)+"%"!=a&&(o=!0,s[a]=e[a]);if(o)return r&&(s.easing=r),i&&(s.callback=i),new it({100:s},n);if(i){var u=0;for(var l in e){var f=F(l);e[c](l)&&f>u&&(u=f)}!e[u+="%"].callback&&(e[u].callback=i)}return new it(e,n)},Ge.animate=function(e,n,r,i){if(this.removed)return i&&i.call(this),this;var o=e instanceof it?e:t.animation(e,n,r,i);return ot(o,this,o.percents[0],null,this.attr()),this},Ge.setTime=function(e,t){return e&&null!=t&&this.status(e,T(t,e.ms)/e.ms),this},Ge.status=function(e,t){var n,r,i=[],o=0;if(null!=t)return ot(e,this,-1,T(t,1)),this;for(n=Qe.length;o<n;o++)if((r=Qe[o]).el.id==this.id&&(!e||r.anim==e)){if(e)return r.status;i.push({anim:r.anim,status:r.status})}return e?0:i},Ge.pause=function(t){for(var n=0;n<Qe.length;n++)Qe[n].el.id!=this.id||t&&Qe[n].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Qe[n].anim)&&(Qe[n].paused=!0);return this},Ge.resume=function(t){for(var n=0;n<Qe.length;n++)if(Qe[n].el.id==this.id&&(!t||Qe[n].anim==t)){var r=Qe[n];!1!==e("raphael.anim.resume."+this.id,this,r.anim)&&(delete r.paused,this.status(r.anim,r.status))}return this},Ge.stop=function(t){for(var n=0;n<Qe.length;n++)Qe[n].el.id!=this.id||t&&Qe[n].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Qe[n].anim)&&Qe.splice(n--,1);return this},e.on("raphael.remove",at),e.on("raphael.clear",at),Ge.toString=function(){return"Rapha\xebl\u2019s object"};var st,ut,ct,lt,ft=function e(t){if(this.items=[],this.length=0,this.type="set",t)for(var n=0,r=t.length;n<r;n++)!t[n]||t[n].constructor!=Ge.constructor&&t[n].constructor!=e||(this[this.items.length]=this.items[this.items.length]=t[n],this.length++)},ht=ft.prototype;for(var pt in ht.push=function(){for(var e,t,n=0,r=arguments.length;n<r;n++)!(e=arguments[n])||e.constructor!=Ge.constructor&&e.constructor!=ft||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},ht.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ht.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(!1===e.call(t,this.items[n],n))return this;return this},Ge)Ge[c](pt)&&(ht[pt]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e][p](n,t)}))}}(pt));return ht.attr=function(e,n){if(e&&t.is(e,R)&&t.is(e[0],"object"))for(var r=0,i=e.length;r<i;r++)this.items[r].attr(e[r]);else for(var o=0,a=this.items.length;o<a;o++)this.items[o].attr(e,n);return this},ht.clear=function(){for(;this.length;)this.pop()},ht.splice=function(e,t,n){e=e<0?E(this.length+e,0):e,t=E(0,T(this.length-e,t));var r,i=[],o=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;r<t;r++)o.push(this[e+r]);for(;r<this.length-e;r++)i.push(this[e+r]);var s=a.length;for(r=0;r<s+i.length;r++)this.items[e+r]=this[e+r]=r<s?a[r]:i[r-s];for(r=this.items.length=this.length-=t-s;this[r];)delete this[r++];return new ft(o)},ht.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},ht.animate=function(e,n,r,i){(t.is(r,"function")||!r)&&(i=r||null);var o,a,s=this.items.length,u=s,c=this;if(!s)return this;i&&(a=function(){!--s&&i.call(c)}),r=t.is(r,"string")?r:a;var l=t.animation(e,n,r,a);for(o=this.items[--u].animate(l);u--;)this.items[u]&&!this.items[u].removed&&this.items[u].animateWith(o,l,l),this.items[u]&&!this.items[u].removed||s--;return this},ht.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ht.getBBox=function(){for(var e=[],t=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return{x:e=T[p](0,e),y:t=T[p](0,t),x2:n=E[p](0,n),y2:r=E[p](0,r),width:n-e,height:r-t}},ht.clone=function(e){e=this.paper.set();for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},ht.toString=function(){return"Rapha\xebl\u2018s set"},ht.glow=function(e){var t=this.paper.set();return this.forEach((function(n,r){var i=n.glow(e);null!=i&&i.forEach((function(e,n){t.push(e)}))})),t},ht.isPointInside=function(e,t){var n=!1;return this.forEach((function(r){if(r.isPointInside(e,t))return n=!0,!1})),n},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[c](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg)for(var i in t.face["units-per-em"]=F(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[c](i)){var o=e.glyphs[i];if(t.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},o.k)for(var a in o.k)o[c](a)&&(t.glyphs[i].k[a]=o.k[a])}return e},r.getFont=function(e,n,r,i){if(i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,t.fonts){var o,a=t.fonts[e];if(!a){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,v)+"(\\s|$)","i");for(var u in t.fonts)if(t.fonts[c](u)&&s.test(u)){a=t.fonts[u];break}}if(a)for(var l=0,f=a.length;l<f&&((o=a[l]).face["font-weight"]!=n||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=i);l++);return o}},r.print=function(e,n,r,i,o,s,u,c){s=s||"middle",u=E(T(u||0,1),-1),c=E(T(c||1,3),1);var l,f=y(r)[_](v),h=0,p=0,d=v;if(t.is(i,"string")&&(i=this.getFont(i)),i){l=(o||16)/i.face["units-per-em"];for(var m=i.face.bbox[_](a),g=+m[0],x=m[3]-m[1],b=0,w=+m[1]+("baseline"==s?x+ +i.face.descent:x/2),S=0,A=f.length;S<A;S++){if("\n"==f[S])h=0,C=0,p=0,b+=x*c;else{var M=p&&i.glyphs[f[S-1]]||{},C=i.glyphs[f[S]];h+=p?(M.w||i.w)+(M.k&&M.k[f[S]]||0)+i.w*u:0,p=1}C&&C.d&&(d+=t.transformPath(C.d,["t",h*l,b*l,"s",l,l,g,w,"t",(e-g)/l,(n-w)/l]))}}return this.path(d).attr({fill:"#000",stroke:"none"})},r.add=function(e){if(t.is(e,"array"))for(var n,r=this.set(),i=0,o=e.length;i<o;i++)n=e[i]||{},s[c](n.type)&&r.push(this[n.type]().attr(n));return r},t.format=function(e,n){var r=t.is(n,R)?[0][d](n):arguments;return e&&t.is(e,"string")&&r.length-1&&(e=e.replace(u,(function(e,t){return null==r[++t]?v:r[t]}))),e||v},t.fullfill=(st=/\{([^\}]+)\}/g,ut=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(st,(function(e,n){return function(e,t,n){var r=n;return t.replace(ut,(function(e,t,n,i,o){t=t||i,r&&(t in r&&(r=r[t]),"function"==typeof r&&o&&(r=r()))})),r=(null==r||r==n?e:r)+""}(e,n,t)}))}),t.ninja=function(){if(f.was)l.win.Raphael=f.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return t},t.st=ht,e.on("raphael.DOMload",(function(){n=!0})),null==(ct=document).readyState&&ct.addEventListener&&(ct.addEventListener("DOMContentLoaded",lt=function(){ct.removeEventListener("DOMContentLoaded",lt,!1),ct.readyState="complete"},!1),ct.readyState="loading"),function e(){/in/.test(ct.readyState)?setTimeout(e,9):t.eve("raphael.DOMload")}(),t}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0),n(3),n(4)],void 0===(i=function(e){return e}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o,a,s,u,c,l,f,h,p,d,m,v;a="hasOwnProperty",s=/[\.\/]/,u=/\s*,\s*/,c=function(e,t){return e-t},l={n:{}},f=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},h=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},p=Object.prototype.toString,d=String,m=Array.isArray||function(e){return e instanceof Array||"[object Array]"==p.call(e)},(v=function(e,t){var n,r=o,a=Array.prototype.slice.call(arguments,2),s=v.listeners(e),u=0,l=[],p={},d=[],m=i;d.firstDefined=f,d.lastDefined=h,i=e,o=0;for(var g=0,y=s.length;g<y;g++)"zIndex"in s[g]&&(l.push(s[g].zIndex),s[g].zIndex<0&&(p[s[g].zIndex]=s[g]));for(l.sort(c);l[u]<0;)if(n=p[l[u++]],d.push(n.apply(t,a)),o)return o=r,d;for(g=0;g<y;g++)if("zIndex"in(n=s[g]))if(n.zIndex==l[u]){if(d.push(n.apply(t,a)),o)break;do{if((n=p[l[++u]])&&d.push(n.apply(t,a)),o)break}while(n)}else p[n.zIndex]=n;else if(d.push(n.apply(t,a)),o)break;return o=r,i=m,d})._events=l,v.listeners=function(e){var t,n,r,i,o,a,u,c,f=m(e)?e:e.split(s),h=l,p=[h],d=[];for(i=0,o=f.length;i<o;i++){for(c=[],a=0,u=p.length;a<u;a++)for(n=[(h=p[a].n)[f[i]],h["*"]],r=2;r--;)(t=n[r])&&(c.push(t),d=d.concat(t.f||[]));p=c}return d},v.separator=function(e){e?(e="["+(e=d(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",s=new RegExp(e)):s=/[\.\/]/},v.on=function(e,t){if("function"!=typeof t)return function(){};for(var n=m(e)?m(e[0])?e:[e]:d(e).split(u),r=0,i=n.length;r<i;r++)!function(e){for(var n,r=m(e)?e:d(e).split(s),i=l,o=0,a=r.length;o<a;o++)i=(i=i.n).hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,a=i.f.length;o<a;o++)if(i.f[o]==t){n=!0;break}!n&&i.f.push(t)}(n[r]);return function(e){+e==+e&&(t.zIndex=+e)}},v.f=function(e){var t=[].slice.call(arguments,1);return function(){v.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},v.stop=function(){o=1},v.nt=function(e){var t=m(i)?i.join("."):i;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},v.nts=function(){return m(i)?i:i.split(s)},v.off=v.unbind=function(e,t){if(e){var n=m(e)?m(e[0])?e:[e]:d(e).split(u);if(n.length>1)for(var r=0,i=n.length;r<i;r++)v.off(n[r],t);else{n=m(e)?e:d(e).split(s);var o,c,f,h,p,g=[l];for(r=0,i=n.length;r<i;r++)for(h=0;h<g.length;h+=f.length-2){if(f=[h,1],o=g[h].n,"*"!=n[r])o[n[r]]&&f.push(o[n[r]]);else for(c in o)o[a](c)&&f.push(o[c]);g.splice.apply(g,f)}for(r=0,i=g.length;r<i;r++)for(o=g[r];o.n;){if(t){if(o.f){for(h=0,p=o.f.length;h<p;h++)if(o.f[h]==t){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(c in o.n)if(o.n[a](c)&&o.n[c].f){var y=o.n[c].f;for(h=0,p=y.length;h<p;h++)if(y[h]==t){y.splice(h,1);break}!y.length&&delete o.n[c].f}}else for(c in delete o.f,o.n)o.n[a](c)&&o.n[c].f&&delete o.n[c].f;o=o.n}}}else v._events=l={n:{}}},v.once=function(e,t){return v.on(e,(function n(){return v.off(e,n),t.apply(this,arguments)}))},v.version="0.5.0",v.toString=function(){return"You are running Eve 0.5.0"},e.exports?e.exports=v:void 0===(r=function(){return v}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.svg){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,o=Math,a=o.max,s=o.abs,u=o.pow,c=/[, ]+/,l=e.eve,f="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var v=function r(i,o){if(o)for(var a in"string"==typeof i&&(i=r(i)),o)o[t](a)&&("xlink:"==a.substring(0,6)?i.setAttributeNS(p,a.substring(6),n(o[a])):i.setAttribute(a,n(o[a])));else(i=e._g.doc.createElementNS("http://www.w3.org/2000/svg",i)).style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},g=function(t,i){var c="linear",l=t.id+i,h=.5,p=.5,d=t.node,m=t.paper,g=d.style,_=e._g.doc.getElementById(l);if(!_){if(i=(i=n(i).replace(e._radial_gradient,(function(e,t,n){if(c="radial",t&&n){h=r(t);var i=2*((p=r(n))>.5)-1;u(h-.5,2)+u(p-.5,2)>.25&&(p=o.sqrt(.25-u(h-.5,2))*i+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*i)}return f}))).split(/\s*\-\s*/),"linear"==c){var x=i.shift();if(x=-r(x),isNaN(x))return null;var b=[0,0,o.cos(e.rad(x)),o.sin(e.rad(x))],w=1/(a(s(b[2]),s(b[3]))||1);b[2]*=w,b[3]*=w,b[2]<0&&(b[0]=-b[2],b[2]=0),b[3]<0&&(b[1]=-b[3],b[3]=0)}var S=e._parseDots(i);if(!S)return null;if(l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){_=v(c+"Gradient",{id:l}),t.gradient=_,v(_,"radial"==c?{fx:h,fy:p}:{x1:b[0],y1:b[1],x2:b[2],y2:b[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(_);for(var E=0,T=S.length;E<T;E++)_.appendChild(v("stop",{offset:S[E].offset?S[E].offset:E?"100%":"0%","stop-color":S[E].color||"#fff","stop-opacity":isFinite(S[E].opacity)?S[E].opacity:1}))}}return v(d,{fill:y(l),opacity:1,"fill-opacity":1}),g.fill=f,g.opacity=1,g.fillOpacity=1,1},y=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,n=document.location;return"url('"+n.protocol+"//"+n.host+n.pathname+n.search+"#"+e+"')"},_=function(e){var t=e.getBBox(1);v(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},x=function(r,i,o){if("path"==r.type){for(var a,s,u,c,l,h=n(i).toLowerCase().split("-"),p=r.paper,g=o?"end":"start",y=r.node,_=r.attrs,x=_["stroke-width"],b=h.length,w="classic",S=3,E=3,T=5;b--;)switch(h[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=h[b];break;case"wide":E=5;break;case"narrow":E=2;break;case"long":S=5;break;case"short":S=2}if("open"==w?(S+=2,E+=2,T+=2,u=1,c=o?4:1,l={fill:"none",stroke:_.stroke}):(c=u=S/2,l={fill:_.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&m[r._.arrows.endPath]--,r._.arrows.endMarker&&m[r._.arrows.endMarker]--):(r._.arrows.startPath&&m[r._.arrows.startPath]--,r._.arrows.startMarker&&m[r._.arrows.startMarker]--):r._.arrows={},"none"!=w){var A="raphael-marker-"+w,M="raphael-marker-"+g+w+S+E+"-obj"+r.id;e._g.doc.getElementById(A)?m[A]++:(p.defs.appendChild(v(v("path"),{"stroke-linecap":"round",d:d[w],id:A})),m[A]=1);var C,k=e._g.doc.getElementById(M);k?(m[M]++,C=k.getElementsByTagName("use")[0]):(k=v(v("marker"),{id:M,markerHeight:E,markerWidth:S,orient:"auto",refX:c,refY:E/2}),C=v(v("use"),{"xlink:href":"#"+A,transform:(o?"rotate(180 "+S/2+" "+E/2+") ":f)+"scale("+S/T+","+E/T+")","stroke-width":(1/((S/T+E/T)/2)).toFixed(4)}),k.appendChild(C),p.defs.appendChild(k),m[M]=1),v(C,l);var R=u*("diamond"!=w&&"oval"!=w);o?(a=r._.arrows.startdx*x||0,s=e.getTotalLength(_.path)-R*x):(a=R*x,s=e.getTotalLength(_.path)-(r._.arrows.enddx*x||0)),(l={})["marker-"+g]="url(#"+M+")",(s||a)&&(l.d=e.getSubpath(_.path,a,s)),v(y,l),r._.arrows[g+"Path"]=A,r._.arrows[g+"Marker"]=M,r._.arrows[g+"dx"]=R,r._.arrows[g+"Type"]=w,r._.arrows[g+"String"]=i}else o?(a=r._.arrows.startdx*x||0,s=e.getTotalLength(_.path)-a):(a=0,s=e.getTotalLength(_.path)-(r._.arrows.enddx*x||0)),r._.arrows[g+"Path"]&&v(y,{d:e.getSubpath(_.path,a,s)}),delete r._.arrows[g+"Path"],delete r._.arrows[g+"Marker"],delete r._.arrows[g+"dx"],delete r._.arrows[g+"Type"],delete r._.arrows[g+"String"];for(l in m)if(m[t](l)&&!m[l]){var P=e._g.doc.getElementById(l);P&&P.parentNode.removeChild(P)}}},b={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(e,t,r){if(t=b[n(t).toLowerCase()]){for(var i=e.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],s=t.length;s--;)a[s]=t[s]*i+(s%2?1:-1)*o;v(e.node,{"stroke-dasharray":a.join(",")})}else v(e.node,{"stroke-dasharray":"none"})},S=function(r,o){var u=r.node,l=r.attrs,h=u.style.visibility;for(var d in u.style.visibility="hidden",o)if(o[t](d)){if(!e._availableAttrs[t](d))continue;var m=o[d];switch(l[d]=m,d){case"blur":r.blur(m);break;case"title":var y=u.getElementsByTagName("title");if(y.length&&(y=y[0]))y.firstChild.nodeValue=m;else{y=v("title");var b=e._g.doc.createTextNode(m);y.appendChild(b),u.appendChild(y)}break;case"href":case"target":var S=u.parentNode;if("a"!=S.tagName.toLowerCase()){var T=v("a");S.insertBefore(T,u),T.appendChild(u),S=T}"target"==d?S.setAttributeNS(p,"show","blank"==m?"new":m):S.setAttributeNS(p,d,m);break;case"cursor":u.style.cursor=m;break;case"transform":r.transform(m);break;case"arrow-start":x(r,m);break;case"arrow-end":x(r,m,1);break;case"clip-rect":var A=n(m).split(c);if(4==A.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var M=v("clipPath"),C=v("rect");M.id=e.createUUID(),v(C,{x:A[0],y:A[1],width:A[2],height:A[3]}),M.appendChild(C),r.paper.defs.appendChild(M),v(u,{"clip-path":"url(#"+M.id+")"}),r.clip=C}if(!m){var k=u.getAttribute("clip-path");if(k){var R=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,f));R&&R.parentNode.removeChild(R),v(u,{"clip-path":f}),delete r.clip}}break;case"path":"path"==r.type&&(v(u,{d:m?l.path=e._pathToAbsolute(m):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1)));break;case"width":if(u.setAttribute(d,m),r._.dirty=1,!l.fx)break;d="x",m=l.x;case"x":l.fx&&(m=-l.x-(l.width||0));case"rx":if("rx"==d&&"rect"==r.type)break;case"cx":u.setAttribute(d,m),r.pattern&&_(r),r._.dirty=1;break;case"height":if(u.setAttribute(d,m),r._.dirty=1,!l.fy)break;d="y",m=l.y;case"y":l.fy&&(m=-l.y-(l.height||0));case"ry":if("ry"==d&&"rect"==r.type)break;case"cy":u.setAttribute(d,m),r.pattern&&_(r),r._.dirty=1;break;case"r":"rect"==r.type?v(u,{rx:m,ry:m}):u.setAttribute(d,m),r._.dirty=1;break;case"src":"image"==r.type&&u.setAttributeNS(p,"href",m);break;case"stroke-width":1==r._.sx&&1==r._.sy||(m/=a(s(r._.sx),s(r._.sy))||1),u.setAttribute(d,m),l["stroke-dasharray"]&&w(r,l["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"stroke-dasharray":w(r,m,o);break;case"fill":var P=n(m).match(e._ISURL);if(P){M=v("pattern");var L=v("image");M.id=e.createUUID(),v(M,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),v(L,{x:0,y:0,"xlink:href":P[1]}),M.appendChild(L),function(t){e._preload(P[1],(function(){var e=this.offsetWidth,n=this.offsetHeight;v(t,{width:e,height:n}),v(L,{width:e,height:n})}))}(M),r.paper.defs.appendChild(M),v(u,{fill:"url(#"+M.id+")"}),r.pattern=M,r.pattern&&_(r);break}var O=e.getRGB(m);if(O.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=n(m).charAt())&&g(r,m)){if("opacity"in l||"fill-opacity"in l){var I=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,f));if(I){var N=I.getElementsByTagName("stop");v(N[N.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=m,l.fill="none";break}}else delete o.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(o.opacity,"undefined")&&v(u,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(o["fill-opacity"],"undefined")&&v(u,{"fill-opacity":l["fill-opacity"]});O[t]("opacity")&&v(u,{"fill-opacity":O.opacity>1?O.opacity/100:O.opacity});case"stroke":O=e.getRGB(m),u.setAttribute(d,O.hex),"stroke"==d&&O[t]("opacity")&&v(u,{"stroke-opacity":O.opacity>1?O.opacity/100:O.opacity}),"stroke"==d&&r._.arrows&&("startString"in r._.arrows&&x(r,r._.arrows.startString),"endString"in r._.arrows&&x(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=n(m).charAt())&&g(r,m);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&v(u,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(l.gradient){(I=e._g.doc.getElementById(u.getAttribute("fill").replace(/^url\(#|\)$/g,f)))&&(N=I.getElementsByTagName("stop"),v(N[N.length-1],{"stop-opacity":m}));break}default:"font-size"==d&&(m=i(m,10)+"px");var D=d.replace(/(\-.)/g,(function(e){return e.substring(1).toUpperCase()}));u.style[D]=m,r._.dirty=1,u.setAttribute(d,m)}}E(r,o),u.style.visibility=h},E=function(r,o){if("text"==r.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=r.attrs,s=r.node,u=s.firstChild?i(e._g.doc.defaultView.getComputedStyle(s.firstChild,f).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,l=n(o.text).split("\n"),h=[],p=0,d=l.length;p<d;p++)c=v("tspan"),p&&v(c,{dy:1.2*u,x:a.x}),c.appendChild(e._g.doc.createTextNode(l[p])),s.appendChild(c),h[p]=c}else for(p=0,d=(h=s.getElementsByTagName("tspan")).length;p<d;p++)p?v(h[p],{dy:1.2*u,x:a.x}):v(h[0],{dy:0});v(s,{x:a.x,y:a.y}),r._.dirty=1;var m=r._getBBox(),g=a.y-(m.y+m.height/2);g&&e.is(g,"finite")&&v(h[0],{dy:g})}},T=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},M=e.el;A.prototype=M,M.constructor=A,e._engine.path=function(e,t){var n=v("path");t.canvas&&t.canvas.appendChild(n);var r=new A(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},M.rotate=function(e,t,i){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},M.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3])),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this},M.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},M.transform=function(n){var r=this._;if(null==n)return r.transform;if(e._extractTransform(this,n),this.clip&&v(this.clip,{transform:this.matrix.invert()}),this.pattern&&_(this),this.node&&v(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},M.hide=function(){return this.removed||(this.node.style.display="none"),this},M.show=function(){return this.removed||(this.node.style.display=""),this},M.remove=function(){var t=T(this.node);if(!this.removed&&t.parentNode){var n=this.paper;for(var r in n.__set__&&n.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&n.defs.removeChild(this.gradient),e._tear(this,n),t.parentNode.removeChild(t),this.removeData(),this)this[r]="function"==typeof this[r]?e._removedFactory(r):null;this.removed=!0}},M._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,n=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(n=!0,t.display="");var r={};try{r=this.node.getBBox()}catch(e){r={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{r=r||{},n&&(t.display="none")}return e&&this.hide(),r},M.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var a=n.split(c),s={},u=0,f=a.length;u<f;u++)(n=a[u])in this.attrs?s[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=e._availableAttrs[n];return f-1?s:s[a[0]]}if(null==r&&e.is(n,"array")){for(s={},u=0,f=n.length;u<f;u++)s[n[u]]=this.attr(n[u]);return s}if(null!=r){var h={};h[n]=r}else null!=n&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var m in this.attrs[p]=h[p],d)d[t](m)&&(h[m]=d[m])}return S(this,h),this},M.toFront=function(){if(this.removed)return this;var t=T(this.node);t.parentNode.appendChild(t);var n=this.paper;return n.top!=this&&e._tofront(this,n),this},M.toBack=function(){if(this.removed)return this;var t=T(this.node),n=t.parentNode;return n.insertBefore(t,n.firstChild),e._toback(this,this.paper),this.paper,this},M.insertAfter=function(t){if(this.removed||!t)return this;var n=T(this.node),r=T(t.node||t[t.length-1].node);return r.nextSibling?r.parentNode.insertBefore(n,r.nextSibling):r.parentNode.appendChild(n),e._insertafter(this,t,this.paper),this},M.insertBefore=function(t){if(this.removed||!t)return this;var n=T(this.node),r=T(t.node||t[0].node);return r.parentNode.insertBefore(n,r),e._insertbefore(this,t,this.paper),this},M.blur=function(t){var n=this;if(0!=+t){var r=v("filter"),i=v("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),v(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,v(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter");return n},e._engine.circle=function(e,t,n,r){var i=v("circle");e.canvas&&e.canvas.appendChild(i);var o=new A(i,e);return o.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",v(i,o.attrs),o},e._engine.rect=function(e,t,n,r,i,o){var a=v("rect");e.canvas&&e.canvas.appendChild(a);var s=new A(a,e);return s.attrs={x:t,y:n,width:r,height:i,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",v(a,s.attrs),s},e._engine.ellipse=function(e,t,n,r,i){var o=v("ellipse");e.canvas&&e.canvas.appendChild(o);var a=new A(o,e);return a.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",v(o,a.attrs),a},e._engine.image=function(e,t,n,r,i,o){var a=v("image");v(a,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(a);var s=new A(a,e);return s.attrs={x:n,y:r,width:i,height:o,src:t},s.type="image",s},e._engine.text=function(t,n,r,i){var o=v("text");t.canvas&&t.canvas.appendChild(o);var a=new A(o,t);return a.attrs={x:n,y:r,"text-anchor":"middle",text:i,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},a.type="text",S(a,a.attrs),a},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container;if(!n)throw new Error("SVG container not found.");var r,i=t.x,o=t.y,a=t.width,s=t.height,u=v("svg"),c="overflow:hidden;";return i=i||0,o=o||0,v(u,{height:s=s||342,version:1.1,width:a=a||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==n?(u.style.cssText=c+"position:absolute;left:"+i+"px;top:"+o+"px",e._g.doc.body.appendChild(u),r=1):(u.style.cssText=c+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),(n=new e._Paper).width=a,n.height=s,n.canvas=u,n.clear(),n._left=n._top=0,r&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var o,s,u=this.getSize(),c=a(n/u.width,r/u.height),f=this.top,p=i?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(c=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=c,o=e+h+t+h+n+h+r),v(this.canvas,{viewBox:o,preserveAspectRatio:p});c&&f;)s="stroke-width"in f.attrs?f.attrs["stroke-width"]:1,f.attr({"stroke-width":s}),f._.dirty=1,f._.dirtyT=1,f=f.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e,t=this.canvas,n=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(n){e=t.createSVGMatrix()}var r=-e.e%1,i=-e.f%1;(r||i)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=v("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\xebl "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=v("defs"))},e.prototype.remove=function(){for(var t in l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var C=e.st;for(var k in M)M[t](k)&&!C[t](k)&&(C[k]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e].apply(n,t)}))}}(k))}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(0)],void 0===(i=function(e){if(!e||e.vml){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,o=i.round,a=i.max,s=i.min,u=i.abs,c=/[, ]+/,l=e.eve,f=" ",h="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},d=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,v=/-?[^,\s-]+/g,g="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",y=21600,_={path:1,rect:1,image:1},x={circle:1,ellipse:1},b=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},w=function(e,t,n,r,i,o){var a=e._,s=e.matrix,c=a.fillpos,l=e.node,h=l.style,p=1,d="",m=y/t,v=y/n;if(h.visibility="hidden",t&&n){if(l.coordsize=u(m)+f+u(v),h.rotation=o*(t*n<0?-1:1),o){var g=b(o,r,i);r=g.dx,i=g.dy}if(t<0&&(d+="x"),n<0&&(d+=" y")&&(p=-1),h.flip=d,l.coordorigin=r*-m+f+i*-v,c||a.fillsize){var _=l.getElementsByTagName("fill");_=_&&_[0],l.removeChild(_),c&&(g=b(o,s.x(c[0],c[1]),s.y(c[0],c[1])),_.position=g.dx*p+f+g.dy*p),a.fillsize&&(_.size=a.fillsize[0]*u(t)+f+a.fillsize[1]*u(n)),l.appendChild(_)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var S,E=function(e,t,r){for(var i=n(t).toLowerCase().split("-"),o=r?"end":"start",a=i.length,s="classic",u="medium",c="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[a];break;case"wide":case"narrow":c=i[a];break;case"long":case"short":u=i[a]}var l=e.node.getElementsByTagName("stroke")[0];l[o+"arrow"]=s,l[o+"arrowlength"]=u,l[o+"arrowwidth"]=c},T=function(i,u){i.attrs=i.attrs||{};var l=i.node,m=i.attrs,g=l.style,b=_[i.type]&&(u.x!=m.x||u.y!=m.y||u.width!=m.width||u.height!=m.height||u.cx!=m.cx||u.cy!=m.cy||u.rx!=m.rx||u.ry!=m.ry||u.r!=m.r),T=x[i.type]&&(m.cx!=u.cx||m.cy!=u.cy||m.r!=u.r||m.rx!=u.rx||m.ry!=u.ry),M=i;for(var C in u)u[t](C)&&(m[C]=u[C]);if(b&&(m.path=e._getPath[i.type](i),i._.dirty=1),u.href&&(l.href=u.href),u.title&&(l.title=u.title),u.target&&(l.target=u.target),u.cursor&&(g.cursor=u.cursor),"blur"in u&&i.blur(u.blur),(u.path&&"path"==i.type||b)&&(l.path=function(t){var r=/[ahqstv]/gi,i=e._pathToAbsolute;if(n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g,i==e._pathToAbsolute&&!n(t).match(r)){var a=n(t).replace(d,(function(e,t,n){var r=[],i="m"==t.toLowerCase(),a=p[t];return n.replace(v,(function(e){i&&2==r.length&&(a+=r+p["m"==t?"l":"L"],r=[]),r.push(o(e*y))})),a+r}));return a}var s,u,c=i(t);a=[];for(var l=0,m=c.length;l<m;l++){s=c[l],"z"==(u=c[l][0].toLowerCase())&&(u="x");for(var g=1,_=s.length;g<_;g++)u+=o(s[g]*y)+(g!=_-1?",":h);a.push(u)}return a.join(f)}(~n(m.path).toLowerCase().indexOf("r")?e._pathToAbsolute(m.path):m.path),i._.dirty=1,"image"==i.type&&(i._.fillpos=[m.x,m.y],i._.fillsize=[m.width,m.height],w(i,1,1,0,0,0))),"transform"in u&&i.transform(u.transform),T){var k=+m.cx,R=+m.cy,P=+m.rx||+m.r||0,L=+m.ry||+m.r||0;l.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((k-P)*y),o((R-L)*y),o((k+P)*y),o((R+L)*y),o(k*y)),i._.dirty=1}if("clip-rect"in u){var O=n(u["clip-rect"]).split(c);if(4==O.length){O[2]=+O[2]+ +O[0],O[3]=+O[3]+ +O[1];var I=l.clipRect||e._g.doc.createElement("div"),N=I.style;N.clip=e.format("rect({1}px {2}px {3}px {0}px)",O),l.clipRect||(N.position="absolute",N.top=0,N.left=0,N.width=i.paper.width+"px",N.height=i.paper.height+"px",l.parentNode.insertBefore(I,l),I.appendChild(l),l.clipRect=I)}u["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(i.textpath){var D=i.textpath.style;u.font&&(D.font=u.font),u["font-family"]&&(D.fontFamily='"'+u["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,h)+'"'),u["font-size"]&&(D.fontSize=u["font-size"]),u["font-weight"]&&(D.fontWeight=u["font-weight"]),u["font-style"]&&(D.fontStyle=u["font-style"])}if("arrow-start"in u&&E(M,u["arrow-start"]),"arrow-end"in u&&E(M,u["arrow-end"],1),null!=u.opacity||null!=u.fill||null!=u.src||null!=u.stroke||null!=u["stroke-width"]||null!=u["stroke-opacity"]||null!=u["fill-opacity"]||null!=u["stroke-dasharray"]||null!=u["stroke-miterlimit"]||null!=u["stroke-linejoin"]||null!=u["stroke-linecap"]){var F=l.getElementsByTagName("fill");if(!(F=F&&F[0])&&(F=S("fill")),"image"==i.type&&u.src&&(F.src=u.src),u.fill&&(F.on=!0),null!=F.on&&"none"!=u.fill&&null!==u.fill||(F.on=!1),F.on&&u.fill){var z=n(u.fill).match(e._ISURL);if(z){F.parentNode==l&&l.removeChild(F),F.rotate=!0,F.src=z[1],F.type="tile";var B=i.getBBox(1);F.position=B.x+f+B.y,i._.fillpos=[B.x,B.y],e._preload(z[1],(function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else F.color=e.getRGB(u.fill).hex,F.src=h,F.type="solid",e.getRGB(u.fill).error&&(M.type in{circle:1,ellipse:1}||"r"!=n(u.fill).charAt())&&A(M,u.fill,F)&&(m.fill="none",m.gradient=u.fill,F.rotate=!1)}if("fill-opacity"in u||"opacity"in u){var j=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+e.getRGB(u.fill).o+1||2)-1);j=s(a(j,0),1),F.opacity=j,F.src&&(F.color="none")}l.appendChild(F);var V=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],U=!1;!V&&(U=V=S("stroke")),(u.stroke&&"none"!=u.stroke||u["stroke-width"]||null!=u["stroke-opacity"]||u["stroke-dasharray"]||u["stroke-miterlimit"]||u["stroke-linejoin"]||u["stroke-linecap"])&&(V.on=!0),("none"==u.stroke||null===u.stroke||null==V.on||0==u.stroke||0==u["stroke-width"])&&(V.on=!1);var G=e.getRGB(u.stroke);V.on&&u.stroke&&(V.color=G.hex),j=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+G.o+1||2)-1);var H=.75*(r(u["stroke-width"])||1);if(j=s(a(j,0),1),null==u["stroke-width"]&&(H=m["stroke-width"]),u["stroke-width"]&&(V.weight=H),H&&H<1&&(j*=H)&&(V.weight=1),V.opacity=j,u["stroke-linejoin"]&&(V.joinstyle=u["stroke-linejoin"]||"miter"),V.miterlimit=u["stroke-miterlimit"]||8,u["stroke-linecap"]&&(V.endcap="butt"==u["stroke-linecap"]?"flat":"square"==u["stroke-linecap"]?"square":"round"),"stroke-dasharray"in u){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};V.dashstyle=W[t](u["stroke-dasharray"])?W[u["stroke-dasharray"]]:h}U&&l.appendChild(V)}if("text"==M.type){M.paper.canvas.style.display=h;var q=M.paper.span,Y=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);g=q.style,m.font&&(g.font=m.font),m["font-family"]&&(g.fontFamily=m["font-family"]),m["font-weight"]&&(g.fontWeight=m["font-weight"]),m["font-style"]&&(g.fontStyle=m["font-style"]),Y=r(m["font-size"]||Y&&Y[0])||10,g.fontSize=100*Y+"px",M.textpath.string&&(q.innerHTML=n(M.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=q.getBoundingClientRect();M.W=m.w=(X.right-X.left)/100,M.H=m.h=(X.bottom-X.top)/100,M.X=m.x,M.Y=m.y+M.H/2,("x"in u||"y"in u)&&(M.path.v=e.format("m{0},{1}l{2},{1}",o(m.x*y),o(m.y*y),o(m.x*y)+1));for(var $=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,K=$.length;Z<K;Z++)if($[Z]in u){M._.dirty=1;break}switch(m["text-anchor"]){case"start":M.textpath.style["v-text-align"]="left",M.bbx=M.W/2;break;case"end":M.textpath.style["v-text-align"]="right",M.bbx=-M.W/2;break;default:M.textpath.style["v-text-align"]="center",M.bbx=0}M.textpath.style["v-text-kern"]=!0}},A=function(t,o,a){t.attrs=t.attrs||{},t.attrs;var s=Math.pow,u="linear",c=".5 .5";if(t.attrs.gradient=o,o=(o=n(o).replace(e._radial_gradient,(function(e,t,n){return u="radial",t&&n&&(t=r(t),n=r(n),s(t-.5,2)+s(n-.5,2)>.25&&(n=i.sqrt(.25-s(t-.5,2))*(2*(n>.5)-1)+.5),c=t+f+n),h}))).split(/\s*\-\s*/),"linear"==u){var l=o.shift();if(l=-r(l),isNaN(l))return null}var p=e._parseDots(o);if(!p)return null;if(t=t.shape||t.node,p.length){t.removeChild(a),a.on=!0,a.method="none",a.color=p[0].color,a.color2=p[p.length-1].color;for(var d=[],m=0,v=p.length;m<v;m++)p[m].offset&&d.push(p[m].offset+f+p[m].color);a.colors=d.length?d.join():"0% "+a.color,"radial"==u?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-l)%360),t.appendChild(a)}return 1},M=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;M.prototype=C,C.constructor=M,C.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:h;i&&(r=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||h)),e._extractTransform(this,o+t);var a,s=this.matrix.clone(),u=this.skew,c=this.node,l=~n(this.attrs.fill).indexOf("-"),p=!n(this.attrs.fill).indexOf("url(");if(s.translate(1,1),p||l||"image"==this.type)if(u.matrix="1 0 0 1",u.offset="0 0",a=s.split(),l&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var d=this.getBBox(),m=this.getBBox(1),v=d.x-m.x,g=d.y-m.y;c.coordorigin=v*-y+f+g*-y,w(this,1,1,v,g,0)}else c.style.filter=h,w(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=h,u.matrix=n(s),u.offset=s.offset();return null!==r&&(this._.transform=r,e._extractTransform(this,r)),this},C.rotate=function(e,t,i){if(this.removed)return this;if(null!=e){if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),null==i&&(t=i),null==t||null==i){var o=this.getBBox(1);t=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},C.translate=function(e,t){return this.removed||((e=n(e).split(c)).length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},C.scale=function(e,t,i,o){if(this.removed)return this;if((e=n(e).split(c)).length-1&&(t=r(e[1]),i=r(e[2]),o=r(e[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),e=r(e[0]),null==t&&(t=e),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,i,o]])),this._.dirtyT=1,this},C.hide=function(){return!this.removed&&(this.node.style.display="none"),this},C.show=function(){return!this.removed&&(this.node.style.display=h),this},C.auxGetBBox=e.el.getBBox,C.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},n=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=n,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=n,t.width=e.width*n,t.height=e.height*n,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},C._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},C.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},C.attr=function(n,r){if(this.removed)return this;if(null==n){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=n.split(c),s={},u=0,f=a.length;u<f;u++)(n=a[u])in this.attrs?s[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?s[n]=this.paper.customAttributes[n].def:s[n]=e._availableAttrs[n];return f-1?s:s[a[0]]}if(this.attrs&&null==r&&e.is(n,"array")){for(s={},u=0,f=n.length;u<f;u++)s[n[u]]=this.attr(n[u]);return s}var h;for(var p in null!=r&&((h={})[n]=r),null==r&&e.is(n,"object")&&(h=n),h)l("raphael.attr."+p+"."+this.id,this,h[p]);if(h){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));for(var m in this.attrs[p]=h[p],d)d[t](m)&&(h[m]=d[m])}h.text&&"text"==this.type&&(this.textpath.string=h.text),T(this,h)}return this},C.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},C.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},C.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},C.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},C.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;return r=r.replace(m,h),0!=+t?(this.attrs.blur=t,n.filter=r+f+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var n=S("shape");n.style.cssText=g,n.coordsize=y+f+y,n.coordorigin=t.coordorigin;var r=new M(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=h,T(r,i),t.canvas&&t.canvas.appendChild(n);var o=S("skew");return o.on=!0,n.appendChild(o),r.skew=o,r.transform(h),r},e._engine.rect=function(t,n,r,i,o,a){var s=e._rectPath(n,r,i,o,a),u=t.path(s),c=u.attrs;return u.X=c.x=n,u.Y=c.y=r,u.W=c.width=i,u.H=c.height=o,c.r=a,c.path=s,u.type="rect",u},e._engine.ellipse=function(e,t,n,r,i){var o=e.path();return o.attrs,o.X=t-r,o.Y=n-i,o.W=2*r,o.H=2*i,o.type="ellipse",T(o,{cx:t,cy:n,rx:r,ry:i}),o},e._engine.circle=function(e,t,n,r){var i=e.path();return i.attrs,i.X=t-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",T(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,o,a){var s=e._rectPath(r,i,o,a),u=t.path(s).attr({stroke:"none"}),c=u.attrs,l=u.node,f=l.getElementsByTagName("fill")[0];return c.src=n,u.X=c.x=r,u.Y=c.y=i,u.W=c.width=o,u.H=c.height=a,c.path=s,u.type="image",f.parentNode==l&&l.removeChild(f),f.rotate=!0,f.src=n,f.type="tile",u._.fillpos=[r,i],u._.fillsize=[o,a],l.appendChild(f),w(u,1,1,0,0,0),u},e._engine.text=function(t,r,i,a){var s=S("shape"),u=S("path"),c=S("textpath");r=r||0,i=i||0,a=a||"",u.v=e.format("m{0},{1}l{2},{1}",o(r*y),o(i*y),o(r*y)+1),u.textpathok=!0,c.string=n(a),c.on=!0,s.style.cssText=g,s.coordsize=y+f+y,s.coordorigin="0 0";var l=new M(s,t),p={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:a};l.shape=s,l.path=u,l.textpath=c,l.type="text",l.attrs.text=n(a),l.attrs.x=r,l.attrs.y=i,l.attrs.w=1,l.attrs.h=1,T(l,p),s.appendChild(c),s.appendChild(u),t.canvas.appendChild(s);var d=S("skew");return d.on=!0,s.appendChild(d),l.skew=d,l.transform(h),l},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,o){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,o]);var a,s,u=this.getSize(),c=u.width,l=u.height;return o&&(r*(a=l/i)<c&&(t-=(c-r*a)/2/a),i*(s=c/r)<l&&(n-=(l-i*s)/2/s)),this._viewBox=[t,n,r,i,!!o],this._viewBoxShift={dx:-t,dy:-n,scale:u},this.forEach((function(e){e.transform("...")})),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),S=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){S=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i=t.width,o=t.x,a=t.y;if(!n)throw new Error("VML container not found.");var s=new e._Paper,u=s.canvas=e._g.doc.createElement("div"),c=u.style;return o=o||0,a=a||0,i=i||512,r=r||342,s.width=i,s.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),s.coordsize="21600000 21600000",s.coordorigin="0 0",s.span=e._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",u.appendChild(s.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==n?(e._g.doc.body.appendChild(u),c.left=o+"px",c.top=a+"px",c.position="absolute"):n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u),s.renderfix=function(){},s},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=h,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var k=e.st;for(var R in C)C[t](R)&&!k[t](R)&&(k[R]=function(e){return function(){var t=arguments;return this.forEach((function(n){n[e].apply(n,t)}))}}(R))}}.apply(t,r))||(e.exports=i)}])},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(145),i=n(88),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var r=n(13)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(s){}return n}},function(e,t,n){var r=n(44),i=n(34),o=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){"use strict";var r=n(39),i=n(62),o=n(95),a=n(40),s=n(155),u=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r=n(45),i=n(23),o=n(87),a=n(16),s=function(e){return function(t,n,s,u){r(n);var c=i(t),l=o(c),f=a(c.length),h=e?f-1:0,p=e?-1:1;if(s<2)for(;;){if(h in l){u=l[h],h+=p;break}if(h+=p,e?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=p)h in l&&(u=n(u,l[h],h,c));return u}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(3),i=n(9),o=n(91),a=n(32),s=n(72),u=n(99),c=n(63),l=n(10),f=n(5),h=n(110),p=n(53),d=n(115);e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),g=m?"set":"add",y=i[e],_=y&&y.prototype,x=y,b={},w=function(e){var t=_[e];a(_,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof y||!(v||_.forEach&&!f((function(){(new y).entries().next()})))))x=n.getConstructor(t,e,m,g),s.REQUIRED=!0;else if(o(e,!0)){var S=new x,E=S[g](v?{}:-0,1)!=S,T=f((function(){S.has(1)})),A=h((function(e){new y(e)})),M=!v&&f((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));A||((x=t((function(t,n){c(t,x,e);var r=d(new y,t,x);return void 0!=n&&u(n,r[g],r,m),r}))).prototype=_,_.constructor=x),(T||M)&&(w("delete"),w("has"),m&&w("get")),(M||E)&&w(g),v&&_.clear&&delete _.clear}return b[e]=x,r({global:!0,forced:x!=y},b),p(x,e),v||n.setStrong(x,e,m),x}},function(e,t,n){var r=n(10),i=n(80);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t){var n=Math.expm1,r=Math.exp;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:r(e)-1}:n},function(e,t){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(52),i=n(9),o=n(5);e.exports=r||!o((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}))},function(e,t,n){"use strict";var r=n(11);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(119),i=n(163),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1];(u||l||c)&&(s=function(e){var t,n,i,s,f=this,h=c&&f.sticky,p=r.call(f),d=f.source,m=0,v=e;return h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),v=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(d="(?: "+d+")",v=" "+v,m++),n=new RegExp("^(?:"+d+")",p)),l&&(n=new RegExp("^"+d+"$(?!\\s)",p)),u&&(t=f.lastIndex),i=o.call(h?n:f,v),h?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:u&&i&&(f.lastIndex=f.global?i.index+i[0].length:t),l&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),e.exports=s},function(e,t,n){"use strict";n(262);var r=n(32),i=n(5),o=n(13),a=n(120),s=n(35),u=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),f=o("replace"),h=!!/./[f]&&""===/./[f]("a","$0"),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var d=o(e),m=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),v=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!m||!v||"replace"===e&&(!c||!l||h)||"split"===e&&!p){var g=/./[d],y=n(d,""[e],(function(e,t,n,r,i){return t.exec===a?m&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),_=y[0],x=y[1];r(String.prototype,e,_),r(RegExp.prototype,d,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[d],"sham",!0)}},function(e,t,n){var r=n(47),i=n(120);e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){var r=n(124),i=n(65);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),o=e.apply(n,t);return i(o)?o:n}}},function(e,t,n){var r=n(65),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(297),i=n(298);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}},function(e,t,n){var r=n(299),i=n(301),o=n(303);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(617),i=n(618),o=n(619),a=n(620),s=n(621);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(181);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(75)(Object,"create");e.exports=r},function(e,t,n){var r=n(635);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=String.fromCharCode},function(e,t,n){t.tokenize=function(e,t,n){return i(e,(function(e){return null===e||r(e)?t(e):n(e)}),"linePrefix")},t.partial=!0;var r=n(26),i=n(27)},function(e,t){e.exports=Object.assign},function(e,t){e.exports=function(e,t,n){var r,i=[],o=-1;for(;++o<e.length;)(r=e[o].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t}},function(e,t,n){var r=n(67);e.exports=r(/[A-Za-z]/)},function(e,t,n){"use strict";e.exports=s;var r=n(759),i=r.CONTINUE,o=r.SKIP,a=r.EXIT;function s(e,t,n,i){"function"===typeof t&&"function"!==typeof n&&(i=n,n=t,t=null),r(e,t,(function(e,t){var r=t[t.length-1],i=r?r.children.indexOf(e):null;return n(e,i,r)}),i)}s.CONTINUE=i,s.SKIP=o,s.EXIT=a},function(e,t,n){"use strict";var r=n(140);function i(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function o(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(i){if(r)return;r=!0,n(i)}}e.exports=function(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");var t=null,n=null,a=[],s=this;function u(e){null!==t?r((function(){var r=t?e.onFulfilled:e.onRejected;if(null!==r){var i;try{i=r(n)}catch(o){return void e.reject(o)}e.resolve(i)}else(t?e.resolve:e.reject)(n)})):a.push(e)}function c(e){t=!1,n=e,l()}function l(){for(var e=0,t=a.length;e<t;e++)u(a[e]);a=null}this.then=function(e,t){return new s.constructor((function(n,r){u(new i(e,t,n,r))}))},o(e,(function e(r){try{if(r===s)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"===typeof r||"function"===typeof r)){var i=r.then;if("function"===typeof i)return void o(i.bind(r),e,c)}t=!0,n=r,l()}catch(a){c(a)}}),c)}},function(e,t,n){(function(t,n){var r={task:void 0,next:null},i=r,o=!1,a=void 0,s=!1;function u(){for(;r.next;){var e=(r=r.next).task;r.task=void 0;var t=r.domain;t&&(r.domain=void 0,t.enter());try{e()}catch(n){if(s)throw t&&t.exit(),setTimeout(u,0),t&&t.enter(),n;setTimeout((function(){throw n}),0)}t&&t.exit()}o=!1}if("undefined"!==typeof t&&t.nextTick)s=!0,a=function(){t.nextTick(u)};else if("function"===typeof n)a="undefined"!==typeof window?n.bind(window,u):function(){n(u)};else if("undefined"!==typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=u,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(u,0)};e.exports=function(e){i=i.next={task:e,domain:s&&t.domain,next:null},o||(o=!0,a())}}).call(this,n(132),n(798).setImmediate)},function(e,t,n){"use strict";var r=e.exports.Validator=n(571);e.exports.ValidatorResult=n(74).ValidatorResult,e.exports.ValidatorResultError=n(74).ValidatorResultError,e.exports.ValidationError=n(74).ValidationError,e.exports.SchemaError=n(74).SchemaError,e.exports.SchemaScanResult=n(171).SchemaScanResult,e.exports.scan=n(171).scan,e.exports.validate=function(e,t,n){return(new r).validate(e,t,n)}},function(e,t,n){var r=n(9),i=n(10),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(9),i=n(35);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(211),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(52),i=n(211);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(49),i=n(70),o=n(148),a=n(11);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(5);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r,i,o=n(9),a=n(151),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(49);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(13),i=n(95),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r={};r[n(13)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(111).charAt,i=n(40),o=n(155),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(3),i=n(241),o=n(50),a=n(80),s=n(53),u=n(35),c=n(32),l=n(13),f=n(52),h=n(95),p=n(242),d=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,v=l("iterator"),g=function(){return this};e.exports=function(e,t,n,l,p,y,_){i(n,t,l);var x,b,w,S=function(e){if(e===p&&C)return C;if(!m&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",T=!1,A=e.prototype,M=A[v]||A["@@iterator"]||p&&A[p],C=!m&&M||S(p),k="Array"==t&&A.entries||M;if(k&&(x=o(k.call(new e)),d!==Object.prototype&&x.next&&(f||o(x)===d||(a?a(x,d):"function"!=typeof x[v]&&u(x,v,g)),s(x,E,!0,!0),f&&(h[E]=g))),"values"==p&&M&&"values"!==M.name&&(T=!0,C=function(){return M.call(this)}),f&&!_||A[v]===C||u(A,v,C),h[t]=C,p)if(b={values:S("values"),keys:y?C:S("keys"),entries:S("entries")},_)for(w in b)(m||T||!(w in A))&&c(A,w,b[w]);else r({target:t,proto:!0,forced:m||T},b);return b}},function(e,t,n){var r=n(5);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var r=n(23),i=n(59),o=n(16);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(9),i=n(15),o=n(249),a=n(35),s=n(82),u=n(5),c=n(63),l=n(44),f=n(16),h=n(250),p=n(385),d=n(50),m=n(80),v=n(70).f,g=n(22).f,y=n(157),_=n(53),x=n(40),b=x.get,w=x.set,S=r.ArrayBuffer,E=S,T=r.DataView,A=T&&T.prototype,M=Object.prototype,C=r.RangeError,k=p.pack,R=p.unpack,P=function(e){return[255&e]},L=function(e){return[255&e,e>>8&255]},O=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},I=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},N=function(e){return k(e,23,4)},D=function(e){return k(e,52,8)},F=function(e,t){g(e.prototype,t,{get:function(){return b(this)[t]}})},z=function(e,t,n,r){var i=h(n),o=b(e);if(i+t>o.byteLength)throw C("Wrong index");var a=b(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+t);return r?u:u.reverse()},B=function(e,t,n,r,i,o){var a=h(n),s=b(e);if(a+t>s.byteLength)throw C("Wrong index");for(var u=b(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),f=0;f<t;f++)u[c+f]=l[o?f:t-f-1]};if(o){if(!u((function(){S(1)}))||!u((function(){new S(-1)}))||u((function(){return new S,new S(1.5),new S(NaN),"ArrayBuffer"!=S.name}))){for(var j,V=(E=function(e){return c(this,E),new S(h(e))}).prototype=S.prototype,U=v(S),G=0;U.length>G;)(j=U[G++])in E||a(E,j,S[j]);V.constructor=E}m&&d(A)!==M&&m(A,M);var H=new T(new E(2)),W=A.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||s(A,{setInt8:function(e,t){W.call(this,e,t<<24>>24)},setUint8:function(e,t){W.call(this,e,t<<24>>24)}},{unsafe:!0})}else E=function(e){c(this,E,"ArrayBuffer");var t=h(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},T=function(e,t,n){c(this,T,"DataView"),c(e,E,"DataView");var r=b(e).byteLength,o=l(t);if(o<0||o>r)throw C("Wrong offset");if(o+(n=void 0===n?r-o:f(n))>r)throw C("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(F(E,"byteLength"),F(T,"buffer"),F(T,"byteLength"),F(T,"byteOffset")),s(T.prototype,{getInt8:function(e){return z(this,1,e)[0]<<24>>24},getUint8:function(e){return z(this,1,e)[0]},getInt16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return I(z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return I(z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return R(z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return R(z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){B(this,1,e,P,t)},setUint8:function(e,t){B(this,1,e,P,t)},setInt16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){B(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){B(this,4,e,O,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){B(this,4,e,O,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){B(this,4,e,N,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){B(this,8,e,D,t,arguments.length>2?arguments[2]:void 0)}});_(E,"ArrayBuffer"),_(T,"DataView"),e.exports={ArrayBuffer:E,DataView:T}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){"use strict";var r=n(44),i=n(34);e.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){var r,i,o,a=n(9),s=n(5),u=n(47),c=n(61),l=n(218),f=n(142),h=n(258),p=a.location,d=a.setImmediate,m=a.clearImmediate,v=a.process,g=a.MessageChannel,y=a.Dispatch,_=0,x={},b=function(e){if(x.hasOwnProperty(e)){var t=x[e];delete x[e],t()}},w=function(e){return function(){b(e)}},S=function(e){b(e.data)},E=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};d&&m||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return x[++_]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(_),_},m=function(e){delete x[e]},"process"==u(v)?r=function(e){v.nextTick(w(e))}:y&&y.now?r=function(e){y.now(w(e))}:g&&!h?(o=(i=new g).port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(E)||"file:"===p.protocol?r="onreadystatechange"in f("script")?function(e){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),b(e)}}:function(e){setTimeout(w(e),0)}:(r=E,a.addEventListener("message",S,!1))),e.exports={set:d,clear:m}},function(e,t,n){var r=n(10),i=n(47),o=n(13)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(5);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(162);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(13)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){"use strict";var r=n(111).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(5),i=n(117);e.exports=function(e){return r((function(){return!!i[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||i[e].name!==e}))}},function(e,t,n){var r=n(9),i=n(5),o=n(110),a=n(17).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;e.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(e){new u,new u(null),new u(1.5),new u(e)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";var r=n(572),i=n(573);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=_,t.resolve=function(e,t){return _(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=_(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(574);function _(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var _=e=c.join(s);if(_=_.trim(),!n&&1===e.split("#").length){var x=u.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var b=a.exec(_);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,_=_.substr(b.length)}if(n||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===_.substr(0,2);!S||b&&v[b]||(_=_.substr(2),this.slashes=!0)}if(!v[b]&&(S||b&&!g[b])){for(var E,T,A=-1,M=0;M<h.length;M++){-1!==(C=_.indexOf(h[M]))&&(-1===A||C<A)&&(A=C)}-1!==(T=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(E=_.slice(0,T),_=_.slice(T+1),this.auth=decodeURIComponent(E)),A=-1;for(M=0;M<f.length;M++){var C;-1!==(C=_.indexOf(f[M]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var R=this.hostname.split(/\./),P=(M=0,R.length);M<P;M++){var L=R[M];if(L&&!L.match(p)){for(var O="",I=0,N=L.length;I<N;I++)L.charCodeAt(I)>127?O+="x":O+=L[I];if(!O.match(p)){var D=R.slice(0,M),F=R.slice(M+1),z=L.match(d);z&&(D.push(z[1]),F.unshift(z[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[w])for(M=0,P=l.length;M<P;M++){var V=l[M];if(-1!==_.indexOf(V)){var U=encodeURIComponent(V);U===V&&(U=escape(V)),_=_.split(V).join(U)}}var G=_.indexOf("#");-1!==G&&(this.hash=_.substr(G),_=_.slice(0,G));var H=_.indexOf("?");if(-1!==H?(this.search=_.substr(H),this.query=_.substr(H+1),t&&(this.query=y.parse(this.query)),_=_.slice(0,H)):t&&(this.search="",this.query={}),_&&(this.pathname=_),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var W=this.search||"";this.path=B+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=x||_||n.host&&e.pathname,w=b,S=n.pathname&&n.pathname.split("/")||[],E=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===S[0])),x)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=S.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=S.slice(-1)[0],A=(n.host||e.host||S.length>1)&&("."===T||".."===T)||""===T,M=0,C=S.length;C>=0;C--)"."===(T=S[C])?S.splice(C,1):".."===T?(S.splice(C,1),M++):M&&(S.splice(C,1),M--);if(!b&&!w)for(;M--;M)S.unshift("..");!b||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var k,R=""===S[0]||S[0]&&"/"===S[0].charAt(0);E&&(n.hostname=n.host=R?"":S.length?S.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift()));return(b=b||n.host&&S.length)&&!R&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";var r=n(170),i=n(74);function o(e,t){this.id=e,this.ref=t}e.exports.SchemaScanResult=o,e.exports.scan=function(e,t){function n(e,t){if(t&&"object"==typeof t)if(t.$ref){var o=r.resolve(e,t.$ref);c[o]=c[o]?c[o]+1:0}else{var l=t.$id||t.id,f=l?r.resolve(e,l):e;if(f){if(f.indexOf("#")<0&&(f+="#"),u[f]){if(!i.deepCompareStrict(u[f],t))throw new Error("Schema <"+f+"> already exists with different definition");return u[f]}u[f]=t,"#"==f[f.length-1]&&(u[f.substring(0,f.length-1)]=t)}a(f+"/items",Array.isArray(t.items)?t.items:[t.items]),a(f+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),n(f+"/additionalItems",t.additionalItems),s(f+"/properties",t.properties),n(f+"/additionalProperties",t.additionalProperties),s(f+"/definitions",t.definitions),s(f+"/patternProperties",t.patternProperties),s(f+"/dependencies",t.dependencies),a(f+"/disallow",t.disallow),a(f+"/allOf",t.allOf),a(f+"/anyOf",t.anyOf),a(f+"/oneOf",t.oneOf),n(f+"/not",t.not)}}function a(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)n(e+"/"+r,t[r])}function s(e,t){if(t&&"object"==typeof t)for(var r in t)n(e+"/"+r,t[r])}var u={},c={};return n(e,t),new o(u,c)}},function(e,t,n){var r=n(278),i=n(587),o=n(588),a=n(283),s=n(607),u=n(287),c=n(608),l=n(289),f=n(291),h=n(295),p=Math.max;e.exports=function(e,t,n,d,m,v,g,y){var _=2&t;if(!_&&"function"!=typeof e)throw new TypeError("Expected a function");var x=d?d.length:0;if(x||(t&=-97,d=m=void 0),g=void 0===g?g:p(h(g),0),y=void 0===y?y:h(y),x-=m?m.length:0,64&t){var b=d,w=m;d=m=void 0}var S=_?void 0:u(e),E=[e,t,n,d,m,b,w,v,g,y];if(S&&c(E,S),e=E[0],t=E[1],n=E[2],d=E[3],m=E[4],!(y=E[9]=void 0===E[9]?_?0:e.length:p(E[9]-x,0))&&24&t&&(t&=-25),t&&1!=t)T=8==t||16==t?o(e,t,y):32!=t&&33!=t||m.length?a.apply(void 0,E):s(e,t,n,d);else var T=i(e,t,n);return f((S?r:l)(T,E),e,t)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(76),i=n(65);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(124),i=n(177);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",o[i++]=n)}return o}},function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(612),i=n(51),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(37),i=n(613),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u}).call(this,n(73)(e))},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(281),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s}).call(this,n(73)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(128),i=n(622),o=n(623),a=n(624),s=n(625),u=n(626);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},function(e,t,n){var r=n(75)(n(37),"Map");e.exports=r},function(e,t,n){var r=n(627),i=n(634),o=n(636),a=n(637),s=n(638);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(299),i=n(640),o=n(303);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(644),i=n(305),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(302)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(309);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(669),i=n(51);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(43),i=n(100),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},function(e,t,n){t.tokenize=function(e,t,n){var r,o,a=this,s=a.events.length;for(;s--;)if(("labelImage"===a.events[s][1].type||"labelLink"===a.events[s][1].type)&&!a.events[s][1]._balanced){r=a.events[s][1];break}return function(t){if(!r)return n(t);return r._inactive?c(t):(o=a.parser.defined.indexOf(i(a.sliceSerialize({start:r.end,end:a.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),u)};function u(n){return 40===n?e.attempt(h,t,o?t:c)(n):91===n?e.attempt(p,t,o?e.attempt(d,t,c):c)(n):o?t(n):c(n)}function c(e){return r._balanced=!0,n(e)}},t.resolveTo=function(e,t){var n,r,i,u,c,l,f,h=e.length,p=0;for(;h--;)if(u=e[h][1],c){if("link"===u.type||"labelLink"===u.type&&u._inactive)break;"enter"===e[h][0]&&"labelLink"===u.type&&(u._inactive=!0)}else if(l){if("enter"===e[h][0]&&("labelImage"===u.type||"labelLink"===u.type)&&!u._balanced&&(c=h,"labelLink"!==u.type)){p=2;break}}else"labelEnd"===u.type&&(l=h);return n={type:"labelLink"===e[c][1].type?"link":"image",start:s(e[c][1].start),end:s(e[e.length-1][1].end)},r={type:"label",start:s(e[c][1].start),end:s(e[l][1].end)},i={type:"labelText",start:s(e[c+p+2][1].end),end:s(e[l-2][1].start)},o(f=[["enter",n,t],["enter",r,t]],f.length,0,e.slice(c+1,c+p+3)),o(f,f.length,0,[["enter",i,t]]),o(f,f.length,0,a(t.parser.constructs.insideSpan.null,e.slice(c+p+4,l-3),t)),o(f,f.length,0,[["exit",i,t],e[l-2],e[l-1],["exit",r,t]]),o(f,f.length,0,e.slice(l+1)),o(f,f.length,0,[["exit",n,t]]),o(e,c,e.length,f),e},t.resolveAll=function(e){var t,n=-1;for(;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e};var r=n(57),i=n(199),o=n(66),a=n(136),s=n(77),u=n(328),c=n(329),l=n(330),f=n(331),h={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),l(e,i)};function i(t){return 41===t?s(t):u(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function o(t){return r(t)?l(e,a)(t):s(t)}function a(t){return 34===t||39===t||40===t?f(e,l(e,s),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):s(t)}function s(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},p={tokenize:function(e,t,n){var r=this;return function(t){return c.call(r,e,o,n,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.indexOf(i(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},d={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}}},function(e,t){e.exports=function(e){return null===e||void 0===e?[]:"length"in e?e:[e]}},function(e,t,n){"use strict";var r,i="";e.exports=function(e,t){if("string"!==typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(r!==e||"undefined"===typeof r)r=e,i="";else if(i.length>=n)return i.substr(0,n);for(;n>i.length&&t>1;)1&t&&(i+=e),t>>=1,e+=e;return i=(i+=e).substr(0,n)}},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,n){var r=n(6),i=n(169),o=n(556),a=n(557);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t,n){"use strict";var r=n(564),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&e(t,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(t),m=u(n),v=0;v<a.length;++v){var g=a[v];if(!o[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{c(t,g,y)}catch(_){}}}}return t}},function(e,t,n){"use strict";(function(e,r){var i,o=n(340);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(29),n(567)(e))},function(e,t,n){"use strict";function r(e,t){return e===t}function i(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return a}));var a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=0,s=r.pop(),u=o(r),c=e.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=u.length,n=0;n<t;n++)e.push(u[n].apply(null,arguments));return c.apply(null,e)}));return l.resultFunc=s,l.dependencies=u,l.recomputations=function(){return a},l.resetRecomputations=function(){return a=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return i(t,n,arguments)||(o=e.apply(null,arguments)),n=arguments,o}}))},function(e,t,n){(function(n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,a){var s=o.URL||o.webkitURL,u=document.createElement("a");n=n||e.name||"download",u.download=n,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?i(u):r(u.href)?t(e,n,a):i(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var l=o.URL||o.webkitURL,f=l.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){l.revokeObjectURL(f)}),4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,i):r)||(e.exports=o)}).call(this,n(29))},function(e,t,n){"use strict";var r=n(3),i=n(9),o=n(49),a=n(52),s=n(15),u=n(149),c=n(216),l=n(5),f=n(24),h=n(79),p=n(10),d=n(11),m=n(23),v=n(39),g=n(48),y=n(58),_=n(60),x=n(92),b=n(70),w=n(219),S=n(148),E=n(30),T=n(22),A=n(108),M=n(35),C=n(32),k=n(145),R=n(109),P=n(89),L=n(88),O=n(13),I=n(220),N=n(31),D=n(53),F=n(40),z=n(28).forEach,B=R("hidden"),j=O("toPrimitive"),V=F.set,U=F.getterFor("Symbol"),G=Object.prototype,H=i.Symbol,W=o("JSON","stringify"),q=E.f,Y=T.f,X=w.f,$=A.f,Z=k("symbols"),K=k("op-symbols"),J=k("string-to-symbol-registry"),Q=k("symbol-to-string-registry"),ee=k("wks"),te=i.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=s&&l((function(){return 7!=_(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=q(G,t);r&&delete G[t],Y(e,t,n),r&&e!==G&&Y(G,t,r)}:Y,ie=function(e,t){var n=Z[e]=_(H.prototype);return V(n,{type:"Symbol",tag:e,description:t}),s||(n.description=t),n},oe=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},ae=function(e,t,n){e===G&&ae(K,t,n),d(e);var r=g(t,!0);return d(n),f(Z,r)?(n.enumerable?(f(e,B)&&e[B][r]&&(e[B][r]=!1),n=_(n,{enumerable:y(0,!1)})):(f(e,B)||Y(e,B,y(1,{})),e[B][r]=!0),re(e,r,n)):Y(e,r,n)},se=function(e,t){d(e);var n=v(t),r=x(n).concat(fe(n));return z(r,(function(t){s&&!ue.call(n,t)||ae(e,t,n[t])})),e},ue=function(e){var t=g(e,!0),n=$.call(this,t);return!(this===G&&f(Z,t)&&!f(K,t))&&(!(n||!f(this,t)||!f(Z,t)||f(this,B)&&this[B][t])||n)},ce=function(e,t){var n=v(e),r=g(t,!0);if(n!==G||!f(Z,r)||f(K,r)){var i=q(n,r);return!i||!f(Z,r)||f(n,B)&&n[B][r]||(i.enumerable=!0),i}},le=function(e){var t=X(v(e)),n=[];return z(t,(function(e){f(Z,e)||f(P,e)||n.push(e)})),n},fe=function(e){var t=e===G,n=X(t?K:v(e)),r=[];return z(n,(function(e){!f(Z,e)||t&&!f(G,e)||r.push(Z[e])})),r};(u||(C((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),n=function e(n){this===G&&e.call(K,n),f(this,B)&&f(this[B],t)&&(this[B][t]=!1),re(this,t,y(1,n))};return s&&ne&&re(G,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",(function(){return U(this).tag})),C(H,"withoutSetter",(function(e){return ie(L(e),e)})),A.f=ue,T.f=ae,E.f=ce,b.f=w.f=le,S.f=fe,I.f=function(e){return ie(O(e),e)},s&&(Y(H.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||C(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),z(x(ee),(function(e){N(e)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=String(e);if(f(J,t))return J[t];var n=H(t);return J[t]=n,Q[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(f(Q,e))return Q[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?_(e):se(_(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:l((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(m(e))}}),W)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var e=H();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(p(t)||void 0!==e)&&!oe(e))return h(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,W.apply(null,i)}});H.prototype[j]||M(H.prototype,j,H.prototype.valueOf),D(H,"Symbol"),P[B]=!0},function(e,t,n){var r=n(15),i=n(5),o=n(142);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(9),i=n(143),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(9),i=n(144),o=r.WeakMap;e.exports="function"===typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(24),i=n(146),o=n(30),a=n(22);e.exports=function(e,t){for(var n=i(t),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(9);e.exports=r},function(e,t,n){var r=n(24),i=n(39),o=n(90).indexOf,a=n(89);e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(149);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(15),i=n(22),o=n(11),a=n(92);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(49);e.exports=r("document","documentElement")},function(e,t,n){var r=n(39),i=n(70).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(13);t.f=r},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(9),a=n(24),s=n(10),u=n(22).f,c=n(213),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};c(h,l);var p=h.prototype=l.prototype;p.constructor=h;var d=p.toString,m="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=d.call(e);if(a(f,e))return"";var n=m?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},function(e,t,n){n(31)("asyncIterator")},function(e,t,n){n(31)("hasInstance")},function(e,t,n){n(31)("isConcatSpreadable")},function(e,t,n){n(31)("iterator")},function(e,t,n){n(31)("match")},function(e,t,n){n(31)("replace")},function(e,t,n){n(31)("search")},function(e,t,n){n(31)("species")},function(e,t,n){n(31)("split")},function(e,t,n){n(31)("toPrimitive")},function(e,t,n){n(31)("toStringTag")},function(e,t,n){n(31)("unscopables")},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(79),a=n(10),s=n(23),u=n(16),c=n(71),l=n(93),f=n(94),h=n(13),p=n(150),d=h("isConcatSpreadable"),m=p>=51||!i((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),v=f("concat"),g=function(e){if(!a(e))return!1;var t=e[d];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!m||!v},{concat:function(e){var t,n,r,i,o,a=s(this),f=l(a,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(g(o=-1===t?a:arguments[t])){if(h+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,h++)n in o&&c(f,h,o[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(f,h++,o)}return f.length=h,f}})},function(e,t,n){var r=n(3),i=n(236);r({target:"Array",stat:!0,forced:!n(110)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){"use strict";var r=n(61),i=n(23),o=n(237),a=n(152),s=n(16),u=n(71),c=n(96);e.exports=function(e){var t,n,l,f,h,p,d=i(e),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,y=void 0!==g,_=c(d),x=0;if(y&&(g=r(g,v>2?arguments[2]:void 0,2)),void 0==_||m==Array&&a(_))for(n=new m(t=s(d.length));t>x;x++)p=y?g(d[x],x):d[x],u(n,x,p);else for(h=(f=_.call(d)).next,n=new m;!(l=h.call(f)).done;x++)p=y?o(f,g,[l.value,x],!0):l.value,u(n,x,p);return n.length=x,n}},function(e,t,n){var r=n(11);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(9);n(53)(r.JSON,"JSON",!0)},function(e,t,n){n(53)(Math,"Math",!0)},function(e,t,n){var r=n(153),i=n(32),o=n(349);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var r=n(242).IteratorPrototype,i=n(60),o=n(58),a=n(53),s=n(95),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var r,i,o,a=n(50),s=n(35),u=n(24),c=n(13),l=n(52),f=c("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):h=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var r=n(10);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(354);function i(){}var o=null,a={};function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==i&&p(e,this)}function u(e,t){for(;3===e._V;)e=e._W;if(s._Y&&s._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){r((function(){var n=1===e._V?t.onFulfilled:t.onRejected;if(null!==n){var r=function(e,t){try{return e(t)}catch(n){return o=n,a}}(n,e._W);r===a?l(t.promise,o):c(t.promise,r)}else 1===e._V?c(t.promise,e._W):l(t.promise,e._W)}))}(e,t)}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=function(e){try{return e.then}catch(t){return o=t,a}}(t);if(n===a)return l(e,o);if(n===e.then&&t instanceof s)return e._V=3,e._W=t,void f(e);if("function"===typeof n)return void p(n.bind(t),e)}e._V=1,e._W=t,f(e)}function l(e,t){e._V=2,e._W=t,s._Z&&s._Z(e,t),f(e)}function f(e){if(1===e._U&&(u(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)u(e,e._X[t]);e._X=null}}function h(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=function(e,t,n){try{e(t,n)}catch(r){return o=r,a}}(e,(function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,l(t,e))}));n||r!==a||(n=!0,l(t,o))}e.exports=s,s._Y=null,s._Z=null,s._0=i,s.prototype.then=function(e,t){if(this.constructor!==s)return function(e,t,n){return new e.constructor((function(r,o){var a=new s(i);a.then(r,o),u(e,new h(t,n,a))}))}(this,e,t);var n=new s(i);return u(this,new h(e,t,n)),n}},function(e,t,n){"use strict";var r=n(23),i=n(59),o=n(16),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),u=i(e,s),c=i(t,s),l=arguments.length>2?arguments[2]:void 0,f=a((void 0===l?s:i(l,s))-c,s-u),h=1;for(c<u&&u<c+f&&(h=-1,c+=f-1,u+=f-1);f-- >0;)c in n?n[u]=n[c]:delete n[u],u+=h,c+=h;return n}},function(e,t,n){"use strict";var r=n(79),i=n(16),o=n(61);e.exports=function e(t,n,a,s,u,c,l,f){for(var h,p=u,d=0,m=!!l&&o(l,f,3);d<s;){if(d in a){if(h=m?m(a[d],d,n):a[d],c>0&&r(h))p=e(t,n,h,i(h.length),p,c-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=h}p++}d++}return p}},function(e,t,n){"use strict";var r=n(28).forEach,i=n(54),o=n(36),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var r=n(39),i=n(44),o=n(16),a=n(54),s=n(36),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,f=a("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),p=l||!f||!h;e.exports=p?function(e){if(l)return c.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:c},function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},function(e,t,n){var r=n(44),i=n(16);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var r=n(22).f,i=n(60),o=n(82),a=n(61),s=n(63),u=n(99),c=n(155),l=n(81),f=n(15),h=n(72).fastKey,p=n(40),d=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t),d(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=r&&u(r,e[c],e,n)})),p=m(t),v=function(e,t,n){var r,i,o=p(e),a=g(e,t);return a?a.value=n:(o.last=a={index:i=h(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),f?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},g=function(e,t){var n,r=p(e),i=h(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:this.size=0},delete:function(e){var t=p(this),n=g(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),f?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=p(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),o(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),f&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),o=m(r);c(e,t,(function(e,t){d(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t){var n=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:n(1+e)}},function(e,t,n){var r=n(10),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){"use strict";var r=n(15),i=n(5),o=n(92),a=n(148),s=n(108),u=n(23),c=n(87),l=Object.assign,f=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=o(l({},t)).join("")}))?function(e,t){for(var n=u(e),i=arguments.length,l=1,f=a.f,h=s.f;i>l;)for(var p,d=c(arguments[l++]),m=f?o(d).concat(f(d)):o(d),v=m.length,g=0;v>g;)p=m[g++],r&&!h.call(d,p)||(n[p]=d[p]);return n}:l},function(e,t,n){var r=n(15),i=n(92),o=n(39),a=n(108).f,s=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}};e.exports={entries:s(!0),values:s(!1)}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var r=n(9);e.exports=r.Promise},function(e,t,n){var r=n(151);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){var r,i,o,a,s,u,c,l,f=n(9),h=n(30).f,p=n(47),d=n(161).set,m=n(258),v=f.MutationObserver||f.WebKitMutationObserver,g=f.process,y=f.Promise,_="process"==p(g),x=h(f,"queueMicrotask"),b=x&&x.value;b||(r=function(){var e,t;for(_&&(e=g.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,e&&e.enter()},_?a=function(){g.nextTick(r)}:v&&!m?(s=!0,u=document.createTextNode(""),new v(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(f,r)}),e.exports=b||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,n){var r=n(11),i=n(10),o=n(261);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(45),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(3),i=n(120);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){var r=n(16),i=n(160),o=n(34),a=Math.ceil,s=function(e){return function(t,n,s){var u,c,l=String(o(t)),f=l.length,h=void 0===s?" ":String(s),p=r(n);return p<=f||""==h?l:(u=p-f,(c=i.call(h,a(u/h.length))).length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,n){var r=n(151);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){var r=n(498);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(23),i=n(16),o=n(96),a=n(152),s=n(61),u=n(17).aTypedArrayConstructor;e.exports=function(e){var t,n,c,l,f,h,p=r(e),d=arguments.length,m=d>1?arguments[1]:void 0,v=void 0!==m,g=o(p);if(void 0!=g&&!a(g))for(h=(f=g.call(p)).next,p=[];!(l=h.call(f)).done;)p.push(l.value);for(v&&d>2&&(m=s(m,arguments[2],2)),n=i(p.length),c=new(u(this))(n),t=0;n>t;t++)c[t]=v?m(p[t],t):p[t];return c}},function(e,t,n){"use strict";var r=n(82),i=n(72).getWeakData,o=n(11),a=n(10),s=n(63),u=n(99),c=n(28),l=n(24),f=n(40),h=f.set,p=f.getterFor,d=c.find,m=c.findIndex,v=0,g=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},_=function(e,t){return d(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var n=_(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,c){var f=e((function(e,r){s(e,f,t),h(e,{type:t,id:v++,frozen:void 0}),void 0!=r&&u(r,e[c],e,n)})),d=p(t),m=function(e,t,n){var r=d(e),a=i(o(t),!0);return!0===a?g(r).set(t,n):a[r.id]=n,e};return r(f.prototype,{delete:function(e){var t=d(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).delete(e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=d(this);if(!a(e))return!1;var n=i(e);return!0===n?g(t).has(e):n&&l(n,t.id)}}),r(f.prototype,n?{get:function(e){var t=d(this);if(a(e)){var n=i(e);return!0===n?g(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),f}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(5),i=n(13),o=n(52),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){"use strict";n(112);var r=n(3),i=n(49),o=n(269),a=n(32),s=n(82),u=n(53),c=n(241),l=n(40),f=n(63),h=n(24),p=n(61),d=n(97),m=n(11),v=n(10),g=n(60),y=n(58),_=n(540),x=n(96),b=n(13),w=i("fetch"),S=i("Headers"),E=b("iterator"),T=l.set,A=l.getterFor("URLSearchParams"),M=l.getterFor("URLSearchParamsIterator"),C=/\+/g,k=Array(4),R=function(e){return k[e-1]||(k[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},P=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(C," "),n=4;try{return decodeURIComponent(t)}catch(r){for(;n;)t=t.replace(R(n--),P);return t}},O=/[!'()~]|%20/g,I={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return I[e]},D=function(e){return encodeURIComponent(e).replace(O,N)},F=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}))},z=function(e){this.entries.length=0,F(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},j=c((function(e,t){T(this,{type:"URLSearchParamsIterator",iterator:_(A(e).entries),kind:t})}),"Iterator",(function(){var e=M(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),V=function(){f(this,V,"URLSearchParams");var e,t,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(T(l,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:z}),void 0!==c)if(v(c))if("function"===typeof(e=x(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((a=(o=(i=_(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}else for(u in c)h(c,u)&&p.push({key:u,value:c[u]+""});else F(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},U=V.prototype;s(U,{append:function(e,t){B(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);for(var t=A(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){B(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var n,r=A(this),i=r.entries,o=!1,a=e+"",s=t+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=A(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=A(this).entries,r=p(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),a(U,E,U.entries),a(U,"toString",(function(){for(var e,t=A(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(D(e.key)+"="+D(e.value));return n.join("&")}),{enumerable:!0}),u(V,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:V}),o||"function"!=typeof w||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,"URLSearchParams"===d(n)&&((r=t.headers?new S(t.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),w.apply(this,i)}}),e.exports={URLSearchParams:V,getState:A}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var l={};function f(){}function h(){}function p(){}var d={};d[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==t&&n.call(v,i)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=g.constructor=p,p.constructor=h,h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(_.prototype),_.prototype[o]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(274);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){e.exports=n(562)()},function(e,t,n){var r=n(569),i=n(277),o=Array.prototype.push;function a(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function u(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=t.apply(void 0,r);return e.apply(void 0,r),i}}}e.exports=function e(t,n,c,l){var f="function"==typeof n,h=n===Object(n);if(h&&(l=c,c=n,n=void 0),null==c)throw new TypeError;l||(l={});var p=!("cap"in l)||l.cap,d=!("curry"in l)||l.curry,m=!("fixed"in l)||l.fixed,v=!("immutable"in l)||l.immutable,g=!("rearg"in l)||l.rearg,y=f?c:i,_="curry"in l&&l.curry,x="fixed"in l&&l.fixed,b="rearg"in l&&l.rearg,w=f?c.runInContext():void 0,S=f?c:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},E=S.ary,T=S.assign,A=S.clone,M=S.curry,C=S.forEach,k=S.isArray,R=S.isError,P=S.isFunction,L=S.isWeakMap,O=S.keys,I=S.rearg,N=S.toInteger,D=S.toPath,F=O(r.aryMethod),z={castArray:function(e){return function(){var t=arguments[0];return k(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),i=r.length;return p&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:a(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!P(n))return e(n,Object(t));var r=[];return C(O(t),(function(e){P(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),C(r,(function(e){var t=e[1];P(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:N(t)+1;return M(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return M(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),l)}}};function B(e,t){if(p){var n=r.iterateeRearg[e];if(n)return function(e,t){return H(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(I(a(e,n),t),n)}))}(t,n);var i=!f&&r.iterateeAry[e];if(i)return function(e,t){return H(e,(function(e){return"function"==typeof e?a(e,t):e}))}(t,i)}return t}function j(e,t,n){if(m&&(x||!r.skipFixed[e])){var i=r.methodSpread[e],a=i&&i.start;return void 0===a?E(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var a=i[t],s=i.slice(0,t);return a&&o.apply(s,a),t!=r&&o.apply(s,i.slice(t+1)),e.apply(this,s)}}(t,a)}return t}function V(e,t,n){return g&&n>1&&(b||!r.skipRearg[e])?I(t,r.methodRearg[e]||r.aryRearg[n]):t}function U(e,t){for(var n=-1,r=(t=D(t)).length,i=r-1,o=A(Object(e)),a=o;null!=a&&++n<r;){var s=t[n],u=a[s];null==u||P(u)||R(u)||L(u)||(a[s]=A(n==i?u:Object(u))),a=a[s]}return o}function G(t,n){var i=r.aliasToReal[t]||t,o=r.remap[i]||i,a=l;return function(t){var r=f?w:S,s=f?w[o]:n,u=T(T({},a),t);return e(r,i,s,u)}}function H(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var i=g?0:n-1;return r[i]=t(r[i]),e.apply(void 0,r)}}function W(e,t,n){var i,o=r.aliasToReal[e]||e,a=t,c=z[o];return c?a=c(t):v&&(r.mutate.array[o]?a=u(t,s):r.mutate.object[o]?a=u(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(a=u(t,U))),C(F,(function(e){return C(r.aryMethod[e],(function(t){if(o==t){var n=r.methodSpread[o],s=n&&n.afterRearg;return i=s?j(o,V(o,a,e),e):V(o,j(o,a,e),e),i=function(e,t,n){return _||d&&n>1?M(t,n):t}(0,i=B(o,i),e),!1}})),!i})),i||(i=a),i==t&&(i=_?M(i,1):function(){return t.apply(this,arguments)}),i.convert=G(o,t),i.placeholder=t.placeholder=n,i}if(!h)return W(n,c,y);var q=c,Y=[];return C(F,(function(e){C(r.aryMethod[e],(function(e){var t=q[r.remap[e]||e];t&&Y.push([e,W(e,t,q)])}))})),C(O(q),(function(e){var t=q[e];if("function"==typeof t){for(var n=Y.length;n--;)if(Y[n][0]==e)return;t.convert=G(e,t),Y.push([e,t])}})),C(Y,(function(e){q[e[0]]=e[1]})),q.convert=function(e){return q.runInContext.convert(e)(void 0)},q.placeholder=q,C(O(q),(function(e){C(r.realToAlias[e]||[],(function(t){q[t]=q[e]}))})),q}},function(e,t){e.exports={}},function(e,t,n){var r=n(173),i=n(279),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},function(e,t,n){var r=n(280),i=r&&new r;e.exports=i},function(e,t,n){var r=n(75)(n(37),"WeakMap");e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(29))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,n){var r=n(284),i=n(285),o=n(589),a=n(123),s=n(286),u=n(294),c=n(606),l=n(180),f=n(37);e.exports=function e(t,n,h,p,d,m,v,g,y,_){var x=128&n,b=1&n,w=2&n,S=24&n,E=512&n,T=w?void 0:a(t);return function A(){for(var M=arguments.length,C=Array(M),k=M;k--;)C[k]=arguments[k];if(S)var R=u(A),P=o(C,R);if(p&&(C=r(C,p,d,S)),m&&(C=i(C,m,v,S)),M-=P,S&&M<_){var L=l(C,R);return s(t,n,e,A.placeholder,h,C,L,g,y,_-M)}var O=b?h:this,I=w?O[t]:t;return M=C.length,g?C=c(C,g):E&&M>1&&C.reverse(),x&&y<M&&(C.length=y),this&&this!==f&&this instanceof A&&(I=T||a(I)),I.apply(O,C)}}},function(e,t){var n=Math.max;e.exports=function(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=n(a-s,0),f=Array(c+l),h=!i;++u<c;)f[u]=t[u];for(;++o<s;)(h||o<a)&&(f[r[o]]=e[o]);for(;l--;)f[u++]=e[o++];return f}},function(e,t){var n=Math.max;e.exports=function(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,f=n(a-u,0),h=Array(f+l),p=!i;++o<f;)h[o]=e[o];for(var d=o;++c<l;)h[d+c]=t[c];for(;++s<u;)(p||o<a)&&(h[d+r[s]]=e[o++]);return h}},function(e,t,n){var r=n(590),i=n(289),o=n(291);e.exports=function(e,t,n,a,s,u,c,l,f,h){var p=8&t;t|=p?32:64,4&(t&=~(p?64:32))||(t&=-4);var d=[e,t,s,p?u:void 0,p?c:void 0,p?void 0:u,p?void 0:c,l,f,h],m=n.apply(void 0,d);return r(e)&&i(m,d),m.placeholder=a,o(m,e,t)}},function(e,t,n){var r=n(279),i=n(591),o=r?function(e){return r.get(e)}:i;e.exports=o},function(e,t,n){var r=n(124),i=n(177);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},function(e,t,n){var r=n(278),i=n(290)(r);e.exports=i},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(596),i=n(597),o=n(292),a=n(600);e.exports=function(e,t,n){var s=t+"";return o(e,i(s,a(r(s),n)))}},function(e,t,n){var r=n(598),i=n(290)(r);e.exports=i},function(e,t,n){var r=n(75),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},function(e,t){e.exports=function(e){return e.placeholder}},function(e,t,n){var r=n(609);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},function(e,t,n){var r=n(126),i=n(127);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(298),i=n(181),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(293);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(611),i=n(182),o=n(43),a=n(183),s=n(179),u=n(300),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),h=!n&&!l&&!f&&u(e),p=n||l||f||h,d=p?r(e.length,String):[],m=d.length;for(var v in e)!t&&!c.call(e,v)||p&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||d.push(v);return d}},function(e,t,n){var r=n(614),i=n(185),o=n(186),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(187),i=n(615),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(174),i=n(184);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(188),i=n(178),o=n(297),a=n(296),s=n(639),u=n(642),c=n(125),l=n(643),f=n(645),h=n(307),p=n(646),d=n(101),m=n(650),v=n(651),g=n(656),y=n(43),_=n(183),x=n(657),b=n(65),w=n(659),S=n(127),E=n(191),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,A,M,C,k){var R,P=1&n,L=2&n,O=4&n;if(A&&(R=C?A(t,M,C,k):A(t)),void 0!==R)return R;if(!b(t))return t;var I=y(t);if(I){if(R=m(t),!P)return c(t,R)}else{var N=d(t),D="[object Function]"==N||"[object GeneratorFunction]"==N;if(_(t))return u(t,P);if("[object Object]"==N||"[object Arguments]"==N||D&&!C){if(R=L||D?{}:g(t),!P)return L?f(t,s(R,t)):l(t,a(R,t))}else{if(!T[N])return C?t:{};R=v(t,N,P)}}k||(k=new r);var F=k.get(t);if(F)return F;k.set(t,R),w(t)?t.forEach((function(r){R.add(e(r,n,A,r,t,k))})):x(t)&&t.forEach((function(r,i){R.set(i,e(r,n,A,i,t,k))}));var z=I?void 0:(O?L?p:h:L?E:S)(t);return i(z||t,(function(r,i){z&&(r=t[i=r]),o(R,i,e(r,n,A,i,t,k))})),R}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(193),i=n(194),o=n(192),a=n(305),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,n){var r=n(308),i=n(192),o=n(127);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(193),i=n(43);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t,n){var r=n(37).Uint8Array;e.exports=r},function(e,t,n){var r=n(670),i=n(673),o=n(674);e.exports=function(e,t,n,a,s,u){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var h=u.get(e),p=u.get(t);if(h&&p)return h==t&&p==e;var d=-1,m=!0,v=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++d<l;){var g=e[d],y=t[d];if(a)var _=c?a(y,g,d,t,e,u):a(g,y,d,e,t,u);if(void 0!==_){if(_)continue;m=!1;break}if(v){if(!i(t,(function(e,t){if(!o(v,t)&&(g===e||s(g,e,n,a,u)))return v.push(t)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,a,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},function(e,t,n){var r=n(65);e.exports=function(e){return e===e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(314),i=n(102);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(43),i=n(197),o=n(315),a=n(316);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(682),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},function(e,t,n){var r=n(684);e.exports=function(e){return null==e?"":r(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(132))},function(e,t,n){"use strict";var r;e.exports=function(e){var t,n="&"+e+";";if((r=r||document.createElement("i")).innerHTML=n,59===(t=r.textContent).charCodeAt(t.length-1)&&"semi"!==e)return!1;return t!==n&&t}},function(e,t){e.exports={}.hasOwnProperty},function(e,t,n){e.exports=function(e){var t,n,s,u,c,l,f,h={},p=-1;for(;++p<e.length;){for(;p in h;)p=h[p];if(t=e[p],p&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[p-1][1].type&&(l=t[1]._tokenizer.events,(s=0)<l.length&&"lineEndingBlank"===l[s][1].type&&(s+=2),s<l.length&&"content"===l[s][1].type))for(;++s<l.length&&"content"!==l[s][1].type;)"chunkText"===l[s][1].type&&(l[s][1].isInFirstContentOfListItem=!0,s++);if("enter"===t[0])t[1].contentType&&(r(h,a(e,p)),p=h[p],f=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(s=p,n=void 0;s--&&("lineEnding"===(u=e[s])[1].type||"lineEndingBlank"===u[1].type);)"enter"===u[0]&&(n&&(e[n][1].type="lineEndingBlank"),u[1].type="lineEnding",n=s);n&&(t[1].end=o(e[n][1].start),(c=e.slice(n,p)).unshift(t),i(e,n,p-n+1,c))}}return!f};var r=n(135),i=n(66),o=n(77);function a(e,t){for(var n,r,o,a,s,u,c=e[t][1],l=e[t][2],f=t-1,h=[],p=c._tokenizer||l.parser[c.contentType](c.start),d=p.events,m=[],v={};c;){for(;e[++f][1]!==c;);h.push(f),c._tokenizer||(n=l.sliceStream(c),c.next||n.push(null),r&&p.defineSkip(c.start),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=!0),p.write(n),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=void 0)),r=c,c=c.next}for(c=r,o=d.length;o--;)"enter"===d[o][0]?a=!0:a&&d[o][1].type===d[o-1][1].type&&d[o][1].start.line!==d[o][1].end.line&&(g(d.slice(o+1,s)),c._tokenizer=c.next=void 0,c=c.previous,s=o+1);for(p.events=c._tokenizer=c.next=void 0,g(d.slice(0,s)),o=-1,u=0;++o<m.length;)v[u+m[o][0]]=u+m[o][1],u+=m[o][1]-m[o][0]-1;return v;function g(t){var n=h.pop();m.unshift([n,n+t.length-1]),i(e,n,2,t)}}},function(e,t){e.exports=function(e){var t=-1,n=0;for(;++t<e.length;)n+="string"===typeof e[t]?e[t].length:1;return n}},function(e,t,n){t.text=o("text"),t.string=o("string"),t.resolver={resolveAll:a()};var r=n(135),i=n(77);function o(e){return{tokenize:function(t){var n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return u(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return u(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function u(e){var t=r[e],i=-1;if(null===e)return!0;if(t)for(;++i<t.length;)if(!t[i].previous||t[i].previous.call(n,n.previous))return!0}},resolveAll:a("text"===e?s:void 0)}}function a(e){return function(t,n){var r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function s(e,t){for(var n,o,a,s,u,c,l,f,h=-1;++h<=e.length;)if((h===e.length||"lineEnding"===e[h][1].type)&&"data"===e[h-1][1].type){for(o=e[h-1][1],s=(n=t.sliceStream(o)).length,u=-1,c=0,l=void 0;s--;)if("string"===typeof(a=n[s])){for(u=a.length;32===a.charCodeAt(u-1);)c++,u--;if(u)break;u=-1}else if(-2===a)l=!0,c++;else if(-1!==a){s++;break}c&&(f={type:h===e.length||l||c<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-c,offset:o.end.offset-c,_index:o.start._index+s,_bufferIndex:s?u:o.start._bufferIndex+u},end:i(o.end)},o.end=i(f.start),o.start.offset===o.end.offset?r(o,f):(e.splice(h,0,["enter",f,t],["exit",f,t]),h+=2)),h++}return e}},function(e,t,n){e.exports=function(e){if(null===e||r(e)||o(e))return 1;if(i(e))return 2};var r=n(57),i=n(725),o=n(727)},function(e,t){e.exports=function(e){return e<32||127===e}},function(e,t,n){var r=n(67);e.exports=r(/\d/)},function(e,t,n){t.tokenize=function(e,t,n){var a,s=0;return function(t){return e.enter("thematicBreak"),a=t,u(t)};function u(l){return l===a?(e.enter("thematicBreakSequence"),c(l)):i(l)?o(e,u,"whitespace")(l):s<3||null!==l&&!r(l)?n(l):(e.exit("thematicBreak"),t(l))}function c(t){return t===a?(e.consume(t),s++,c):(e.exit("thematicBreakSequence"),u(t))}};var r=n(26),i=n(56),o=n(27)},function(e,t,n){e.exports=function(e,t,n,a,s,u,c,l,f){var h=f||1/0,p=0;return function(t){if(60===t)return e.enter(a),e.enter(s),e.enter(u),e.consume(t),e.exit(u),d;if(r(t))return n(t);return e.enter(a),e.enter(c),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(t)};function d(n){return 62===n?(e.enter(u),e.consume(n),e.exit(u),e.exit(s),e.exit(a),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(n))}function m(t){return 62===t?(e.exit("chunkString"),e.exit(l),d(t)):null===t||60===t||o(t)?n(t):(e.consume(t),92===t?v:m)}function v(t){return 60===t||62===t||92===t?(e.consume(t),m):m(t)}function g(o){return 40===o?++p>h?n(o):(e.consume(o),g):41===o?p--?(e.consume(o),g):(e.exit("chunkString"),e.exit(l),e.exit(c),e.exit(a),t(o)):null===o||i(o)?p?n(o):(e.exit("chunkString"),e.exit(l),e.exit(c),e.exit(a),t(o)):r(o)?n(o):(e.consume(o),92===o?y:g)}function y(t){return 40===t||41===t||92===t?(e.consume(t),g):g(t)}};var r=n(325),i=n(57),o=n(26)},function(e,t,n){e.exports=function(e,t,n,o,a,s){var u,c=this,l=0;return function(t){return e.enter(o),e.enter(a),e.consume(t),e.exit(a),e.enter(s),f};function f(i){return null===i||91===i||93===i&&!u||94===i&&!l&&"_hiddenFootnoteSupport"in c.parser.constructs||l>999?n(i):93===i?(e.exit(s),e.enter(a),e.consume(i),e.exit(a),e.exit(o),t):r(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),h(i))}function h(t){return null===t||91===t||93===t||r(t)||l++>999?(e.exit("chunkString"),f(t)):(e.consume(t),u=u||!i(t),92===t?p:h)}function p(t){return 91===t||92===t||93===t?(e.consume(t),l++,h):h(t)}};var r=n(26),i=n(56)},function(e,t,n){e.exports=function(e,t){var n;return function a(s){if(r(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,a;if(i(s))return o(e,a,n?"linePrefix":"lineSuffix")(s);return t(s)}};var r=n(26),i=n(56),o=n(27)},function(e,t,n){e.exports=function(e,t,n,o,a,s){var u;return function(t){return e.enter(o),e.enter(a),e.consume(t),e.exit(a),u=40===t?41:t,c};function c(n){return n===u?(e.enter(a),e.consume(n),e.exit(a),e.exit(o),t):(e.enter(s),l(n))}function l(t){return t===u?(e.exit(s),c(u)):null===t?n(t):r(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return t===u||null===t||r(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?h:f)}function h(t){return t===u||92===t?(e.consume(t),f):f(t)}};var r=n(26),i=n(27)},function(e,t,n){e.exports=function(e){var t={},n=-1;for(;++n<e.length;)a(t,e[n]);return t};var r=n(320),i=n(201),o=n(66);function a(e,t){var n,o,a,u;for(n in t)for(u in o=r.call(e,n)?e[n]:e[n]={},a=t[n])o[u]=s(i(a[u]),r.call(o,u)?o[u]:[])}function s(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return o(t,0,0,r),t}},function(e,t){e.exports=function(e,t,n){var r,i,o,a=e.children||[],s=[],u=-1,c=n.before;for(;++u<a.length;)o=a[u],u+1<a.length?((i=t.handle.handlers[a[u+1].type])&&i.peek&&(i=i.peek),r=i?i(a[u+1],e,t,{before:"",after:""}).charAt(0):""):r=n.after,s.push(t.handle(o,e,t,{before:c,after:r})),c=s[s.length-1].slice(-1);return s.join("")}},function(e,t){var n={};e.exports=n,n.createElement=function(e){return document.createElement(e)},n.createText=function(e){return document.createTextNode(e)},n.style=function(e,t){e.style.cssText=t},n.append=function(e,t){e.appendChild(t)},n.remove=function(e,t){e.removeChild(t)}},,function(e,t,n){"use strict";(function(e){var r=n(2),i=n.n(r),o=n(0);var a=function(e){if(Array.isArray(e))return e};var s=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}};var u=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var c=function(e,t){return a(e)||s(e,t)||u()},l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},h=function(){function e(e){void 0===e&&(e={}),this.opts=l(l({},f),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),p(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",r="none";!0===t.shadow?r="0 2px 4px #000":"string"===typeof t.shadow&&(r=t.shadow);for(var i=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=e.split(",");r<i.length;r++){var o=i[r].match(t);if(null!==o){var a=+o[2],s=+o[5],u=o[4],c=o[7];0!==a||u||(u=c),0!==s||c||(c=u),u===c&&n.push({prefix:o[1]||"",x:a,y:s,xUnits:u,yUnits:c,end:o[8]})}}return n}(r),o=0;o<t.lines;o++){var a=~~(360/t.lines*o+t.rotate),s=p(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:d(t.fadeColor,o),borderRadius:n,transformOrigin:"left",transform:"rotate("+a+"deg) translateX("+t.radius+"px)"}),u=o*t.direction/t.lines/t.speed;u-=1/t.speed;var c=p(document.createElement("div"),{width:"100%",height:"100%",background:d(t.color,o),borderRadius:n,boxShadow:m(i,a),animation:1/t.speed+"s linear "+u+"s infinite "+t.animation});s.appendChild(c),e.appendChild(s)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!==typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function p(e,t){for(var n in t)e.style[n]=t[n];return e}function d(e,t){return"string"==typeof e?e:e[t%e.length]}function m(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=v(o.x,o.y,t);n.push(o.prefix+a[0]+o.xUnits+" "+a[1]+o.yUnits+o.end)}return n.join(", ")}function v(e,t,n){var r=n*Math.PI/180,i=Math.sin(r),o=Math.cos(r);return[Math.round(1e3*(e*o+t*i))/1e3,Math.round(1e3*(-e*i+t*o))/1e3]}var g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e},x=function(){function e(){g(this,e),this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _(e,[{key:"start",value:function(){this.startTime=e.now(),this.oldTime=this.startTime,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1}},{key:"getElapsedTime",value:function(){return this.update(),this.elapsedTime}},{key:"update",value:function(){var t=0;if(this.running){var n=e.now();t=.001*(n-this.oldTime),this.oldTime=n,this.elapsedTime+=t}return t}}]),e}();x.now=function(){var e="undefined"!==typeof window&&window.performance;return e&&e.now?e.now.bind(e):Date.now}();var b=x.now;function w(e,t,n){var r=document.createElement(e);return r.id=t,r.style.cssText=n,r}var S=function(){function e(){g(this,e),this.domElement=w("div","stats","padding:8px"),this._text=w("p","fps","margin:0;color:silver;font-size:large"),this.domElement.appendChild(this._text),this._startTime=b(),this._prevTime=this._startTime,this._deltas=new Array(20),this._index=0,this._total=0,this._count=0}return _(e,[{key:"end",value:function(){var e=b(),t=e-this._startTime;return this._count<this._deltas.length?this._count++:this._total-=this._deltas[this._index],this._total+=t,this._deltas[this._index]=t,this._index=(this._index+1)%this._deltas.length,this.ms=this._total/this._count,this.fps=1e3/this.ms,e>this._prevTime+1e3&&(this._text.textContent=this.fps.toPrecision(2),this._prevTime=e),e}},{key:"update",value:function(){this._startTime=this.end()}},{key:"show",value:function(e){void 0===e&&(e=!0),this.domElement.style.display=e?"block":"none"}}]),e}(),E="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function T(e,t){return e(t={exports:{}},t.exports),t.exports}var A=T((function(e){function t(n){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));var M=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var C=function(e,t){return!t||"object"!==A(t)&&"function"!==typeof t?M(e):t},k=T((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),R=T((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}));var P=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)};var L=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},O=T((function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function n(r,i,o){return t()?e.exports=n=Reflect.construct:e.exports=n=function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&R(i,n.prototype),i},n.apply(null,arguments)}e.exports=n})),I=T((function(e){function t(n){var r="function"===typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!L(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return O(e,arguments,k(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),R(t,e)},t(n)}e.exports=t}));function N(e,t){return!e||e===t}function D(){this._handlers={}}D.prototype.addEventListener=function(e,t,n){var r=this._handlers[e];r||(this._handlers[e]=[],r=this._handlers[e]);var o=[t,n];void 0===i.a.find(r,(function(e){return e[0]===o[0]&&e[1]===o[1]}))&&r.push(o)},D.prototype.removeEventListener=function(e,t,n){var r=this;i.a.forEach(r._handlers,(function(o,a){i.a.remove(o,(function(i){return N(e,a)&&N(t,i[0])&&N(n,i[1]||r)}))})),this._handlers=i.a.omitBy(r._handlers,(function(e){return 0===e.length}))},D.prototype.dispatchEvent=function(e){var t=this;i.a.forEach(this._handlers[e.type],(function(n){var r=n[1]||t;n[0].apply(r,[e])}))};var F={debug:0,info:1,report:2,warn:3,error:4};function z(){D.call(this),this.console=!1,this._priority=F.warn}function B(e){if(!i.a.isNumber(e))throw new Error("Wrong log level specified!");return e}z.prototype=Object.create(D.prototype),z.prototype.constructor=z,z.prototype.instantiate=function(){return new z},Object.defineProperty(z.prototype,"level",{get:function(){var e=this;return i.a.findKey(F,(function(t){return t===e._priority}))},set:function(e){this._priority=B(F[e])}}),z.prototype.levels=function(){return Object.keys(F)},z.prototype.message=function(e,t){var n=B(F[e]);this._message(n,t)},z.prototype.debug=function(e){this._message(F.debug,e)},z.prototype.info=function(e){this._message(F.info,e)},z.prototype.report=function(e){this._message(F.report,e)},z.prototype.warn=function(e){this._message(F.warn,e)},z.prototype.error=function(e){this._message(F.error,e)},z.prototype._message=function(e,t){if(!(e<this._priority)){var n=i.a.findKey(F,(function(t){return t===e}));if(t=String(t),this.console){var r="miew:".concat(n,": ").concat(t);"error"===n?console.error(r):"warn"===n?console.warn(r):console.log(r)}this.dispatchEvent({type:"message",level:n,message:t})}};var j=new z,V={DEFAULT:0,SAFARI:1};function U(e){return decodeURIComponent(e.replace(/\+/g," "))}function G(e){for(var t,n=(e=e||window.location.search).substring(e.indexOf("?")+1),r=/([^&=]+)=?([^&]*)/g,i=[];null!==(t=r.exec(n));)i.push([U(t[1]),U(t[2])]);return i}function H(e){var t=!1;this.enable=function(e){t=e};var n=0,r=Object.keys(e);function i(e,r){return function(){var i=H.spaces.substr(0,2*n);t&&j.debug("".concat(i+r," {")),n++;for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=e.apply(this,a);return n--,t&&j.debug("".concat(i,"} // ").concat(r)),u}}for(var o=0,a=r.length;o<a;++o){var s=r[o],u=e[s];u instanceof Function&&"constructor"!==s&&(e[s]=i(u,s))}}H.spaces="                                                                                          ";var W=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this))).name="OutOfMemoryError",n.message=e,n}return P(t,e),t}(I(Error));function q(e){for(var t=new Uint8Array(e),n="",r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return window.btoa(n)}function Y(e){for(var t=window.atob(e),n=new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=t[r].charCodeAt(0);return n.buffer}function X(e){if(i.a.isPlainObject(e))return!0;var t=e&&Object.getPrototypeOf(e);return!!t&&!t.hasOwnProperty("constructor")&&X(t)}function $(e){return e.slice(Math.max(0,e.lastIndexOf("."))||1/0)}function Z(e){var t=e.split(/[:;,]/),n=t.length;return n>=3&&"base64"===t[n-2]?new Blob([Y(t[n-1])]):null}var K=/^[a-zA-Z0-9_]*$/,J=['"',"",'"'];var Q={browserType:V,encodeQueryComponent:function(e,t){return encodeURIComponent(e).replace(t,(function(e){return String.fromCharCode(parseInt(e.substr(1),16))})).replace(/%20/g,"+")},decodeQueryComponent:U,getUrlParameters:G,getUrlParametersAsDict:function(e){for(var t={},n=G(e),r=0;r<n.length;++r){var i=c(n[r],2),o=i[0],a=i[1];t[o]=a}return t},resolveURL:function(e){if("undefined"!==typeof URL)try{return"undefined"!==typeof window?new URL(e,window.location).href:new URL(e).href}catch(n){}if("undefined"!==typeof document){var t=document.createElement("a");return t.href=e,t.href}return e},generateRegExp:function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[t.length]=e[n].charCodeAt(0).toString(16);var i=t.join("|");return new RegExp("%(?:".concat(i,")"),"gi")},createElement:function(e,t,n){var r,i,o=document.createElement(e);if(t){var a=Object.keys(t);for(r=0,i=a.length;r<i;++r){var s=a[r];o.setAttribute(s,t[s])}}if(n)for(n instanceof Array||(n=[n]),r=0,i=n.length;r<i;++r){var u=n[r];"string"===typeof u?o.appendChild(document.createTextNode(u)):u instanceof HTMLElement&&o.appendChild(u)}return o},deriveClass:function(e,t,n,r){return e.prototype=i.a.assign(Object.create(t.prototype),{constructor:e},n),r&&i.a.assign(e,r),e},deriveDeep:function e(t,n){var r,i,o=t;if(t instanceof Array)for(o=new Array(t.length),r=0,i=t.length;r<i;++r)o[r]=e(t[r]);else if(t instanceof Object){o=Object.create(t);var a=Object.keys(t);for(r=0,i=a.length;r<i;++r){var s=a[r],u=t[s],c=e(u);c!==u&&(o[s]=c)}n&&Object.keys(o).length>0&&(o=Object.create(o))}return o},hexColor:function(e){var t="0000000".concat(e.toString(16)).substr(-6);return"#".concat(t)},DebugTracer:H,OutOfMemoryError:W,allocateTyped:function(e,t){var n=null;try{n=new e(t)}catch(r){throw r instanceof RangeError?new W(r.message):r}return n},bytesFromBase64:Y,bytesToBase64:q,arrayFromBase64:function(e,t){return Array.prototype.slice.call(new t(Y(e)))},arrayToBase64:function(e,t){return q(new t(e).buffer)},compareOptionsWithDefaults:function(e,t){var n=[];if(t&&e){for(var r=Object.keys(e),i=0;i<r.length;++i){var o=r[i],a=e[o];a instanceof Object||"undefined"===typeof t[o]||t[o]===a||n.push("".concat(o,":").concat(a))}if(n.length>0)return"!".concat(n.join())}return""},objectsDiff:function e(t,n){var r={};return i.a.forIn(t,(function(t,o){var a=n[o];if(X(t)&&X(a)){var s=e(t,a);i.a.isEmpty(s)||(r[o]=s)}else i.a.isEqual(t,a)||(r[o]=t)})),r},forInRecursive:function(e,t){!function e(n,r){i.a.forIn(n,(function(n,i){var o=r+(r.length>0?".":"");n instanceof Object?e(n,o+i):void 0!==n&&t(n,o+i)}))}(e,"")},enquoteString:function(e){return i.a.isString(e)?'"'.concat(e.replace(/"/g,'\\"'),'"'):e},unquoteString:function(e){if(!i.a.isString(e))return e;if('"'===e[0]&&'"'===e[e.length-1])return(e=e.slice(1,e.length-1)).replace(/\\"/g,'"');if("'"===e[0]&&"'"===e[e.length-1])return(e=e.slice(1,e.length-1)).replace(/\\'/g,"'");throw new SyntaxError("Incorrect string format, can't unqute it")},getBrowser:function(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")?V.SAFARI:V.DEFAULT},shotOpen:function(e){"undefined"!==typeof window&&window.open().document.write('<body style="margin:0"><img src="'.concat(e,'" /></body>'))},shotDownload:function(e,t){if(e&&"data:"===e.substr(0,5))if(t||(t=["screenshot-",+new Date,".png"].join("")),"undefined"!==typeof window&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(Z(e),t);else if("undefined"!==typeof document){var n=document.createElement("a");n.download=t,n.innerHTML="download",n.href=window.URL.createObjectURL(Z(e)),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},copySubArrays:function(e,t,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=0;a<r;++a)t[i*r+a]=e[n[i]*r+a]},shallowCloneNode:function(e){var t=e.cloneNode(!0);return t.worldPos=e.worldPos,t},correctSelectorIdentifier:function(e){return K.test(e)?e:(J[1]=e,J.join(""))},getFileExtension:$,splitFileName:function(e){var t=$(e);return[e.slice(0,e.length-t.length),t]},download:function(e,t,n){var r=new Blob([e]);if(t||(t=["data",+new Date].join("")),t+=n?".".concat(n):r.type||".bin","undefined"!==typeof window&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else if("undefined"!==typeof document){var i=document.createElement("a");i.download=t,i.innerHTML="download",i.href=window.URL.createObjectURL(r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}},concatTypedArraysUnsafe:function(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n},mergeTypedArraysUnsafe:function(e){if(e.length<=0)return null;for(var t=e.reduce((function(e,t){return e+t.length}),0),n=new e[0].constructor(t),r=0,i=0;r<e.length;r++){var o=e[r].length;n.set(e[r],i),i+=o}return n}},ee=function(e){function t(){var e;return g(this,t),(e=C(this,k(t).call(this)))._shouldCancel=!1,e}return P(t,e),_(t,[{key:"cancel",value:function(){this._shouldCancel=!0,this.dispatchEvent({type:"cancel"})}},{key:"shouldCancel",value:function(){return this._shouldCancel}},{key:"notify",value:function(e){this.dispatchEvent({type:"notification",slaveEvent:e})}}]),t}(D),te={modes:{BS:{atom:.23,bond:.15,space:.5,multibond:!0,aromrad:.1,showarom:!0,polyComplexity:{poor:3,low:4,medium:6,high:12,ultra:32}},VW:{polyComplexity:{poor:4,low:6,medium:8,high:16,ultra:32}},LN:{multibond:!0,showarom:!0,offsarom:.2,chunkarom:10,atom:.23,lineWidth:2},LC:{bond:.2,space:0,multibond:!0,aromrad:.1,showarom:!0,polyComplexity:{poor:3,low:4,medium:6,high:12,ultra:32}},SA:{zClip:!1,probeRadius:1.5,subset:"",wireframe:!1,polyComplexity:{poor:6,low:8,medium:16,high:30,ultra:60}},SE:{zClip:!1,probeRadius:1.5,subset:"",wireframe:!1,polyComplexity:{poor:6,low:8,medium:16,high:30,ultra:60}},QS:{isoValue:.5,gaussLim:{poor:1.5,low:2,medium:2.5,high:3,ultra:4},scale:1,wireframe:!1,gridSpacing:{poor:2,low:1.5,medium:1,high:.5,ultra:.25},subset:"",zClip:!1},CS:{probeRadius:1.4,isoValue:1.5,wireframe:!1,probePositions:30,polyComplexity:{poor:.5,low:1,medium:1.5,high:1.75,ultra:2},subset:"",zClip:!1},TR:{radius:.3,polyComplexity:{poor:12,low:16,medium:32,high:64,ultra:64}},TU:{radius:.3,heightSegmentsRatio:1.5,tension:-.7,polyComplexity:{poor:4,low:6,medium:10,high:18,ultra:34}},CA:{radius:.3,depth:.25,ss:{helix:{width:1,arrow:2},strand:{width:1,arrow:2}},heightSegmentsRatio:1.5,tension:-.7,polyComplexity:{poor:4,low:6,medium:10,high:18,ultra:34}},TX:{template:"{{Chain}}.{{Residue}}{{Sequence}}.{{Name}}",horizontalAlign:"center",verticalAlign:"middle",dx:0,dy:0,dz:1,fg:"none",bg:"0x202020",showBg:!0},VD:{kSigma:1,kSigmaMed:2,kSigmaMax:4,frame:!0,isoMode:!1,polyComplexity:{poor:2,low:3,medium:4,high:8,ultra:10}}},colorers:{EL:{carbon:-1},UN:{color:16777215},CO:{subset:"charged",color:16711680,baseColor:16777215},CB:{color:9474192,factor:.6},SQ:{gradient:"rainbow"},TM:{gradient:"temp",min:5,max:40},OC:{gradient:"reds"},HY:{gradient:"blue-red"},MO:{gradient:"rainbow"}},antialias:!0,camFov:45,camNear:.5,camFar:100,camDistance:2.5,radiusToFit:1,fogNearFactor:.5,fogFarFactor:1,fogAlpha:1,fogColor:0,fogColorEnable:!1,palette:"JM",resolution:"medium",autoResolution:!1,autoPreset:!0,preset:"default",presets:{default:[{mode:"BS",colorer:"EL",selector:"all",material:"SF"}],empty:[],wire:[{mode:"LN",colorer:"EL",selector:"all",material:"SF"}],small:[{mode:"BS",colorer:"EL",selector:"all",material:"SF"}],macro:[{mode:"CA",colorer:"SS",selector:"not hetatm",material:"SF"},{mode:"BS",colorer:"EL",selector:"hetatm and not water",material:"SF"}]},objects:{line:{color:4294967295,dashSize:.3,gapSize:.05}},bg:{color:2105376,transparent:!1},draft:{clipPlane:!1,clipPlaneFactor:.5,clipPlaneSpeed:3e-5},plugins:{},axes:!0,fog:!0,fps:!0,zSprites:!0,isoSurfaceFakeOpacity:!0,suspendRender:!0,nowater:!1,autobuild:!0,fxaa:!0,outline:{on:!1,color:0,threshold:.1,thickness:1},ao:!1,shadow:{on:!1,type:"random",radius:1},autoRotation:0,maxfps:30,fbxprec:4,autoRotationAxisFixed:!0,zooming:!0,picking:!0,pick:"atom",editing:!1,aromatic:!1,singleUnit:!0,stereo:"NONE",interpolateViews:!0,transparency:"prepass",translationSpeed:2,debug:{example:3.5,text:"hello!",good:!0,ssaoKernelRadius:.7,ssaoFactor:.7,stereoBarrel:.25},use:{multiFile:!1}};function ne(){D.call(this),this.old=null,this.now={},this._changed={},this.reset()}Q.deriveClass(ne,D,{defaults:te,set:function(e,t){if(i.a.isString(e)){i.a.get(this.now,e)!==t&&(i.a.set(this.now,e,t),this._notifyChange(e,t))}else{var n=Q.objectsDiff(e,this.now);i.a.isEmpty(n)||(i.a.merge(this.now,n),this._notifyChanges(n))}},get:function(e,t){return i.a.get(this.now,e,t)},reset:function(){var e=Q.objectsDiff(te,this.now);this.now=i.a.cloneDeep(te),this.old=null,this._notifyChanges(e),this._changed={}},checkpoint:function(){this.old=i.a.cloneDeep(this.now),this._changed={}},_notifyChange:function(e,t){this._changed[e]=!0,this.dispatchEvent({type:"change:".concat(e),value:t})},_notifyChanges:function(e){var t=this;Q.forInRecursive(e,(function(e,n){t._notifyChange(n,e)}))},changed:function(){if(!this.old)return[];var e=this.old,t=this.now;return i.a.filter(Object.keys(this._changed),(function(n){return i.a.get(e,n)!==i.a.get(t,n)}))},applyDiffs:function(e){if(e.hasOwnProperty("VERSION")&&0!==e.VERSION)throw new Error("Settings version does not match!");delete e.VERSION,this.reset(),this.set(e)},getDiffs:function(e){var t=Q.objectsDiff(this.now,te);return e&&(t.VERSION=0),t},setPluginOpts:function(e,t){te.plugins[e]=i.a.cloneDeep(t),this.now.plugins[e]=i.a.cloneDeep(t)}});var re=new ne,ie=0;function oe(e){return!(!e||"0"===e||i.a.isString(e)&&"false"===e.toLowerCase())}var ae={string:String,number:Number,boolean:oe};var se=Q.generateRegExp("$;@/?:,");function ue(e){return Q.encodeQueryComponent(e,se)}var ce=Q.generateRegExp("$;@/? ");function le(e){return Q.encodeQueryComponent(e,ce)}function fe(e){var t=e.reps;if(!t){var n=re.now.presets,r=e.preset||re.now.preset;if(!(t=n[r])){j.warn('Unknown preset "'.concat(r,'"'));var i=Object.keys(n);t=n[r=c(i,1)[0]]}e.preset=r,e.reps=Q.deriveDeep(t,!0)}}function he(e,t,n){fe(e);var r=e.reps[ie];r.hasOwnProperty(t)&&(ie=e.reps.length,e.reps[ie]=Q.deriveDeep(r,!0)),void 0!==n&&(e.reps[ie][t]=n)}function pe(e,t,n){if(e){var r=e.indexOf("!"),o=function(e,t){var n=e.indexOf(",");return n>=0?(t.push(e.substr(n+1).split(",")),e.substr(0,n)):e}(e.substr(0,r>=0?r:void 0),n);if(r>=0){var a=e.substr(r+1).split(",");if(e=o,t){var s=t[e],u=Q.deriveDeep(s,!0);a.forEach((function(t){var n=t.split(":",2),r=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]),a=ae[A(i.a.get(s,r))];a?i.a.set(u,r,a(o)):j.warn('Unknown argument "'.concat(r,'" for option "').concat(e,'"'))})),Object.keys(u).length>0&&(e=[e,u])}}else e=o}return e}var de={l:"load",load:String,t:"type",type:String,v:"view",view:String,u:"unit",unit:Number,menu:oe,o:"object",object:function(e,t){var n=[],r=pe(e,re.defaults.objects,n);Array.isArray(r)||(r=[r]),function(e,t,n){void 0===e._objects&&(e._objects=[]);var r=c(n,2),i=r[0],o=r[1],a={type:i,params:t};void 0!==o&&(a.opts=o),e._objects[e._objects.length]=a}(t,n[0],r)},p:"preset",preset:function(e,t){t.preset=e,t.reps=null,fe(t)},r:"rep",rep:function(e,t){fe(t),(ie=(ie=Number(e))<=t.reps.length?ie<0?0:ie:t.reps.length)===t.reps.length&&(t.reps[ie]=ie>0?Q.deriveDeep(t.reps[ie-1],!0):Q.deriveDeep(re.defaults.presets.default[0],!0))},s:"select",select:function(e,t){he(t,"selector",e)},m:"mode",mode:function(e,t){he(t,"mode",pe(e,re.defaults.modes))},c:"color",color:function(e,t){he(t,"colorer",pe(e,re.defaults.colorers))},mt:"material",material:function(e,t){he(t,"material",pe(e,re.defaults.materials))},dup:function(e,t){fe(t);var n=t.reps,r=n[ie];n[ie=n.length]=Q.deriveDeep(r,!0)},ar:"autoResolution"};function me(e){ie=0;for(var t={},n=0,r=e.length;n<r;++n){for(var o=e[n],a=o[0],s=o[1],u=de[a];i.a.isString(u);)u=de[a=u];if(u){if(i.a.isFunction(u)){var c=u(s,t);void 0!==c&&(t[a]=c)}}else{var l=ae[A(i.a.get(re.defaults,a))];l?i.a.set(t,"settings.".concat(a),l(s)):j.warn('Unknown option "'.concat(a,'"'))}}return t}function ve(e){var t=[],n=0;return Q.forInRecursive(e,(function(e,r){t[n++]=le(r)+":"+le(e)})),t.join(",")}function ge(e){return i.a.isArray(e)?e.length<2?e[0]:"".concat(e[0]).concat("!").concat(ve(e[1])):e}function ye(e){if(e&&e.type){var t=e.type;return i.a.isArray(e.params)&&e.params.length>0&&(t+=",".concat(e.params.join(","))),e.opts&&(t+="!"+ve(e.opts)),t}}function _e(e){var t=[],n=0;return Q.forInRecursive(e,(function(e,r){t[n++]="".concat(r,"=").concat(Q.enquoteString(e))})),t.join(" ")}function xe(e){return i.a.isArray(e)?e.length<2?e[0]:"".concat(e[0]," ").concat(_e(e[1])):e}function be(e){if(e&&e.type){var t=e.type;return i.a.isArray(e.params)&&e.params.length>0&&(t+=" ".concat(e.params.map(Q.enquoteString).join(" "))),e.opts&&(t+=" ".concat(_e(e.opts))),t}}function we(e,t){var n=[],r=0;function o(e,t){null!==t&&void 0!==t&&(n[r++]=e+t)}return i.a.isEmpty(e)?null:(o("",t),o("s=",Q.enquoteString(e.selector)),o("m=",xe(e.mode)),o("c=",xe(e.colorer)),o("mt=",xe(e.material)),n.join(" "))}var Se={fromURL:function(e){return me(Q.getUrlParameters(e))},fromAttr:function(e){return me(Q.getUrlParameters("?".concat(e||"")))},adapters:ae,toURL:function(e){var t=[],n=0;function r(e,r){null!==r&&void 0!==r&&(t[n++]=ue(e)+"="+ue(r))}r("l",e.load),r("u",e.unit),r("p",e.preset),function(e){if(e)for(var t=0,n=e.length;t<n;++t)i.a.isEmpty(e[t])||(r("r",t),r("s",e[t].selector),r("m",ge(e[t].mode)),r("c",ge(e[t].colorer)),r("mt",ge(e[t].material)))}(e.reps),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("o",ye(e[t]))}(e._objects),r("v",e.view),Q.forInRecursive(e.settings,(function(e,t){"preset"!==t&&r(t,e)}));var o="";if("undefined"!==typeof window){var a=window.location;o="".concat(a.protocol,"//").concat(a.host).concat(a.pathname)}return t.length>0&&(o+="?".concat(t.join("&"))),o},toScript:function(e){var t=[],n=0;function r(e,r,i){if(null!==r&&void 0!==r){var o="string"===typeof r&&i?'"':"";t[n++]="".concat(e," ").concat(o).concat(r).concat(o).trim()}}return r("set","autobuild false"),r("load",e.load,!0),r("unit",e.unit),r("preset",e.preset),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("rep",we(e[t],t))}(e.reps),function(e){if(e)for(var t=0,n=e.length;t<n;++t)r("",be(e[t]))}(e._objects),Q.forInRecursive(e.settings,(function(e,t){"preset"!==t&&r("set ".concat(t),e,!0)})),r("view",e.view),r("set","autobuild true"),t.join("\n")}};var Ee=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Te=function(){function e(t,n,r,i,o,a,s,u,c,l,f){g(this,e),this.index=-1,this.residue=t,this.name=n,this.element=r,this.position=i,this.role=o,this.mask=1,this.het=a,this.serial=s,this.location=(u||" ").charCodeAt(0),this.occupancy=c||1,this.temperature=l,this.charge=f,this.hydrogenCount=-1,this.radicalCount=0,this.valence=-1,this.bonds=[],this.flags=0,"H"===r.name?this.flags|=e.Flags.HYDROGEN:"C"===r.name&&(this.flags|=e.Flags.CARBON)}return _(e,[{key:"isHet",value:function(){return this.het}},{key:"isHydrogen",value:function(){return 1===this.element.number}},{key:"getVisualName",value:function(){var e=this.name;return e.length>0?e:this.element.name.trim()}},{key:"forEachBond",value:function(e){for(var t=this.bonds,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"getFullName",value:function(){var e="";return null!==this.residue&&(null!==this.residue._chain&&(e+="".concat(this.residue._chain.getName(),".")),e+="".concat(this.residue._sequence,".")),e+=this.name}}]),e}();Ee(Te,"Flags",{CARBON:1,HYDROGEN:8,NONPOLARH:4104});var Ae=function e(t,n,r,i,o,a,s){g(this,e),this.number=t,this.name=n,this.fullName=r,this.weight=i,this.radius=o,this.radiusBonding=a,this.hydrogenValency=s};Ee(Ae,"Constants",{U1:1,Lead:2,U2:3,Wing:4,U18:18}),Ee(Ae,"Role",{N:Ae.Constants.U1,CA:Ae.Constants.Lead,C:Ae.Constants.U2,O:Ae.Constants.Wing,SG:Ae.Constants.U18}),Ee(Ae,"ByAtomicNumber",[null,new Ae(1,"H","Hydrogen",1.008,1.2,.23,[1]),new Ae(2,"HE","Helium",4.003,1.4,.93,[0]),new Ae(3,"LI","Lithium",6.941,1.82,.68,[1]),new Ae(4,"BE","Beryllium",9.012,1.7,.35,[2]),new Ae(5,"B","Boron",10.81,2.08,.83,[3]),new Ae(6,"C","Carbon",12.011,1.95,.68,[4]),new Ae(7,"N","Nitrogen",14.007,1.85,.68,[3,5]),new Ae(8,"O","Oxygen",15.999,1.7,.68,[2,4]),new Ae(9,"F","Fluorine",18.998,1.73,.64,[1]),new Ae(10,"NE","Neon",20.18,1.54,1.12,[0]),new Ae(11,"NA","Sodium",22.99,2.27,.97,[1]),new Ae(12,"MG","Magnesium",24.305,1.73,1.1,[2]),new Ae(13,"AL","Aluminum",26.981,2.05,1.35,[3]),new Ae(14,"SI","Silicon",28.086,2.1,1.2,[4]),new Ae(15,"P","Phosphorus",30.974,2.08,.75,[3,5]),new Ae(16,"S","Sulfur",32.07,2,1.02,[2,4,6]),new Ae(17,"CL","Chlorine",35.453,1.97,.99,[1,3,5,7]),new Ae(18,"AR","Argon",39.948,1.88,1.57,[0]),new Ae(19,"K","Potassium",39.1,2.75,1.33,[1]),new Ae(20,"CA","Calcium",40.08,1.973,.99,[2]),new Ae(21,"SC","Scandium",44.956,1.7,1.44,[0]),new Ae(22,"TI","Titanium",47.88,1.7,1.47,[0]),new Ae(23,"V","Vanadium",50.941,1.7,1.33,[0]),new Ae(24,"CR","Chromium",52,1.7,1.35,[0]),new Ae(25,"MN","Manganese",54.938,1.7,1.35,[0]),new Ae(26,"FE","Iron",55.847,1.7,1.34,[0]),new Ae(27,"CO","Cobalt",58.93,1.7,1.33,[0]),new Ae(28,"NI","Nickel",58.69,1.63,1.5,[0]),new Ae(29,"CU","Copper",63.55,1.4,1.52,[0]),new Ae(30,"ZN","Zinc",65.39,1.39,1.45,[0]),new Ae(31,"GA","Gallium",69.72,1.87,1.22,[3]),new Ae(32,"GE","Germanium",72.61,1.7,1.17,[4]),new Ae(33,"AS","Arsenic",74.92,1.85,1.21,[3,5]),new Ae(34,"SE","Selenium",78.96,1.9,1.22,[2,4,6]),new Ae(35,"BR","Bromine",79.9,2.1,1.21,[1,3,5,7]),new Ae(36,"KR","Krypton",83.8,2.02,1.91,[0]),new Ae(37,"RB","Rubidium",85.47,1.7,1.47,[1]),new Ae(38,"SR","Strontium",87.62,1.7,1.12,[2]),new Ae(39,"Y","Yttrium",88.91,1.7,1.78,[0]),new Ae(40,"ZR","Zirconium",91.22,1.7,1.56,[0]),new Ae(41,"NB","Niobium",92.91,1.7,1.48,[0]),new Ae(42,"MO","Molybdenum",95.94,1.7,1.47,[0]),new Ae(43,"TC","Technetium",98.91,1.7,1.35,[0]),new Ae(44,"RU","Ruthenium",101.07,1.7,1.4,[0]),new Ae(45,"RH","Rhodium",102.91,1.7,1.45,[0]),new Ae(46,"PD","Palladium",106.42,1.63,1.5,[0]),new Ae(47,"AG","Silver",107.87,1.72,1.59,[0]),new Ae(48,"CD","Cadmium",112.41,1.58,1.69,[0]),new Ae(49,"IN","Indium",114.82,1.93,1.63,[3]),new Ae(50,"SN","Tin",118.71,2.17,1.46,[2,4]),new Ae(51,"SB","Antimony",121.75,2.2,1.46,[3,5]),new Ae(52,"TE","Tellurium",127.6,2.06,1.47,[2,4,6]),new Ae(53,"I","Iodine",126.91,2.15,1.4,[1,3,5,7]),new Ae(54,"XE","Xenon",131.29,2.16,1.98,[0]),new Ae(55,"CS","Cesium",132.91,1.7,1.67,[1]),new Ae(56,"BA","Barium",137.33,1.7,1.34,[2]),new Ae(57,"LA","Lanthanum",138.91,1.7,1.87,[0]),new Ae(58,"CE","Cerium",140.12,1.7,1.83,[0]),new Ae(59,"PR","Praseodymium",140.91,1.7,1.82,[0]),new Ae(60,"ND","Neodymium",144.24,1.7,1.81,[0]),new Ae(61,"PM","Promethium",144.9,1.7,1.8,[0]),new Ae(62,"SM","Samarium",150.36,1.7,1.8,[0]),new Ae(63,"EU","Europium",151.96,1.7,1.99,[0]),new Ae(64,"GD","Gadolinium",157.25,1.7,1.79,[0]),new Ae(65,"TB","Terbium",158.93,1.7,1.76,[0]),new Ae(66,"DY","Dysprosium",162.5,1.7,1.75,[0]),new Ae(67,"HO","Holmium",164.93,1.7,1.74,[0]),new Ae(68,"ER","Erbium",167.26,1.7,1.73,[0]),new Ae(69,"TM","Thulium",168.93,1.7,1.72,[0]),new Ae(70,"YB","Ytterbium",173.04,1.7,1.94,[0]),new Ae(71,"LU","Lutetium",174.97,1.7,1.72,[0]),new Ae(72,"HF","Hafnium",178.49,1.7,1.57,[0]),new Ae(73,"TA","Tantalum",180.95,1.7,1.43,[0]),new Ae(74,"W","Tungsten",183.85,1.7,1.37,[0]),new Ae(75,"RE","Rhenium",186.21,1.7,1.35,[0]),new Ae(76,"OS","Osmium",190.2,1.7,1.37,[0]),new Ae(77,"IR","Iridium",192.22,1.7,1.32,[0]),new Ae(78,"PT","Platinum",195.08,1.72,1.5,[0]),new Ae(79,"AU","Gold",196.97,1.66,1.5,[0]),new Ae(80,"HG","Mercury",200.59,1.55,1.7,[0]),new Ae(81,"TL","Thallium",204.38,1.96,1.55,[1,3]),new Ae(82,"PB","Lead",207.2,2.02,1.54,[2,4]),new Ae(83,"BI","Bismuth",208.98,1.7,1.54,[3,5]),new Ae(84,"PO","Polonium",210,1.7,1.68,[2,4,6]),new Ae(85,"AT","Astatine",210,1.7,1.7,[1,3,5,7]),new Ae(86,"RN","Radon",222,1.7,2.4,[0]),new Ae(87,"FR","Francium",223,1.7,2,[1]),new Ae(88,"RA","Radium",226.03,1.7,1.9,[2]),new Ae(89,"AC","Actinium",227.03,1.7,1.88,[0]),new Ae(90,"TH","Thorium",232.04,1.7,1.79,[0]),new Ae(91,"PA","Protactinium",231.04,1.7,1.61,[0]),new Ae(92,"U","Uranium",238.03,1.86,1.58,[0]),new Ae(93,"NP","Neptunium",237.05,1.7,1.55,[0]),new Ae(94,"PU","Plutonium",239.1,1.7,1.53,[0]),new Ae(95,"AM","Americium",243.1,1.7,1.51,[0]),new Ae(96,"CM","Curium",247.1,1.7,1.5,[0]),new Ae(97,"BK","Berkelium",247.1,1.7,1.5,[0]),new Ae(98,"CF","Californium",252.1,1.7,1.5,[0]),new Ae(99,"ES","Einsteinium",252.1,1.7,1.5,[0]),new Ae(100,"FM","Fermium",257.1,1.7,1.5,[0]),new Ae(101,"MD","Mendelevium",256.1,1.7,1.5,[0]),new Ae(102,"NO","Nobelium",259.1,1.7,1.5,[0]),new Ae(103,"LR","Lawrencium",260.1,1.7,1.5,[0]),new Ae(104,"RF","Rutherfordium",261,1.7,1.6,[0]),new Ae(105,"DB","Dubnium",262,1.7,1.6,[0]),new Ae(106,"SG","Seaborgium",263,1.7,1.6,[0]),new Ae(107,"BH","Bohrium",262,1.7,1.6,[0]),new Ae(108,"HS","Hassium",265,1.7,1.6,[0]),new Ae(109,"MT","Meitnerium",268,1.7,1.6,[0])]),Ee(Ae,"ByName",{D:new Ae(1,"D","Deuterium",2.014,1.2,.23,[1]),T:new Ae(1,"T","Tritium",3.016,1.2,.23,[1])}),function(){for(var e=Ae.ByAtomicNumber,t=Ae.ByName,n=0,r=e.length;n<r;++n){var i=e[n];i&&(t[i.name]=i)}}(),Ae.getByName=function(e){var t=Ae.ByName[e];return t||(t=Ae.ByName[e]=new Ae(0,e,"Unknown",0,1,.01,[0])),t};var Me={UNKNOWN:0,COVALENT:1,AROMATIC:2};function Ce(e){return e.position}var ke=function(){function e(t,n,r,i,o){if(g(this,e),this._left=t,this._right=n,this._fixed=o,this._index=-1,t>n)throw new Error("In a bond atom indices must be in increasing order");this._order=r,this._type=i}return _(e,[{key:"getLeft",value:function(){return this._left}},{key:"getRight",value:function(){return this._right}},{key:"getOrder",value:function(){return this._order}},{key:"calcLength",value:function(){return this._left.position.distanceTo(this._right.position)}},{key:"_forEachNeighbour",value:function(e,t){for(var n=e.bonds,r=0,i=n.length;r<i;++r)t(n[r]._left!==e?n[r]._left:n[r]._right)}},{key:"forEachLevelOne",value:function(e){var t=this._left,n=this._right;this._forEachNeighbour(t,(function(t){t!==n&&e(t)})),this._forEachNeighbour(n,(function(n){n!==t&&e(n)}))}},{key:"forEachLevelTwo",value:function(e){var t=this._left,n=this._right,r=this;r._forEachNeighbour(t,(function(i){i!==n&&r._forEachNeighbour(i,(function(n){n!==t&&e(n)}))})),r._forEachNeighbour(n,(function(i){i!==t&&r._forEachNeighbour(i,(function(t){t!==n&&e(t)}))}))}},{key:"_fixDir",value:function(e,t,n){var r=0,i=0,o=e.clone();function a(a){o.copy(n(a)),o.sub(e),t.dot(o)>0?++r:++i}function s(e){"C"===e.element.name&&a(e)}for(var u=[[this.forEachLevelOne,s],[this.forEachLevelOne,a],[this.forEachLevelTwo,s],[this.forEachLevelTwo,a]],c=0;c<u.length;++c){if(u[c][0].call(this,u[c][1]),i>r)return t.multiplyScalar(-1);if(i<r)return t}return t}},{key:"calcNormalDir",value:function(e){var t=this._left,n=this._right,r=t,i=n;e=void 0===e?Ce:e,t.bonds.length>n.bonds.length&&(r=n,i=t);for(var o=r,a=0,s=i.bonds,u=0,c=s.length;u<c;++u){var l=s[u]._left;s[u]._left===i&&(l=s[u]._right),l.bonds.length>a&&l!==r&&(o=l,a=l.bonds.length)}var f=e(i),h=e(r).clone().sub(f),p=e(o).clone().sub(f);return p.crossVectors(h,p),p.lengthSq()<1e-4&&p.set(0,1,0),h.normalize(),p.normalize(),h.crossVectors(p,h),h.lengthSq()<1e-4&&h.set(0,1,0),h.normalize(),this._fixDir(f,h,e)}}]),e}();Ee(ke,"BondType",Me),ke.prototype.BondType=Me;var Re=["C3'","C3*","P","H5T","H3T"],Pe=["OP1","O1P"],Le=["OP2","O2P"],Oe=["C3'","C3*","C1","C1'","C1*","P"],Ie=[{types:["A","DA","G","DG"],atoms:["N1"]},{types:["C","DC"],atoms:["N3"]},{types:["T","DT","U","DU"],atoms:["O4"]}],Ne=function(){function e(t,n,r,i){g(this,e),this._chain=t,this._component=null,this._type=n,this._sequence=r,this._icode=i,this._mask=1,this._index=-1,this._atoms=[],this._secondary=null,this._firstAtom=null,this._leadAtom=null,this._wingAtom=null,this._lastAtom=null,this._controlPoint=null,this._midPoint=null,this._wingVector=null,this._cylinders=null,this._isValid=!0,this._het=!1,this._molecule=null,this.temperature=null,this.occupancy=null}return _(e,[{key:"getChain",value:function(){return this._chain}},{key:"getMolecule",value:function(){return this._molecule}},{key:"getType",value:function(){return this._type}},{key:"getSequence",value:function(){return this._sequence}},{key:"getSecondary",value:function(){return this._secondary}},{key:"getICode",value:function(){return this._icode}},{key:"addAtom",value:function(e,t,n,r,i,o,a,s,u,c){var l=new Te(this,e,t,n,r,i,o,a,s,u,c);return this._chain.getComplex().addAtom(l),this._atoms.push(l),this._het=this._het||i,l}},{key:"getAtomCount",value:function(){return this._atoms.length}},{key:"forEachAtom",value:function(e){for(var t=this._atoms,n=0,r=t.length;n<r&&!e(t[n]);++n);}},{key:"_findAtomByName",value:function(e){var t=null;return this.forEachAtom((function(n){return n.name===e&&(t=n,!0)})),t}},{key:"_findFirstAtomInList",value:function(e){for(var t=null,n=0;n<e.length;++n)if(null!==(t=this._findAtomByName(e[n])))return t;return t}},{key:"collectMask",value:function(){for(var e=4294967295,t=this._atoms,n=0,r=t.length;n<r;++n)e&=t[n].mask;this._mask=e}},{key:"getCylinderTargetList",value:function(){for(var e=this._type._name,t=0,n=Ie.length;t<n;++t)for(var r=0,i=Ie[t].types.length;r<i;++r)if(e===Ie[t].types[r])return Ie[t].atoms;return null}},{key:"_detectLeadWing",value:function(e,t,n){var r=this._findFirstAtomInList(Re),i=this._findFirstAtomInList(Pe),o=this._findFirstAtomInList(Le);if(null===i&&null!==t&&(i=t._findFirstAtomInList(Pe)),null===o&&null!==t&&(o=t._findFirstAtomInList(Le)),null!==r&&null!==i&&null!==o){e._leadAtom=r,e._controlPoint=n(r),e._wingVector=n(o).clone().sub(n(i)),e._isValid=!0;var a=this._findFirstAtomInList(Oe),s=this.getCylinderTargetList(),u=null!==s?this._findFirstAtomInList(s):null;null!==a&&null!==u&&(e._cylinders=[n(a),n(u)])}}},{key:"calcWing",value:function(e,t,n,r){var i=t.clone().sub(e),o=e.clone().sub(n);(o.crossVectors(i,o),o.crossVectors(i,o).normalize(),null!==r&&r.length()>1e-4)&&(o.length()>1e-4&&Math.abs(r.angleTo(o))>Math.PI/2&&o.negate());return o}},{key:"_innerFinalize",value:function(e,t,n,r,i,a){var s=null===t,u=a(this._leadAtom),c=new o.Vector3(u.x,u.y,u.z);if(i)this._detectLeadWing(r,n,a);else{if(s)r._midPoint=a(this._firstAtom).clone();else{var l=t._controlPoint;r._midPoint=l.clone().lerp(c,.5),r._wingVector=this.calcWing(l,c,a(e._wingAtom),t._wingVector)}r._controlPoint=c}}},{key:"_finalize2",value:function(e,t,n){this._innerFinalize(e,e,t,this,n,(function(e){return e.position}))}},{key:"isConnected",value:function(e){if(this._chain!==e._chain)return!1;if(this===e)return!0;var t=!1;return this.forEachAtom((function(n){for(var r=n.bonds,i=0,o=r.length;i<o;++i){var a=r[i];if(a._left.residue===e||a._right.residue===e)return t=!0,!0}return!1})),t}},{key:"_finalize",value:function(){var e=this,t=c(this._atoms,1);this._firstAtom=t[0],this._lastAtom=this._atoms[this._atoms.length-1],this._leadAtom=null,this._wingAtom=null;var n=0,r=0,i=0,o=0;this.forEachAtom((function(t){return null===e._leadAtom&&t.role===Ae.Constants.Lead&&(e._leadAtom=t),null===e._wingAtom&&t.role===Ae.Constants.Wing&&(e._wingAtom=t),t.temperature&&(r+=t.temperature,n++),t.occupancy&&(o+=t.occupancy,i++),null!==e._leadAtom&&null!==e._wingAtom})),n>0&&(this.temperature=r/n),i>0&&(this.occupancy=o/i),null!==this._leadAtom&&null!==this._wingAtom||(this._isValid=!1),null===this._leadAtom&&(this._leadAtom=this._firstAtom),null===this._wingAtom&&(this._wingAtom=this._lastAtom)}}]),e}(),De=function(){function e(t,n,r){g(this,e),this._name=t,this._fullName=n,this.letterCode=r,this.flags=0}return _(e,[{key:"getName",value:function(){return this._name}}]),e}();function Fe(e,t){for(var n=0,r=t.length;n<r;++n){var i=De.StandardTypes[t[n]];i&&(i.flags|=e)}}Ee(De,"StandardTypes",{ALA:new De("ALA","Alanine","A"),ARG:new De("ARG","Arginine","R"),ASN:new De("ASN","Asparagine","N"),ASP:new De("ASP","Aspartic Acid","D"),CYS:new De("CYS","Cysteine","C"),GLN:new De("GLN","Glutamine","Q"),GLU:new De("GLU","Glutamic Acid","E"),GLY:new De("GLY","Glycine","G"),HIS:new De("HIS","Histidine","H"),ILE:new De("ILE","Isoleucine","I"),LEU:new De("LEU","Leucine","L"),LYS:new De("LYS","Lysine","K"),MET:new De("MET","Methionine","M"),PHE:new De("PHE","Phenylalanine","F"),PRO:new De("PRO","Proline","P"),PYL:new De("PYL","Pyrrolysine","O"),SEC:new De("SEC","Selenocysteine","U"),SER:new De("SER","Serine","S"),THR:new De("THR","Threonine","T"),TRP:new De("TRP","Tryptophan","W"),TYR:new De("TYR","Tyrosine","Y"),VAL:new De("VAL","Valine","V"),A:new De("A","Adenine","A"),C:new De("C","Cytosine","C"),G:new De("G","Guanine","G"),I:new De("I","Inosine","I"),T:new De("T","Thymine","T"),U:new De("U","Uracil","U"),DA:new De("DA","Adenine","A"),DC:new De("DC","Cytosine","C"),DG:new De("DG","Guanine","G"),DI:new De("DI","Inosine","I"),DT:new De("DT","Thymine","T"),DU:new De("DU","Uracil","U"),"+A":new De("+A","Adenine","A"),"+C":new De("+C","Cytosine","C"),"+G":new De("+G","Guanine","G"),"+I":new De("+I","Inosine","I"),"+T":new De("+T","Thymine","T"),"+U":new De("+U","Uracil","U"),WAT:new De("WAT","Water",""),H2O:new De("H2O","Water",""),HOH:new De("HOH","Water",""),DOD:new De("DOD","Water",""),UNK:new De("UNK","Unknown",""),UNL:new De("UNL","Unknown Ligand","")}),Ee(De,"Flags",{PROTEIN:1,BASIC:2,ACIDIC:4,POLAR:8,NONPOLAR:16,AROMATIC:32,NUCLEIC:256,PURINE:512,PYRIMIDINE:1024,DNA:2048,RNA:4096,WATER:65536});var ze=De.Flags;Fe(ze.WATER,["WAT","H2O","HOH","DOD"]),Fe(ze.PROTEIN,["ALA","ARG","ASN","ASP","CYS","GLY","GLU","GLN","HIS","ILE","LEU","LYS","MET","PHE","PRO","PYL","SEC","SER","THR","TRP","TYR","VAL"]),Fe(ze.BASIC,["ARG","HIS","LYS"]),Fe(ze.ACIDIC,["ASP","GLU"]),Fe(ze.POLAR,["ASN","CYS","GLN","SER","THR","TYR"]),Fe(ze.NONPOLAR,["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL","GLY"]),Fe(ze.AROMATIC,["PHE","TRP","TYR"]),Fe(ze.NUCLEIC,["A","G","I","DA","DG","DI","+A","+G","+I","C","T","U","DC","DT","DU","+C","+T","+U"]),Fe(ze.PURINE,["A","G","I","DA","DG","DI","+A","+G","+I"]),Fe(ze.PYRIMIDINE,["C","T","U","DC","DT","DU","+C","+T","+U"]),Fe(ze.DNA,["DA","DG","DI","DC","DT","DU"]),Fe(ze.RNA,["A","G","I","C","T","U"]);!function(e,t){for(var n=Object.keys(t),r=0,i=n.length;r<i;++r){var o=n[r],a=t[o];De.StandardTypes[o][e]=a}}("hydrophobicity",{ILE:4.5,VAL:4.2,LEU:3.8,PHE:2.8,CYS:2.5,MET:1.9,ALA:1.8,GLY:-.4,THR:-.7,SER:-.8,TRP:-.9,TYR:-1.3,PRO:-1.6,HIS:-3.2,GLU:-3.5,GLN:-3.5,ASP:-3.5,ASN:-3.5,LYS:-3.9,ARG:-4.5});var Be,je=0,Ve=1,Ue=2,Ge=function(){function e(t,n){g(this,e),this._complex=t,this._name=n,this._mask=1,this._index=-1,this._residues=[],this.minSequence=Number.POSITIVE_INFINITY,this.maxSequence=Number.NEGATIVE_INFINITY}return _(e,[{key:"getComplex",value:function(){return this._complex}},{key:"getName",value:function(){return this._name}},{key:"getResidues",value:function(){return this._residues}},{key:"_determineType",value:function(){var e=this._residues,t=De.Flags,n=t.PROTEIN,r=t.NUCLEIC;this.type=je;for(var i=0,o=e.length;i<o;++i){var a=e[i]._type.flags;if(0!==(a&r)){this.type=Ue;break}if(0!==(a&n)){this.type=Ve;break}}}},{key:"findResidue",value:function(e,t){for(var n=this._residues,r=0,i=n.length;r<i;++r){var o=n[r];if(o._sequence===e&&o._icode===t)return[o,r]}return null}},{key:"_finalize",value:function(){this._determineType();for(var e=this._residues,t=null,n=0,r=e.length;n<r;++n){var i=n+1<r?e[n+1]:null,a=e[n];a._finalize2(t,i,this.type===Ue),t=a}if(e.length>1&&e[1]._wingVector){var s=e[1]._wingVector;e[0]._wingVector=new o.Vector3(s.x,s.y,s.z)}else e.length>0&&(e[0]._wingVector=new o.Vector3(1,0,0))}},{key:"updateToFrame",value:function(e){var t=this._residues,n=null,r=null,i=e._residues,a=t.length;function s(t){return e.getAtomPos(t.index)}for(var u=0;u<a;++u){var c=t[u],l=i[c._index],f=u+1<a?t[u+1]:null;c._innerFinalize(n,r,f,l,this.type===Ue,s),n=c,r=l}i[t[0]._index]._wingVector=a>1?i[t[1]._index]._wingVector:new o.Vector3(1,0,0)}},{key:"addResidue",value:function(e,t,n){var r=this._complex.getResidueType(e);null===r&&(r=this._complex.addResidueType(e));var i=new Ne(this,r,t,n);return this._complex.addResidue(i),this._residues.push(i),r.flags&(De.Flags.NUCLEIC|De.Flags.PROTEIN)&&(this.maxSequence<t&&(this.maxSequence=t),this.minSequence>t&&(this.minSequence=t)),i}},{key:"getResidueCount",value:function(){return this._residues.length}},{key:"forEachResidue",value:function(e){for(var t=this._residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"collectMask",value:function(){for(var e=4294967295,t=this._residues,n=0,r=t.length;n<r;++n)e&=t[n]._mask;this._mask=e}}]),e}(),He=function(){function e(t,n,r){g(this,e),this.type=t,this.generic=e.genericByType[this.type]||"loop",this.init=n,this.term=r}return _(e,[{key:"_finalize",value:function(e,t,n){if(!(this.init instanceof Ne&&this.term instanceof Ne)){for(var r=n.splitUnifiedSerial(this.init),i=n.splitUnifiedSerial(this.term),o=r.chain;o<=i.chain;o++)for(var a=r.serial;a<=i.serial;a++)for(var s=r.iCode;s<=i.iCode;s++){var u=n.getUnifiedSerial(o,a,s);t[u]&&(t[u]._secondary=this)}this.init=t[this.init],this.term=t[this.term]}}}]),e}();He.Type={STRAND:"E",BRIDGE:"B",HELIX_310:"G",HELIX_ALPHA:"H",HELIX_PI:"I",HELIX:"X",TURN_310:"3",TURN_ALPHA:"4",TURN_PI:"5",TURN:"T",BEND:"S",COIL:"C"},He.Generic={STRAND:"strand",HELIX:"helix",LOOP:"loop"};var We=He.Type,qe=He.Generic;He.genericByType=(Ee(Be={},We.STRAND,qe.STRAND),Ee(Be,We.HELIX_310,qe.HELIX),Ee(Be,We.HELIX_ALPHA,qe.HELIX),Ee(Be,We.HELIX_PI,qe.HELIX),Ee(Be,We.HELIX,qe.HELIX),Be);var Ye=He.Type,Xe={1:Ye.HELIX_ALPHA,3:Ye.HELIX_PI,5:Ye.HELIX_310},$e=function(e){function t(e,n,r,i,o,a,s){var u;return g(this,t),(u=C(this,k(t).call(this,Xe[e]||He.Type.HELIX,n,r))).serial=i,u.name=o,u.comment=a,u.length=s,u}return P(t,e),t}(He);var Ze=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e},Ke=T((function(e){function t(n,r,i){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=t=Reflect.get:e.exports=t=function(e,t,n){var r=Ze(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},t(n,r,i||n)}e.exports=t})),Je=function(e){function t(e,n,r,i,o,a){var s;return g(this,t),(s=C(this,k(t).call(this,He.Type.STRAND,n,r))).sheet=e,s.sense=i,s.atomCur=o,s.atomPrev=a,s}return P(t,e),_(t,[{key:"_finalize",value:function(e,n,r){Ke(k(t.prototype),"_finalize",this).call(this,e,n,r);var i=this.atomCur;null===i||Number.isNaN(i)||(this.atomCur=e[i]),null===(i=this.atomPrev)||Number.isNaN(i)||(this.atomPrev=e[i])}}]),t}(He),Qe=function(){function e(t,n){g(this,e),this._name=t,this._width=n,this._strands=[]}return _(e,[{key:"getName",value:function(){return this._name}},{key:"getWidth",value:function(){return this._width}},{key:"addStrand",value:function(e){this._strands.push(e),this._width=this._strands.length}},{key:"addEmptyStrand",value:function(){this._strands.push(new Je(null,null,null,null,null,null))}},{key:"_finalize",value:function(e,t,n){for(var r=this._strands,i=0,o=r.length;i<o;++i)r[i]._finalize(e,t,n);if(this._width||(this._width=r.length),r.length!==this._width)throw new Error("Sheet ".concat(this._name," is inconsistent."))}}]),e}(),et=function(){function e(t,n,r,i,a){g(this,e),this._id=t,this._name=n,this._position=r||new o.Vector3,this._atoms=i||[],this._charge=0,this._repeat=1,this._center=null,this.xmlNodeRef=a||null}return _(e,[{key:"getName",value:function(){return this._name}},{key:"getPosition",value:function(){return this._position}},{key:"getCentralPoint",value:function(){return this._center}},{key:"_rebuildSGroupOnAtomChange",value:function(){var e=1e8;if(null!==this._center){for(var t=new o.Vector3(e,e,e),n=new o.Vector3(-e,-e,-e),r=0,i=this._atoms.length;r<i;r++){var a=this._atoms[r].position;t.set(Math.min(t.x,a.x),Math.min(t.y,a.y),Math.min(t.z,a.z)),n.set(Math.max(n.x,a.x),Math.max(n.y,a.y),Math.max(n.z,a.z))}this._center.addVectors(t,n),this._center.multiplyScalar(.5)}}}]),e}(),tt={parser:function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,4],n=[1,5],r=[1,6],i=[1,7],o=[1,8],a=[1,9],s=[1,11],u=[1,12],c=[5,7,8,11],l=[1,17],f=[1,22],h=[1,20],p=[1,21],d=[5,7,8,11,19],m={trace:function(){},yy:{},symbols_:{error:2,Program:3,Expression:4,EOF:5,Selector:6,OR:7,AND:8,NOT:9,"(":10,")":11,SELECTOR:12,NAMED_SELECTOR:13,SELECTOR_RANGED:14,RangeList:15,SELECTOR_NAMED:16,NameList:17,Range:18,",":19,NUMBER:20,":":21,Name:22,IDENTIFIER:23,STRING:24,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"OR",8:"AND",9:"NOT",10:"(",11:")",12:"SELECTOR",13:"NAMED_SELECTOR",14:"SELECTOR_RANGED",16:"SELECTOR_NAMED",19:",",20:"NUMBER",21:":",23:"IDENTIFIER",24:"STRING"},productions_:[0,[3,2],[4,1],[4,3],[4,3],[4,2],[4,3],[6,1],[6,1],[6,2],[6,2],[15,1],[15,3],[18,1],[18,3],[17,1],[17,3],[22,1],[22,1],[22,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 3:this.$=r.keyword("or")(o[s-2],o[s]);break;case 4:this.$=r.keyword("and")(o[s-2],o[s]);break;case 5:this.$=r.keyword("not")(o[s]);break;case 6:this.$=o[s-1];break;case 7:this.$=r.keyword(o[s])();break;case 8:this.$=r.GetSelector(o[s].toLowerCase().slice(1,o[s].length));break;case 9:case 10:this.$=r.keyword(o[s-1])(o[s]);break;case 11:this.$=new r.RangeList(o[s]);break;case 12:case 16:this.$=o[s-2].append(o[s]);break;case 13:this.$=new r.Range(Number(o[s]));break;case 14:this.$=new r.Range(Number(o[s-2]),Number(o[s]));break;case 15:this.$=new r.ValueList(o[s])}},table:[{3:1,4:2,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{1:[3]},{5:[1,10],7:s,8:u},e(c,[2,2]),{4:13,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{4:14,6:3,9:t,10:n,12:r,13:i,14:o,16:a},e(c,[2,7]),e(c,[2,8]),{15:15,18:16,20:l},{17:18,20:f,22:19,23:h,24:p},{1:[2,1]},{4:23,6:3,9:t,10:n,12:r,13:i,14:o,16:a},{4:24,6:3,9:t,10:n,12:r,13:i,14:o,16:a},e(c,[2,5]),{7:s,8:u,11:[1,25]},e(c,[2,9],{19:[1,26]}),e(d,[2,11]),e(d,[2,13],{21:[1,27]}),e(c,[2,10],{19:[1,28]}),e(d,[2,15]),e(d,[2,17]),e(d,[2,18]),e(d,[2,19]),e([5,7,11],[2,3],{8:u}),e(c,[2,4]),e(c,[2,6]),{18:29,20:l},{20:[1,30]},{20:f,22:31,23:h,24:p},e(d,[2,12]),e(d,[2,14]),e(d,[2,16])],defaultActions:{10:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[],i=[null],o=[],a=this.table,s="",u=0,c=0,l=2,f=1,h=o.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(d.yy[m]=this.yy[m]);p.setInput(e,d.yy),d.yy.lexer=p,d.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var v=p.yylloc;o.push(v);var g=p.options&&p.options.ranges;function y(){var e;return"number"!==typeof(e=r.pop()||p.lex()||f)&&(e instanceof Array&&(e=(r=e).pop()),e=t.symbols_[e]||e),e}"function"===typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,x,b,w,S,E,T,A,M={};;){if(x=n[n.length-1],this.defaultActions[x]?b=this.defaultActions[x]:(null!==_&&"undefined"!=typeof _||(_=y()),b=a[x]&&a[x][_]),"undefined"===typeof b||!b.length||!b[0]){var C="";for(S in A=[],a[x])this.terminals_[S]&&S>l&&A.push("'"+this.terminals_[S]+"'");C=p.showPosition?"Parse error on line "+(u+1)+":\n"+p.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(u+1)+": Unexpected "+(_==f?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(C,{text:p.match,token:this.terminals_[_]||_,line:p.yylineno,loc:v,expected:A})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+_);switch(b[0]){case 1:n.push(_),i.push(p.yytext),o.push(p.yylloc),n.push(b[1]),_=null,c=p.yyleng,s=p.yytext,u=p.yylineno,v=p.yylloc;break;case 2:if(E=this.productions_[b[1]][1],M.$=i[i.length-E],M._$={first_line:o[o.length-(E||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(E||1)].first_column,last_column:o[o.length-1].last_column},g&&(M._$.range=[o[o.length-(E||1)].range[0],o[o.length-1].range[1]]),"undefined"!==typeof(w=this.performAction.apply(M,[s,c,u,d.yy,b[1],i,o].concat(h))))return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),o=o.slice(0,-1*E)),n.push(this.productions_[b[1]][0]),i.push(M.$),o.push(M._$),T=a[n[n.length-2]][n[n.length-1]],n.push(T);break;case 3:return!0}}return!0}},v={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return 20;case 2:return 7;case 3:return 8;case 4:return 9;case 5:return 12;case 6:return 16;case 7:return 14;case 8:return 10;case 9:return 11;case 10:return 19;case 11:return 21;case 12:return"<=";case 13:return">=";case 14:return"<";case 15:return">";case 16:return t.yytext=t.yytext.substr(1,t.yyleng-2),24;case 17:return 13;case 18:return 23;case 19:return 5;case 20:return"INVALID"}},rules:[/^(?:\s+)/i,/^(?:(-?(?:[1-9][0-9]+|[0-9]))\b)/i,/^(?:OR\b)/i,/^(?:AND\b)/i,/^(?:NOT\b)/i,/^(?:((ALL|NONE|HETATM|PROTEIN|BASIC|ACIDIC|CHARGED|POLAR|NONPOLAR|AROMATIC|NUCLEIC|PURINE|PYRIMIDINE|WATER|POLARH|NONPOLARH))\b)/i,/^(?:((NAME|ELEM|TYPE|RESIDUE|ICODE|CHAIN|ALTLOC))\b)/i,/^(?:((SERIAL|SEQUENCE|RESIDX))\b)/i,/^(?:\()/i,/^(?:\))/i,/^(?:,)/i,/^(?::)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:((?:"(?:\\.|[^\\"])*"|'(?:\\.|[^\\'])*')))/i,/^(?:(@[_A-Z0-9]+))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};function g(){this.yy={}}return m.lexer=v,g.prototype=m,m.Parser=g,new g}()}.parser,nt=function(){function e(t,n){g(this,e),this.min=t,this.max="undefined"===typeof n?t:n}return _(e,[{key:"includes",value:function(e){return this.min<=e&&e<=this.max}},{key:"toString",value:function(){var e=this.min,t=this.max;return e===t?String(e):[e,t].join(":")}},{key:"toJSON",value:function(){return[this.min,this.max]}}]),e}(),rt=function(){function e(t){if(g(this,e),t instanceof this.constructor)return t;this._values=t instanceof Array?t.slice(0):t?[t]:[]}return _(e,[{key:"append",value:function(e){var t=this._values;return t[t.length]=e,this}},{key:"remove",value:function(e){var t=this._values,n=t.indexOf(e);return n>=0&&t.splice(n,1),this}},{key:"toString",value:function(){return this._values.join(",")}},{key:"toJSON",value:function(){for(var e=this._values,t=[],n=0,r=e.length;n<r;++n){var i=e[n];t[n]=i.toJSON?i.toJSON():i}return t}}]),e}(),it=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includes",value:function(e){for(var t=this._values,n=0,r=t.length;n<r;++n)if(t[n].includes(e))return!0;return!1}}]),t}(rt),ot=[],at=function(e){function t(e,n){var r;g(this,t);var i=r=C(this,k(t).call(this,e));if(n){r.upperOnly=!0;for(var o=i._values,a=0,s=o.length;a<s;++a){var u=o[a];"string"===typeof u&&(o[a]=u.toUpperCase())}}else r.upperOnly=!1;return C(r,i)}return P(t,e),_(t,[{key:"includes",value:function(e){return-1!==this._values.indexOf(e)}},{key:"toString",value:function(){var e=this._values;ot.length=0;for(var t=0,n=e.length;t<n;++t)ot[t]=Q.correctSelectorIdentifier(String(e[t]));return ot.join(",")}},{key:"_validate",value:function(e){return this.upperOnly&&"string"===typeof e?e.toUpperCase():e}},{key:"append",value:function(e){return Ke(k(t.prototype),"append",this).call(this,this._validate(e)),this}},{key:"remove",value:function(e){return Ke(k(t.prototype),"remove",this).call(this,this._validate(e)),this}}]),t}(rt),st=function(){function e(){g(this,e)}return _(e,[{key:"toString",value:function(){return this.keyword}},{key:"toJSON",value:function(){return[this.name]}}]),e}();st.prototype.name="Error",st.prototype.keyword="error";var ut=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this))).list=e,n}return P(t,e),_(t,[{key:"toString",value:function(){return"".concat(this.keyword," ").concat(this.list)}},{key:"toJSON",value:function(){return[this.name,this.list.toJSON()]}}]),t}(st),ct=function(e){function t(e){return g(this,t),C(this,k(t).call(this,new it(e)))}return P(t,e),t}(ut),lt=function(e){function t(e,n){return g(this,t),C(this,k(t).call(this,new at(e,!n)))}return P(t,e),t}(ut),ft=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return!1}}]),t}(st);ft.prototype.name="None",ft.prototype.keyword="none";var ht=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return!0}}]),t}(st);ht.prototype.name="All",ht.prototype.keyword="all";var pt=new ft,dt=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this))).rhs=e||pt,n}return P(t,e),_(t,[{key:"toString",value:function(){var e=this.rhs.priority&&this.rhs.priority>this.priority?"(".concat(this.rhs,")"):this.rhs;return"".concat(this.keyword," ").concat(e)}},{key:"toJSON",value:function(){return[this.name,this.rhs.toJSON()]}}]),t}(st);dt.prototype.priority=1;var mt=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this))).lhs=e||pt,r.rhs=n||pt,r}return P(t,e),_(t,[{key:"toString",value:function(){var e=this.lhs.priority&&this.lhs.priority>this.priority?"(".concat(this.lhs,")"):this.lhs,t=this.rhs.priority&&this.rhs.priority>this.priority?"(".concat(this.rhs,")"):this.rhs;return"".concat(e," ").concat(this.keyword," ").concat(t)}},{key:"toJSON",value:function(){return[this.name,this.lhs.toJSON(),this.rhs.toJSON()]}}]),t}(st);mt.prototype.priority=1e3;var vt={};function gt(e,t){var n=e.toLowerCase();t.prototype.keyword=n,t.prototype.name=e;var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return O(t,n)};return r.SelectorClass=t,vt[n]=r,t}gt("Serial",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.serial)}}]),t}(ct)),gt("Name",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.name)}}]),t}(lt)),gt("AltLoc",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(String.fromCharCode(e.location))}}]),t}(lt)),gt("Elem",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.element.name)}}]),t}(lt)),gt("Residue",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._type._name)}}]),t}(lt)),gt("Sequence",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._sequence)}}]),t}(ct)),gt("ICode",function(e){function t(e){return g(this,t),C(this,k(t).call(this,e,!0))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._icode)}}]),t}(lt)),gt("ResIdx",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._index)}}]),t}(ct)),gt("Chain",function(e){function t(e){return g(this,t),C(this,k(t).call(this,e,!0))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.list.includes(e.residue._chain._name)}}]),t}(lt)),gt("Hetatm",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return e.het}}]),t}(st)),gt("PolarH",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return(e.flags&Te.Flags.NONPOLARH)===Te.Flags.HYDROGEN}}]),t}(st)),gt("NonPolarH",function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return(e.flags&Te.Flags.NONPOLARH)===Te.Flags.NONPOLARH}}]),t}(st)),gt("All",ht),gt("None",ft);var yt=vt.none();function _t(e,t,n){return n.prototype.priority=t,gt(e,n)}function xt(e,t){return gt(t,function(t){function n(){return g(this,n),C(this,k(n).apply(this,arguments))}return P(n,t),_(n,[{key:"includesAtom",value:function(t){return 0!==(t.residue._type.flags&e)}}]),n}(st))}_t("Not",1,function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return!this.rhs.includesAtom(e)}}]),t}(dt)),_t("And",2,function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.lhs.includesAtom(e)&&this.rhs.includesAtom(e)}}]),t}(mt)),_t("Or",3,function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"includesAtom",value:function(e){return this.lhs.includesAtom(e)||this.rhs.includesAtom(e)}}]),t}(mt)),xt(De.Flags.PROTEIN,"Protein"),xt(De.Flags.BASIC,"Basic"),xt(De.Flags.ACIDIC,"Acidic"),xt(De.Flags.BASIC|De.Flags.ACIDIC,"Charged"),xt(De.Flags.POLAR,"Polar"),xt(De.Flags.NONPOLAR,"NonPolar"),xt(De.Flags.AROMATIC,"Aromatic"),xt(De.Flags.NUCLEIC,"Nucleic"),xt(De.Flags.PURINE,"Purine"),xt(De.Flags.PYRIMIDINE,"Pyrimidine"),xt(De.Flags.WATER,"Water");var bt=Object.create(vt);bt.Selector=st,bt.RangeListSelector=ct,bt.ValueListSelector=lt,bt.Range=nt,bt.RangeList=it,bt.ValueList=at,bt.PrefixOperator=dt,bt.InfixOperator=mt,bt.Context=Object.create({}),bt.GetSelector=function(e){if(!bt.Context.hasOwnProperty(e))throw{message:"selector ".concat(e," is not registered")};return bt.Context[e]||yt},bt.ClearContext=function(){Object.keys(bt.Context).forEach((function(e){delete bt.Context[e]}))},bt.keyword=function(e){return vt[e.toLowerCase()]||vt.none},bt.parse=function(e){var t={};try{t.selector=tt.parse(e)}catch(n){t.selector=yt,t.error=n.message}return t},tt.yy=bt,tt.yy.parseError=tt.parseError;var wt=function(){function e(t){g(this,e),this._complex=t,this._selector=bt.keyword("All")(),this._boundaries={boundingBox:new o.Box3,boundingSphere:new o.Sphere}}return _(e,[{key:"computeBoundaries",value:function(){var e=this._complex._atoms,t=e.length,n=this._selector,r=this._boundaries.boundingBox;if(r.makeEmpty(),1===t){r.expandByPoint(e[0].position);var i=new o.Vector3;r.getCenter(i);var a=2*e[0].element.radius;r.setFromCenterAndSize(i,new o.Vector3(a,a,a))}else for(var s=0;s<t;++s)n.includesAtom(e[s])&&r.expandByPoint(e[s].position);var u=0,c=new o.Vector3;if(r.getCenter(c),1===t)this._boundaries.boundingSphere.set(c,e[0].element.radius);else{for(var l=0;l<t;++l)if(n.includesAtom(e[l])){var f=e[l].position,h=c.distanceToSquared(f);u<h&&(u=h)}this._boundaries.boundingSphere.set(c,Math.sqrt(u))}}},{key:"getTransforms",value:function(){return[]}},{key:"getSelector",value:function(){return this._selector}},{key:"getBoundaries",value:function(){return this._boundaries}},{key:"finalize",value:function(){}}]),e}(),St=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,e))).chains=[],n.matrices=[],n}return P(t,e),_(t,[{key:"computeBoundaries",value:function(){Ke(k(t.prototype),"computeBoundaries",this).call(this);var e=this.matrices,n=this._boundaries.boundingSphere.center,r=this._boundaries.boundingSphere.radius,i=this._boundaries.boundingBox=new o.Box3;i.makeEmpty();for(var a=0,s=e.length;a<s;++a)i.expandByPoint(n.clone().applyMatrix4(e[a]));var u=i.max.distanceTo(i.min)/2+r,c=new o.Vector3;i.getCenter(c),this._boundaries.boundingSphere=(new o.Sphere).set(c,u),i.max.addScalar(r),i.min.subScalar(r)}},{key:"addChain",value:function(e){this.chains[this.chains.length]=e}},{key:"addMatrix",value:function(e){this.matrices[this.matrices.length]=e}},{key:"getTransforms",value:function(){return this.matrices}},{key:"finalize",value:function(){this.chains.length>0?this._selector=bt.keyword("Chain")(this.chains):this._selector=bt.keyword("None")()}}]),t}(wt),Et=function(){function e(t){g(this,e),this._complex=t,this._index=-1,this._residueIndices=[],this._cycles=[],this._subDivs=[],this._residueCount=0}return _(e,[{key:"getResidues",value:function(){return this._complex._residues}},{key:"getResidueCount",value:function(){return this._residueCount}},{key:"forEachResidue",value:function(e){for(var t=this._complex._residues,n=this._residueIndices,r=0,i=n.length;r<i;++r)for(var o=n[r].start,a=n[r].end;o<=a;++o)e(t[o])}},{key:"setSubDivs",value:function(e){this._subDivs=e;for(var t=0,n=[],r=0,i=0,o=e.length;i<o;++i)if(i===o-1||e[i].end+1!==e[i+1].start){var a=e[t].start,s=e[i].end;n[n.length]={start:a,end:s},r+=s-a+1,t=i+1}this._residueIndices=n,this._residueCount=r}},{key:"getComplex",value:function(){return this._complex}},{key:"forEachBond",value:function(e){for(var t=this._complex._bonds,n=0,r=t.length;n<r;++n){var i=t[n];i._left.residue._component===this&&e(i)}}},{key:"update",value:function(){this.forEachCycle((function(e){e.update()}))}},{key:"forEachAtom",value:function(e){this.forEachResidue((function(t){t.forEachAtom(e)}))}},{key:"addCycle",value:function(e){this._cycles.push(e)}},{key:"forEachCycle",value:function(e){for(var t=this._cycles,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"markResidues",value:function(){var e=this;e.forEachResidue((function(t){t._component=e}))}},{key:"_forEachSubChain",value:function(e,t){for(var n=this._complex._residues,r=this._subDivs,i=0,o=r.length;i<o;++i)for(var a=r[i].start,s=r[i].end;a<=s;++a){var u=n[a];if(e&u._mask&&u._isValid){for(var c=a+1;c<=s;++c){var l=n[c];if(!(e&l._mask&&l._isValid))break}t(i,a,c-1),a=c}}}},{key:"getMaskedSequences",value:function(e){var t=[],n=0;return this._forEachSubChain(e,(function(e,r,i){t[n++]={start:r,end:i}})),t}},{key:"getMaskedSubdivSequences",value:function(e){var t=[],n=-1,r=-1,i=this._subDivs;return this._forEachSubChain(e,(function(e,o,a){r!==e&&(++n,t[n]={arr:[],boundaries:i[e]},r=e),t[n].arr[t[n].arr.length]={start:o,end:a}})),t}}]),e}(),Tt=function(){function e(t){g(this,e),this.numPairs=0,this.numMaxPairs=t,this.intBuffer=Q.allocateTyped(Int32Array,4*t);for(var n=0;n<4*t;n++)this.intBuffer[n]=-1;this.hashBuffer=Q.allocateTyped(Int32Array,33554432);for(var r=0;r<33554432;r++)this.hashBuffer[r]=-1}return _(e,[{key:"destroy",value:function(){this.intBuffer=null,this.hashBuffer=null}},{key:"addPair",value:function(e,t){for(var n=e<t?e:t,r=e>t?e:t,i=n+(r<<14),o=32*(n+89237*r&1048575),a=0;a<32;a++){var s=this.hashBuffer[o+a];if(-1===s)break;if(s===i)return!1}if(a>=32)throw new Error("addPair: increase cMaxPairsForHashCode");if(this.hashBuffer[o+a]=i,this.numPairs>=this.numMaxPairs)throw new Error("addPair: increase num pairs");return o=4*this.numPairs,this.intBuffer[o]=n,this.intBuffer[o+1]=r,this.intBuffer[o+2]=i,this.numPairs++,!0}}]),e}();function At(e){var t=e.element;if(t)return t.radiusBonding;throw new Error("_getBondingRadius: Logic error.")}var Mt=function(){function e(t){g(this,e),this._complex=t,this._maxRad=1.8;var n=this._complex.getDefaultBoundaries().boundingBox;this._vBoxMin=n.min.clone(),this._vBoxMax=n.max.clone(),this._pairCollection=null}return _(e,[{key:"_addExistingPairs",value:function(){for(var e=this._complex.getAtoms(),t=e.length,n=0,r=this._pairCollection;n<t;n++)for(var i=e[n].bonds,o=i.length,a=0;a<o;a++){var s=i[a];s._left.index===n&&r.addPair(n,s._right.index)}return 0}},{key:"_findPairs",value:function(){var e=this._complex.getVoxelWorld();if(null!==e)for(var t,n,r,i,o,a,s=this._complex._atoms,u=s.length,c=this,l=function(e){if(!n||!e.isHydrogen()){var a=e.location;if(32===i||32===a||i===a){var s=r.distanceToSquared(e.position),u=e.element.radiusBonding,l=t+u+.45;s>l*l||s<.001||c._pairCollection.addPair(o.index,e.index)}}},f=0;f<u;++f)o=s[f],(!(a=o).isHet()||a.bonds&&0===a.bonds.length)&&(t=o.element.radiusBonding,n=o.isHydrogen(),r=o.position,i=o.location,e.forEachAtomWithinRadius(r,2*this._maxRad+.45,l))}},{key:"_addPairs",value:function(){for(var e=this._complex._atoms,t=0,n=0;t<this._pairCollection.numPairs;t++,n+=4){var r=this._pairCollection.intBuffer[n],i=this._pairCollection.intBuffer[n+1];this._addPair(e[r],e[i])}}},{key:"_addPair",value:function(e,t){for(var n=e.bonds,r=e.index,i=t.index,o=0,a=n.length;o<a;++o){var s=n[o];if(s._left.index===i||s._right.index===i)return}var u=r<i?e:t,c=r<i?t:e,l=this._complex.addBond(u,c,0,ke.BondType.UNKNOWN,!1);n.push(l),t.bonds.push(l)}},{key:"build",value:function(){this._buildInner()}},{key:"_buildInner",value:function(){var e=this._complex._atoms;if(!(e.length<2)){if(e[0].index<0)throw new Error("AutoBond: Atoms in complex were not indexed.");this._calcBoundingBox(),this._pairCollection=new Tt(4*e.length),this._addExistingPairs(),this._findPairs(),this._addPairs()}}},{key:"_calcBoundingBox",value:function(){for(var e=this._complex._atoms,t=e.length,n=At(e[0]),r=1;r<t;++r)n=Math.max(n,At(e[r]));this._vBoxMax.addScalar(n),this._vBoxMin.addScalar(-n),this._maxRad=1.2*n}},{key:"destroy",value:function(){this._pairCollection&&this._pairCollection.destroy()}}]),e}(),Ct=ke.BondType.AROMATIC,kt=[Ae.ByName.C.number,Ae.ByName.N.number],Rt=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3;return function(r,i){return e.copy(r).normalize(),t.copy(i).normalize(),n.crossVectors(e,t),!(n.length()>.1)&&e.dot(t)>=0}}();function Pt(e,t){for(var n=0;n<e.length&&e[n]<t;)++n;e.splice(n,0,t)}function Lt(e,t){return e._left===t?e._right:e._left}function Ot(e){e._type=Ct}var It=function(){function e(t){g(this,e),this.atoms=t,this.update()}return _(e,[{key:"update",value:function(){for(var e=this.atoms,t=new o.Vector3,n=e.length,r=0;r<n;++r)t.add(e[r].position);t.multiplyScalar(1/n),this.center=t,this.radius=t.distanceTo(e[0].position.clone().lerp(e[1].position,.5))}},{key:"forEachBond",value:function(e){var t,n=this.atoms,r=n.length,i=n[0];function o(n){n._left!==t&&n._right!==t||e(n)}for(var a=0;a<r;++a)t=n[(a+1)%r],i.forEachBond(o),i=t}}]),e}();function Nt(e){return e._type===Ct}function Dt(e){if(e.type===Ct)return!0;var t=kt.indexOf(e._right.element.number),n=kt.indexOf(e._left.element.number);return-1!==t&&-1!==n}function Ft(e){return e.length>3}function zt(e){return console.assert(e.length>2),!0}var Bt=function(){function e(t){g(this,e),this._complex=t;for(var n=new Array(t._bonds.length),r=new Array(t._bonds.length),i=0,o=n.length;i<o;++i)n[i]=[],r[i]=!1;this._bondsData=n,this._bondMarks=r,this._resetCycles()}return _(e,[{key:"_resetCycles",value:function(){this._cycles=[],this._currIdx=-1}},{key:"_haveSameCycle",value:function(e,t,n){for(var r=e[t._index],i=e[n._index],o=r.length,a=i.length,s=0,u=0;s<o&&u<a;){if(r[s]===i[u])return!0;r[s]>i[u]?++u:++s}return!1}},{key:"_tryBond",value:function(e,t,n){var r=[],i=this._bondsData,a=Lt(e,t),s=t.position.clone().sub(a.position),u=this._currStart,c=this,l=this._bondMarks,f=this._checkBond;l[e._index]=!0,f=void 0===f?Nt:f,t.forEachBond((function(a){if(f(a)&&a!==e&&!l[a._index]&&!c._haveSameCycle(i,e,a)){var h=Lt(a,t),p=h.position.clone().sub(t.position),d=h===u?-2:1-function(e,t){var n=e.dot(t)/Math.sqrt(e.lengthSq()*t.lengthSq());return o.Math.clamp(n,-1,1)}(s,p),m=p.cross(s);if(Rt(m,n)){for(var v=0;v<r.length&&r[v].val<d;)++v;r.splice(v,0,{bond:a,val:d,dir:m})}}}));for(var h=0,p=r.length;h<p;++h){var d=r[h].bond,m=d._left===t?d._right:d._left;if(m===u)return++this._currIdx,this._cycles.push([t]),l[e._index]=!1,!0;if(this._tryBond(d,m,r[h].dir))return Pt(i[d._index],this._currIdx),this._cycles[this._currIdx].push(t),l[e._index]=!1,!0}return l[e._index]=!1,!1}},{key:"_startCycle",value:function(e){this._currStart=e._left,this._tryBond(e,e._right,new o.Vector3)&&(Pt(this._bondsData[e._index],this._currIdx),this._cycles[this._currIdx].push(e._left))}},{key:"_findLoops",value:function(e,t){this._checkBond=e;var n=this._complex,r=this;n.forEachComponent((function(n){r._resetCycles(),n.forEachBond((function(t){e(t)&&r._startCycle(t)}));for(var i=r._cycles,o=0,a=i.length;o<a;++o){var s=i[o];if(t(s)){var u=new It(s);u.forEachBond(Ot),n.addCycle(u)}}}))}},{key:"markCycles",value:function(){this._findLoops(Nt,Ft)}},{key:"detectCycles",value:function(){this._findLoops(Dt,zt)}}]),e}();function jt(e,t,n,r){var i=n-e.z,o=r-e.z,a=Math.sqrt(Math.max(t*t-i*i,0)),s=Math.sqrt(Math.max(t*t-o*o,0));return[Math.min(a,s),n<=e.z&&r>=e.z?t:Math.max(a,s)]}function Vt(e,t,n,r){var i=n-e.y,o=r-e.y,a=Math.sqrt(Math.max(t*t-i*i,0)),s=Math.sqrt(Math.max(t*t-o*o,0));return[Math.min(a,s),n<=e.y&&r>=e.y?t:Math.max(a,s)]}var Ut=function(){function e(t,n){g(this,e),this._box=t.clone();var r=new o.Vector3;t.getSize(r),this._count=r.clone().divide(n).floor().max(new o.Vector3(1,1,1)),this._last=this._count.clone().subScalar(1),this._cellSize=r.clone().divide(this._count),this._cellInnerR=.5*Math.min(Math.min(this._cellSize.x,this._cellSize.y),this._cellSize.z),this._cellOuterR=.5*Math.sqrt(this._cellSize.dot(this._cellSize));var i=this._count.x*this._count.y*this._count.z;this._voxels=Q.allocateTyped(Int32Array,i);for(var a=0;a<i;++a)this._voxels[a]=-1;this._atoms=[]}return _(e,[{key:"addAtoms",value:function(e){var t=this,n=this._atoms.length;this._atoms.length+=2*e.getAtomCount(),e.forEachAtom((function(e){var r=t._findVoxel(e.position);t._atoms[n]=e,t._atoms[n+1]=t._voxels[r],t._voxels[r]=n,n+=2}))}},{key:"_findVoxel",value:function(t){var n=e._zero,r=e._voxel;return r.copy(t).sub(this._box.min).divide(this._cellSize).floor().clamp(n,this._last),r.x+this._count.x*(r.y+this._count.y*r.z)}},{key:"_forEachAtomInVoxel",value:function(e,t){for(var n=this._voxels[e];n>=0;n=this._atoms[n+1])t(this._atoms[n])}},{key:"_forEachVoxelWithinRadius",value:function(t,n,r){var i=e._xRange,o=e._yRange,a=e._zRange;if(n/this._cellInnerR<10)this._forEachVoxelWithinRadiusSimple(t,n,r);else{var s,u,c,l,f,h,p,d;a.set(t.z-n,t.z+n),a.subScalar(this._box.min.z).divideScalar(this._cellSize.z).floor().clampScalar(0,this._count.z-1);for(var m=a.x;m<=a.y;++m){f=[this._box.min.z+m*this._cellSize.z,this._box.min.z+(m+1)*this._cellSize.z],d=t.z-n<=f[0]&&f[1]<=t.z+n,s=jt(t,n,f[0],f[1]),o.set(t.y-s[1],t.y+s[1]),o.subScalar(this._box.min.y).divideScalar(this._cellSize.y).floor().clampScalar(0,this._count.y-1);for(var v=o.x;v<=o.y;++v){l=[this._box.min.y+v*this._cellSize.y,this._box.min.y+(v+1)*this._cellSize.y],p=t.y-s[0]<=l[0]&&l[1]<=t.y+s[0],u=Vt(t,s[1],l[0],l[1]),i.set(t.x-u[1],t.x+u[1]),i.subScalar(this._box.min.x).divideScalar(this._cellSize.x).floor().clampScalar(0,this._count.x-1);for(var g=i.x;g<=i.y;++g)c=[this._box.min.x+g*this._cellSize.x,this._box.min.x+(g+1)*this._cellSize.x],h=t.x-u[0]<=c[0]&&c[1]<=t.x+u[0],r(g+this._count.x*(v+this._count.y*m),h&&p&&d)}}}}},{key:"_forEachVoxelWithinRadiusSimple",value:function(t,n,r){var i=e._xRange,o=e._yRange,a=e._zRange,s=e._vCenter,u=(n+this._cellOuterR)*(n+this._cellOuterR),c=-1;n>this._cellOuterR&&(c=(n-this._cellOuterR)*(n-this._cellOuterR)),i.set(t.x-n,t.x+n),i.subScalar(this._box.min.x).divideScalar(this._cellSize.x).floor(),i.x=Math.min(Math.max(i.x,0),this._count.x-1),i.y=Math.min(Math.max(i.y,0),this._count.x-1),o.set(t.y-n,t.y+n),o.subScalar(this._box.min.y).divideScalar(this._cellSize.y).floor(),o.x=Math.min(Math.max(o.x,0),this._count.y-1),o.y=Math.min(Math.max(o.y,0),this._count.y-1),a.set(t.z-n,t.z+n),a.subScalar(this._box.min.z).divideScalar(this._cellSize.z).floor(),a.x=Math.min(Math.max(a.x,0),this._count.z-1),a.y=Math.min(Math.max(a.y,0),this._count.z-1);for(var l=a.x;l<=a.y;++l){var f=[this._box.min.z+l*this._cellSize.z,this._box.min.z+(l+1)*this._cellSize.z];s.z=.5*(f[0]+f[1]);for(var h=o.x;h<=o.y;++h){var p=[this._box.min.y+h*this._cellSize.y,this._box.min.y+(h+1)*this._cellSize.y];s.y=.5*(p[0]+p[1]);for(var d=i.x;d<=i.y;++d){var m=[this._box.min.x+d*this._cellSize.x,this._box.min.x+(d+1)*this._cellSize.x];s.x=.5*(m[0]+m[1]);var v=t.distanceToSquared(s);v<=u&&r(d+this._count.x*(h+this._count.y*l),v<=c)}}}}},{key:"forEachAtomWithinRadius",value:function(e,t,n){var r=this,i=t*t;r._forEachVoxelWithinRadius(e,t,(function(t,o){o?r._forEachAtomInVoxel(t,n):r._forEachAtomInVoxel(t,(function(t){e.distanceToSquared(t.position)<=i&&n(t)}))}))}},{key:"forEachAtomWithinDistFromMasked",value:function(e,t,n,r){this._forEachAtomWithinDistFromGroup((function(n){e.forEachAtom((function(e){0!==(e.mask&t)&&n(e)}))}),n,r)}},{key:"forEachAtomWithinDistFromSelected",value:function(e,t,n,r){this._forEachAtomWithinDistFromGroup((function(n){e.forEachAtom((function(e){t.includesAtom(e)&&n(e)}))}),n,r)}},{key:"_forEachAtomWithinDistFromGroup",value:function(e,t,n){var r,i=this,o=t*t,a=[],s=[],u=0;e((function(e){i._forEachVoxelWithinRadius(e.position,t,(function(t,n){n?a[t]=-1:"undefined"===typeof a[t]?(s.push(e),s.push(-1),a[t]=u,u+=2):-1!==a[t]&&(s.push(e),s.push(a[t]),a[t]=u,u+=2)}))}));var c=function(e){if("undefined"!==typeof a[r])if(-1!==(u=a[r])){for(;u>=0;u=s[u+1])if(e.position.distanceToSquared(s[u].position)<o){n(e);break}}else n(e)};for(r in a)a.hasOwnProperty(r)&&i._forEachAtomInVoxel(r,c)}}]),e}();Ee(Ut,"_zero",new o.Vector3(0,0,0)),Ee(Ut,"_voxel",new o.Vector3),Ee(Ut,"_xRange",new o.Vector2),Ee(Ut,"_yRange",new o.Vector2),Ee(Ut,"_zRange",new o.Vector2),Ee(Ut,"_vCenter",new o.Vector3);var Gt,Ht,Wt=function(){function e(t){g(this,e),this._complex=t,this._hbonds=[],this._complex._residues.length>1e3?this._buildVW():this._build()}return _(e,[{key:"isBond",value:function(e,t){if(this._hbonds[e]){var n=c(this._hbonds[e].acceptor,2),r=n[0],i=n[1];if(r&&r.residue===t&&r.energy<-.5)return!0;if(i&&i.residue===t&&i.energy<-.5)return!0}return!1}},{key:"_build",value:function(){for(var e=0;e<this._complex._residues.length-1;++e){var t=this._complex._residues[e];if(0!==(t.getType().flags&De.Flags.PROTEIN)){var n=null;e>0&&this._complex._residues[e-1].getType().flags&De.Flags.PROTEIN&&t._sequence===this._complex._residues[e-1]._sequence+1&&(n=this._complex._residues[e-1]);for(var r=e+1;r<this._complex._residues.length;++r){var i=this._complex._residues[r];if(0!==(i.getType().flags&De.Flags.PROTEIN)){var o=null;this._complex._residues[r-1].getType().flags&De.Flags.PROTEIN&&i._sequence===this._complex._residues[r-1]._sequence+1&&(o=this._complex._residues[r-1]),this._calcHBondEnergy(n,t,i),r!==e+1&&this._calcHBondEnergy(o,i,t)}}}}}},{key:"_buildVW",value:function(){var e,t,n=this,r=this._complex._residues,i=this._complex.getVoxelWorld();if(null!==i)for(var o=new Tt(this._complex._residues.length*this._complex._residues.length/2),a=0;a<r.length-1;++a)0!==((e=r[a]).getType().flags&De.Flags.PROTEIN)&&(!(t=a>0?r[a-1]:null)||0!==(t.getType().flags&De.Flags.PROTEIN)&&e._sequence===t._sequence+1||(t=null),i.forEachAtomWithinRadius(this._residueGetCAlpha(e),5,s));function s(i){var a=i.residue;if(a._index!==e._index&&0!==(a.getType().flags&De.Flags.PROTEIN)&&o.addPair(e._index,a._index)){var s=a._index>0?r[a._index-1]:null;!s||0!==(s.getType().flags&De.Flags.PROTEIN)&&a._sequence===s._sequence+1||(s=null),n._calcHBondEnergy(t,e,a),a._index!==e._index+1&&n._calcHBondEnergy(s,a,e)}}}},{key:"_residueGetCAlpha",value:function(e){for(var t=0;t<e._atoms.length;++t){var n=e._atoms[t].name;if("CA"===n||"C1"===n)return e._atoms[t].position}return null}},{key:"_residueGetCO",value:function(e){var t=null,n=null;return e.forEachAtom((function(e){"C"===e.name?t=e.position:"O"===e.name&&(n=e.position)})),[t,n]}},{key:"_residueGetNH",value:function(e,t){var n,r=this._residueGetCO(e),i=c(r,2),o=i[0],a=i[1];if(t.forEachAtom((function(e){"N"===e.name&&(n=e.position)})),o&&a&&n){var s=o.clone();return s.sub(a),s.multiplyScalar(1/s.length()),s.add(n),[n,s]}return[null,null]}},{key:"_calcHBondEnergy",value:function(e,t,n){var r=0;if(null===e)return r;if("PRO"!==t.getType().getName()){var i=this._residueGetNH(e,t),o=c(i,2),a=o[0],s=o[1],u=this._residueGetCO(n),l=c(u,2),f=l[0],h=l[1];if(null===a||null===s||null===f||null===h)return r;var p=s.distanceTo(h),d=s.distanceTo(f),m=a.distanceTo(f),v=a.distanceTo(h);r=p<.5||d<.5||m<.5||v<.5?-9.9:-27.888/p- -27.888/d+-27.888/m- -27.888/v,(r=Math.round(1e3*r)/1e3)<-9.9&&(r=-9.9)}"undefined"===typeof this._hbonds[t._index]&&(this._hbonds[t._index]={donor:[],acceptor:[]});var g=this._hbonds[t._index];g.acceptor.length<2&&g.acceptor.push({residue:n._index,energy:r}),g.acceptor.length>1&&(r<g.acceptor[0].energy?(g.acceptor[1].residue=g.acceptor[0].residue,g.acceptor[1].energy=g.acceptor[0].energy,g.acceptor[0].residue=n._index,g.acceptor[0].energy=r):r<g.acceptor[1].energy&&(g.acceptor[1].residue=n._index,g.acceptor[1].energy=r)),"undefined"===typeof this._hbonds[n._index]&&(this._hbonds[n._index]={donor:[],acceptor:[]});var y=this._hbonds[n._index];return y.donor.length<2&&y.donor.push({residue:t._index,energy:r}),y.donor.length>1&&(r<y.donor[0].energy?(y.donor[1].residue=y.donor[0].residue,y.donor[1].energy=y.donor[0].energy,y.donor[0].residue=t._index,y.donor[0].energy=r):r<y.donor[1].energy&&(y.donor[1].residue=t._index,y.donor[1].energy=r)),r}}]),e}(),qt=Object.freeze({NO_BRIDGE:0,PARALLEL:1,ANTI_PARALLEL:2}),Yt=Object.freeze({START:1,MIDDLE:2,END:3,START_AND_END:4}),Xt=Object.freeze({STRAND:"E",BRIDGE:"B",HELIX_310:"G",HELIX_ALPHA:"H",HELIX_PI:"I",TURN:"T",BEND:"S",LOOP:" "}),$t=function(){function e(t){g(this,e),this._complex=t,this._build()}return _(e,[{key:"_build",value:function(){this._hbonds=new Wt(this._complex),this._ss=[],this._sheet=[],this._betaPartners=[],this._bend=[];for(var e=0;e<this._complex.getResidues().length;++e)this._betaPartners[e]=[];this._helixFlags=[],this._helixFlags[3]=[],this._helixFlags[4]=[],this._helixFlags[5]=[],this._chainLengths=[];for(var t=0;t<this._complex._chains.length;++t){for(var n=this._complex._chains[t].getResidues(),r=0;r<n.length&&0!==(n[r].getType().flags&De.Flags.PROTEIN);++r);this._chainLengths[t]=r}this._buildBetaSheets();for(var i=0;i<this._complex._chains.length;++i)this._buildAlphaHelices(this._complex._chains[i].getResidues(),this._chainLengths[i],!1)}},{key:"_buildAlphaHelices",value:function(e,t,n){for(var r=3;r<=5&&!(e.length<r);++r)for(var i=0;i+r<t;++i)if(this._hbonds.isBond(e[i+r]._index,e[i]._index)){this._helixFlags[r][e[i+r]._index]=Yt.END;for(var o=i+1;o<i+r;++o)"undefined"===typeof this._helixFlags[r][e[o]._index]&&(this._helixFlags[r][e[o]._index]=Yt.MIDDLE);this._helixFlags[r][e[i]._index]===Yt.END?this._helixFlags[r][e[i]._index]=Yt.START_AND_END:this._helixFlags[r][e[i]._index]=Yt.START}for(var a=2;a<t-2;++a){var s=this._kappa(e[a-2],e[a],e[a+2]);this._bend[e[a]._index]=360!==s&&s>70}for(var u=1;u+4<t;++u)if(this._isHelixStart(e[u]._index,4)&&this._isHelixStart(e[u-1]._index,4))for(var c=u;c<=u+3;++c)this._ss[e[c]._index]=Xt.HELIX_ALPHA;for(var l=1;l+3<t;++l)if(this._isHelixStart(e[l]._index,3)&&this._isHelixStart(e[l-1]._index,3)){for(var f=!0,h=l;f&&h<=l+2;++h)f="undefined"===typeof this._ss[e[h]._index]||this._ss[e[h]._index]===Xt.HELIX_310;if(f)for(var p=l;p<=l+2;++p)this._ss[e[p]._index]=Xt.HELIX_310}for(var d=1;d+5<t;++d)if(this._isHelixStart(e[d]._index,5)&&this._isHelixStart(e[d-1]._index,5)){for(var m=!0,v=d;m&&v<=d+4;++v)m="undefined"===typeof this._ss[e[v]._index]||this._ss[e[v]._index]===Xt.HELIX_PI||n&&this._ss[e[v]._index]===Xt.HELIX_ALPHA;if(m)for(var g=d;g<=d+4;++g)this._ss[e[g]._index]=Xt.HELIX_PI}for(var y=1;y+1<t;++y)if("undefined"===typeof this._ss[e[y]._index]){for(var _=!1,x=3;x<=5&&!_;++x)for(var b=1;b<x&&!_;++b)_=y>=b&&this._isHelixStart(e[y-b]._index,x);_?this._ss[e[y]._index]=Xt.TURN:this._bend[e[y]._index]&&(this._ss[e[y]._index]=Xt.BEND)}}},{key:"_residueGetCAlpha",value:function(e){for(var t=0;t<e._atoms.length;++t){var n=e._atoms[t].name;if("CA"===n||"C1"===n)return e._atoms[t].position}return null}},{key:"_cosinusAngle",value:function(e,t,n,r){var i=e.clone().sub(t),o=n.clone().sub(r),a=0,s=i.dot(i)*o.dot(o);return s>0&&(a=i.dot(o)/Math.sqrt(s)),a}},{key:"_kappa",value:function(e,t,n){var r=this._residueGetCAlpha(t),i=this._residueGetCAlpha(e),o=this._residueGetCAlpha(n);if(null===r||null===i||null===o)return 180;var a=this._cosinusAngle(r,i,o,r),s=Math.sqrt(1-a*a);return 180*Math.atan2(s,a)/Math.PI}},{key:"_isHelixStart",value:function(e,t){return this._helixFlags[t][e]===Yt.START||this._helixFlags[t][e]===Yt.START_AND_END}},{key:"_buildBetaSheets",value:function(){for(var e=[],t=0;t<this._complex._chains.length;++t){var n=this._chainLengths[t];if(!(n<=4))for(var r=this._complex._chains[t].getResidues(),i=t;i<this._complex._chains.length;++i){var o=this._chainLengths[i];if(!(o<=4))for(var a=this._complex._chains[i].getResidues(),s=1;s+1<n;++s){var u=r[s],c=1;for(i===t&&(c=s+3);c+1<o;++c){var l=a[c],f=this._testBridge(r,s,a,c);if(f!==qt.NO_BRIDGE){var h=!1,p=!0,d=!1,m=void 0;try{for(var v,g=e[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var y=v.value;if(f===y.type&&u._index===y.i[y.i.length-1]+1){if(f===qt.PARALLEL&&y.j[y.j.length-1]+1===l._index){y.i.push(u._index),y.j.push(l._index),h=!0;break}if(f===qt.ANTI_PARALLEL&&y.j[0]-1===l._index){y.i.push(u._index),y.j.unshift(l._index),h=!0;break}}}}catch(_e){d=!0,m=_e}finally{try{p||null==g.return||g.return()}finally{if(d)throw m}}h||e.push({type:f,i:[u._index],chainI:u.getChain()._index,j:[l._index],chainJ:l.getChain()._index})}}}}}e.sort((function(e,t){return e.chainI<t.chainI||e.chainI===t.chainI&&e.i[0]<t.i[0]?-1:1}));for(var _=0;_<e.length;++_)for(var x=_+1;x<e.length;++x){var b=e[_].i[0],w=e[_].i[e[_].i.length-1],S=e[_].j[0],E=e[_].j[e[_].j.length-1],T=e[x].i[0],A=e[x].i[e[x].i.length-1],M=e[x].j[0],C=e[x].j[e[x].j.length-1];if(!(e[_].type!==e[x].type||this._hasChainBreak(Math.min(b,T),Math.max(w,A))||this._hasChainBreak(Math.min(S,M),Math.max(E,C))||T-w>=6||w>=T&&b<=A)){(e[_].type===qt.PARALLEL?M-E<6&&T-w<3||M-E<3:S-C<6&&T-w<3||S-C<3)&&(e[_].i=e[_].i.concat(e[x].i),e[_].type===qt.PARALLEL?e[_].j=e[_].j.concat(e[x].j):e[_].j=e[x].j.concat(e[_].j),e.splice(x--,1))}}for(var k=new Set,R=0;R<e.length;++R)k.add(e[R]);for(var P=1,L=0;k.size>0;){var O=k.values().next().value;k.delete(O);var I=new Set;I.add(O);var N=void 0;do{N=new Set;var D=!0,F=!1,z=void 0;try{for(var B,j=I.values()[Symbol.iterator]();!(D=(B=j.next()).done);D=!0){var V=B.value,U=!0,G=!1,H=void 0;try{for(var W,q=k.values()[Symbol.iterator]();!(U=(W=q.next()).done);U=!0){var Y=W.value;this._areBridgesLinked(V,Y)&&N.add(Y)}}catch(_e){G=!0,H=_e}finally{try{U||null==q.return||q.return()}finally{if(G)throw H}}}}catch(_e){F=!0,z=_e}finally{try{D||null==j.return||j.return()}finally{if(F)throw z}}var X=!0,$=!1,Z=void 0;try{for(var K,J=N.values()[Symbol.iterator]();!(X=(K=J.next()).done);X=!0)O=K.value,I.add(O),k.delete(O)}catch(_e){$=!0,Z=_e}finally{try{X||null==J.return||J.return()}finally{if($)throw Z}}}while(N.size>0);var Q=!0,ee=!1,te=void 0;try{for(var ne,re=I.values()[Symbol.iterator]();!(Q=(ne=re.next()).done);Q=!0)(O=ne.value).ladder=L,O.sheet=P,O.link=I,++L}catch(_e){ee=!0,te=_e}finally{try{Q||null==re.return||re.return()}finally{if(ee)throw te}}++P}for(var ie=0;ie<e.length;++ie){for(var oe=e[ie],ae=0,se=0,ue=0;ue<oe.i.length;++ue)if(this._betaPartners[oe.i[ue]][0]){ae=1;break}for(var ce=0;ce<oe.j.length;++ce)if(this._betaPartners[oe.j[ce]][0]){se=1;break}var le=Xt.BRIDGE;if(oe.i.length>1&&(le=Xt.STRAND),oe.type===qt.PARALLEL){for(var fe=0,he=0;he<oe.i.length;++he)this._betaPartners[oe.i[he]][ae]={residue:oe.j[fe++],ladder:oe.ladder,parallel:!0};fe=0;for(var pe=0;pe<oe.j.length;++pe)this._betaPartners[oe.j[pe]][se]={residue:oe.i[fe++],ladder:oe.ladder,parallel:!0}}else{for(var de=oe.j.length-1,me=0;me<oe.i.length;++me)this._betaPartners[oe.i[me]][ae]={residue:oe.j[de--],ladder:oe.ladder,parallel:!1};de=oe.i.length-1;for(var ve=0;ve<oe.j.length;++ve)this._betaPartners[oe.j[ve]][se]={residue:oe.i[de--],ladder:oe.ladder,parallel:!1}}for(var ge=oe.i[0];ge<=oe.i[oe.i.length-1];++ge)this._ss[ge]!==Xt.STRAND&&(this._ss[ge]=le,this._sheet[ge]=oe.sheet);for(var ye=oe.j[0];ye<=oe.j[oe.j.length-1];++ye)this._ss[ye]!==Xt.STRAND&&(this._ss[ye]=le,this._sheet[ye]=oe.sheet)}}},{key:"_testBridge",value:function(e,t,n,r){var i=qt.NO_BRIDGE,o=e[t-1]._index,a=e[t]._index,s=e[t+1]._index,u=n[r-1]._index,c=n[r]._index,l=n[r+1]._index,f=this._hbonds.isBond.bind(this._hbonds);return f(s,c)&&f(c,o)||f(l,a)&&f(a,u)?i=qt.PARALLEL:(f(s,u)&&f(l,o)||f(c,a)&&f(a,c))&&(i=qt.ANTI_PARALLEL),i}},{key:"_areBridgesLinked",value:function(e,t){var n=new Set(e.i),r=new Set(e.j),i=!0,o=!1,a=void 0;try{for(var s,u=t.i[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(n.has(c)||r.has(c))return!0}}catch(v){o=!0,a=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var l=!0,f=!1,h=void 0;try{for(var p,d=t.j[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value;if(n.has(m)||r.has(m))return!0}}catch(v){f=!0,h=v}finally{try{l||null==d.return||d.return()}finally{if(f)throw h}}return!1}},{key:"_hasChainBreak",value:function(e,t){for(var n=e+1;n<=t;++n)if(this._complex._residues[n]._sequence!==this._complex._residues[n-1]._sequence+1)return!0;return!1}}]),e}();$t.StructureType=Xt;var Zt=$t.StructureType,Kt=He.Type,Jt=(Ee(Gt={},Zt.HELIX_ALPHA,1),Ee(Gt,Zt.HELIX_PI,3),Ee(Gt,Zt.HELIX_310,5),Gt),Qt=(Ee(Ht={},Zt.BRIDGE,Kt.BRIDGE),Ee(Ht,Zt.TURN,Kt.TURN),Ee(Ht,Zt.BEND,Kt.BEND),Ee(Ht,Zt.LOOP,Kt.COIL),Ht),en=function(){function e(){g(this,e),this._chains=[],this._components=[],this._helices=[],this._sheets=[],this.structures=[],this._residueTypes=Object.create(De.StandardTypes),this._atoms=[],this._residues=[],this._bonds=[],this._sgroups=[],this._molecules=[],this._maskNeedsUpdate=!1,this.metadata={},this.symmetry=[],this.units=[new wt(this)],this._currentUnit=0}return _(e,[{key:"addAtom",value:function(e){var t=this._atoms.length;return this._atoms.push(e),t}},{key:"addSheet",value:function(e){var t=this._sheets.length;return this._sheets.push(e),t}},{key:"addHelix",value:function(e){var t=this._helices.length;return this._helices.push(e),t}},{key:"getAtoms",value:function(){return this._atoms}},{key:"getBonds",value:function(){return this._bonds}},{key:"getAtomCount",value:function(){return this._atoms.length}},{key:"addResidue",value:function(e){var t=this._residues.length;return this._residues.push(e),t}},{key:"updateToFrame",value:function(e){this.forEachChain((function(t){t.updateToFrame(e)}))}},{key:"addResidueType",value:function(e){return this._residueTypes[e]=new De(e,"Unknown","")}},{key:"getResidueCount",value:function(){return this._residues.length}},{key:"getResidues",value:function(){return this._residues}},{key:"getSGroupCount",value:function(){return this._sgroups.length}},{key:"getSGroups",value:function(){return this._sgroups}},{key:"getAtomByFullname",value:function(e){var t=e.split(".");if(3!==t.length)return null;var n=t[0],r=parseInt(t[1],10);if(Number.isNaN(r))return null;var i=t[2].toUpperCase(),o=null;return this.forEachChain((function(e){o||0===e._name.localeCompare(n)&&e.forEachResidue((function(e){o||e._sequence===r&&e.forEachAtom((function(e){o||0===i.localeCompare(e.name)&&(o=e)}))}))})),o}},{key:"addChain",value:function(e){var t=new Ge(this,e);return this._chains.push(t),t}},{key:"getChain",value:function(e){for(var t=0,n=this._chains.length;t<n;++t){var r=this._chains[t];if(r.getName()===e)return r}return null}},{key:"getChainCount",value:function(){return this._chains.length}},{key:"getMolecules",value:function(){return this._molecules}},{key:"getMoleculeCount",value:function(){return this._molecules.length}},{key:"forEachAtom",value:function(e){for(var t=this._atoms,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachBond",value:function(e){for(var t=this._bonds,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachResidue",value:function(e){for(var t=this._residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachChain",value:function(e){for(var t=this._chains,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachMolecule",value:function(e){for(var t=this._molecules,n=t.length,r=0;r<n;++r)e(t[r])}},{key:"forEachSGroup",value:function(e){for(var t=this._sgroups,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachComponent",value:function(e){for(var t=this._components,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"forEachVisibleComponent",value:function(e){for(var t=this._components,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"addBond",value:function(e,t,n,r,i){var o=new ke(e,t,n,r,i);return this._bonds.push(o),o}},{key:"getBondCount",value:function(){return this._bonds.length}},{key:"getResidueType",value:function(e){return this._residueTypes[e]||null}},{key:"getUnifiedSerial",value:function(e,t,n){return t+65536*n+16777216*e}},{key:"splitUnifiedSerial",value:function(e){var t=Math.floor(e/16777216),n=e-16777216*t,r=Math.floor(n/65536);return{chain:t,serial:n-65536*r,iCode:r}}},{key:"_fillCmpEdit",value:function(){var e=this,t=this._components;function n(){var n=new Et(e);return n._index=t.length,t[n._index]=n,n}this.forEachChain((function(e){var t=e._residues,r=t.length;if(!(r<1))for(var i=n(),o=t[0]._index,a=0;a<r;++a){var s=t[a];s._component=i;var u=a===r-1?null:t[a+1];u&&s.isConnected(u)&&s._index===u._index-1||(i.setSubDivs([{start:o,end:s._index}]),u&&(o=u._index,i=n()))}}))}},{key:"_fillCmpNoedit",value:function(){var e=new Et(this);e._index=0;var t=this._residues,n=t.length;if(0!==n){for(var r=[],i=0,o=0;o<n;++o){var a=t[o];a._component=e;var s=o===n-1?null:t[o+1];s&&a.isConnected(s)||(r[r.length]={start:i,end:o},s&&(i=o+1))}e.setSubDivs(r),this._components[e._index]=e}}},{key:"_fillComponents",value:function(e){e?this._fillCmpEdit():this._fillCmpNoedit()}},{key:"getCurrentUnit",value:function(){return this._currentUnit}},{key:"getDefaultBoundaries",value:function(){return this.units[0].getBoundaries()}},{key:"getBoundaries",value:function(){return this.units[this._currentUnit].getBoundaries()}},{key:"getTransforms",value:function(){return this.units[this._currentUnit].getTransforms()}},{key:"getSelector",value:function(){return this.units[this._currentUnit].getSelector()}},{key:"resetCurrentUnit",value:function(){this._currentUnit=0,this.setCurrentUnit(1)}},{key:"setCurrentUnit",value:function(e){return null!==e&&void 0!==e&&e!==this._currentUnit&&e>=0&&e<this.units.length&&(this._currentUnit=e,!0)}},{key:"_computeBounds",value:function(){for(var e=this.units,t=0,n=e.length;t<n;++t)e[t].computeBoundaries()}},{key:"onAtomPositionChanged",value:function(){this.forEachChain((function(e){e._finalize()})),this.forEachComponent((function(e){e.update()})),this._computeBounds(),this._finalizeBonds(),this.forEachSGroup((function(e){e._rebuildSGroupOnAtomChange()}))}},{key:"update",value:function(){this._maskNeedsUpdate&&(this.updateStructuresMask(),this._maskNeedsUpdate=!1)}},{key:"_finalizeBonds",value:function(){for(var e=this.getBonds(),t=e.length,n=0;n<t;++n)e[n]._index=n}},{key:"finalize",value:function(e){e=e||{};var t,n,r=this._bonds;for(t=r.length-1;t>=0;t--){var i=r[t];null===i._left||null===i._right?r.splice(t,1):(i._left.bonds.push(i),i._right.bonds.push(i))}var o=this._residues;for(t=0,n=o.length;t<n;++t)o[t]._finalize();this.forEachChain((function(e){e._finalize()}));var a=this.units;for(t=0,n=a.length;t<n;++t)a[t].finalize();this.setCurrentUnit(1);var s={};for(t=0,n=o.length;t<n;++t){var u=o[t];s[this.getUnifiedSerial(u.getChain().getName().charCodeAt(0),u.getSequence(),u.getICode().charCodeAt(0))]=u}var c=this.structures;for(t=0,n=c.length;t<n;++t)c[t]._finalize(e.serialAtomMap,s,this);var l=this._helices;for(t=0,n=l.length;t<n;++t)l[t]._finalize(e.serialAtomMap,s,this);var f=this._sheets;for(t=0,n=f.length;t<n;++t)f[t]._finalize(e.serialAtomMap,s,this);this._computeBounds();var h=this._atoms;for(t=0,n=h.length;t<n;++t){h[t].index=t}if(e.needAutoBonding){var p=new Mt(this);p.build(),p.destroy()}var d=this._chains;for(t=0,n=d.length;t<n;++t)d[t]._index=t;for(t=0,n=o.length;t<n;++t)o[t]._index=t;for(t=0,n=h.length;t<n;++t){var m=h[t];if(m.flags&Te.Flags.HYDROGEN&&1===m.bonds.length){var v=m.bonds[0];(v._left!==m&&v._left||v._right).flags&Te.Flags.CARBON&&(m.flags|=Te.Flags.NONPOLARH)}}this._finalizeBonds(),this._fillComponents(e.enableEditing);var g=new Bt(this);g.markCycles(),e.detectAromaticLoops&&g.detectCycles(),this._finalizeMolecules()}},{key:"_finalizeMolecules",value:function(){for(var e=0;e<this._molecules.length;e++)for(var t=this._molecules[e],n=t.residues.length,r=0;r<n;r++){t.residues[r]._molecule=t}}},{key:"updateStructuresMask",value:function(){var e=function(e){return e.collectMask()};this.forEachResidue(e),this.forEachChain(e),this.forEachMolecule(e)}},{key:"countAtomsByMask",value:function(e){var t=0;return this.forEachAtom((function(n){0!==(n.mask&e)&&t++})),t}},{key:"getNumAtomsBySelector",value:function(e){var t=0;return this.forEachAtom((function(n){e.includesAtom(n)&&t++})),t}},{key:"resetAtomMask",value:function(e){this.forEachAtom((function(t){t.mask=e}))}},{key:"markAtoms",value:function(e,t){var n=t,r=~n,i=0,o=bt.keyword("And")(e,this.getSelector());return this.forEachAtom((function(e){o.includesAtom(e)?(e.mask|=n,i++):e.mask&=r})),this._maskNeedsUpdate=!0,i}},{key:"markAtomsAdditionally",value:function(e,t){var n=t,r=0;return this.forEachAtom((function(i){e.includesAtom(i)&&(i.mask&t)!==t&&(i.mask|=n,r++)})),r}},{key:"clearAtomBits",value:function(e){var t=~e;this.forEachAtom((function(e){e.mask&=t}));var n=function(e){e._mask&=t};this.forEachAtom(n),this.forEachResidue(n),this.forEachChain(n),this.forEachMolecule(n)}},{key:"getAtomNames",value:function(){if(this.hasOwnProperty("_atomNames"))return this._atomNames;var e={};return this.forEachAtom((function(t){e[t.name]=1})),this._atomNames=Object.keys(e),this._atomNames}},{key:"getElements",value:function(){if(this.hasOwnProperty("_elements"))return this._elements;var e={};return this.forEachAtom((function(t){e[t.element.name]=1})),this._elements=Object.keys(e),this._elements}},{key:"getResidueNames",value:function(){if(this.hasOwnProperty("_residueNames"))return this._residueNames;var e={};return this.forEachResidue((function(t){e[t._type._name]=1})),this._residueNames=Object.keys(e),this._residueNames}},{key:"getChainNames",value:function(){if(this.hasOwnProperty("_chainNames"))return this._chainNames;var e={};return this.forEachChain((function(t){e[t._name]=1})),this._chainNames=Object.keys(e),this._chainNames}},{key:"getAltLocNames",value:function(){if(this.hasOwnProperty("_altlocNames"))return this._altlocNames;var e={};return this.forEachAtom((function(t){e[String.fromCharCode(t.location)]=1})),this._altlocNames=Object.keys(e),this._altlocNames}},{key:"getVoxelWorld",value:function(){if(!this.hasOwnProperty("_voxelWorld"))try{this._voxelWorld=new Ut(this.getDefaultBoundaries().boundingBox,new o.Vector3(5,5,5)),this._voxelWorld.addAtoms(this)}catch(e){j.warn("Unable to create voxel world"),this._voxelWorld=null}return this._voxelWorld}},{key:"addElement",value:function(e,t,n,r){for(var i=e.length,o=0;o<i;++o){var a=e[o];r(a,n),t.push(a)}}},{key:"joinComplexes",value:function(e){this._chains=[],this._components=[],this._helices=[],this._sheets=[],this.structures=[],this._atoms=[],this._residues=[],this._bonds=[],this._sgroups=[];var t=this,n=0,r=0,i=0,o=0,a=0;function s(e,t){e.serial+=t,e.index+=t}function u(e,t){e._index+=t}function c(e,t){e._index+=t}function l(e,n){e._complex=t,e._index+=n}function f(e,n){e._complex=t,e._index+=n}function h(){}for(var p=0;p<e.length;++p){var d=e[p];for(var m in this.addElement(d._atoms,this._atoms,n,s),this.addElement(d._bonds,this._bonds,r,u),this.addElement(d._residues,this._residues,i,c),this.addElement(d._chains,this._chains,o,l),this.addElement(d._sheets,this._sheets,0,h),this.addElement(d._helices,this._helices,0,h),this.addElement(d._sgroups,this._sgroups,0,h),this.addElement(d._components,this._components,a,f),this.addElement(d.structures,this.structures,0,h),d._residueTypes)d._residueTypes.hasOwnProperty(m)&&(this._residueTypes[m]=d._residueTypes[m]);n+=d._atoms.length,r+=d._bonds.length,i+=d._residues.length,o+=d._chains.length,a+=d._components.length}this._computeBounds()}},{key:"dssp",value:function(){for(var e,t,n=new $t(this),r=this.structures=[],i=this._helices=[],o=this._sheets=[],a=function(e){var t=o[e];return t||(t=o[e]=new Qe(String(e),0)),t},s=0,u=null,c=0,l=this._residues.length;c<l;++c){var f=n._ss[c],h=this._residues[c],p=n._sheet[c];if(f!==e||p!==t){var d=Jt[f],m=Qt[f];if(f===Zt.STRAND){var v=a(p);u=new Je(v,h,h,0,null,null),v.addStrand(u)}else void 0!==d?(s++,u=new $e(d,h,h,s,String(s),"",1),i.push(u)):u=void 0!==m?new He(m,h,h):null;u&&r.push(u),h._secondary=u,e=f,t=p}else h._secondary=u,u&&(u.term=h),u instanceof $e&&u.length++}this._sheets=o.filter((function(e){return!0}))}}]),e}();function tn(e){var t=2;for(e=e-1>>1;e;)t<<=1,e>>=1;return t}en.prototype.id="Complex",en.prototype.name="";var nn=function(){function e(t,n,r,i,o,a){if(g(this,e),this._box=r.clone(),this._dimVec=Math.max(Math.floor(i||1),1),this._volumeInfo=a,n instanceof Array){var s=c(n,3);this._dimX=s[0],this._dimY=s[1],this._dimZ=s[2]}else this._dimX=n.x,this._dimY=n.y,this._dimZ=n.z;switch(this._dimX=Math.max(Math.floor(this._dimX),1),this._dimY=Math.max(Math.floor(this._dimY),1),this._dimZ=Math.max(Math.floor(this._dimZ),1),this._rowElements=this._dimVec*this._dimX,this._planeElements=this._rowElements*this._dimY,this._totalElements=this._planeElements*this._dimZ,this._data=o||Q.allocateTyped(t,this._totalElements),this._dimVec){case 1:break;case 2:this.getValue=function(e,t,n){var r=e*this._dimVec+t*this._rowElements+n*this._planeElements;return[this._data[r],this._data[r+1]]},this.setValue=function(e,t,n,r,i){var o=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[o]=r,this._data[o+1]=i},this.addValue=function(e,t,n,r,i){var o=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[o]+=r,this._data[o+1]+=i};break;case 3:this.getValue=function(e,t,n){var r=e*this._dimVec+t*this._rowElements+n*this._planeElements;return[this._data[r],this._data[r+1],this._data[r+2]]},this.setValue=function(e,t,n,r,i,o){var a=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[a]=r,this._data[a+1]=i,this._data[a+2]=o},this.addValue=function(e,t,n,r,i,o){var a=e*this._dimVec+t*this._rowElements+n*this._planeElements;this._data[a]+=r,this._data[a+1]+=i,this._data[a+2]+=o};break;default:throw new Error("Volume: invalid vector dimension")}}return _(e,[{key:"getValue",value:function(e,t,n){return this._data[e+t*this._rowElements+n*this._planeElements]}},{key:"setValue",value:function(e,t,n,r){this._data[e+t*this._rowElements+n*this._planeElements]=r}},{key:"addValue",value:function(e,t,n,r){this._data[e+t*this._rowElements+n*this._planeElements]+=r}},{key:"getDimensions",value:function(){return[this._dimX,this._dimY,this._dimZ]}},{key:"getBox",value:function(){return this._box}},{key:"getVolumeInfo",value:function(){return this._volumeInfo}},{key:"getCellSize",value:function(){var e=new o.Vector3;this._box.getSize(e);var t=new o.Vector3;return t.x=this._dimX>1?e.x/(this._dimX-1):0,t.y=this._dimY>1?e.y/(this._dimY-1):0,t.z=this._dimZ>1?e.z/(this._dimZ-1):0,t}},{key:"computeGradient",value:function(){if(1!==this._dimVec)return null;var t=new e(Float32Array,[this._dimX,this._dimY,this._dimZ],this._box,3),n=this.getCellSize(),r=new o.Vector3(-.5/n.x,-.5/n.y,-.5/n.z);function i(e,t,n){return Math.min(n,Math.max(t,e))}var a=this._dimX,s=this._dimY,u=this._dimZ,c=this._data;function l(e,t,n){return c[n*a*s+t*a+e]}for(var f=0;f<u;++f)for(var h=i(f-1,0,u-1),p=i(f+1,0,u-1),d=0;d<s;++d)for(var m=i(d-1,0,s-1),v=i(d+1,0,s-1),g=0;g<a;++g){var y=i(g-1,0,a-1),_=i(g+1,0,a-1);t.setValue(g,d,f,(l(_,d,f)-l(y,d,f))*r.x,(l(g,v,f)-l(g,m,f))*r.y,(l(g,d,p)-l(g,d,h))*r.z)}return t}},{key:"normalize",value:function(){for(var e=this._data,t=e[0],n=e[0],r=1;r<e.length;++r)t=Math.min(t,e[r]),n=Math.max(n,e[r]);var i=1/(n-t);if(0!==i)for(var o=0;o<e.length;++o)e[o]=i*(e[o]-t)}},{key:"getTiledTextureStride",value:function(){return[this._dimX+2,this._dimY+2]}},{key:"buildTiledTexture",value:function(){var e=Math.ceil(Math.sqrt(this._dimZ*this._dimY/this._dimX)),t=e*(this._dimX+2)-1;t=tn(t),e=Math.floor(t/(this._dimX+2));var n=Math.ceil(this._dimZ/e),r=n*(this._dimY+2)-1;r=tn(r);for(var i,a,s=new Uint8Array(t*r),u=0;u<n;++u)for(var c=0;c<this._dimY;++c){i=u*e*this._planeElements+c*this._rowElements,a=t*(u*(this._dimY+2)+c);for(var l=0;l<e;++l){for(var f=0;f<this._dimX;++f)s[a++]=255*this._data[i++];s[a++]=255*this._data[i-1],l<e-1&&(i+=this._planeElements-this._rowElements,s[a++]=255*this._data[i])}}for(var h=0;h<n;++h){a=(i=t*(h*(this._dimY+2)+this._dimY-1))+t;for(var p=0;p<t;++p)s[a++]=s[i++];if(h<n-1){a=(i=t*(h+1)*(this._dimY+2))-t;for(var d=0;d<t;++d)s[a++]=s[i++]}}var m=new o.DataTexture(s,t,r,o.LuminanceFormat,o.UnsignedByteType,o.UVMapping,o.ClampToEdgeWrapping,o.ClampToEdgeWrapping,o.LinearFilter,o.LinearFilter);return m.needsUpdate=!0,m}},{key:"getData",value:function(){return this._data}},{key:"getDirectIdx",value:function(e,t,n){return e*this._dimVec+t*this._rowElements+n*this._planeElements}},{key:"getStrideX",value:function(){return this._dimVec}},{key:"getStrideY",value:function(){return this._rowElements}},{key:"getStrideZ",value:function(){return this._planeElements}}]),e}();nn.prototype.id="Volume";var rn={Atom:Te,Element:Ae,Bond:ke,Residue:Ne,ResidueType:De,Chain:Ge,Helix:$e,Strand:Je,Sheet:Qe,SGroup:et,Assembly:St,Complex:en,Volume:nn,VoxelWorld:Ut,selectors:bt,Molecule:function(){function e(t,n,r){g(this,e),this.complex=t,this.name=n||"",this.residues=[],this.mask=1,this.index=r||-1}return _(e,[{key:"forEachResidue",value:function(e){for(var t=this.residues,n=0,r=t.length;n<r;++n)e(t[n])}},{key:"collectMask",value:function(){for(var e=4294967295,t=this.residues,n=0,r=t.length;n<r;++n)e&=t[n]._mask;this.mask=e}}]),e}()},on=function(e){function t(e){var n;g(this,t),n=C(this,k(t).call(this));var r=M(n);return n._element=e,n._element.style.position="absolute",n.addEventListener("removed",(function(){null!==r._element.parentNode&&r._element.parentNode.removeChild(r._element)})),n}return P(t,e),_(t,[{key:"getElement",value:function(){return this._element}},{key:"setTransparency",value:function(e){var t=this.getElement();if(null!==t)if(1!==e){t.style.display="inline";var n=1-e,r=n.toString(),i=100*n;t.style.opacity=r,t.style.filter="alpha(opacity=".concat(i,")")}else t.style.display="none"}},{key:"clone",value:function(){var e=new t(this._element);return e.copy(this),e}}]),t}(o.Object3D),an=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"raycast",value:function(e,t){if(this.visible)for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].raycast(e,t)}},{key:"enableSubset",value:function(e,t){for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].enableSubset&&n[r].enableSubset(e,t)}},{key:"disableSubset",value:function(e,t){for(var n=this.children,r=0,i=n.length;r<i;++r)n[r].disableSubset&&n[r].disableSubset(e,t)}},{key:"isEmpty",value:function(){return 0===this.children.length}},{key:"updateToFrame",value:function(e){for(var t=this.children,n=0,r=t.length;n<r;++n)t[n].updateToFrame&&t[n].updateToFrame(e)}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=r.length;i<o;++i)r[i].getSubset&&Array.prototype.push.apply(n,r[i].getSubset(e,t));return n}}]),t}(o.Group),sn="uniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\n\r\nattribute vec2 uv;\r\nattribute vec3 position;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n",un={precision:"mediump",init:function(e){this.precision=e.capabilities.getMaxPrecision("highp")}},cn=new Uint8Array([24,52,0,254,145,0,122,0,0,7,170,0,34,214,0,173,8,0,86,249,0,160,4,0,226,46,0,224,211,0,3,157,0,174,247,0,12,182,0,220,216,0,1,109,0,253,154,0]),ln=o.RepeatWrapping,fn=o.RepeatWrapping,hn=o.NearestFilter,pn=o.NearestFilter,dn=o.UVMapping,mn=new o.DataTexture(cn,4,4,o.RGBFormat,o.UnsignedByteType,dn,ln,fn,pn,hn,1);mn.needsUpdate=!0;var vn={noiseWidth:4,noiseHeight:4,noiseTexture:mn};function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yn=[new o.Vector2(-.541978,.840393),new o.Vector2(.125533,-.992089),new o.Vector2(.374329,.927296),new o.Vector2(-.105475,.994422)],_n=o.UniformsUtils.merge([o.UniformsLib.fog,o.UniformsLib.lights,{diffuse:{value:new o.Color(15658734)},opacity:{value:1},specular:{type:"c",value:new o.Color(1118481)},shininess:{type:"f",value:30},fixedColor:{type:"c",value:new o.Color(16777215)},zOffset:{type:"f",value:0},zClipValue:{type:"f",value:0},clipPlaneValue:{type:"f",value:0},invModelViewMatrix:{type:"4fv",value:new o.Matrix4},world2colorMatrix:{type:"4fv",value:new o.Matrix4},dashedLineSize:{type:"f",value:.1},dashedLinePeriod:{type:"f",value:.2},projMatrixInv:{type:"4fv",value:new o.Matrix4},viewport:{type:"v2",value:new o.Vector2},lineWidth:{type:"f",value:2},fogAlpha:{type:"f",value:1},samplesKernel:{type:"v2v",value:null},noiseTex:{type:"t",value:null},noiseTexelSize:{type:"v2",value:null},srcTexelSize:{type:"v2",value:null}}]),xn=["shininess","opacity","zOffset","diffuse","specular","fixedColor","zClipCoef","zClipValue","clipPlaneValue","world2colorMatrix","dashedLineSize","dashedLinePeriod","projMatrixInv","viewport","lineWidth","fogAlpha","samplesKernel","noiseTex","noiseTexelSize","srcTexelSize"];function bn(e){o.RawShaderMaterial.call(this),this.fog=!0,this.instancedPos=!1,this.instancedMatrix=!1,this.attrColor=!1,this.attrColor2=!1,this.attrAlphaColor=!1,this.overrideColor=!1,this.sphereSprite=!1,this.cylinderSprite=!1,this.zClip=!1,this.clipPlane=!1,this.fakeOpacity=!1,this.prepassTransparancy=!1,this.colorFromPos=!1,this.shadowmap=!1,this.shadowmapType="random",this.colorFromDepth=!1,this.dashedLine=!1,this.transparent=!0,this.thickLine=!1,this.fogTransparent=!1,this.normalsToGBuffer=!1,this.toonShading=!1,this.uberOptions=Object.create(bn.prototype.uberOptions),o.RawShaderMaterial.prototype.setValues.call(this,{uniforms:o.UniformsUtils.clone(_n),vertexShader:this.precisionString()+"float INSTANCED_SPRITE_OVERSCALE = 1.3;\r\n\r\nattribute vec3 normal;\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  varying vec3 viewNormal;\r\n#endif\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  varying vec3 vNormal;\r\n#endif\r\n\r\n#ifdef THICK_LINE\r\n  attribute vec4 position; // W contains vert pos or neg offset\r\n#else\r\n  attribute vec3 position;\r\n#endif\r\n\r\nvarying vec3 vWorldPosition;\r\nvarying vec3 vViewPosition;\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  attribute float alphaColor;\r\n  varying float alphaCol;\r\n#endif\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec3 vDirectionalShadowNormal[ NUM_DIR_LIGHTS ];\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  attribute vec3 color;\r\n  varying vec3 vColor;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  attribute vec3 color2;\r\n  varying vec3 vColor2;\r\n  attribute vec2 uv;\r\n  #ifndef CYLINDER_SPRITE\r\n    varying vec2 vUv;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_POS\r\n  attribute vec4 offset;\r\n  #ifdef SPHERE_SPRITE\r\n    varying vec4 instOffset;\r\n  varying vec4 spritePosEye;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  attribute vec4 matVector1;\r\n  attribute vec4 matVector2;\r\n  attribute vec4 matVector3;\r\n  attribute vec4 invmatVector1;\r\n  attribute vec4 invmatVector2;\r\n  attribute vec4 invmatVector3;\r\n\r\n  #ifdef CYLINDER_SPRITE\r\n    varying vec4 matVec1;\r\n    varying vec4 matVec2;\r\n    varying vec4 matVec3;\r\n    varying vec4 invmatVec1;\r\n    varying vec4 invmatVec2;\r\n    varying vec4 invmatVec3;\r\n  #endif\r\n#endif\r\n\r\nuniform mat4 modelViewMatrix; // optional\r\nuniform mat4 projectionMatrix; // optional\r\nuniform mat3 normalMatrix; // optional\r\nuniform mat4 modelMatrix; // optional\r\n\r\n#ifdef DASHED_LINE\r\n  attribute float lineDistance;\r\n  varying float vLineDistance;\r\n#endif\r\n\r\n#ifdef THICK_LINE\r\n  attribute vec3 direction;\r\n  uniform mat4 projMatrixInv;\r\n  uniform vec2 viewport;\r\n  uniform float lineWidth;\r\n\r\n  vec4 transform(vec4 coord){\r\n    return projectionMatrix * modelViewMatrix * coord;\r\n  }\r\n\r\n  vec2 project(vec4 device){\r\n    vec3 device_normal = device.xyz/device.w;\r\n    vec2 clip_pos = (device_normal*0.5+0.5).xy;\r\n    return clip_pos * viewport;\r\n  }\r\n\r\n  vec4 unproject(vec2 screen, float z, float w){\r\n    vec2 clip_pos = screen/viewport;\r\n    vec2 device_normal = clip_pos*2.0-1.0;\r\n    return vec4(device_normal*w, z, w);\r\n  }\r\n#endif\r\n\r\n\r\n/////////////////////////////////////////// Main ///////////////////////////////////////////////\r\nvoid main() {\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  alphaCol = alphaColor;\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  vec3 objectNormal = vec3(\r\n    dot(normal, matVector1.xyz),\r\n    dot(normal, matVector2.xyz),\r\n    dot(normal, matVector3.xyz));\r\n#else\r\n  vec3 objectNormal = vec3( normal );\r\n#endif\r\n\r\nvec3 transformedNormal = normalMatrix * objectNormal;\r\n\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  vNormal = normalize(transformedNormal);\r\n#endif\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  viewNormal = normalize(mat3(modelViewMatrix)*objectNormal);\r\n#endif\r\n\r\n  vec4 localPos = vec4(position.xyz, 1.0);\r\n  vec4 worldPos = modelMatrix * localPos;\r\n  vec4 mvPosition = modelViewMatrix * localPos;\r\n\r\n// make thick line offset\r\n#ifdef THICK_LINE\r\n   // get screen pos\r\n   vec4 dPos = transform(vec4(position.xyz, 1.0));\r\n   vec2 sPos = project(dPos);\r\n   // move pos forward\r\n   vec3 position2 = position.xyz + direction.xyz * 0.5;\r\n   // get screen offset pos\r\n   vec4 dPos2 = transform(vec4(position2.xyz, 1.0));\r\n   vec2 sPos2 = project(dPos2);\r\n   // screen line direction\r\n   vec2 sDir = normalize(sPos2 - sPos);\r\n   // vertex offset (orthogonal to line direction)\r\n   vec2 offset1 = vec2(-sDir.y, sDir.x);\r\n   // move screen vertex\r\n   vec2 newPos = sPos + offset1 * position.w * lineWidth;\r\n   // get moved pos in view space\r\n   vec4 dNewPos =  unproject(newPos, dPos.z, dPos.w);\r\n   mvPosition.xyz = (projMatrixInv * dNewPos).xyz;\r\n#endif // THICK_LINE\r\n\r\n#ifdef INSTANCED_POS\r\n  #ifdef SPHERE_SPRITE\r\n    instOffset = offset;\r\n\r\n    vec4 posEye = modelViewMatrix * vec4( offset.xyz, 1.0 );\r\n    float scale = length(modelViewMatrix[0]);\r\n    mvPosition = posEye + vec4( position.xyz * offset.w * scale * INSTANCED_SPRITE_OVERSCALE, 0.0 );\r\n    posEye.w = offset.w * scale;\r\n\r\n    spritePosEye = posEye;\r\n #else\r\n    localPos = vec4( offset.xyz + position.xyz * offset.w, 1.0 );\r\n    worldPos = modelMatrix * localPos;\r\n    mvPosition = modelViewMatrix * localPos;\r\n  #endif\r\n#endif\r\n\r\n#ifdef INSTANCED_MATRIX\r\n  #ifdef CYLINDER_SPRITE\r\n    matVec1 = matVector1;\r\n    matVec2 = matVector2;\r\n    matVec3 = matVector3;\r\n    invmatVec1 = invmatVector1;\r\n    invmatVec2 = invmatVector2;\r\n    invmatVec3 = invmatVector3;\r\n\r\n    // calculate eye coords of cylinder endpoints\r\n    vec4 v = vec4(0, -0.5, 0, 1);\r\n    vec4 p1 = modelViewMatrix * vec4(dot(v, matVector1), dot(v, matVector2), dot(v, matVector3), 1.0);\r\n    v.y = 0.5;\r\n    vec4 p2 = modelViewMatrix * vec4(dot(v, matVector1), dot(v, matVector2), dot(v, matVector3), 1.0);\r\n\r\n    // sprite is placed at the center of cylinder\r\n    vec4 posEye;\r\n    posEye.xyz = mix(p1.xyz, p2.xyz, 0.5);\r\n    posEye.w = 1.0;\r\n\r\n    // basic sprite size at screen plane (covers only cylinder axis)\r\n    vec2 spriteSizeScreen = abs(p2.xy / p2.z - p1.xy / p1.z);\r\n\r\n    // cylinder radius in eye space\r\n    float rad = length(modelViewMatrix[0]) * length(vec3(matVector1.x, matVector2.x, matVector3.x));\r\n\r\n    // full sprite size in eye coords\r\n    float minZ = min(abs(p1.z), abs(p2.z));\r\n    vec2 spriteSize = INSTANCED_SPRITE_OVERSCALE  * abs(posEye.z) *\r\n      (spriteSizeScreen + 2.0 * rad / minZ);\r\n\r\n    mvPosition = posEye + vec4( position.xy * 0.5 * spriteSize, 0, 0 );\r\n  #else\r\n    localPos = vec4(dot(localPos, matVector1), dot(localPos, matVector2), dot(localPos, matVector3), 1.0);\r\n    worldPos = modelMatrix * localPos;\r\n    mvPosition = modelViewMatrix * localPos;\r\n  #endif\r\n#endif\r\n\r\n  gl_Position = projectionMatrix * mvPosition;\r\n\r\n  vWorldPosition = worldPos.xyz;\r\n  vViewPosition = - mvPosition.xyz;\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t  vec4 worldPosition;\r\n\t  // see THREE.WebGLProgram.unrollLoops\r\n\t  #pragma unroll_loop\r\n\t  for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n      vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * vec4(vWorldPosition, 1.0);\r\n      vDirectionalShadowNormal[ i ] = (directionalShadowMatrix[ i ] * (modelMatrix * vec4(objectNormal, 0.0))).xyz;\r\n\t  }\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  vColor = color.xyz;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  vColor2 = color2;\r\n  #ifndef CYLINDER_SPRITE\r\n    vUv = uv;\r\n  #endif\r\n#endif\r\n\r\n#ifdef DASHED_LINE\r\n  vLineDistance = lineDistance;\r\n#endif\r\n}\r\n",fragmentShader:this.precisionString()+"#if defined (NORMALS_TO_G_BUFFER)\r\n  #define fragColor gl_FragData[0]\r\n#else\r\n  #define fragColor gl_FragColor\r\n#endif\r\n\r\n#ifdef ATTR_ALPHA_COLOR\r\n  varying float alphaCol;\r\n#endif\r\n\r\n#ifdef COLOR_FROM_POS\r\n  uniform mat4 world2colorMatrix;\r\n#endif\r\n\r\n#if defined(USE_LIGHTS) && defined(SHADOWMAP)\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec3 vDirectionalShadowNormal[ NUM_DIR_LIGHTS ];\r\n\r\n    #ifdef SHADOWMAP_PCF_RAND\r\n      // We use 4 instead uniform variable or define because this value is used in for(... i < value; ...) with\r\n      // unroll_loop and unroll_loop has pattern:\r\n      // /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g\r\n      uniform vec2 samplesKernel[4]; // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n      uniform sampler2D noiseTex;\r\n      uniform vec2 noiseTexelSize;\r\n      uniform vec2 srcTexelSize;\r\n      uniform mat4 projectionMatrix;\r\n    #endif\r\n\t#endif\r\n#endif\r\n\r\n#ifdef ATTR_COLOR\r\n  varying vec3 vColor;\r\n#endif\r\n\r\n#ifdef ATTR_COLOR2\r\n  varying vec3 vColor2;\r\n  #ifndef CYLINDER_SPRITE\r\n    varying vec2 vUv;\r\n  #endif\r\n#endif\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\nuniform vec3 fixedColor;\r\nuniform float opacity;\r\nuniform float zClipValue;\r\nuniform float clipPlaneValue;\r\n\r\n#ifdef NORMALS_TO_G_BUFFER\r\n  varying vec3 viewNormal;\r\n#endif\r\n\r\n#define PI 3.14159265359\r\n#define RECIPROCAL_PI 0.31830988618\r\n#define saturate(a) clamp( a, 0.0, 1.0 )\r\n\r\n#ifdef USE_FOG\r\n  uniform vec3 fogColor;\r\n  uniform float fogAlpha;\r\n  uniform float fogNear;\r\n  uniform float fogFar;\r\n#endif\r\n\r\nvarying vec3 vWorldPosition; // world position of the pixel (invalid when INSTANCED_SPRITE is defined)\r\nvarying vec3 vViewPosition;\r\n\r\n#if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n  varying vec3 vNormal;\r\n#endif\r\n\r\n/////////////////////////////////////////// ZSprites ////////////////////////////////////////////////\r\n#ifdef SPHERE_SPRITE\r\n  varying vec4 spritePosEye;\r\n#endif\r\n\r\n#if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n  uniform float zOffset;\r\n  uniform mat4 projectionMatrix;\r\n\r\n  float calcDepthForSprites(vec4 pixelPosEye, float zOffset, mat4 projMatrix) {\r\n    vec4 pixelPosScreen = projMatrix * pixelPosEye;\r\n    return 0.5 * (pixelPosScreen.z / pixelPosScreen.w + 1.0) + zOffset;\r\n  }\r\n#endif\r\n\r\n#ifdef SPHERE_SPRITE\r\n  varying vec4 instOffset;\r\n  uniform mat4 modelMatrix;\r\n  uniform mat4 modelViewMatrix;\r\n  uniform mat4 invModelViewMatrix;\r\n  uniform mat3 normalMatrix;\r\n\r\n  float intersect_ray_sphere(in vec3 origin, in vec3 ray, out vec3 point) {\r\n\r\n    // intersect XZ-projected ray with circle\r\n    float a = dot(ray, ray);\r\n    float b = dot(ray, origin);\r\n    float c = dot(origin, origin) - 1.0;\r\n    float det = b * b - a * c;\r\n    if (det < 0.0) return -1.0;\r\n    float t1 = (-b - sqrt(det)) / a;\r\n    float t2 = (-b + sqrt(det)) / a;\r\n\r\n    // calculate both intersection points\r\n    vec3 p1 = origin + ray * t1;\r\n    vec3 p2 = origin + ray * t2;\r\n\r\n    // choose nearest point\r\n    if (t1 >= 0.0) {\r\n      point = p1;\r\n      return t1;\r\n    }\r\n    if (t2 >= 0.0) {\r\n      point = p2;\r\n      return t2;\r\n    }\r\n\r\n    return -1.0;\r\n  }\r\n\r\n  float get_sphere_point(in vec3 pixelPosEye, out vec3 point) {\r\n    // transform camera pos into sphere local coords\r\n    vec4 v = invModelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\r\n    vec3 origin = (v.xyz - instOffset.xyz) / instOffset.w;\r\n\r\n    // transform (camera -> pixel) ray into cylinder local coords\r\n    v = invModelViewMatrix * vec4(pixelPosEye, 0.0);\r\n    vec3 ray = normalize(v.xyz);\r\n\r\n    return intersect_ray_sphere(origin, ray, point);\r\n  }\r\n#endif\r\n\r\n#ifdef CYLINDER_SPRITE\r\n  varying vec4 matVec1;\r\n  varying vec4 matVec2;\r\n  varying vec4 matVec3;\r\n  varying vec4 invmatVec1;\r\n  varying vec4 invmatVec2;\r\n  varying vec4 invmatVec3;\r\n\r\n  uniform mat4 modelMatrix;\r\n  uniform mat4 modelViewMatrix;\r\n  uniform mat4 invModelViewMatrix;\r\n  uniform mat3 normalMatrix;\r\n\r\n  float intersect_ray_cylinder(in vec3 origin, in vec3 ray, out vec3 point) {\r\n\r\n    // intersect XZ-projected ray with circle\r\n    float a = dot(ray.xz, ray.xz);\r\n    float b = dot(ray.xz, origin.xz);\r\n    float c = dot(origin.xz, origin.xz) - 1.0;\r\n    float det = b * b - a * c;\r\n    if (det < 0.0) return -1.0;\r\n    float t1 = (-b - sqrt(det)) / a;\r\n    float t2 = (-b + sqrt(det)) / a;\r\n\r\n    // calculate both intersection points\r\n    vec3 p1 = origin + ray * t1;\r\n    vec3 p2 = origin + ray * t2;\r\n\r\n    // choose nearest point\r\n    float halfHeight = 0.5;\r\n    if (t1 >= 0.0 && p1.y >= -halfHeight && p1.y <= halfHeight) {\r\n      point = p1;\r\n      return t1;\r\n    }\r\n    if (t2 >= 0.0 && p2.y >= -halfHeight && p2.y <= halfHeight) {\r\n      point = p2;\r\n      return t2;\r\n    }\r\n\r\n    return -1.0;\r\n  }\r\n\r\n  float get_cylinder_point(in vec3 pixelPosEye, out vec3 point) {\r\n    // transform camera pos into cylinder local coords\r\n    vec4 v = invModelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\r\n    vec3 origin = vec3(\r\n      dot(v, invmatVec1),\r\n      dot(v, invmatVec2),\r\n      dot(v, invmatVec3));\r\n\r\n    // transform (camera -> pixel) ray into cylinder local coords\r\n    v = invModelViewMatrix * vec4(pixelPosEye, 0.0);\r\n    vec3 ray = vec3(\r\n      dot(v, invmatVec1),\r\n      dot(v, invmatVec2),\r\n      dot(v, invmatVec3));\r\n    ray = normalize(ray);\r\n\r\n    return intersect_ray_cylinder(origin, ray, point);\r\n  }\r\n#endif\r\n\r\n///////////////////////////////////// Pack and unpack ///////////////////////////////////////////////\r\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\r\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\r\n\r\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\r\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\r\n\r\n\r\nconst float ShiftRight8 = 1. / 256.;\r\n\r\nvec4 packDepthToRGBA( const in float v ) {\r\n  vec4 r = vec4( fract( v * PackFactors ), v );\r\n  r.yzw -= r.xyz * ShiftRight8; // tidy overflow\r\n  return r * PackUpscale;\r\n}\r\n\r\nfloat unpackRGBAToDepth( const in vec4 v ) {\r\n  return dot( v, UnpackFactors );\r\n}\r\n\r\n////////////////////////////////////////// All Lighting /////////////////////////////////////////////////\r\n#ifdef TOON_SHADING\r\n  #define LOW_TOON_BORDER 0.0\r\n  #define MEDIUM_TOON_BORDER 0.7\r\n  #define HIGH_TOON_BORDER 1.0\r\n\r\n  #define MEDIUM_TOON_RANGE 0.5\r\n  #define HIGH_TOON_RANGE 0.95\r\n#endif\r\n#if defined(USE_LIGHTS) && NUM_DIR_LIGHTS > 0\r\n  struct ReflectedLight {\r\n    vec3 directDiffuse;\r\n    vec3 directSpecular;\r\n    vec3 indirectDiffuse;\r\n  };\r\n\r\n  struct BlinnPhongMaterial {\r\n    vec3  diffuseColor;\r\n    vec3  specularColor;\r\n    float specularShininess;\r\n  };\r\n\r\n  struct GeometricContext {\r\n    vec3 normal;\r\n    vec3 viewDir;\r\n  };\r\n\r\n  struct DirectionalLight {\r\n    vec3 direction;\r\n    vec3 color;\r\n\r\n    int shadow;\r\n    vec2 shadowMapSize;\r\n    float shadowBias;\r\n    float shadowRadius;\r\n  };\r\n\r\n  uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\r\n  uniform vec3 ambientLightColor;\r\n\r\n  /////////////////////////////////////////// Shadowmap ////////////////////////////////////////////////\r\n\r\n  #if defined(SHADOWMAP)\r\n  \tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\r\n  \t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\r\n  \t}\r\n\r\n    float getShadow( sampler2D shadowMap, DirectionalLight dirLight, vec4 shadowCoord, vec3 vViewPosition, vec3 vNormal ) {\r\n   \t  float shadow = 0.0;\r\n\r\n      // When shadows for sprites will appear use here for them normals as it done for G-buffer\r\n      shadowCoord.xyz += dirLight.shadowBias * vNormal;\r\n      shadowCoord.xyz /= shadowCoord.w;\r\n\r\n      bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\r\n      bool inFrustum = all( inFrustumVec );\r\n      bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\r\n      bool frustumTest = all( frustumTestVec );\r\n\r\n      if ( frustumTest ) {\r\n        #ifdef SHADOWMAP_BASIC\r\n      \t  shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\r\n      \t#endif\r\n\r\n      \t#ifdef SHADOWMAP_PCF_SHARP\r\n      \t  vec2 texelSize = vec2( 1.0 ) / dirLight.shadowMapSize;\r\n\r\n            float dx0 = - texelSize.x * dirLight.shadowRadius;\r\n            float dy0 = - texelSize.y * dirLight.shadowRadius;\r\n            float dx1 = + texelSize.x * dirLight.shadowRadius;\r\n            float dy1 = + texelSize.y * dirLight.shadowRadius;\r\n\r\n            shadow = (\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n            \ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n            ) * ( 1.0 / 9.0 );\r\n        #endif\r\n\r\n        #ifdef SHADOWMAP_PCF_RAND\r\n          vec2 texelSize = vec2( 1.0 ) / dirLight.shadowMapSize;\r\n\r\n          vec4 vUv = ((projectionMatrix * vec4(vViewPosition, 1.0)) + 1.0) / 2.0;\r\n          vec2 vUvNoise = vUv.xy / srcTexelSize * noiseTexelSize;\r\n\r\n          vec2 noiseVec = normalize(texture2D(noiseTex, vUvNoise).rg);\r\n          mat2 mNoise = mat2(noiseVec.x, noiseVec.y, -noiseVec.y, noiseVec.x);\r\n\r\n          vec2 offset;\r\n          #pragma unroll_loop\r\n          for ( int i = 0; i < 4; i ++ ) { // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n            offset = mNoise * ( normalize( samplesKernel[ i ]) * texelSize * dirLight.shadowRadius );\r\n            shadow +=  texture2DCompare( shadowMap, shadowCoord.xy + offset, shadowCoord.z );\r\n          }\r\n          shadow /= float( 4 ); // 4 is length of _samplesKernel which is defined in UberMaterial.js\r\n        #endif\r\n      }\r\n      return shadow;//(shadow != 1.0) ? 0.5 : 1.0;//vec4(shadow, shadow, shadow, 1.0);\r\n   }\r\n  #endif\r\n\r\n  /////////////////////////////////////////// Lighting /////////////////////////////////////////////////\r\n\r\n  vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\r\n    return RECIPROCAL_PI * diffuseColor;\r\n  } // validated\r\n\r\n  vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\r\n    // Original approximation by Christophe Schlick '94\r\n    //;float fresnel = pow( 1.0 - dotLH, 5.0 );\r\n    // Optimized variant (presented by Epic at SIGGRAPH '13)\r\n    float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\r\n    return ( 1.0 - specularColor ) * fresnel + specularColor;\r\n  } // validated\r\n\r\n  float G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\r\n    // geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\r\n    return 0.25;\r\n  }\r\n\r\n  float D_BlinnPhong( const in float shininess, const in float dotNH ) {\r\n    return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\r\n  }\r\n\r\n  vec3 BRDF_Specular_BlinnPhong( const in DirectionalLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\r\n    vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n    float dotNH = saturate(dot( geometry.normal, halfDir ));\r\n    float dotLH = saturate(dot( incidentLight.direction, halfDir ));\r\n\r\n    vec3 F = F_Schlick( specularColor, dotLH );\r\n    float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\r\n    float D = D_BlinnPhong( shininess, dotNH );\r\n\r\n    return F * ( G * D );\r\n  } // validated\r\n\r\n  void RE_Direct_BlinnPhong( const in DirectionalLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight, float penumbra ) {\r\n\r\n    float dotNL = saturate( dot( geometry.normal, directLight.direction ));\r\n    #ifdef TOON_SHADING\r\n      if(dotNL < MEDIUM_TOON_RANGE){\r\n        dotNL = LOW_TOON_BORDER;\r\n      }\r\n      else if(dotNL < HIGH_TOON_RANGE){\r\n        dotNL = MEDIUM_TOON_BORDER;\r\n      }\r\n      else{\r\n        dotNL = HIGH_TOON_BORDER;\r\n      }\r\n    #endif\r\n\r\n    vec3 irradiance = dotNL * directLight.color * PI;\r\n    reflectedLight.directDiffuse += penumbra * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n    reflectedLight.directSpecular += penumbra * irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess );\r\n  }\r\n\r\n  void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n    reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n  }\r\n\r\n  vec3 calcLighting(const in GeometricContext geometry, const in BlinnPhongMaterial material, vec3 vViewPosition) {\r\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ));\r\n    vec3 irradiance = ambientLightColor * PI;\r\n\r\n    float shadowMask = 1.0;\r\n    // see THREE.WebGLProgram.unrollLoops\r\n  \t#pragma unroll_loop\r\n  \t  for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n  \t    #ifdef SHADOWMAP\r\n  \t    if ( directionalLights[ i ].shadow > 0 ) shadowMask = getShadow( directionalShadowMap[ i ], directionalLights[ i ], vDirectionalShadowCoord[ i ], vViewPosition, vDirectionalShadowNormal[ i ] );\r\n  \t    #endif\r\n\r\n  \t\t  if ( shadowMask > 0.0 ) RE_Direct_BlinnPhong( directionalLights[ i ], geometry, material, reflectedLight, shadowMask );\r\n  \t\t}\r\n\r\n    RE_IndirectDiffuse_BlinnPhong(irradiance, material, reflectedLight);\r\n\r\n    return saturate(reflectedLight.indirectDiffuse + reflectedLight.directDiffuse + reflectedLight.directSpecular);\r\n  }\r\n#endif\r\n\r\n/////////////////////////////////////////// Dashed Line ///////////////////////////////////////////////\r\n#ifdef DASHED_LINE\r\n  uniform float dashedLineSize;\r\n  uniform float dashedLinePeriod;\r\n  varying float vLineDistance;\r\n#endif\r\n\r\n/////////////////////////////////////////// Main ///////////////////////////////////////////////\r\nvoid main() {\r\n\r\n#ifdef CLIP_PLANE\r\n  if (vViewPosition.z < clipPlaneValue) discard;\r\n#endif\r\n\r\n#ifdef ZCLIP\r\n  if (vViewPosition.z < zClipValue) discard;\r\n#endif\r\n\r\n  vec4 pixelPosWorld = vec4(vWorldPosition, 1.0);\r\n  vec4 pixelPosEye;\r\n\r\n#ifdef SPHERE_SPRITE\r\n\r\n  vec3 viewNormalSprites;\r\n  vec3 normal;\r\n\r\n/* quick-and-dirty method\r\n  normal.xy = ' + INSTANCED_SPRITE_OVERSCALE + ' * (2.0 * vUv - 1.0);\r\n  float r2 = dot(normal.xy, normal.xy);\r\n  if (r2 > 1.0) discard;\r\n  float normalZ = sqrt(1.0 - r2);\r\n  normal.z = normalZ;\r\n  normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\r\n  pixelPosEye = vec4(spritePosEye.xyz, 1.0);\r\n  pixelPosEye.z += spritePosEye.w * normalZ;\r\n*/\r\n\r\n  // ray-trace sphere surface\r\n  {\r\n    vec3 p;\r\n    if (get_sphere_point(-vViewPosition, p) < 0.0) discard;\r\n    pixelPosWorld = modelMatrix * vec4(instOffset.xyz + p * instOffset.w, 1.0);\r\n    // pixelPosEye = modelViewMatrix * vec4(instOffset.xyz + p * instOffset.w, 1.0);\r\n    pixelPosEye = vec4(spritePosEye.xyz, 1.0);\r\n    pixelPosEye.z += instOffset.w *\r\n      (modelViewMatrix[0][2] * p.x +\r\n       modelViewMatrix[1][2] * p.y +\r\n       modelViewMatrix[2][2] * p.z);\r\n    normal = normalize(normalMatrix * p);\r\n    #ifdef NORMALS_TO_G_BUFFER\r\n      viewNormalSprites = normalize(mat3(modelViewMatrix)*p);\r\n    #endif\r\n  }\r\n\r\n#endif\r\n\r\n#ifdef CYLINDER_SPRITE\r\n  vec3 normal;\r\n  vec3 viewNormalSprites;\r\n  float cylinderY = 0.0;\r\n\r\n    // ray-trace cylinder surface\r\n    {\r\n      vec3 p;\r\n      if (get_cylinder_point(-vViewPosition, p) < 0.0) discard;\r\n\r\n      cylinderY = 0.5 * (p.y + 1.0);\r\n\r\n      vec4 v = vec4(p, 1.0);\r\n      v = vec4(dot(v, matVec1), dot(v, matVec2), dot(v, matVec3), 1.0);\r\n      pixelPosWorld = modelMatrix * v;\r\n      pixelPosEye = modelViewMatrix * v;\r\n\r\n      vec3 localNormal = normalize(vec3(p.x, 0.0, p.z));\r\n      normal = vec3(\r\n        dot(localNormal, matVec1.xyz),\r\n        dot(localNormal, matVec2.xyz),\r\n        dot(localNormal, matVec3.xyz));\r\n      #ifdef NORMALS_TO_G_BUFFER\r\n        viewNormalSprites = normalize(mat3(modelViewMatrix)*normal);\r\n      #endif\r\n      normal = normalize(normalMatrix * normal);\r\n    }\r\n#endif\r\n\r\n  #ifdef ATTR_COLOR\r\n    vec3 vertexColor = vColor;\r\n  #else\r\n    vec3 vertexColor = vec3(1.0, 1.0, 1.0);\r\n  #endif\r\n\r\n  #ifdef ATTR_COLOR2\r\n    #ifdef CYLINDER_SPRITE\r\n      float colorCoef = cylinderY; // cylinder parameter is calculated from ray-tracing\r\n    #else\r\n      float colorCoef = vUv.y; // cylinder parameter is interpolated as tex coord\r\n    #endif\r\n      // choose either color or color2\r\n    vertexColor = mix(vColor2, vColor, step(0.5, colorCoef));\r\n  #endif\r\n\r\n  // negative red component is a special condition\r\n  if (vertexColor.x < 0.0) discard;\r\n\r\n  #ifdef DASHED_LINE\r\n    if ( mod( vLineDistance, dashedLinePeriod ) > dashedLineSize ) discard;\r\n  #endif\r\n\r\n  // transparency prepass writes only z, so we don't need to calc the color\r\n  #ifdef PREPASS_TRANSP\r\n    fragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n    #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n      gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n    #endif\r\n    return;\r\n  #endif\r\n\r\n    float totalOpacity = opacity;\r\n\r\n  #ifdef ATTR_ALPHA_COLOR\r\n    totalOpacity *= alphaCol;\r\n  #endif\r\n\r\n  // discard fully transparent pixels\r\n  if (totalOpacity == 0.0) discard;\r\n\r\n  #ifdef FAKE_OPACITY\r\n    // discard pixels in checker pattern\r\n    vec2 dm_coord = floor(gl_FragCoord.xy);\r\n    dm_coord = fract(dm_coord * 0.5);\r\n    if (totalOpacity < 1.0 && (dm_coord.x < 0.5 ^^ dm_coord.y < 0.5)) discard;\r\n    vec4 diffuseColor = vec4(diffuse, 1.0);\r\n  #else\r\n    vec4 diffuseColor = vec4(diffuse, totalOpacity);\r\n  #endif\r\n\r\n  float flipNormal;\r\n  #if !defined (SPHERE_SPRITE) && !defined (CYLINDER_SPRITE)\r\n    flipNormal = 1.0;\r\n    #ifdef DOUBLE_SIDED\r\n      flipNormal = float( gl_FrontFacing );\r\n    #endif\r\n    vec3 normal = normalize( vNormal ) * flipNormal;\r\n  #endif\r\n\r\n    diffuseColor.rgb *= vertexColor;\r\n\r\n  #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n    gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n  #endif\r\n\r\n  #ifdef NORMALS_TO_G_BUFFER\r\n    #if defined (SPHERE_SPRITE) || defined (CYLINDER_SPRITE)\r\n      vec3 viewNormaInColor = viewNormalSprites;\r\n      float frontFaced = 1.0;\r\n    #else\r\n      vec3 viewNormaInColor = viewNormal;\r\n      float frontFaced = float( gl_FrontFacing );\r\n    #endif\r\n    // [-1, 1] -> [0, 1]\r\n    viewNormaInColor = 0.5 * viewNormaInColor + 0.5;\r\n    gl_FragData[1] = vec4(viewNormaInColor, frontFaced);\r\n  #endif\r\n\r\n  #if defined(USE_LIGHTS) && NUM_DIR_LIGHTS > 0\r\n    GeometricContext geometry = GeometricContext(normal, normalize( vViewPosition ));\r\n    BlinnPhongMaterial material = BlinnPhongMaterial(diffuseColor.rgb, specular, shininess);\r\n    vec3 outgoingLight = calcLighting(geometry, material, vViewPosition);\r\n  #else\r\n    vec3 outgoingLight = diffuseColor.rgb;\r\n  #endif\r\n\r\n  #ifdef COLOR_FROM_DEPTH\r\n    float depth = 0.0;\r\n    #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n      gl_FragDepthEXT = calcDepthForSprites(pixelPosEye, zOffset, projectionMatrix);\r\n      depth = gl_FragDepthEXT;\r\n    #else\r\n      depth = gl_FragCoord.z;\r\n    #endif\r\n    fragColor = packDepthToRGBA(depth);\r\n    return;\r\n  #endif\r\n\r\n  #ifdef COLOR_FROM_POS\r\n    fragColor = world2colorMatrix * pixelPosWorld;\r\n  #else\r\n    #ifdef OVERRIDE_COLOR\r\n      fragColor = vec4(fixedColor, diffuseColor.a);\r\n    #else\r\n      fragColor = vec4(outgoingLight, diffuseColor.a);//vec4(vNormal, 1.0);\r\n    #endif\r\n\r\n    #ifdef USE_FOG\r\n      float viewDistance;\r\n      #if defined(SPHERE_SPRITE) || defined(CYLINDER_SPRITE)\r\n        viewDistance = abs(pixelPosEye.z);\r\n      #else\r\n        viewDistance = vViewPosition.z;\r\n      #endif\r\n      float fogFactor = smoothstep( fogNear, fogFar, viewDistance) * fogAlpha;\r\n      #ifdef FOG_TRANSPARENT\r\n        fragColor.a = fragColor.a * (1.0 - fogFactor);\r\n      #else\r\n        fragColor.rgb = mix( fragColor.rgb, fogColor, fogFactor );\r\n      #endif\r\n    #endif\r\n\r\n  #endif\r\n}\r\n",lights:!0,fog:!0,side:o.DoubleSide}),this.setValues(e)}bn.prototype=Object.create(o.RawShaderMaterial.prototype),bn.prototype.constructor=bn,bn.prototype.precisionString=function(){var e=un.precision;return"precision ".concat(e," float;\n")+"precision ".concat(e," int;\n\n")},bn.prototype.uberOptions={diffuse:new o.Color(16777215),specular:new o.Color(1118481),shininess:30,opacity:1,fixedColor:new o.Color(16777215),zOffset:0,zClipCoef:2,zClipValue:0,clipPlaneValue:0,world2colorMatrix:new o.Matrix4,dashedLineSize:.1,dashedLinePeriod:.3,projMatrixInv:new o.Matrix4,viewport:new o.Vector2(800,600),lineWidth:2,fogAlpha:1,samplesKernel:yn,noiseTex:vn.noiseTexture,noiseTexelSize:new o.Vector2(1/vn.noiseWidth,1/vn.noiseHeight),srcTexelSize:new o.Vector2(1/800,1/600),copy:function(e){this.diffuse.copy(e.diffuse),this.specular.copy(e.specular),this.shininess=e.shininess,this.opacity=e.opacity,this.fixedColor.copy(e.fixedColor),this.zOffset=e.zOffset,this.zClipCoef=e.zClipCoef,this.zClipValue=e.zClipValue,this.clipPlaneValue=e.clipPlaneValue,this.world2colorMatrix.copy(e.world2colorMatrix),this.dashedLineSize=e.dashedLineSize,this.dashedLinePeriod=e.dashedLinePeriod,this.projMatrixInv=e.projMatrixInv,this.viewport=e.viewport,this.lineWidth=e.lineWidth,this.toonShading=e.toonShading,this.fogAlpha=e.fogAlpha,this.samplesKernel=e.samplesKernel,this.noiseTex=e.noiseTex,this.noiseTexelSize=e.noiseTexelSize,this.srcTexelSize=e.srcTexelSize}},bn.prototype.copy=function(e){return o.RawShaderMaterial.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=o.UniformsUtils.clone(e.uniforms),this.defines=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.defines),this.extensions=e.extensions,this.fog=e.fog,this.instancedPos=e.instancedPos,this.instancedMatrix=e.instancedMatrix,this.attrColor=e.attrColor,this.attrColor2=e.attrColor2,this.attrAlphaColor=e.attrAlphaColor,this.overrideColor=e.overrideColor,this.sphereSprite=e.sphereSprite,this.cylinderSprite=e.cylinderSprite,this.zClip=e.zClip,this.clipPlane=e.clipPlane,this.fakeOpacity=e.fakeOpacity,this.colorFromPos=e.colorFromPos,this.shadowmap=e.shadowmap,this.shadowmapType=e.shadowmapType,this.colorFromDepth=e.colorFromDepth,this.prepassTransparancy=e.prepassTransparancy,this.dashedLine=e.dashedLine,this.thickLine=e.thickLine,this.fogTransparent=e.fogTransparent,this.normalsToGBuffer=e.normalsToGBuffer,this.toonShading=e.toonShading,this.uberOptions.copy(e.uberOptions),this},bn.prototype.createInstance=function(){var e=new bn;return e.copy(this),e.uberOptions=Object.create(this.uberOptions),e},bn.prototype.setValues=function(e){if("undefined"!==typeof e){o.RawShaderMaterial.prototype.setValues.call(this,e);var t={},n={};this.fog&&(t.USE_FOG=1),this.instancedPos&&(t.INSTANCED_POS=1),this.instancedMatrix&&(t.INSTANCED_MATRIX=1),this.attrColor&&(t.ATTR_COLOR=1),this.attrColor2&&(t.ATTR_COLOR2=1),this.attrAlphaColor&&(t.ATTR_ALPHA_COLOR=1),this.overrideColor&&(t.OVERRIDE_COLOR=1),this.sphereSprite&&(t.SPHERE_SPRITE=1,n.fragDepth=1),this.cylinderSprite&&(t.CYLINDER_SPRITE=1,n.fragDepth=1),this.zClip&&(t.ZCLIP=1),this.clipPlane&&(t.CLIP_PLANE=1),this.fakeOpacity&&(t.FAKE_OPACITY=1),this.lights&&(t.USE_LIGHTS=1),this.colorFromPos&&(t.COLOR_FROM_POS=1),this.shadowmap&&(t.SHADOWMAP=1,"pcf"===this.shadowmapType?t.SHADOWMAP_PCF_SHARP=1:"random"===this.shadowmapType?t.SHADOWMAP_PCF_RAND=1:t.SHADOWMAP_BASIC=1),this.colorFromDepth&&(t.COLOR_FROM_DEPTH=1),this.prepassTransparancy&&(t.PREPASS_TRANSP=1),this.dashedLine&&(t.DASHED_LINE=1),this.thickLine&&(t.THICK_LINE=1),this.fogTransparent&&(t.FOG_TRANSPARENT=1),this.normalsToGBuffer&&(n.drawBuffers=1,t.NORMALS_TO_G_BUFFER=1),this.toonShading&&(t.TOON_SHADING=1),this.defines=t,this.extensions=n}},bn.prototype.setUberOptions=function(e){if("undefined"!==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this.uberOptions[t]instanceof o.Color?this.uberOptions[t]=e[t].clone():this.uberOptions[t]=e[t])},bn.prototype.clone=function(e){return e?this.createInstance():o.Material.prototype.clone.call(this)},bn.prototype.updateUniforms=function(){var e=this;xn.forEach((function(t){e.uniforms.hasOwnProperty(t)&&(e.uberOptions[t]instanceof o.Color||e.uberOptions[t]instanceof o.Matrix4?e.uniforms[t].value=e.uberOptions[t].clone():e.uniforms[t].value=e.uberOptions[t])}))};var wn={DEFAULT:0,VOLUME:1,TRANSPARENT:2,PREPASS_TRANSPARENT:3,VOLUME_BFPLANE:4,COLOR_FROM_POSITION:5,SHADOWMAP:6},Sn=[wn.DEFAULT,wn.TRANSPARENT];o.Object3D.prototype.resetTransform=function(){this.position.set(0,0,0),this.quaternion.set(0,0,0,1),this.scale.set(1,1,1)},o.Object3D.prototype.updateMatrixWorldRecursive=function(){null!=this.parent&&this.parent.updateMatrixWorldRecursive(),this.updateMatrixWorld()},o.Object3D.prototype.addSavingWorldTransform=function(){var e=new o.Matrix4;return function(t){t instanceof o.Object3D&&(e.getInverse(this.matrixWorld),e.multiply(t.matrixWorld),t.matrix.copy(e),t.matrix.decompose(t.position,t.quaternion,t.scale),this.add(t))}}(),o.WebGLRenderer.prototype.renderDummyQuad=function(){var e=new o.MeshBasicMaterial({transparent:!0,opacity:0,depthWrite:!1}),t=new o.Scene,n=new o.Mesh(new o.PlaneBufferGeometry(.01,.01),e);t.add(n);var r=new o.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4);return r.position.z=100,function(){this.render(t,r)}}(),o.WebGLRenderer.prototype.renderScreenQuad=function(){var e=new o.Scene,t=new o.Mesh(new o.PlaneBufferGeometry(1,1));e.add(t);var n=new o.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4);return n.position.z=100,function(r){t.material=r,this.render(e,n)}}(),o.Matrix4.prototype.isIdentity=function(){var e=new o.Matrix4;return function(){return e.equals(this)}}(),o.Matrix4.prototype.applyToPointsArray=function(e,t,n){if(!e||!t||t<3)return e;n=n||0;for(var r=this.elements,i=0;i<e.length;i+=t){var o=e[i],a=e[i+1],s=e[i+2],u=1/(r[3]*o+r[7]*a+r[11]*s+r[15]);e[i]=(r[0]*o+r[4]*a+r[8]*s+r[12]*n)*u,e[i+1]=(r[1]*o+r[5]*a+r[9]*s+r[13]*n)*u,e[i+2]=(r[2]*o+r[6]*a+r[10]*s+r[14]*n)*u}return e};var En=function(e){function t(e){return g(this,t),void 0===e.uniforms&&(e.uniforms={}),e.uniforms.srcTex={type:"t",value:null},e.vertexShader=sn,e.transparent=!1,e.depthTest=!1,e.depthWrite=!1,C(this,k(t).call(this,e))}return P(t,e),t}(o.RawShaderMaterial);function Tn(e,t){!function e(n){n instanceof o.Mesh&&t(n);for(var r=0,i=n.children.length;r<i;r++)e(n.children[r])}(e)}function An(e){e.traverse((function(e){(e instanceof o.Mesh||e instanceof o.LineSegments||e instanceof o.Line)&&e.geometry.dispose()})),function(e){for(var t=e.children,n=0,r=t.length;n<r;++n){var i=t[n];i.parent=null,i.dispatchEvent({type:"removed"})}e.children=[]}(e)}function Mn(e,t){var n=[];return e.traverse((function(e){for(var r=0;r<t.length;r++)if(e instanceof t[r]){n[n.length]=e;break}})),n}o.WebGLRenderer.prototype.renderScreenQuadFromTex=function(){var e=new En({uniforms:{opacity:{type:"f",value:1}},fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform float opacity;\r\n\r\nvoid main() {\r\n  vec4 color = texture2D(srcTex, vUv);\r\n  gl_FragColor = vec4(color.xyz, color.a * opacity);\r\n}\r\n",transparent:!0});return function(t,n){e.uniforms.srcTex.value=t,e.transparent=n<1,e.uniforms.opacity.value=n,this.renderScreenQuad(e)}}(),o.WebGLRenderer.prototype.renderScreenQuadFromTexWithDistortion=function(){var e=new En({uniforms:{coef:{type:"f",value:1}},fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform float coef;\r\n\r\nvoid main() {\r\n  vec2 uv = vUv * 2.0 - 1.0;\r\n  float r2 = dot(uv, uv);\r\n  vec2 tc = uv * (1.0 + coef * r2);\r\n  if (!all(lessThan(abs(tc), vec2(1.0))))\r\n    discard;\r\n  tc = 0.5 * (tc + 1.0);\r\n  gl_FragColor = texture2D(srcTex, tc);\r\n}\r\n"});return function(t,n){e.uniforms.srcTex.value=t,e.uniforms.coef.value=n,this.renderScreenQuad(e)}}(),o.PerspectiveCamera.prototype.setMinimalFov=function(e){this.aspect>=1?this.fov=e:this.fov=o.Math.radToDeg(2*Math.atan(Math.tan(.5*o.Math.degToRad(e))/this.aspect))},o.StereoCamera.prototype.updateHalfSized=function(e,t){var n=e.aspect,r=e.fov;e.aspect=n/2,e.setMinimalFov(t),e.updateProjectionMatrix(),this.update(e),e.aspect=n,e.fov=r,e.updateProjectionMatrix()},o.PerspectiveCamera.prototype.setDistanceToFit=function(e,t){this.position.z=e/Math.sin(.5*o.Math.degToRad(t))},o.Raycaster.prototype.intersectVisibleObject=function(e,t,n,r){var i=this.intersectObject(e,!1);if(0===i.length)return null;var a,s=Math.min(t.near,n),u=i[0],c=new o.Vector3;for(a=0;a<i.length&&(u=i[a],c.copy(u.point),c.applyMatrix4(t.matrixWorldInverse),!(c.z<=-s));++a);if(a===i.length)return null;var l=Math.min(t.far,r);return c.copy(u.point),c.applyMatrix4(t.matrixWorldInverse),c.z<=-l?null:u},o.Matrix4.prototype.extractScale=function(){var e=new o.Vector3;return function(t){void 0===t&&(j.debug("extractScale(): new is too expensive operation to do it on-the-fly"),t=e.clone());var n=this.elements;return t.x=e.set(n[0],n[1],n[2]).length(),t.y=e.set(n[4],n[5],n[6]).length(),t.z=e.set(n[8],n[9],n[10]).length(),this.determinant()<0&&(t.x=-t.x),t}}(),o.BufferAttribute.prototype.copyAtList=function(e,t){console.assert(this.itemSize===e.itemSize,"false: BufferAttribute.copyAtList buffers have different item size.");for(var n=this.itemSize,r=0,i=t.length;r<i;++r)for(var o=0;o<n;++o)this.array[r*n+o]=e.array[t[r]*n+o];return this};var Cn={calcCylinderMatrix:function(e,t,n){var r=e.clone().lerp(t,.5),i=new o.Matrix4;i.makeScale(n,e.distanceTo(t),n);var a=new o.Matrix4;a.makeRotationX(Math.PI/2);var s=new o.Matrix4,u=new o.Vector3(0,1,0);return s.lookAt(r,t,u),s.multiply(a),s.multiply(i),s.setPosition(r),s},calcChunkMatrix:function(e,t,n,r){var i=new o.Matrix4;i.makeScale(r.x,r.y,0);var a=new o.Matrix4;return a.lookAt(e,t,n),a.multiply(i),a.setPosition(e),a},forEachMeshInGroup:Tn,countTriangles:function(e){var t=0;return Tn(e,(function(e){t+=function(e){var t=e.geometry;if(t instanceof o.InstancedBufferGeometry){var n=t.attributes;for(var r in n)if(n.hasOwnProperty(r)&&n[r]instanceof o.InstancedBufferAttribute){var i=n[r];return(t.index?t.index.array.length/3:0)*i.array.length/i.itemSize}return 0}return t instanceof o.BufferGeometry?t.index?t.index.array.length/3:0:t.faces?t.faces.length:0}(e)})),t},groupHasGeometryToRender:function(e){var t=!1;return e.traverse((function(e){(e.hasOwnProperty("geometry")||e instanceof on)&&(t=!0)})),t},buildDistorionMesh:function(e,t,n){function r(e){for(var t=0,r=e,i=1;Math.abs(r-t)>1e-5;)t=r,r=e/((i=1+n*r)*i);return 1/i}for(var i=new o.PlaneBufferGeometry(2,2,e,t),a=i.getAttribute("position"),s=0;s<a.count;++s){var u=a.array[3*s],c=a.array[3*s+1],l=r(u*u+c*c);a.setXY(s,l*u,l*c)}return i},RCGroup:an,fillArray:function(e,t,n,r){n="undefined"!==typeof n?n:0,r="undefined"!==typeof r?r:e.length;for(var i=n;i<r;++i)e[i]=t},clearTree:An,destroyObject:function(e){An(e),e.parent?e.parent.remove(e):e.dispatchEvent({type:"removed"})},belongToSelectLayers:function(e){for(var t=0;t<Sn.length;t++)if(1===(e.layers.mask>>Sn[t]&1))return!0;return!1},applyTransformsToMeshes:function(e,t){var n=t.length;if(!(n<1))for(var r=Mn(e,[o.Mesh,o.LineSegments,o.Line]),i=0,a=r.length;i<a;++i){var s=r[i],u=s.parent;if(u){s.applyMatrix(t[0]);for(var c=1;c<n;++c){var l=new s.constructor(s.geometry,s.material);u.add(l),l.applyMatrix(t[c])}}}},processTransparentMaterial:function(e,t){if(t instanceof bn)for(var n=Mn(e,[o.Mesh,o.LineSegments]),r=function(e,t){var r=n[e],o=r.parent;if(!o)return"continue";r.material.setValues({prepassTransparancy:!1,fakeOpacity:!1}),r.material.needsUpdate=!0,r.layers.set(wn.TRANSPARENT);var a=r.material.createInstance();a.setValues({prepassTransparancy:!0,fakeOpacity:!1});var s=new r.constructor(r.geometry,a);i.a.forEach(["transparent","colorFromDepth","lights","shadowmap","fog"],(function(e){s.material[e]=!1})),s.material.needsUpdate=!0,s.applyMatrix(r.matrix),s.layers.set(wn.PREPASS_TRANSPARENT),o.add(s)},a=0,s=n.length;a<s;++a)r(a)},processColFromPosMaterial:function(e,t){if(t instanceof bn)for(var n=Mn(e,[o.Mesh,o.LineSegments]),r=function(e,t){var r=n[e],o=r.parent;if(!o)return"continue";var a=r.material.createInstance();a.setValues({colorFromPos:!0});var s=new r.constructor(r.geometry,a);i.a.forEach(["transparent","colorFromDepth","lights","shadowmap","fog","overrideColor","fogTransparent","attrColor","attrColor2","attrAlphaColor","fakeOpacity"],(function(e){s.material[e]=!1})),s.material.needsUpdate=!0,s.applyMatrix(r.matrix),s.layers.set(wn.COLOR_FROM_POSITION),o.add(s)},a=0,s=n.length;a<s;++a)r(a)},createShadowmapMaterial:function(e,t){if(t instanceof bn)for(var n=Mn(e,[o.Mesh,o.LineSegments]),r=function(e,t){var r=n[e];if(!r.receiveShadow&&r.material.shadowmap&&r.material.setValues({shadowmap:!1}),!r.castShadow)return"continue";var o=r.parent;if(!o)return"continue";var a=r.material.createInstance();a.setValues({colorFromDepth:!0});var s=new r.constructor(r.geometry,a);i.a.forEach(["lights","shadowmap","fog"],(function(e){s.material[e]=!1})),s.isShadowmapMesh=!0,s.material.needsUpdate=!0,s.applyMatrix(r.matrix),s.layers.set(wn.SHADOWMAP),o.add(s)},a=0,s=n.length;a<s;++a)r(a)},removeShadowmapMaterial:function(e,t){if(t instanceof bn)for(var n=Mn(e,[o.Mesh,o.LineSegments]),r=0,i=n.length;r<i;++r){var a=n[r];a.isShadowmapMesh&&a.parent&&a.parent.remove(a)}},processObjRenderOrder:function(e,t){var n=+("BA"!==t);e.traverse((function(e){e.isGroup&&(e.renderOrder=n)}))},makeVisibleMeshes:function(e,t){e&&e.traverse&&e.traverse((function(e){e instanceof o.Mesh&&(e.visible=t(e))}))},applySelectionMaterial:function(e){e.traverse((function(e){"material"in e&&(e.material=e.material.clone(!0),e.material.setValues({depthFunc:o.LessEqualDepth,overrideColor:!0,fog:!1}),e.material.setUberOptions({fixedColor:new o.Color(16776960),zOffset:-1e-6}))}))},getMiddlePoint:function(e,t,n){var r=n||new o.Vector3;return r.set(0,0,0),r.addScaledVector(e,.5),r.addScaledVector(t,.5),r},LAYERS:wn},kn={boundingBox:new o.Box3(new o.Vector3(-1,-1,-1),new o.Vector3(1,1,1)),boundingSphere:new o.Sphere(new o.Vector3(0,0,0),1)};function Rn(e,t){Cn.RCGroup.call(this),this.name=e,this._dataSource=t}Q.deriveClass(Rn,Cn.RCGroup),Rn.prototype.release=function(){this.parent&&this.parent.remove(this)},Rn.prototype.getDataSource=function(){return this._dataSource},Rn.prototype.getBoundaries=function(){return kn};var Pn=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var Ln=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var On=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var In=function(e){return Pn(e)||Ln(e)||On()};function Nn(e){return null===e||void 0===e||Array.isArray(e)?e:[e]}var Dn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id"];g(this,e),this._list=[],this._dict={},this._indices=In(r),this._indices.forEach((function(e){t._dict[e]={}})),n.forEach((function(e){return t.register(e)}))}return _(e,[{key:"register",value:function(t){var n=this;e.registerInList(this._list,t),this._indices.forEach((function(r){e.registerInDict(n._dict[r],Nn(t[r]),t)}))}},{key:"unregister",value:function(t){var n=this;e.unregisterFromList(this._list,t),this._indices.forEach((function(r){e.unregisterFromDict(n._dict[r],Nn(t[r]),t)}))}},{key:"keys",value:function(e){return Object.keys(this._dict[e||this._indices[0]])}},{key:"get",value:function(e,t){var n=this._dict[t||this._indices[0]];if(n){var r=n[e&&e.toLowerCase()];return r&&r.length>0?r[0]:void 0}}},{key:"all",get:function(){return In(this._list)}},{key:"first",get:function(){return this._list[0]}}],[{key:"registerInList",value:function(e,t){e.includes(t)||e.push(t)}},{key:"unregisterFromList",value:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{key:"registerInDict",value:function(e,t,n){t.forEach((function(t){t=t.toLowerCase();var r=e[t]=e[t]||[];r.includes(n)||r.push(n)}))}},{key:"unregisterFromDict",value:function(e,t,n){t.forEach((function(t){t=t.toLowerCase();var r=e[t];if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1),0===r.length&&delete e[t]}}))}}]),e}();function Fn(e){Object.defineProperties(e,{logger:{get:function(){return this.context&&this.context.logger?this.context.logger:j}},settings:{get:function(){return this.context&&this.context.settings?this.context.settings:re}}})}var zn=function(){function e(t,n){g(this,e),this._position=t,this._radius=n}return _(e,[{key:"raycast",value:function(t){var n=e._sphere;n.set(this._position,this._radius);var r=new o.Vector3;return t.ray.intersectSphere(n,r)?{distance:t.ray.origin.distanceTo(r),point:r}:null}}]),e}();Ee(zn,"_sphere",new o.Sphere);var Bn=function(e){return function(e){function t(e){var n,r;g(this,t);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(r=C(this,(n=k(t)).call.apply(n,[this].concat(o))))._objects=new Array(e),r.boundingSphere=null,r.boundingBox=null,r}return P(t,e),_(t,[{key:"setSphere",value:function(e,t,n){this._objects[e]=new zn(t,n)}},{key:"raycast",value:function(e,t){for(var n=0,r=this._objects.length;n<r;++n){var i=this._objects[n].raycast(e);i&&(i.chunkIdx=n,t.push(i))}}},{key:"computeBoundingBox",value:function(){var e=this._objects,t=this.boundingBox;null===t&&(this.boundingBox=t=new o.Box3),t.makeEmpty();for(var n=0,r=e.length;n<r;++n)t.expandByPoint(e[n]._position)}},{key:"computeBoundingSphere",value:function(){this.computeBoundingBox();var e=this._objects,t=this.boundingBox,n=0,r=new o.Vector3;t.getCenter(r);for(var i=0,a=e.length;i<a;++i){var s=e[i]._position,u=r.distanceToSquared(s);n<u&&(n=u)}null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.set(r,Math.sqrt(n))}}]),t}(e)},jn=new o.Color,Vn=Q.copySubArrays;var Un=function(e){function t(e,n,r){var i;return g(this,t),(i=C(this,k(t).call(this,e)))._sphGeometry=r?new o.PlaneBufferGeometry(2,2,1,1):new o.SphereBufferGeometry(1,2*n,n,0,2*Math.PI,0,Math.PI),i._init(e,i._sphGeometry),i}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n){var r,i,o,a,s,u;r=this._offsets,i=4*e,o=t.x,a=t.y,s=t.z,u=n,r[i]=o,r[i+1]=a,r[i+2]=s,r[i+3]=u,this.setSphere(e,t,n)}},{key:"setColor",value:function(e,t){var n,r,i,o,a;jn.set(t),n=this._colors,r=3*e,i=jn.r,o=jn.g,a=jn.b,n[r]=i,n[r+1]=o,n[r+2]=a}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("offset").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=0,i=e.length;r<i;++r)n[e[r]]=t;this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubset",value:function(e){var t=e.length,n=new o.InstancedBufferGeometry;return this._init.call(n,t,this._sphGeometry),Vn(this._offsets,n._offsets,e,4),Vn(this._colors,n._colors,e,3),n.boundingSphere=this.boundingSphere,n.boundingBox=this.boundingBox,[n]}},{key:"_init",value:function(e,t){this.copy(t),this._offsets=Q.allocateTyped(Float32Array,4*e),this._colors=Q.allocateTyped(Float32Array,3*e);var n=this._alpha=Q.allocateTyped(Float32Array,e);i.a.fill(n,1),this.setAttribute("offset",new o.InstancedBufferAttribute(this._offsets,4,!1,1)),this.setAttribute("color",new o.InstancedBufferAttribute(this._colors,3,!1,1)),this.setAttribute("alphaColor",new o.InstancedBufferAttribute(n,1,!1,1))}}]),t}(Bn(o.InstancedBufferGeometry)),Gn=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"uvIntersection",value:function(e,n,r,i,a,s,u){var c=t._barycoord;return o.Triangle.barycoordFromPoint(e,n,r,i,c),a.multiplyScalar(c.x),s.multiplyScalar(c.y),u.multiplyScalar(c.z),a.add(s).add(u),a.clone()}},{key:"checkIntersection",value:function(e,t,n,r,i,o,a){return null===n.intersectTriangle(r,i,o,!1,a)?null:{point:a.clone()}}},{key:"checkBufferGeometryIntersection",value:function(e,n,r,i,a,s,u,c){var l=t._vA,f=t._vB,h=t._vC,p=t._intersectionPoint;l.fromBufferAttribute(i,s),f.fromBufferAttribute(i,u),h.fromBufferAttribute(i,c);var d=this.checkIntersection(e,n,r,l,f,h,p);if(d){if(a){var m=t._uvA,v=t._uvB,g=t._uvC;m.fromBufferAttribute(a,s),v.fromBufferAttribute(a,u),g.fromBufferAttribute(a,c),d.uv=this.uvIntersection(p,l,f,h,m,v,g)}var y=new o.Vector3;o.Triangle.getNormal(l,f,h,y),d.face=new o.Face3(s,u,c,y),d.faceIndex=s}return d}},{key:"raycast",value:function(e,t){var n=e.ray;if(null===this.boundingSphere&&this.computeBoundingSphere(),!1!==e.ray.intersectsSphere(this.boundingSphere)&&(null===this.boundingBox||!1!==n.intersectsBox(this.boundingBox))){var r,i,o,a=this.index,s=this.attributes,u=s.position,c=s.uv;if(null!==a)for(var l=0,f=a.count;l<f;l+=3){r=a.getX(l),i=a.getX(l+1),o=a.getX(l+2);var h=this.checkBufferGeometryIntersection(this,e,n,u,c,r,i,o);h&&(h.faceIndex=Math.floor(l/3),t.push(h))}}}}]),t}(o.BufferGeometry);Ee(Gn,"_vA",new o.Vector3),Ee(Gn,"_vB",new o.Vector3),Ee(Gn,"_vC",new o.Vector3),Ee(Gn,"_uvA",new o.Vector2),Ee(Gn,"_uvB",new o.Vector2),Ee(Gn,"_uvC",new o.Vector2),Ee(Gn,"_barycoord",new o.Vector3),Ee(Gn,"_intersectionPoint",new o.Vector3);var Hn=new o.Color,Wn=function(e){function t(e,n){var r;if(g(this,t),(r=C(this,k(t).call(this))).constructor===t)throw new Error("Can not instantiate abstract class!");return r._chunkGeo=e,r._init(e,n),r}return P(t,e),_(t,[{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("position").needsUpdate=!0,this.getAttribute("normal").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0}},{key:"setColor",value:function(e,t){Hn.set(t);for(var n=this._colors,r=this._chunkSize,i=e*r,o=i+r;i<o;++i){var a=3*i;n[a]=Hn.r,n[a+1]=Hn.g,n[a+2]=Hn.b}}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=this._chunkSize,o=0,a=e.length;o<a;++o){var s=e[o]*r;i.a.fill(n,t,s,s+r)}this.getAttribute("alphaColor").needsUpdate=!0}},{key:"raycast",value:function(e,n){var r=[];Ke(k(t.prototype),"raycast",this).call(this,e,r);for(var i=this._chunkGeo.index.count/3,o=0,a=r.length;o<a;++o)r[o].hasOwnProperty("faceIndex")&&(r[o].chunkIdx=Math.floor(r[o].faceIndex/i),n.push(r[o]))}},{key:"getSubset",value:function(e){var t=e.length,n=new o.BufferGeometry;this._init.call(n,this._chunkGeo,t);for(var r=this._positions,i=this._normals,a=this._colors,s=n._positions,u=n._normals,c=n._colors,l=3*this._chunkSize,f=0,h=e.length;f<h;++f){var p=f*l,d=e[f]*l,m=d+l;s.set(r.subarray(d,m),p),u.set(i.subarray(d,m),p),c.set(a.subarray(d,m),p)}return n.boundingSphere=this.boundingSphere,n.boundingBox=this.boundingBox,[n]}},{key:"_init",value:function(e,t){var n=this._chunkSize=e.attributes.position.count,r=e.index.array,a=r.length,s=this._chunkSize*t,u=s>65535,c=a*t,l=this._index=Q.allocateTyped(u?Uint32Array:Uint16Array,c);this._positions=Q.allocateTyped(Float32Array,3*s),this._normals=Q.allocateTyped(Float32Array,3*s),this._colors=Q.allocateTyped(Float32Array,3*s);var f=this._alpha=Q.allocateTyped(Float32Array,s);i.a.fill(f,1);for(var h=0;h<t;++h){var p=h*a,d=h*n;l.set(r,p);for(var m=0;m<a;++m)l[p+m]+=d}this.setIndex(new o.BufferAttribute(this._index,1)),this.setAttribute("position",new o.BufferAttribute(this._positions,3)),this.setAttribute("normal",new o.BufferAttribute(this._normals,3)),this.setAttribute("color",new o.BufferAttribute(this._colors,3)),this.setAttribute("alphaColor",new o.BufferAttribute(f,1))}}]),t}(Gn),qn=function(e){function t(e,n){var r;g(this,t);var i=new o.SphereBufferGeometry(1,2*n,n,0,2*Math.PI,0,Math.PI),a=(r=C(this,k(t).call(this,e,i,e)))._normals,s=i.attributes.normal.array,u=r._chunkSize;r._chunkPos=r._chunkGeo.attributes.position.array,r._tmpPositions=Q.allocateTyped(Float32Array,3*u);for(var c=0;c<e;++c)a.set(s,3*u*c);return r}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n){for(var r=this._tmpPositions,i=this._chunkSize,o=this._chunkPos,a=0;a<i;++a){var s=3*a;r[s]=t.x+o[s]*n,r[s+1]=t.y+o[s+1]*n,r[s+2]=t.z+o[s+2]*n}this._positions.set(r,i*e*3),this.setSphere(e,t,n)}}]),t}(Bn(Wn)),Yn=new o.Vector3,Xn=new o.Vector3,$n=new o.Matrix3,Zn=function(e){function t(e,n){var r;g(this,t);var i=new o.CylinderBufferGeometry(1,1,1,Math.max(3,n),2,!0),a=(r=C(this,k(t).call(this,i,2*e)))._chunkSize;return r._chunkPos=r._chunkGeo.attributes.position.array,r._chunkNorms=r._chunkGeo.attributes.normal.array,r._tmpVector=Q.allocateTyped(Float32Array,3*a),r}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n,r){var i=this._chunkSize,o=2*i*e*3,a=o+3*i,s=this._tmpVector,u=this._chunkPos,c=this._chunkNorms;Yn.lerpVectors(t,n,.5);var l,f=Cn.calcCylinderMatrix(t,Yn,r);$n.getNormalMatrix(f);for(var h=0;h<i;++h)l=3*h,Xn.fromArray(u,l),Xn.applyMatrix4(f),Xn.toArray(s,l);this._positions.set(s,o),Yn.sub(t);for(var p=0;p<i;++p)s[l=3*p]+=Yn.x,s[l+1]+=Yn.y,s[l+2]+=Yn.z;this._positions.set(s,a);for(var d=0;d<i;++d)l=3*d,Xn.fromArray(c,l),Xn.applyMatrix3($n),Xn.toArray(s,l);this._normals.set(s,o),this._normals.set(s,a)}},{key:"setColor",value:function(e,n,r){var i=2*e;Ke(k(t.prototype),"setColor",this).call(this,i,n);var o=i+1;Ke(k(t.prototype),"setColor",this).call(this,o,r)}}]),t}(Wn),Kn=function(e){function t(e,n,r,i,a,s){var u;g(this,t),u=C(this,k(t).call(this));var c=2*Math.PI;u.type="CylinderBufferGeometry",u.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:a,openEnded:s};var l=!1===s&&e>0,f=!1===s&&n>0,h=(a+1)*i+l*(i+1)+f*(i+1),p=(2*a+l+f)*i,d=r/2,m=new o.BufferAttribute(Q.allocateTyped(Float32Array,3*h),3),v=new o.BufferAttribute(Q.allocateTyped(Float32Array,3*h),3),y=new o.Uint16BufferAttribute(Q.allocateTyped(Uint16Array,3*p),1),_=new o.BufferAttribute(Q.allocateTyped(Float32Array,2*h),2);console.assert(h<65536,"false: Cylinder Geometry has too many vertices (65536 max).");for(var x=0,b=0,w=-(n-e)/r,S=0;S<=a;S++){if(S!==a)for(var E=0;E<i;E++){var T=x+E,A=x+i+E,M=x+i+(E+1)%i,R=x+(E+1)%i;y.setXYZ(3*b,T,R,A),b++,y.setXYZ(3*b,A,R,M),b++}for(var P=S/a,L=P*(n-e)+e,O=0;O<i;O++){var I=O/i,N=L*Math.sin(I*c+0),D=P*r-d,F=L*Math.cos(I*c+0),z=new o.Vector3(N,Math.sqrt(N*N+F*F)*w,F).normalize();m.setXYZ(x,N,D,F),v.setXYZ(x,z.x,z.y,z.z),_.setXY(x,I,P),++x}}if(l){for(var B=x,j=x+i,V=0;V<i;++V){var U=x-i;m.setXYZ(x,m.getX(U),m.getY(U),m.getZ(U)),v.setXYZ(x,0,1,0),_.setXY(x,1,1);var G=B+(V+1)%i;y.setXYZ(3*b,x,G,j),b++,x++}m.setXYZ(x,0,d,0),v.setXYZ(x,0,1,0),_.setXY(x,1,1),++x}if(f){for(var H=x,W=x+i,q=0;q<i;++q){var Y=q;m.setXYZ(x,m.getX(Y),m.getY(Y),m.getZ(Y)),v.setXYZ(x,0,-1,0),_.setXY(x,0,0);var X=H+(q+1)%i;y.setXYZ(3*b,X,x,W),b++,x++}m.setXYZ(x,0,-d,0),v.setXYZ(x,0,-1,0),_.setXY(x,0,0)}return u.setIndex(y),u.setAttribute("position",m),u.setAttribute("normal",v),u.setAttribute("uv",_),u}return P(t,e),_(t,[{key:"clone",value:function(){var e=this.parameters;return new t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded)}}]),t}(o.BufferGeometry),Jn=new o.Color,Qn=new o.Matrix4,er=Q.copySubArrays;function tr(e,t,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i}function nr(e,t,n,r,i,o){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=o}function rr(e,t){return e-t}var ir=function(e){function t(e,n,r,i){var a;return g(this,t),(a=C(this,k(t).call(this)))._useZSprites=r,a._cylGeometry=r?new o.PlaneBufferGeometry(2,2,1,1):new Kn(1,1,1,Math.max(3,n),2,i),a._init(e,a._cylGeometry,a._useZSprites),a._collisionGeo=new Zn(e,3),a}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n,r){var i=Cn.calcCylinderMatrix(t,n,r),o=i.elements,a=4*e;this._collisionGeo.setItem(e,t,n,r),nr(this._matVector1,a,o[0],o[4],o[8],o[12]),nr(this._matVector2,a,o[1],o[5],o[9],o[13]),nr(this._matVector3,a,o[2],o[6],o[10],o[14]),this._useZSprites&&(Qn.getInverse(i),o=Qn.elements,nr(this._invmatVector1,a,o[0],o[4],o[8],o[12]),nr(this._invmatVector2,a,o[1],o[5],o[9],o[13]),nr(this._invmatVector3,a,o[2],o[6],o[10],o[14]))}},{key:"setColor",value:function(e,t,n){var r=3*e;Jn.set(t),tr(this._color1,r,Jn.r,Jn.g,Jn.b),Jn.set(n),tr(this._color2,r,Jn.r,Jn.g,Jn.b)}},{key:"computeBoundingSphere",value:function(){this._collisionGeo.computeBoundingSphere(),this.boundingSphere=this._collisionGeo.boundingSphere}},{key:"computeBoundingBox",value:function(){this._collisionGeo.computeBoundingBox(),this.boundingBox=this._collisionGeo.boundingBox}},{key:"raycast",value:function(e,t){this._collisionGeo.raycast(e,t)}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("matVector1").needsUpdate=!0,this.getAttribute("matVector2").needsUpdate=!0,this.getAttribute("matVector3").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0,this.getAttribute("color2").needsUpdate=!0,this.getAttribute("alphaColor").needsUpdate=!0,this._useZSprites&&(this.getAttribute("invmatVector1").needsUpdate=!0,this.getAttribute("invmatVector2").needsUpdate=!0,this.getAttribute("invmatVector3").needsUpdate=!0),this._collisionGeo.finishUpdate()}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,t){for(var n=this._alpha,r=0,i=e.length;r<i;++r)n[Math.floor(e[r]/2)]=t;this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubset",value:function(e){var t=function(e){e.sort(rr);for(var t=[],n=[],r=0,i=e.length;r<i;++r){var o=e[r],a={first:!1,second:!1};(0|o)%2===0?(a.first=!0,a.second=r+1<i&&e[r+1]===e[r]+1,a.second&&++r):a.second=!0,t.push(Math.floor(o/2)),n.push(a)}return{indices:t,cylinderInfo:n}}(e),n=t.indices,r=n.length,i=new o.InstancedBufferGeometry;return this._init.call(i,r,this._cylGeometry,this._useZSprites),er(this._matVector1,i._matVector1,n,4),er(this._matVector2,i._matVector2,n,4),er(this._matVector3,i._matVector3,n,4),this._useZSprites&&(er(this._invmatVector1,i._invmatVector1,n,4),er(this._invmatVector2,i._invmatVector2,n,4),er(this._invmatVector3,i._invmatVector3,n,4)),er(this._color1,i._color1,n,3),er(this._color2,i._color2,n,3),function(e,t,n){for(var r=0,i=e.length;r<i;++r){var o=e[r];o.first||(t[3*r]=-.5),o.second||(n[3*r]=-.5)}}(t.cylinderInfo,i._color1,i._color2),i.boundingSphere=this.boundingSphere,i.boundingBox=this.boundingBox,[i]}},{key:"getGeoParams",value:function(){return this._cylGeometry.parameters}},{key:"_init",value:function(e,t,n){this.copy(t),this._matVector1=Q.allocateTyped(Float32Array,4*e),this._matVector2=Q.allocateTyped(Float32Array,4*e),this._matVector3=Q.allocateTyped(Float32Array,4*e),this._color1=Q.allocateTyped(Float32Array,3*e),this._color2=Q.allocateTyped(Float32Array,3*e);var r=this._alpha=Q.allocateTyped(Float32Array,e);i.a.fill(r,1),this.setAttribute("matVector1",new o.InstancedBufferAttribute(this._matVector1,4,!1,1)),this.setAttribute("matVector2",new o.InstancedBufferAttribute(this._matVector2,4,!1,1)),this.setAttribute("matVector3",new o.InstancedBufferAttribute(this._matVector3,4,!1,1)),this.setAttribute("color",new o.InstancedBufferAttribute(this._color1,3,!1,1)),this.setAttribute("color2",new o.InstancedBufferAttribute(this._color2,3,!1,1)),this.setAttribute("alphaColor",new o.InstancedBufferAttribute(this._alpha,1,!1,1)),n&&(this._invmatVector1=Q.allocateTyped(Float32Array,4*e),this._invmatVector2=Q.allocateTyped(Float32Array,4*e),this._invmatVector3=Q.allocateTyped(Float32Array,4*e),this.setAttribute("invmatVector1",new o.InstancedBufferAttribute(this._invmatVector1,4,!1,1)),this.setAttribute("invmatVector2",new o.InstancedBufferAttribute(this._invmatVector2,4,!1,1)),this.setAttribute("invmatVector3",new o.InstancedBufferAttribute(this._invmatVector3,4,!1,1)))}}]),t}(o.InstancedBufferGeometry),or=new o.Vector3,ar=new o.Vector3,sr=new o.Vector3,ur=new o.Vector3(1,0,0),cr=new o.Vector3,lr=new o.Vector3;var fr=function(e){function t(e,n,r){var i;g(this,t);var a=function(e,t){for(var n=new o.BufferGeometry,r=e.length,i=r*t,a=i<=65536?Uint16Array:Uint32Array,s=(t-1)*r*2,u=new o.BufferAttribute(Q.allocateTyped(a,3*s),1),c=0,l=0,f=0;f<t;f++){if(f!==t-1)for(var h=0;h<r;h++){var p=c+h,d=c+r+h,m=c+r+(h+1)%r,v=c+(h+1)%r;u.setXYZ(3*l,p,v,d),l++,u.setXYZ(3*l,d,v,m),l++}c+=r}n.setIndex(u);var g=Q.allocateTyped(Float32Array,3*i);return n.setAttribute("position",new o.BufferAttribute(g,3)),n._positions=e,n}(e,n);(i=C(this,k(t).call(this,a,r)))._ringsCount=n;for(var s=i._tmpShape=[],u=0;u<e.length;++u)s[u]=new o.Vector3;return i}return P(t,e),_(t,[{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._chunkGeo._positions.length,o=this._ringsCount,a=i*this._ringsCount*e*3;this._setPoints(t,i,o,a),n?this._setSlopeNormals(i,o,a):this._setBaseNormals(i,o,a),r&&this._addCut(i,o,a)}},{key:"_setPoints",value:function(e,t,n,r){for(var i=this._tmpShape,o=this._positions,a=this._chunkGeo._positions,s=0,u=r;s<n;++s)for(var c=e[s],l=0;l<t;++l,u+=3)i[l].copy(a[l]).applyMatrix4(c).toArray(o,u)}},{key:"_setBaseNormals",value:function(e,t,n){for(var r=3*e,i=0,o=n;i<t;++i,o+=r)this._countNormalsInRing(e,o,!1)}},{key:"_setSlopeNormals",value:function(e,t,n){for(var r=this._normals,i=3*e,o=n,a=0;a<e;++a,o+=3)ur.toArray(r,o);if(o-2*i>0)for(var s=0;s<e;++s,o+=3)sr.fromArray(r,o-2*i).toArray(r,o);else this._countNormalsInRing(e,o,!0,+i),o+=i;for(var u=2;u<t;++u,o+=i)this._countNormalsInRing(e,o,!0,-i)}},{key:"_countNormalsInRing",value:function(e,t,n,r){var i=this._tmpShape,o=this._normals;i[0].fromArray(this._positions,t),i[e-1].fromArray(this._positions,t+3*(e-1));for(var a=0;a<e;++a,t+=3)a<e-1&&i[a+1].fromArray(this._positions,t+3),n?(lr.fromArray(this._positions,t+r),or.subVectors(i[(a+e-1)%e],i[(a+1)%e]).normalize(),ar.subVectors(i[a],lr).normalize(),sr.crossVectors(ar,or).normalize().toArray(o,t)):(or.subVectors(i[a],i[(a+e-1)%e]).normalize(),ar.subVectors(i[a],i[(a+1)%e]).normalize(),sr.addVectors(or,ar).normalize().toArray(o,t))}},{key:"_addCut",value:function(e,t,n){if(!(e<3||t<2)){var r=this._positions,i=this._normals,o=this._tmpShape,a=3*e;o[0].fromArray(r,n),o[1].fromArray(r,n+3),o[2].fromArray(r,n+6),or.subVectors(o[1],o[0]).normalize(),ar.subVectors(o[1],o[2]).normalize(),cr.crossVectors(or,ar).normalize();for(var s=n,u=0;u<2*e;++u,s+=3)cr.toArray(i,s);if(t>2)for(var c=0;c<e;++c,s+=3)sr.fromArray(r,s-a).toArray(r,s)}}}]),t}(Wn),hr=new o.Color,pr=new o.Vector3;function dr(e,t,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i}function mr(e,t,n,r,i,o){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=o}function vr(e,t,n,r){var i=4*t,o=i+4*n;return e.subarray(i*r,o*r)}var gr=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this)))._initVertices(e),n}return P(t,e),_(t,[{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.getAttribute("position").needsUpdate=!0,this.getAttribute("color").needsUpdate=!0,this.getAttribute("alphaColor").needsUpdate=!0,this.getAttribute("direction").needsUpdate=!0}},{key:"setColor",value:function(e,t){hr.set(t);var n=4*e*3;dr(this._colors,n,hr.r,hr.g,hr.b),n+=3,dr(this._colors,n,hr.r,hr.g,hr.b),n+=3,dr(this._colors,n,hr.r,hr.g,hr.b),n+=3,dr(this._colors,n,hr.r,hr.g,hr.b)}},{key:"setSegment",value:function(e,t,n){pr.subVectors(t,n),pr.normalize();var r=this._positions,i=this._directions,o=4*e*4,a=4*e*3;mr(r,o,t.x,t.y,t.z,.5),dr(i,a,pr.x,pr.y,pr.z),a+=3,mr(r,o+=4,t.x,t.y,t.z,-.5),dr(i,a,pr.x,pr.y,pr.z),a+=3,mr(r,o+=4,n.x,n.y,n.z,.5),dr(i,a,pr.x,pr.y,pr.z),a+=3,mr(r,o+=4,n.x,n.y,n.z,-.5),dr(i,a,pr.x,pr.y,pr.z)}},{key:"setOpacity",value:function(e,t,n){var r=4*e,o=4*t;i.a.fill(this.alpha,n,o,r),this.getAttribute("alphaColor").needsUpdate=!0}},{key:"getSubsetSegments",value:function(e,t){return[vr(this._positions,e,t,4),vr(this._directions,e,t,3)]}},{key:"getSubsetColors",value:function(e,t){return vr(this._colors,e,t,3)}},{key:"getSubsetOpacities",value:function(e,t){return vr(this._alpha,e,t,1)}},{key:"getNumVertexPerSegment",value:function(){return 4}},{key:"getPositionSize",value:function(){return 4}},{key:"setSegments",value:function(e,t){var n=4*e*4;if(t instanceof Array&&2===t.length){this._positions.set(t[0],n);var r=4*e*3;this._directions.set(t[1],r)}else this._positions.set(t,n)}},{key:"setColors",value:function(e,t){var n=4*e*3;this._colors.set(t,n)}},{key:"_initVertices",value:function(e){this._buffersSize=4*e;var t=this._buffersSize,n=t>65535;this._index=Q.allocateTyped(n?Uint32Array:Uint16Array,6*e),this._positions=Q.allocateTyped(Float32Array,4*t),this._colors=Q.allocateTyped(Float32Array,3*t),this._directions=Q.allocateTyped(Float32Array,3*t);var r=this._alpha=Q.allocateTyped(Float32Array,t);i.a.fill(r,1);for(var a=this._index,s=0,u=0,c=0;c<e;c++,s+=6,u+=4)a[s]=u,a[s+1]=u+1,a[s+2]=u+3,a[s+3]=u,a[s+4]=u+2,a[s+5]=u+3;this.setIndex(new o.BufferAttribute(this._index,1)),this.setAttribute("position",new o.BufferAttribute(this._positions,4)),this.setAttribute("color",new o.BufferAttribute(this._colors,3)),this.setAttribute("alphaColor",new o.BufferAttribute(r,1)),this.setAttribute("direction",new o.BufferAttribute(this._directions,3))}}]),t}(o.BufferGeometry),yr=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"startUpdate",value:function(){return!0}},{key:"computeBoundingSphere",value:function(){var e=this.boundingBox,t=0,n=new o.Vector3;e&&e.getCenter(n);for(var r=this._positions,i=this.boundingSphere||new o.Sphere,a=this._positions.length,s=new o.Vector3,u=this.getPositionSize(),c=0;c<a;c+=u){s.set(r[c],r[c+1],r[c+2]);var l=n.distanceToSquared(s);t<l&&(t=l)}i.set(n,Math.sqrt(t)),this.boundingSphere=i}},{key:"computeBoundingBox",value:function(){for(var e=this._positions,t=new o.Box3,n=this._positions.length,r=new o.Vector3,i=this.getPositionSize(),a=0;a<n;a+=i)r.set(e[a],e[a+1],e[a+2]),t.expandByPoint(r);this.boundingBox=t}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}}]),t}(gr),_r=new o.Vector3,xr=new o.Matrix3,br=function(e){function t(e,n){var r;g(this,t);var i=new o.CylinderBufferGeometry(1,1,1,Math.max(3,n),2,!0),a=(r=C(this,k(t).call(this,i,e)))._chunkSize;return r._chunkPos=r._chunkGeo.attributes.position.array,r._chunkNorms=r._chunkGeo.attributes.normal.array,r._tmpVector=Q.allocateTyped(Float32Array,3*a),r}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n,r){var i,o=this._chunkSize,a=o*e*3,s=this._tmpVector,u=this._chunkPos,c=this._chunkNorms,l=Cn.calcCylinderMatrix(t,n,r);xr.getNormalMatrix(l);for(var f=0;f<o;++f)i=3*f,_r.fromArray(u,i),_r.applyMatrix4(l),_r.toArray(s,i);this._positions.set(s,a);for(var h=0;h<o;++h)i=3*h,_r.fromArray(c,i),_r.applyMatrix3(xr),_r.toArray(s,i);this._normals.set(s,a)}}]),t}(Wn),wr=function(e){function t(e,n,r){var i;return g(this,t),(i=C(this,k(t).call(this,e*n)))._init(n),i._collisionGeo=r?new br(e*n,3):null,i}return P(t,e),_(t,[{key:"startUpdate",value:function(){return!0}},{key:"computeBoundingSphere",value:function(){var e=this._collisionGeo;if(e)return e.computeBoundingSphere(),void(this.boundingSphere=e.boundingSphere);Ke(k(t.prototype),"computeBoundingSphere",this).call(this)}},{key:"computeBoundingBox",value:function(){var e=this._collisionGeo;if(e)return e.computeBoundingBox(),void(this.boundingBox=e.boundingBox);Ke(k(t.prototype),"computeBoundingBox",this).call(this)}},{key:"raycast",value:function(e,t){if(this._collisionGeo){var n=this._chunkSize;this._collisionGeo.raycast(e,t);for(var r=0,i=t.length;r<i;++r){var o=t[r].chunkIdx;void 0!==o&&(o=o/n|0,t[r].chunkIdx=o)}}}},{key:"setColor",value:function(e,n){for(var r=this._chunkSize,i=e*r,o=i+r;i<o;++i)Ke(k(t.prototype),"setColor",this).call(this,i,n)}},{key:"setSegment",value:function(e,n,r,i){var o=this._chunkSize,a=e*o+n;Ke(k(t.prototype),"setSegment",this).call(this,a,r,i),this._collisionGeo&&this._collisionGeo.setItem(e*o+n,r,i,.1)}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"setOpacity",value:function(e,n){for(var r=this._chunkSize,i=0,o=e.length;i<o;++i){var a=e[i]*r;Ke(k(t.prototype),"setOpacity",this).call(this,a,a+r-1,n)}}},{key:"getSubset",value:function(e){for(var n=e.length,r=this._chunkSize,i=new t(n,r,!1),o=0,a=e.length;o<a;++o){var s=o*r,u=e[o]*r;i.setSegments(s,this.getSubsetSegments(u,r)),i.setColors(s,this.getSubsetColors(u,r))}return i.boundingSphere=this.boundingSphere,i.boundingBox=this.boundingBox,[i]}},{key:"_init",value:function(e){this._chunkSize=e}}]),t}(yr),Sr=new o.Vector3,Er=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,2*e)))._init(e),n._collisionGeo=new Zn(e,3),n}return P(t,e),_(t,[{key:"setItem",value:function(e,n,r){this._collisionGeo.setItem(e,n,r,.3);var i=2*e;Sr.lerpVectors(n,r,.5),Ke(k(t.prototype),"setSegment",this).call(this,i,n,Sr),Ke(k(t.prototype),"setSegment",this).call(this,i+1,Sr,r)}},{key:"setColor",value:function(e,n,r){var i=2*e;Ke(k(t.prototype),"setColor",this).call(this,i,n),Ke(k(t.prototype),"setColor",this).call(this,i+1,r)}},{key:"raycast",value:function(e,t){this._collisionGeo&&this._collisionGeo.raycast(e,t)}},{key:"getSubset",value:function(e){for(var n=e.length,r=new t(n,!1),i=0,o=n;i<o;++i){var a=e[i];r.setSegments(i,this.getSubsetSegments(a,1)),r.setColors(i,this.getSubsetColors(a,1))}return r.boundingSphere=this.boundingSphere,r.boundingBox=this.boundingBox,[r]}},{key:"_init",value:function(e){this._segCounts=2*e}}]),t}(yr),Tr=[new o.Vector3(1,0,0),new o.Vector3(-1,0,0),new o.Vector3(0,1,0),new o.Vector3(0,-1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,-1)],Ar=Tr.length,Mr=new o.Vector3,Cr=new o.Vector3,kr=function(e){function t(e){return g(this,t),C(this,k(t).call(this,e,e,Ar/2|0,!1))}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n){this.setSphere(e,t,n);for(var r=0;r<Ar/2;++r){var i=2*r;Mr.x=t.x+Tr[i].x*n,Mr.y=t.y+Tr[i].y*n,Mr.z=t.z+Tr[i].z*n;var o=i+1;Cr.x=t.x+Tr[o].x*n,Cr.y=t.y+Tr[o].y*n,Cr.z=t.z+Tr[o].z*n,this.setSegment(e,r,Mr,Cr)}}}]),t}(Bn(wr)),Rr=new o.Color,Pr=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this)))._opts=n,r.zClip=r._opts.zClip,r._posRad=Q.allocateTyped(Float32Array,4*e),r._colors=Q.allocateTyped(Float32Array,3*e),r}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n){var r=this._posRad,i=4*e;r[i++]=t.x,r[i++]=t.y,r[i++]=t.z,r[i]=n}},{key:"setColor",value:function(e,t){Rr.set(t);var n=this._colors,r=3*e;n[r++]=Rr.r,n[r++]=Rr.g,n[r]=Rr.b}},{key:"finalize",value:function(){this.finishUpdate(),this.computeBoundingSphere()}},{key:"finishUpdate",value:function(){this._build()}},{key:"setOpacity",value:function(){}},{key:"raycast",value:function(){}},{key:"getSubset",value:function(){return[]}}]),t}(Gn),Lr=function(){function e(){g(this,e),this.pointsValuesLinear=null,this.hasIntersection=null,this.bitsInside=null}return _(e,[{key:"create",value:function(e){var t=e*e*e;if(t>117440512)throw new Error("Too large cube dimension: lead to memory huge uasge");return this.pointsValuesLinear=Q.allocateTyped(Float32Array,32*t),this.hasIntersection=Q.allocateTyped(Int32Array,t),this.bitsInside=Q.allocateTyped(Int32Array,t),0}},{key:"destroy",value:function(){this.bitsInside=null,this.hasIntersection=null,this.pointsValuesLinear=null}}]),e}();Lr.prototype.striIndicesMarchCube=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];var Or=[0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0];function Ir(e,t,n){var r=e.getValue(t.x,t.y,t.z);n.set(r[0],r[1],r[2])}var Nr=function e(){g(this,e),this._arrSize=8,this.p=new Array(this._arrSize),this.g=new Array(this._arrSize),this.val=new Array(this._arrSize);for(var t=0;t<this._arrSize;++t)this.p[t]=new o.Vector3,this.g[t]=new o.Vector3;this.cubeIndex=0},Dr=function e(){g(this,e),this.a={p:new o.Vector3,n:new o.Vector3},this.b={p:new o.Vector3,n:new o.Vector3},this.c={p:new o.Vector3,n:new o.Vector3}};function Fr(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=new o.Vector3;return t}var zr=function(){function e(){g(this,e),this._numTriangles=0,this._numVertices=0,this._position=[],this._normals=[],this._colors=null,this._indices=[],this._volumetricData=null,this._xAxis=new o.Vector3,this._yAxis=new o.Vector3,this._zAxis=new o.Vector3,this._xDir=new o.Vector3,this._yDir=new o.Vector3,this._zDir=new o.Vector3}return _(e,[{key:"_prepareAxesAndDirs",value:function(){var e=this._volumetricData.getCellSize(),t=this._xAxis,n=this._yAxis,r=this._zAxis,i=this._xDir,a=this._yDir,s=this._zDir;t.set(e.x,0,0),n.set(0,e.y,0),r.set(0,0,e.z),i.set(1,0,0),a.set(0,1,0),s.set(0,0,1);var u=new o.Vector3;if(u.crossVectors(i,a),u.dot(s)<0&&(i.negate(),a.negate(),s.negate()),i.x<0||i.y<0||i.z<0||a.x<0||a.y<0||a.z<0||s.x<0||s.y<0||s.z<0)return!1;var c=function(e){return Math.abs(e)>Number.EPSILON};return!(c(t.y)||c(t.z)||c(n.x)||c(n.z)||c(r.x)||c(r.y))}},{key:"_vertexInterp",value:function(e,t,n,r,i,o){var a=t.p[n],s=t.p[r],u=t.g[n],c=t.g[r],l=t.val[n],f=e-l,h=t.val[r]-l,p=0;Math.abs(h)>0&&(p=f/h),p=p>1?1:p,i.lerpVectors(a,s,p),o.lerpVectors(u,c,p)}},{key:"_polygonize",value:function(t,n,r){for(var i=t.cubeIndex,o=0,a=e._arrSize,s=e._firstIndices,u=e._secondIndices,c=e._vertexList,l=e._normalList;o<a;++o)Or[i]&1<<o&&this._vertexInterp(n,t,s[o],u[o],c[o],l[o]);var f=0,h=16*i,p=e._triTable;for(o=0;-1!==p[h+o];o+=3)r[f].a.p.copy(c[p[h+o]]),r[f].a.n.copy(l[p[h+o]]),r[f].b.p.copy(c[p[h+o+1]]),r[f].b.n.copy(l[p[h+o+1]]),r[f].c.p.copy(c[p[h+o+2]]),r[f].c.n.copy(l[p[h+o+2]]),++f;return f}},{key:"_doGridPosNorms",value:function(e,t,n){for(var r,i=this._volumetricData,a=this._volumetricData.getData(),s=i.getDimensions(),u=s[0],c=s[1],l=s[2],f=t*i.getStrideX(),h=t*i.getStrideY(),p=t*i.getStrideZ(),d=new Nr,m=d.val,v=d.val.length,g=[new o.Vector3(0,0,0),new o.Vector3(t,0,0),new o.Vector3(t,t,0),new o.Vector3(0,t,0),new o.Vector3(0,0,t),new o.Vector3(t,0,t),new o.Vector3(t,t,t),new o.Vector3(0,t,t)],y=new Array(5),_=0;_<5;++_)y[_]=new Dr;var x=this,b=this._position,w=this._normals;r=n?function(){var e=new o.Vector3(x._xAxis.x,x._yAxis.y,x._zAxis.z);return function(t){var n=t.p.clone();n.multiply(e),b.push(n.add(x._origin)),w.push(t.n.clone())}}():function(){var e=new o.Matrix3;e.set(x._xAxis.x,x._yAxis.x,x._zAxis.x,x._xAxis.y,x._yAxis.y,x._zAxis.y,x._xAxis.z,x._yAxis.z,x._zAxis.z);var t=new o.Matrix3;return t.set(x._xDir.x,x._yDir.x,x._zDir.x,x._xDir.y,x._yDir.y,x._zDir.y,x._xDir.z,x._yDir.z,x._zDir.z),function(n){b.push(n.p.clone().applyMatrix3(e).add(x._origin)),w.push(n.n.clone().applyMatrix3(t))}}();for(var S=this._indices,E=0,T=0;T<l-t;T+=t)for(var A=0;A<c-t;A+=t)for(var M=i.getDirectIdx(0,A,T),C=0;C<u-t;C+=t,M+=f){m[0]=a[M],m[1]=a[M+f],m[3]=a[M+h],m[2]=a[M+f+h],m[4]=a[M+p],m[5]=a[M+f+p],m[7]=a[M+h+p],m[6]=a[M+f+h+p];for(var k=0,R=0;R<v;++R)m[R]<e&&(k|=1<<R);if(0!==Or[k]){for(d.cubeIndex=k,R=0;R<v;++R)d.p[R].set(C+g[R].x,A+g[R].y,T+g[R].z),Ir(this._gradient,d.p[R],d.g[R]);var P=this._polygonize(d,e,y);for(E+=P,R=0;R<P;++R)S.push(3*this._numTriangles),S.push(3*this._numTriangles+1),S.push(3*this._numTriangles+2),++this._numTriangles,r(y[R].a),r(y[R].b),r(y[R].c)}}return E}},{key:"compute",value:function(e,t,n,r){this._volumetricData=e,this._origin=t,this._gradient=e.computeGradient(),this._doGridPosNorms(n,r,this._prepareAxesAndDirs())}},{key:"_remapIndices",value:function(e,t){for(var n=this._indices,r=Q.allocateTyped(Uint32Array,t),i=0;i<t;++i)n[i]=e[n[i]],r[i]=n[i];this._indices=r}},{key:"_remapVertices",value:function(e,t,n){for(var r=Q.allocateTyped(Float32Array,3*n),i=Q.allocateTyped(Float32Array,3*n),o=0;o<n;++o){var a=e[o];r[3*o]=a.x,r[3*o+1]=a.y,r[3*o+2]=a.z;var s=t[o].normalize();i[3*o]=s.x,i[3*o+1]=s.y,i[3*o+2]=s.z}this._position=r,this._normals=i}},{key:"vertexFusion",value:function(e,t){var n=this._indices.length,r=this._position,i=this._normals,o=0|r.length;if(0!==n&&0!==o){var a=Q.allocateTyped(Uint32Array,o);a[0]=0;for(var s=1,u=1;u<o;++u){for(var c=s-e<0?0:s-e,l=c+t>s?s:c+t,f=-1,h=c;h<l;++h)if(Math.abs(r[u]-r[h])<Number.EPSILON){f=h;break}-1!==f?a[u]=f:(r[s].copy(r[u]),i[s].copy(i[u]),a[u]=s,++s)}this._remapIndices(a,n),this._remapVertices(r,i,s)}}},{key:"setColorVolTex",value:function(e,t,n,r){var i,o,a,s,u,c,l=this._position.length/3,f=this._position,h=this._origin,p=this._volumetricData.getDimensions(),d=p[0]-1,m=p[1]-1,v=p[2]-1,g=e.getData(),y=e.getStrideX(),_=e.getStrideY(),x=e.getStrideZ();null!==r&&(a=n.getData(),s=n.getStrideX(),u=n.getStrideY(),c=n.getStrideZ());var b=1/this._xAxis.x,w=1/this._yAxis.y,S=1/this._zAxis.z,E=[],T=[],A=Q.allocateTyped(Float32Array,3*l);function M(e,t,n,r){r[0]=(1-e)*g[t]+e*g[n],r[1]=(1-e)*g[t+1]+e*g[n+1],r[2]=(1-e)*g[t+2]+e*g[n+2]}function C(e,n,r,i){var o=t[e];if(null!=o){E[o.index]=o;var s=n*r*i*a[e];"undefined"===typeof T[o.index]?T[o.index]=s:T[o.index]+=s}}var k=Q.allocateTyped(Int32Array,l),R=0;for(i=0;i<l;i++){var P=3*i,L=(f[P]-h.x)*b,O=(f[P+1]-h.y)*w,I=(f[P+2]-h.z)*S,N=0|Math.min(Math.max(L,0),d),D=0|Math.min(Math.max(O,0),m),F=0|Math.min(Math.max(I,0),v),z=L-N,B=O-D,j=I-F;if(null!=r){E=[],T=[],C(o=n.getDirectIdx(N,D,F),1-z,1-B,1-j),C(o+s,z,1-B,1-j),C(o+u,1-z,B,1-j),C(o+s+u,z,B,1-j),C(o+c,1-z,1-B,j),C(o+s+c,z,1-B,j),C(o+u+c,1-z,B,j),C(o+s+u+c,z,B,j);var V=0,U=-1;for(var G in T)T[G]>V&&(U=G,V=T[G]);if(U<0||!r.includesAtom(E[U])){k[i]=-1;continue}}k[i]=R++;var H=N<d?y:0,W=D<m?_:0,q=F<v?x:0,Y=[0,0,0],X=[0,0,0],$=[0,0,0],Z=[0,0,0];M(z,o=e.getDirectIdx(N,D,F),o+H,Y),M(z,o+W,o+H+W,X),M(z,o+q,o+H+q,$),M(z,o+W+q,o+H+W+q,Z);var K=[0,0,0];K[0]=(1-B)*Y[0]+B*X[0],K[1]=(1-B)*Y[1]+B*X[1],K[2]=(1-B)*Y[2]+B*X[2];var J=[0,0,0];J[0]=(1-B)*$[0]+B*Z[0],J[1]=(1-B)*$[1]+B*Z[1],J[2]=(1-B)*$[2]+B*Z[2],A[P]=(1-j)*K[0]+j*J[0],A[P+1]=(1-j)*K[1]+j*J[1],A[P+2]=(1-j)*K[2]+j*J[2]}if(this._colors=A,null!=r){for(i=0;i<l;++i){var ee=k[i];ee<0||(this._position[3*ee]=this._position[3*i],this._position[3*ee+1]=this._position[3*i+1],this._position[3*ee+2]=this._position[3*i+2],this._normals[3*ee]=this._normals[3*i],this._normals[3*ee+1]=this._normals[3*i+1],this._normals[3*ee+2]=this._normals[3*i+2],this._colors[3*ee]=this._colors[3*i],this._colors[3*ee+1]=this._colors[3*i+1],this._colors[3*ee+2]=this._colors[3*i+2])}var te=this._indices.length/3,ne=0;for(i=0;i<te;++i){var re=k[this._indices[3*i]],ie=k[this._indices[3*i+1]],oe=k[this._indices[3*i+2]];re>=0&&ie>=0&&oe>=0&&(this._indices[3*ne]=re,this._indices[3*ne+1]=ie,this._indices[3*ne+2]=oe,++ne)}this._position=new Float32Array(this._position.buffer.slice(0,3*R*4)),this._normals=new Float32Array(this._normals.buffer.slice(0,3*R*4)),this._colors=new Float32Array(this._colors.buffer.slice(0,3*R*4)),this._indices=new Uint32Array(this._indices.buffer.slice(0,3*ne*4))}}},{key:"toMesh",value:function(){var e=new o.BufferGeometry;return e.setIndex(new o.BufferAttribute(this._indices,1)),e.setAttribute("position",new o.BufferAttribute(this._position,3)),e.setAttribute("normal",new o.BufferAttribute(this._normals,3)),e.setAttribute("color",new o.BufferAttribute(this._colors,3)),e.computeBoundingSphere(),e}}]),e}();Ee(zr,"_triTable",Lr.prototype.striIndicesMarchCube),Ee(zr,"_arrSize",12),Ee(zr,"_firstIndices",[0,1,2,3,4,5,6,7,0,1,2,3]),Ee(zr,"_secondIndices",[1,2,3,0,5,6,7,4,4,5,6,7]),Ee(zr,"_vertexList",Fr(zr._arrSize)),Ee(zr,"_normalList",Fr(zr._arrSize));var Br=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){var e=this._opts;this.numVoxels=[128,128,128],this.xAxis=new o.Vector3(1,0,0),this.yAxis=new o.Vector3(0,1,0),this.zAxis=new o.Vector3(0,0,1),this.origin=new o.Vector3(0,0,0),this._visibilitySelector=e.visibilitySelector,this._calcSurface(e)}},{key:"_findMinMax",value:function(e){for(var t=e.length/4,n=[e[0],e[1],e[2],e[3]],r=[e[0],e[1],e[2],e[3]],i=1;i<t;++i)for(var o=4*i,a=0;a<4;++a){var s=e[o+a];n[a]=Math.max(s,n[a]),r[a]=Math.min(s,r[a])}return{maxPosRad:n,minPosRad:r}}},{key:"_findNumVoxels",value:function(e,t){var n=this.numVoxels,r=this._findMinMax(e),i=r.minPosRad,o=r.maxPosRad;i[3]>4&&(t.gridSpacing*=i[3]);var a=t.radScale*o[3]*1.7,s=a;s=.65*Math.sqrt(4/3*Math.PI*s*s*s),a=Math.max(a,s);for(var u=0;u<3;++u)i[u]-=a,o[u]+=a;for(u=0;u<3;++u)n[u]=Math.ceil((o[u]-i[u])/t.gridSpacing);this.xAxis.x=(n[0]-1)*t.gridSpacing,this.yAxis.y=(n[1]-1)*t.gridSpacing,this.zAxis.z=(n[2]-1)*t.gridSpacing;var l=c(i,3);return this.origin.x=l[0],this.origin.y=l[1],this.origin.z=l[2],{bbox:r,dim:n}}},{key:"_makeSurface",value:function(e,t){var n=new zr;n.compute(e.volMap,this.origin,t.isoValue,1),n.vertexFusion(9,9),n._numTriangles>0?(n.setColorVolTex(e.volTexMap,e.atomMap,e.atomWeightMap,this._visibilitySelector),this.setIndex(new o.BufferAttribute(n._indices,1)),this.setAttribute("position",new o.BufferAttribute(n._position,3)),this.setAttribute("normal",new o.BufferAttribute(n._normals,3)),this.setAttribute("color",new o.BufferAttribute(n._colors,3))):this.setAttribute("position",new o.BufferAttribute(Q.allocateTyped(Float32Array,0),3))}},{key:"_calcSurface",value:function(e){var t={posRad:this._posRad,colors:this._colors,atoms:this._opts.atoms};if(0!==t.posRad.length){var n=this._findNumVoxels(t.posRad,e),r=new o.Box3(this.origin,new o.Vector3(this.xAxis.x,this.yAxis.y,this.zAxis.z).add(this.origin)),i=this._computeSurface(t,r,n,e);this._makeSurface(i,e)}}}]),t}(Pr),jr=rn.Volume,Vr=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_computeSurface",value:function(e,t,n,r){this._shiftByOrigin(e.posRad);var i={volMap:new jr(Float32Array,this.numVoxels,t),volTexMap:new jr(Float32Array,this.numVoxels,t,3)};return null!=this._visibilitySelector&&(i.atomMap=[],i.atomWeightMap=new jr(Float32Array,this.numVoxels,t)),this.gaussdensity(i,e,null,r),i}},{key:"gaussdensity",value:function(e,t,n,r){var i,o=t.posRad.length/4,a=t.posRad,s=t.colors,u=this.numVoxels,c=r.radScale,l=r.gaussLim,f=r.gridSpacing,h=1/r.isoValue,p=1/f,d=u[0]-1,m=u[1]-1,v=u[2]-1,g=e.volMap,y=e.volTexMap,_=g.getData(),x=g.getStrideX(),b=y.getData(),w=y.getStrideX();null!=this._visibilitySelector&&(i=e.atomWeightMap.getData());for(var S=e.atomMap,E=0;E<o;++E){var T=4*E,A=a[T+3]*c,M=null===n?1:n[E],C=1/(2*A*A),k=l*A,R=k*k;k*=p;var P=a[T]*p,L=Math.max(P-k|0,0),O=Math.min(P+k|0,d);P=a[T+1]*p;var I=Math.max(P-k|0,0),N=Math.min(P+k|0,m);P=a[T+2]*p;for(var D=Math.max(P-k|0,0),F=Math.min(P+k|0,v),z=D*f-a[T+2],B=D;B<=F;++B,z+=f)for(var j=I*f-a[T+1],V=I;V<=N;++V,j+=f){var U=j*j+z*z;if(!(U>=R))for(var G=g.getDirectIdx(L,V,B),H=y.getDirectIdx(L,V,B),W=L*f-a[T],q=L;q<=O;++q,W+=f,G+=x,H+=w){var Y=-(W*W+U)*C,X=Math.exp(Y)*M;null!=this._visibilitySelector&&X>i[G]&&(i[G]=X,S[G]=t.atoms[E]),_[G]+=X,X*=h;var $=3*E;b[H]+=X*s[$],b[H+1]+=X*s[$+1],b[H+2]+=X*s[$+2]}}}}},{key:"_shiftByOrigin",value:function(e){for(var t=this.origin.x,n=this.origin.y,r=this.origin.z,i=e.length/4,o=0;o<i;++o){var a=4*o;e[a]-=t,e[a+1]-=n,e[a+2]-=r}}}]),t}(Br);function Ur(e,t,n,r){var i=e.length/4,o=t[0],a=t[1],s=t[2],u=n[0],c=n[1],l=n[2];function f(e,t){return Math.floor((e-t)/r)}var h,p,d,m,v,g=f(u,o)+1,y=f(c,a)+1,_=f(l,s)+1,x=g*y*_,b=y*_,w=[];for(h=0;h<i;h++){var S=4*h;d=e[S],m=e[S+1],v=e[S+2],void 0===w[p=(f(d,o)*y+f(m,a))*_+f(v,s)]?w[p]=[h]:w[p].push(h)}var E,T=Q.allocateTyped(Uint32Array,x),A=Q.allocateTyped(Uint16Array,x),M=Q.allocateTyped(Uint32Array,i),C=0,k=0;for(h=0;h<x;h++){var R=T[h]=C,P=w[h];if(void 0!==P)for(E=0;E<P.length;E++)M[C]=P[E],C++;var L=C-R;A[h]=L,L>k&&(k=L)}this.neighbourListLength=27*k+1,this.withinRadii=function(t,n,r,i,u){var c=0,l=f(t,o),d=f(n,a),m=f(r,s),v=Math.max(0,l-1),x=Math.max(0,d-1),w=Math.max(0,m-1),S=Math.min(g-1,l+1),C=Math.min(y-1,d+1),k=Math.min(_-1,m+1);for(h=v;h<=S;++h){var R=h*b;for(E=x;E<=C;++E)for(var P=E*_,L=w;L<=k;++L)for(var O=T[p=R+P+L],I=O+A[p],N=O;N<I;N++){var D=4*M[N],F=e[D]-t,z=e[D+1]-n,B=e[D+2]-r,j=e[D+3]+i;F*F+z*z+B*B<=j*j&&(u[c++]=M[N])}}u[c]=-1}}function Gr(e,t,n,r){var i,a,s,u,c,l,f,h,p,d,m,v,g,y,_,x,b,w=e.posRad,S=e.colors,E=e.atoms,T=w.length/4,A=t.bbox,M=A.minPosRad,C=A.maxPosRad,k=-1,R=null,P=null,L=null,O=new o.Vector3(0,0,0),I=new o.Vector3(0,0,0),N=new o.Vector3(0,0,0);function D(e,t,n){for(var r=0;r<e.length;r++)e[r]=t+n*r}function F(){u=n.scaleFactor,l=t.dim,b=Math.min(5,2+Math.floor(s*u));var e=l[0]*l[1]*l[2];f=function(e,t,n){for(var r=Q.allocateTyped(e,t),i=0;i<t;++i)r[i]=n;return r}(Float32Array,e,-1001),h=Q.allocateTyped(Float32Array,3*e),p=Q.allocateTyped(Float32Array,e),L&&(R=Q.allocateTyped(Float32Array,e),P=[]),d=Q.allocateTyped(Float32Array,l[0]),m=Q.allocateTyped(Float32Array,l[1]),v=Q.allocateTyped(Float32Array,l[2]),D(d,M[0],1/u),D(m,M[1],1/u),D(v,M[2],1/u)}function z(){s=n.probeRadius,u=n.scaleFactor,c=n.probePositions,L=n.visibilitySelector,i=Q.allocateTyped(Float32Array,T),a=0;for(var e=0;e<T;++e){var t=w[4*e+3]+=s;t>a&&(a=t),i[e]=t*t}F(),function(){var e=0,t=2*Math.PI/c;y=Q.allocateTyped(Float32Array,c),g=Q.allocateTyped(Float32Array,c);for(var n=0;n<c;n++)y[n]=Math.cos(e),g[n]=Math.sin(e),e+=t}(),_=new Ur(w,M,C,2.01*a),x=new Int32Array(_.neighbourListLength),k=-1}function B(e,t,n,r){var o=4*e,a=i[e],s=w[o]-t,u=w[o+1]-n,c=w[o+2]-r;return s*s+u*u+c*c<a}function j(e,t,n,r,i){var o;if(-1!==k){if((o=k)!==r&&o!==i&&B(o,e,t,n))return o;k=-1}var a=0;for(o=x[a];o>=0;){if(o!==r&&o!==i&&B(o,e,t,n))return k=o,o;o=x[++a]}return k=-1,-1}function V(e,t){var n,r,i=4*e,o=4*t,a=w[i],s=w[i+1],h=w[i+2],p=w[i+3],_=O.x=w[o]-a,x=O.y=w[o+1]-s,S=O.z=w[o+2]-h,E=w[o+3],T=_*_+x*x+S*S,A=Math.sqrt(T),C=p*((p*p+A*A-E*E)/(2*p*A));O.normalize(),r=O,(n=I).x=n.y=n.z=1,0!==r.x?n.x=(r.y+r.z)/-r.x:0!==r.y?n.y=(r.x+r.z)/-r.y:0!==r.z&&(n.z=(r.x+r.y)/-r.z),I.normalize(),N.crossVectors(O,I),N.normalize();var R=Math.sqrt(p*p-C*C);I.multiplyScalar(R),N.multiplyScalar(R),O.multiplyScalar(C),O.x+=a,O.y+=s,O.z+=h,k=-1;for(var P=b,L=0;L<c;L++){var D=y[L],F=g[L],z=O.x+D*I.x+F*N.x,B=O.y+D*I.y+F*N.y,V=O.z+D*I.z+F*N.z;if(-1===j(z,B,V,e,t))for(var U=Math.floor(u*(z-M[0])),G=Math.floor(u*(B-M[1])),H=Math.floor(u*(V-M[2])),W=Math.max(0,U-P),q=Math.max(0,G-P),Y=Math.max(0,H-P),X=Math.min(l[0],U+P+2),$=Math.min(l[1],G+P+2),Z=Math.min(l[2],H+P+2),K=Y;K<Z;K++){S=V-v[K];for(var J=l[1]*l[0]*K,Q=q;Q<$;Q++)for(var ee=S*S+(x=B-m[Q])*x,te=J+l[0]*Q,ne=W;ne<X;ne++){T=ee+(_=z-d[ne])*_;var re=ne+te,ie=f[re];ie>0&&T<ie*ie&&(f[re]=Math.sqrt(T))}}}}function U(){console.time("ContactSurface.getVolume"),console.time("ContactSurface.init"),z(),console.timeEnd("ContactSurface.init"),console.time("ContactSurface.projectPoints"),function(){for(var e=0;e<T;e++){var t=4*e,n=w[t],r=w[t+1],o=w[t+2],a=w[t+3],s=i[e];_.withinRadii(n,r,o,a,x);for(var c=Math.ceil(a*u),g=Math.floor(u*(n-M[0])),y=Math.floor(u*(r-M[1])),b=Math.floor(u*(o-M[2])),A=Math.max(0,g-c),C=Math.max(0,y-c),k=Math.max(0,b-c),O=Math.min(l[0],g+c+2),I=Math.min(l[1],y+c+2),N=Math.min(l[2],b+c+2),D=3*e,F=S[D],z=S[D+1],B=S[D+2],V=k;V<N;V++)for(var U=v[V]-o,G=l[1]*l[0]*V,H=C;H<I;H++)for(var W=m[H]-r,q=U*U+W*W,Y=G+l[0]*H,X=A;X<O;X++){var $=X+Y,Z=d[X]-n,K=q+Z*Z;if(K<s){var J=Math.exp(.28125*-K),Q=3*$;h[Q]+=F*J,h[Q+1]+=z*J,h[Q+2]+=B*J,p[$]+=J,null!==L&&J>R[$]&&(R[$]=J,P[$]=E[e]),f[$]<0&&(f[$]=-f[$]);var ee=Math.sqrt(K),te=a/ee,ne=Z*te,re=W*te,ie=U*te;if(-1===j(ne+=n,re+=r,ie+=o,e,-1)){var oe=a-ee;oe<f[$]&&(f[$]=oe)}}}}}(),console.timeEnd("ContactSurface.projectPoints"),console.time("ContactSurface.projectTorii"),function(){for(var e=0;e<T;e++){var t=4*e;_.withinRadii(w[t],w[t+1],w[t+2],w[t+3],x);for(var n=0,r=x[n];r>=0;)e<r&&V(e,r),r=x[++n]}}(),console.timeEnd("ContactSurface.projectTorii"),function(){for(var e=0,t=f.length;e<t;e++){f[e]<0&&(f[e]=0);var n=p[e];if(n>0){n=1/n;var r=3*e;h[r]*=n,h[r+1]*=n,h[r+2]*=n}}}(),console.timeEnd("ContactSurface.getVolume")}this.build=function(){U(),this.volTexMap=h,this.weightsMap=R,this.atomMap=P,this.volMap=f}}var Hr=rn.Volume,Wr=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_computeSurface",value:function(e,t,n,r){var i=new Gr(e,n,r);return i.build(),{volMap:new Hr(Float32Array,this.numVoxels,t,1,i.volMap),volTexMap:new Hr(Float32Array,this.numVoxels,t,3,i.volTexMap),atomMap:i.atomMap,atomWeightMap:new Hr(Float32Array,this.numVoxels,t,1,i.weightsMap)}}}]),t}(Br),qr=function e(t,n){g(this,e),this.coord=new o.Vector3,this.coord.copy(t),this.radius=n,this.colorX=.99999,this.colorY=0,this.colorZ=0,this.atomType=0,this.srcAtom=null},Yr=function(){function e(t,n,r,i,a){g(this,e),this._numAtoms=t,this._atoms=n,this._vBoxMin=new o.Vector3,this._vBoxMax=new o.Vector3,this._vBoxMin.copy(r),this._vBoxMax.copy(i),this._probeRadius=a,this._atomsList=null,this._voxelList=null}return _(e,[{key:"createVoxels",value:function(){var e,t,n=0|this._numAtoms,r=this._atoms,i=this._vBoxMax.x-this._vBoxMin.x,o=this._vBoxMax.y-this._vBoxMin.y,a=this._vBoxMax.z-this._vBoxMin.z,s=i<o?i:o;s=a<s?a:s;var u,c=0,l=0;for(u=0;u<n;u++)c=(t=2*(r[u].radius+this._probeRadius))>c?t:c,l+=t;var f=Math.floor(s/c);f<2&&(f=2),l/=n,this._numCells=f,this._aveRad=l,this._maxRad=c;var h=f,p=f*f,d=f*f*f,m=this._xScale=1/(this._vBoxMax.x-this._vBoxMin.x),v=this._yScale=1/(this._vBoxMax.y-this._vBoxMin.y),g=this._zScale=1/(this._vBoxMax.z-this._vBoxMin.z),y=0,_=m*f,x=v*f,b=g*f;for(u=0;u<n;u++){var w=2*(4.5*(r[u].radius+this._probeRadius)),S=Math.floor(_*w+.8),E=Math.floor(x*w+.8),T=Math.floor(b*w+.8);y+=++S*++E*++T}this._voxelList=Q.allocateTyped(Int32Array,d);var A=[];if(A.length=y,null===this._voxelList||null===A)return-1;for(u=0;u<d;u++)this._voxelList[u]=-1;for(e=0,u=0;u<n;u++){t=4.5*(r[u].radius+this._probeRadius);var M=Math.floor((r[u].coord.x-this._vBoxMin.x-t)*f*m),C=Math.floor((r[u].coord.y-this._vBoxMin.y-t)*f*v),k=Math.floor((r[u].coord.z-this._vBoxMin.z-t)*f*g),R=Math.floor((r[u].coord.x-this._vBoxMin.x+t)*f*m),P=Math.floor((r[u].coord.y-this._vBoxMin.y+t)*f*v),L=Math.floor((r[u].coord.z-this._vBoxMin.z+t)*f*g);M=M>=0?M:0,C=C>=0?C:0,R=R<f?R:f-1,P=P<f?P:f-1,L=L<f?L:f-1;for(var O=k=k>=0?k:0;O<=L;O++)for(var I=C;I<=P;I++)for(var N=M;N<=R;N++){var D=N+I*h+O*p;if(this._voxelList[D]<0)A[2*e+0]=u,A[2*e+1]=-1,this._voxelList[D]=e,e++;else{var F=this._voxelList[D];this._voxelList[D]=e,A[2*e+0]=u,A[2*e+1]=F,e++}}}return this._atomsList=Int32Array.from(A),0}},{key:"destroyVoxels",value:function(){this._atomsList=null,this._voxelList=null,this._atoms=null,this._vertices=null,this._vBoxMin=null,this._vBoxMax=null}},{key:"forEachRelatedAtom",value:function(e,t){for(var n=Math.floor((e.x-this._vBoxMin.x)*this._numCells*this._xScale),r=Math.floor((e.y-this._vBoxMin.y)*this._numCells*this._yScale),i=Math.floor((e.z-this._vBoxMin.z)*this._numCells*this._zScale),o=n+r*this._numCells+i*this._numCells*this._numCells,a=this._atoms,s=this._voxelList[o];s>=0;s=this._atomsList[2*s+1]){t(a[this._atomsList[2*s]])}}},{key:"getClosestAtom",value:function(e){var t=null,n=Number.MAX_VALUE;return this.forEachRelatedAtom(e,(function(r){var i=e.distanceToSquared(r.coord);i<n&&(n=i,t=r)})),t}},{key:"buildNormals",value:function(e,t,n){for(var r,i=this,o=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=2.5*this._aveRad,m=d*d,v=.1*-this._aveRad,g=function(e){var t=a-e.coord.x,n=s-e.coord.y,d=u-e.coord.z;if(!((r=t*t+n*n+d*d)>m)){var g=e.radius+i._probeRadius;(h=r-g*g)<0&&(h=-h),p=Math.exp(v*h),c+=t*p,l+=n*p,f+=d*p,o++}},y=0;y<e;y++)a=t[y].x,s=t[y].y,u=t[y].z,o=0,c=l=f=0,this.forEachRelatedAtom(t[y],g),r=c*c+l*l+f*f,o>0&&(h=1/Math.sqrt(r),c*=h,l*=h,f*=h),n[y].x=c,n[y].y=l,n[y].z=f;return 0}},{key:"buildColors",value:function(e,t,n,r){for(var i=this,o=0,a=0,s=0,u=0,c=0,l=r*r,f=[],h=[],p=0,d=function(e){var t=o-e.coord.x,n=a-e.coord.y,r=s-e.coord.z,d=t*t+n*n+r*r;if(!(d>l)){var m=e.radius+i._probeRadius;(u=d-m*m)<0&&(u=-u),c=1/(.8+u),f.push([e.colorX,e.colorY,e.colorZ]),h.push(c),p+=c}},m=0;m<e;m++){o=t[m].x,a=t[m].y,s=t[m].z,f=[],h=[],p=0,this.forEachRelatedAtom(t[m],d);for(var v=0;v<f.length;++v){var g=h[v]/p;n[m].x+=f[v][0]*g,n[m].y+=f[v][1]*g,n[m].z+=f[v][2]*g}}return 0}}]),e}(),Xr=function(){function e(t,n,r){var i;for(g(this,e),this._maxNumVertices=t,this._maxNumTriangles=n,this._vertices=new Array(t),this._normals=new Array(t),this._colors=null,r&&(this._colors=new Array(t)),this._indices=new Array(3*n),this._numVertices=0,this._numTriangles=0,i=0;i<t;i++)this._vertices[i]=new o.Vector3,this._normals[i]=new o.Vector3;for(i=0;i<3*n;i++)this._indices[i]=-1;if(r)for(i=0;i<t;i++)this._colors[i]=new o.Vector3}return _(e,[{key:"destroy",value:function(){this._vertices=null,this._normals=null,this._indices=null}}]),e}(),$r=rn.Element;var Zr={InstancedSpheresGeometry:Un,SimpleSpheresGeometry:qn,Simple2CCylindersGeometry:Zn,Instanced2CCylindersGeometry:ir,ExtrudedObjectsGeometry:fr,ChunkedLinesGeometry:wr,TwoColorLinesGeometry:Er,CrossGeometry:kr,QuickSurfGeometry:Vr,ContactSurfaceGeometry:Wr,SSIsosurfaceGeometry:function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){this._innerBuild();var e=this.getGeo();this.destroy(),this._fromGeo(e)}},{key:"_fromGeo",value:function(e){var t=null,n=Q.allocateTyped(Float32Array,3*e._numVertices),r=Q.allocateTyped(Float32Array,3*e._numVertices);null!==e._colors&&(t=Q.allocateTyped(Float32Array,3*e._numVertices));for(var i=Q.allocateTyped(Uint32Array,3*e._numTriangles),a=0,s=0;a<e._numVertices;a++)n[s+0]=e._vertices[a].x,n[s+1]=e._vertices[a].y,n[s+2]=e._vertices[a].z,r[s+0]=e._normals[a].x,r[s+1]=e._normals[a].y,r[s+2]=e._normals[a].z,s+=3;if(null!==t)for(var u=0,c=0;u<e._numVertices;u++,c+=3)t[c+0]=e._colors[u].x,t[c+1]=e._colors[u].y,t[c+2]=e._colors[u].z;for(var l=3*e._numTriangles,f=0;f<l;f++)i[f]=e._indices[f];this.setIndex(new o.BufferAttribute(i,1)),this.setAttribute("position",new o.BufferAttribute(n,3)),this.setAttribute("normal",new o.BufferAttribute(r,3)),this.setAttribute("color",new o.BufferAttribute(t,3)),this.computeBoundingBox(),this.computeBoundingSphere(),e.destroy()}},{key:"convertToAtomsColored",value:function(e,t){for(var n=e.atoms,r=e.colors,i=0,o=n.length;i<o;i++){var a=n[i].position,s=n[i].element.radius;t[i]=new qr(a,s);var u=n[i].element.number;t[i].atomType=this.getType(u);var c=3*i;t[i].colorX=r[c++],t[i].colorY=r[c++],t[i].colorZ=r[c],t[i].srcAtom=n[i]}}},{key:"getGeo",value:function(){return this.geoOut}},{key:"destroy",value:function(){this.atoms=null,this.hashLines=null,this.hashEntries=null}},{key:"getBoundingBox",value:function(e,t,n){t.x=t.y=t.z=1e7,n.x=n.y=n.z=-1e7;for(var r=this.probeRadius*this.atomRadiusScale,i=0,o=0,a=e.length;o<a;o++){var s=e[o].coord,u=e[o].radius+r;i=u>i?u:i,s.x-u<t.x&&(t.x=s.x-u),s.y-u<t.y&&(t.y=s.y-u),s.z-u<t.z&&(t.z=s.z-u),s.x+u>n.x&&(n.x=s.x+u),s.y+u>n.y&&(n.y=s.y+u),s.z+u>n.z&&(n.z=s.z+u)}t.x-=i,t.y-=i,t.z-=i,n.x+=i,n.y+=i,n.z+=i}},{key:"getCornerCoord",value:function(e,t,n,r,i,o,a){var s=1/(o-1),u=n*s,c=r*s,l=i*s;a.x=e.x*(1-u)+t.x*u,a.y=e.y*(1-c)+t.y*c,a.z=e.z*(1-l)+t.z*l}},{key:"buildEdgePoint",value:function(e,t,n,r,i,o){if(n[e]^n[t]){var a=(0-r.pointsValuesLinear[i+24+e])/(r.pointsValuesLinear[i+24+t]-r.pointsValuesLinear[i+24+e]),s=r.pointsValuesLinear[i+3*e+0],u=r.pointsValuesLinear[i+3*e+1],c=r.pointsValuesLinear[i+3*e+2],l=r.pointsValuesLinear[i+3*t+0],f=r.pointsValuesLinear[i+3*t+1],h=r.pointsValuesLinear[i+3*t+2];o.x=s*(1-a)+l*a,o.y=u*(1-a)+f*a,o.z=c*(1-a)+h*a}}},{key:"isTriangleVisible",value:function(e,t,n){var r=this.voxelWorld.getClosestAtom(e),i=this.voxelWorld.getClosestAtom(t),o=this.voxelWorld.getClosestAtom(n);return null!==r&&null!==i&&null!==o&&null!==r.srcAtom&&null!==i.srcAtom&&null!==o.srcAtom&&(this.visibilitySelector.includesAtom(r.srcAtom)&&this.visibilitySelector.includesAtom(i.srcAtom)&&this.visibilitySelector.includesAtom(o.srcAtom))}},{key:"addTriangle",value:function(e,t,n){if(this.visibilitySelector&&!this.isTriangleVisible(e,t,n))return!0;var r=this.geoOut;if(r._numTriangles>=this.maxNumTriangles)return!1;var i=this.addVertexToGeo(r,e),o=this.addVertexToGeo(r,t),a=this.addVertexToGeo(r,n);if((i|o|a)<0)return!1;var s=3*r._numTriangles;return r._indices[s+0]=i,r._indices[s+1]=o,r._indices[s+2]=a,r._numTriangles++,!0}},{key:"buildGeoFromCorners",value:function(e,t,n,r,i,a){for(var s=e-1,u=e,c=e*e,l=new Array(12),f=0;f<12;f++)l[f]=new o.Vector3;for(var h=[],p=0;p<8;p++)h[p]=1;for(var d=new o.Vector3,m=0,v=0,g=0;g<s;g++,v+=c)for(var y=0,_=0;_<s;_++,y+=u)for(var x=0;x<s;x++)if(a.hasIntersection[m]){var b=a.bitsInside[m];this.getCornerCoord(t,n,x,g,_,e,d);for(var w=32*m,S=0,E=0;S<8;S++)a.pointsValuesLinear[w+E++]=d.x,a.pointsValuesLinear[w+E++]=d.y,a.pointsValuesLinear[w+E++]=d.z;a.pointsValuesLinear[w+3]+=i.x,a.pointsValuesLinear[w+6]+=i.x,a.pointsValuesLinear[w+15]+=i.x,a.pointsValuesLinear[w+18]+=i.x,a.pointsValuesLinear[w+6+2]+=i.z,a.pointsValuesLinear[w+9+2]+=i.z,a.pointsValuesLinear[w+18+2]+=i.z,a.pointsValuesLinear[w+21+2]+=i.z,a.pointsValuesLinear[w+12+1]+=i.y,a.pointsValuesLinear[w+15+1]+=i.y,a.pointsValuesLinear[w+18+1]+=i.y,a.pointsValuesLinear[w+21+1]+=i.y;for(var T=w+24,A=0;A<8;++A)h[A]=a.pointsValuesLinear[T+A]<0?1:0;this.buildEdgePoint(0,1,h,a,w,l[0]),this.buildEdgePoint(1,2,h,a,w,l[1]),this.buildEdgePoint(2,3,h,a,w,l[2]),this.buildEdgePoint(3,0,h,a,w,l[3]),this.buildEdgePoint(4,5,h,a,w,l[4]),this.buildEdgePoint(5,6,h,a,w,l[5]),this.buildEdgePoint(6,7,h,a,w,l[6]),this.buildEdgePoint(7,4,h,a,w,l[7]),this.buildEdgePoint(0,4,h,a,w,l[8]),this.buildEdgePoint(1,5,h,a,w,l[9]),this.buildEdgePoint(2,6,h,a,w,l[10]),this.buildEdgePoint(3,7,h,a,w,l[11]);for(var M=16*b,C=0,k=0;C<6;C++,k+=3){var R=a.striIndicesMarchCube[M+k];if(R<0)break;var P=a.striIndicesMarchCube[M+k+1],L=a.striIndicesMarchCube[M+k+2];if(!this.addTriangle(l[R],l[P],l[L]))return-2}m++}else m++;return 0}},{key:"getNumIntersectedCells",value:function(e,t,n,r){for(var i=e*e,o=0,a=0,s=0,u=0;u<t;u++,s+=i)for(var c=0,l=0;l<t;l++,c+=e)for(var f=0;f<t;f++){var h=32*a+24,p=f+c+s;r.pointsValuesLinear[h]=n[p],r.pointsValuesLinear[h+1]=n[p+1],r.pointsValuesLinear[h+2]=n[p+e+1],r.pointsValuesLinear[h+3]=n[p+e],r.pointsValuesLinear[h+4]=n[i+p],r.pointsValuesLinear[h+5]=n[i+p+1],r.pointsValuesLinear[h+6]=n[i+p+e+1],r.pointsValuesLinear[h+7]=n[i+p+e];for(var d=0,m=0;m<8;++m)r.pointsValuesLinear[h+m]<0&&(d|=1<<m);0===d||255===d?r.hasIntersection[a]=!1:(r.hasIntersection[a]=!0,o++),r.bitsInside[a]=d,a++}return o}},{key:"getType",value:function(e){var t=[0,0,1,1,2,6,3,6,4,6,5,6,6,0,7,3,8,2,9,6,10,6,11,6,12,6,13,6,14,6,15,4,16,5,17,6,18,6,19,6,20,6,21,6,22,6,23,6,24,6,25,6,26,6,27,6,28,6,29,6,30,6,31,6,32,6,33,6,34,6,35,6,36,6,37,6,38,6,39,6,40,6,41,6,42,6,43,6,44,6,45,6,46,6,47,6,48,6,49,6,50,6,51,6,52,6,53,6,54,6,55,6,56,6,57,6,58,6,59,6,60,6,61,6,62,6,63,6,64,6,65,6,66,6,67,6,68,6,69,6,70,6,71,6,72,6,73,6,74,6,75,6,76,6,77,6,78,6,79,6,80,6,81,6,82,6,83,6,84,6,85,6,86,6,87,6,88,6,89,6,90,6,91,6,92,6,93,6,94,6,95,6,96,6,97,6,98,6,99,6,100,6,101,6,102,6,103,6,104,6,105,6,106,6,107,6,108,6,109,6];if(e<1||e>t.length/2||2*Object.keys($r.ByAtomicNumber).length!==t.length)throw new Error("atomT.length  should be equal Element.ByAtomicNumber.length * 2");return t[2*e]}},{key:"calculateGridCorners",value:function(e,t,n,r,i,a){for(var s=t*t,u=s*t,c=new o.Vector3,l=new o.Vector3,f=0;f<u;f++)e[f]=1e12;for(var h=(t-1)/(r.x-n.x),p=(t-1)/(r.y-n.y),d=(t-1)/(r.z-n.z),m=0,v=i.length;m<v;m++){var g=i[m],y=g.radius+a,_=(g.coord.x-y-n.x)*h,x=(g.coord.y-y-n.y)*p,b=(g.coord.z-y-n.z)*d,w=Math.floor(_),S=Math.floor(x),E=Math.floor(b),T=Math.floor((g.coord.x+y-n.x)*h),A=Math.floor((g.coord.y+y-n.y)*p),M=Math.floor((g.coord.z+y-n.z)*d);T=++T<=t-1?T:t-1,A=++A<=t-1?A:t-1,M=++M<=t-1?M:t-1;for(var C=S;C<=A;C++)for(var k=C*s,R=E;R<=M;R++)for(var P=R*t,L=w;L<=T;L++){var O=k+P+L;this.getCornerCoord(n,r,L,C,R,t,c),l.x=c.x-g.coord.x,l.y=c.y-g.coord.y,l.z=c.z-g.coord.z;var I=Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z)-y;I<e[O]&&(e[O]=I)}}}},{key:"createVertexHash",value:function(e,t){if(this.hashLines=Q.allocateTyped(Int32Array,65536),null===this.hashLines)return-1;for(var n=0,r=0;n<32768;n++)this.hashLines[r++]=0,this.hashLines[r++]=-1;if(this.maxNumVertices=e,this.maxNumTriangles=t,this.numHashEtriesAllocated=e,this.hashEntries=Q.allocateTyped(Int32Array,2*this.numHashEtriesAllocated),null===this.hashEntries)return-1;for(var i=0,o=0;i<this.numHashEtriesAllocated;i++)this.hashEntries[o++]=-1,this.hashEntries[o++]=-1;return this.numHashEntryIndex=0,0}},{key:"getNewHashEntry",value:function(){if(this.numHashEntryIndex<this.numHashEtriesAllocated){var e=this.numHashEntryIndex;return this.numHashEntryIndex++,e}return-1}},{key:"addVertexToGeo",value:function(e,t){var n,r=this.marCubeResoultion<<2,i=new o.Vector3,a=Math.floor(r*(t.x-this.vBoxMin.x)/(this.vBoxMax.x+.01-this.vBoxMin.x)),s=Math.floor(r*(t.y-this.vBoxMin.y)/(this.vBoxMax.y+.01-this.vBoxMin.y)),u=815851*a+37633*Math.floor(r*(t.z-this.vBoxMin.z)/(this.vBoxMax.z+.01-this.vBoxMin.z))+2453543*s,c=(u&=32767)+u;if(null!==this.vBoxMin&&null!==this.vBoxMax)for(n=this.hashLines[c+1];n>=0;n=this.hashEntries[2*n+1]){var l=this.hashEntries[2*n+0];if(i.copy(e._vertices[l]),i.x-=t.x,i.y-=t.y,i.z-=t.z,i.x*i.x+i.y*i.y+i.z*i.z<1e-6)return l}if(e._numVertices>=this.maxNumVertices)return-1;var f=e._numVertices;if(e._vertices[f].copy(t),null!==this.vBoxMin&&null!==this.vBoxMax){if((n=this.getNewHashEntry())<0)return-1;var h=this.hashLines[c+1];this.hashLines[c+1]=n,this.hashEntries[2*n+0]=f,this.hashEntries[2*n+1]=h,this.hashLines[c+0]++}return e._numVertices++,f}},{key:"modifyExcludedFromGeo",value:function(e,t,n,r,i,o){var a,s,u;for(var c=e*e,l=(e-1)/(r.x-n.x),f=(e-1)/(r.y-n.y),h=(e-1)/(r.z-n.z),p=2*t*(2*t),d=1/(e-1),m=0;m<i._numVertices;m++){var v=i._vertices[m],g=1.1*t,y=Math.floor((v.x-g-n.x)*l),_=Math.floor((v.y-g-n.y)*f),x=Math.floor((v.z-g-n.z)*h),b=Math.floor((v.x+g-n.x)*l),w=Math.floor((v.y+g-n.y)*f),S=Math.floor((v.z+g-n.z)*h);y=y>=0?y:0,x=x>=0?x:0,b=b<=e-1?b:e-1,w=w<=e-1?w:e-1,S=S<=e-1?S:e-1;for(var E=_=_>=0?_:0;E<=w;E++)for(var T=E*c,A=x;A<=S;A++)for(var M=A*e,C=y;C<=b;C++){a=T+M+C;var k=C*d,R=n.x*(1-k)+r.x*k;k=E*d;var P=n.y*(1-k)+r.y*k;k=A*d;var L=n.z*(1-k)+r.z*k,O=R-v.x,I=P-v.y,N=L-v.z,D=O*O+I*I+N*N;D<p&&(s=Math.sqrt(D),(u=-(s-t))>0?(o[a]<0&&(o[a]=u),u>o[a]&&(o[a]=u)):u>o[a]&&(o[a]=u))}}return 0}},{key:"_innerBuild",value:function(){var e,t={posRad:this._posRad,colors:this._colors,atoms:this._opts.atoms};this.complex=this._opts.parent,this.atoms=t.atoms,this.meshResolution=this._opts.gridSpacing,this.atomRadiusScale=this._opts.radScale,this.colorMode=this._opts.colorMode,this.probeRadius=this._opts.probeRadius,this.useVertexColors=!0,this.excludeProbe=this._opts.excludeProbe,this.visibilitySelector=this._opts.visibilitySelector,this.geoOut=null,this.hashLines=null,this.hashEntries=null,this.numHashEtriesAllocated=0,this.numHashEntryIndex=0,this.maxNumVertices=0,this.maxNumTriangles=0;var n=new Array(this.atoms.length);this.convertToAtomsColored(t,n);var r=this.vBoxMin=new o.Vector3,i=this.vBoxMax=new o.Vector3;this.getBoundingBox(n,r,i);var a=this.marCubeResoultion=4*this.meshResolution,s=a,u=s*s*s,c=Q.allocateTyped(Float32Array,u),l=this.probeRadius*this.atomRadiusScale;this.calculateGridCorners(c,s,r,i,n,l);var f=a-1,h=new Lr;if((e=h.create(f))<0)return e;var p=new o.Vector3;p.x=(i.x-r.x)/f,p.y=(i.y-r.y)/f,p.z=(i.z-r.z)/f;var d=this.getNumIntersectedCells(s,f,c,h),m=Math.floor(1.2*d),v=Math.floor(1.2*d*2);if(this.geoOut=new Xr(m,v,this.useVertexColors),(e=this.createVertexHash(m,v))<0)return e;var g=l;if(this.excludeProbe&&(g=.01),this.voxelWorld=new Yr(n.length,n,r,i,g),this.voxelWorld.createVoxels(),e=this.buildGeoFromCorners(a,r,i,c,p,h),this.excludeProbe){if(this.modifyExcludedFromGeo(s,l,r,i,this.geoOut,c),this.geoOut._vertices=null,this.geoOut._colors=null,this.geoOut._indices=null,this.geoOut._normals=null,this.geoOut._numVertices=0,this.geoOut._numTriangles=0,this.geoOut=null,d=this.getNumIntersectedCells(s,f,c,h),m=Math.floor(1.2*d),v=Math.floor(1.2*d*2),this.geoOut=new Xr(m,v,this.useVertexColors),(e=this.createVertexHash(m,v))<0)return e;e=this.buildGeoFromCorners(s,r,i,c,p,h)}this.voxelWorld.buildNormals(this.geoOut._vertices.length,this.geoOut._vertices,this.geoOut._normals);var y=6.5;return this.excludeProbe&&(y-=1.5),this.useVertexColors&&this.voxelWorld.buildColors(this.geoOut._vertices.length,this.geoOut._vertices,this.geoOut._colors,y),this.voxelWorld.destroyVoxels(),this.voxelWorld=null,h.destroy(),e}}]),t}(Pr),LabelsGeometry:function(e){function t(e,n){var r;g(this,t),(r=C(this,k(t).call(this)))._opts=n,r.items=[],r.needsUpdate=!1;var i=-50,a=-50;switch(n.horizontalAlign){case"left":i=0;break;case"right":i=-100}switch(n.verticalAlign){case"top":a=-100;break;case"bottom":a=0}var s=new o.Vector3(n.dx||0,n.dy||0,n.dz||0);return r.userData={translation:"translate(".concat(i,"%, ").concat(a,"%)"),offset:s},r}return P(t,e),_(t,[{key:"setItem",value:function(e,t,n){var r=this._opts,i=this.items[e]||function(e,t){var n=document.createElement("div");if(n.className=t,"string"===typeof e){var r=document.createElement("span");r.style.fontSize="150%";for(var i=e.split("\n"),a=0,s=i.length;a<s;++a){var u=document.createElement("span"),c=document.createTextNode(i[a]);u.appendChild(c),r.appendChild(u),a<s-1&&r.appendChild(document.createElement("br"))}n.appendChild(r)}else n.appendChild(e);return n.worldPos=new o.Vector3,n}(n,"label");i.worldPos.copy(t),i.style.textAlign=r.horizontalAlign,i.style.verticalAlign=r.verticalAlign,this.items[e]=i}},{key:"setColor",value:function(e,t,n){this.items[e].opts={color:t,background:n}}},{key:"startUpdate",value:function(){return!0}},{key:"finishUpdate",value:function(){this.needsUpdate=!0,this.dispatchEvent({type:"update"})}},{key:"finalize",value:function(){this.finishUpdate()}},{key:"raycast",value:function(){}},{key:"setOpacity",value:function(){}},{key:"getSubset",value:function(){return[]}}]),t}(D)};function Kr(e){return function(e){function t(){var e,n;g(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=C(this,(e=k(t)).call.apply(e,[this].concat(i)))).onBeforeRender=t.prototype.onBeforeRender,n}return P(t,e),_(t,[{key:"onBeforeRender",value:function(e,t,n,r,i,o){this._onBeforeRender(e,t,n,r,i,o),this._update()}},{key:"_onBeforeRender",value:function(){}},{key:"_update",value:function(){var e=this.material;e&&e instanceof bn&&e.updateUniforms()}}]),t}(e)}var Jr=Kr(o.Mesh),Qr=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_onBeforeRender",value:function(e,t,n,r,i,o){Jr.prototype._onBeforeRender.call(this,e,t,n);var a=this.material;a&&a.uniforms.invModelViewMatrix&&(this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),a.uniforms.invModelViewMatrix.value.getInverse(this.modelViewMatrix),a.uniformsNeedUpdate=!0)}}]),t}(Jr),ei=Kr(o.Mesh),ti=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n))).castShadow=!0,r.receiveShadow=!0,r}return P(t,e),_(t,[{key:"_onBeforeRender",value:function(e,n,r){ei.prototype._onBeforeRender.call(this,e,n,r);var i=this.geometry,o=this.material;if(i.zClip&&o.uberOptions){var a=t._modelView,s=t._mvLength,u=t._center;a.multiplyMatrices(this.matrixWorld,r.matrixWorldInverse);var c=s.setFromMatrixColumn(a,0).length();u.copy(i.boundingSphere.center),this.localToWorld(u),o.uberOptions.zClipValue=r.position.z-u.z-c*(.5*i.boundingSphere.radius)}}}]),t}(ei);Ee(ti,"_mvLength",new o.Vector3),Ee(ti,"_center",new o.Vector3),Ee(ti,"_modelView",new o.Matrix4);var ni=function(e){function t(e,n){var r;g(this,t),(r=C(this,k(t).call(this))).geometry=e;var i=M(r);return i.initialized=!1,r.geometry.addEventListener("update",(function(){i.update()})),r}return P(t,e),_(t,[{key:"init",value:function(){for(var e=this.children,t=e.length-1;t>=0;--t)this.remove(e[t]);for(var n=this.geometry,r=n.items,o=n.userData,a=0,s=r.length;a<s;++a){var u=r[a];if(u){var c=Q.shallowCloneNode(u),l=new on(c);l.userData=i.a.clone(o),l.getElement().style.visibility="visible",l.source=u,this.add(l)}}this.initialized=!0}},{key:"update",value:function(){if(this.geometry.needsUpdate){var e=this.children;this.initialized||this.init();for(var t=0,n=e.length;t<n;++t){var r=e[t],i=r.source;r.position.copy(i.worldPos),r.userData.color=i.opts.color,r.userData.background=i.opts.background}}}}]),t}(o.Group),ri=Kr(o.Mesh);function ii(e,t){ri.call(this,e,t),this.castShadow=!0,this.receiveShadow=!0}ii.prototype=Object.create(ri.prototype),ii.prototype.constructor=ii;var oi=Kr(o.Mesh),ai=new o.Vector2,si=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_onBeforeRender",value:function(e,t,n,r,i,o){var a=this.material;a.uberOptions&&(a.uberOptions.projMatrixInv.getInverse(n.projectionMatrix,!0),e.getSize(ai),a.uberOptions.viewport.set(ai.width,ai.height))}}]),t}(oi),ui=function(e){function t(){var e,n;g(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=C(this,(e=k(t)).call.apply(e,[this].concat(i)))).castShadow=!0,n.receiveShadow=!0,n}return P(t,e),t}(Kr(o.Mesh)),ci={ZClipped:ti,ZSprite:Qr,Text:ni,Line:Kr(o.Line),LineSegments:Kr(o.LineSegments),Mesh:ii,ThickLineMesh:si,Instanced:ui};function li(e,t){return function(n){n.setValues(e),n.setUberOptions(t)}}function fi(e,t){return{Geometry:function(n,r){return new Zr.Instanced2CCylindersGeometry(n,r,e,t)},Object:e?ci.ZSprite:ci.Instanced,initMaterial:li({instancedMatrix:!0,attrColor:!0,attrColor2:!0,attrAlphaColor:!0,cylinderSprite:e})}}function hi(e,t){var n=e.prototype instanceof gr,r=t.lineWidth||0;return{Geometry:e,Object:n?ci.ThickLineMesh:ci.LineSegments,initMaterial:li({lights:!1,attrColor:!0,attrAlphaColor:!0,thickLine:n},{lineWidth:r})}}function pi(e,t,n,r){var i={wireframe:!!r.wireframe,fakeOpacity:n.now.isoSurfaceFakeOpacity,zClip:r.zClip};return{Geometry:e,Object:ci.ZClipped,initMaterial:li({attrColor:!0,attrAlphaColor:!1,wireframe:i.wireframe,fakeOpacity:i.fakeOpacity,zClip:i.zClip})}}var di=function(){function e(){g(this,e)}return _(e,null,[{key:"createSpheres",value:function(e,t){var n=t.now.zSprites;return{Geometry:function(e,t){return new Zr.InstancedSpheresGeometry(e,t,n)},Object:n?ci.ZSprite:ci.Instanced,initMaterial:li({instancedPos:!0,attrColor:!0,attrAlphaColor:!0,sphereSprite:n})}}},{key:"create2CClosedCylinders",value:function(e,t){return fi(!1,!1)}},{key:"create2CCylinders",value:function(e,t){return fi(t.now.zSprites,!0)}},{key:"create2CLines",value:function(e,t,n){return hi(Zr.TwoColorLinesGeometry,n)}},{key:"createCrosses",value:function(e,t,n){return hi(Zr.CrossGeometry,n)}},{key:"createExtrudedChains",value:function(e,t){return{Geometry:Zr.ExtrudedObjectsGeometry,Object:ci.Mesh,initMaterial:li({attrColor:!0,attrAlphaColor:!0})}}},{key:"createChunkedLines",value:function(e,t,n){return hi(Zr.ChunkedLinesGeometry,n)}},{key:"createQuickSurface",value:function(e,t,n){return pi(Zr.QuickSurfGeometry,0,t,n)}},{key:"createContactSurface",value:function(e,t,n){return pi(Zr.ContactSurfaceGeometry,0,t,n)}},{key:"createSASSES",value:function(e,t,n){return pi(Zr.SSIsosurfaceGeometry,0,t,n)}},{key:"createLabels",value:function(e,t){return{Geometry:Zr.LabelsGeometry,Object:ci.Text,initMaterial:function(){}}}}]),e}(),mi=function(e){function t(e,n,r,i){var a;g(this,t),(a=C(this,k(t).call(this)))._geometry=e,a._geoParams=n;var s=r.createInstance();n.initMaterial(s),a._material=s,a._transforms=i.length>0?i:[new o.Matrix4];for(var u=a._createMeshes(e),c=0,l=u.length;c<l;++c)a.add(u[c]);return a}return P(t,e),_(t,[{key:"raycast",value:function(e,n){var r=t._ray,i=t._inverseMatrix,o=this.children;r.copy(e.ray);for(var a=0,s=o.length;a<s;++a){var u=o[a];if(Cn.belongToSelectLayers(u)){u.updateMatrixWorld();var c=u.matrixWorld;i.getInverse(c),e.ray.copy(r).applyMatrix4(i);var l=[];this._geometry.raycast(e,l);for(var f=0,h=l.length;f<h;++f){var p=l[f];p.point&&(p.point.applyMatrix4(c),p.distance=r.origin.distanceTo(p.point)),p.object=u,n[n.length]=p}}}e.ray.copy(r)}},{key:"getSubset",value:function(e){for(var t=this._geometry.getSubset(e),n=[],r=0,i=0,o=t.length;i<o;++i)for(var a=this._createMeshes(t[i]),s=0,u=a.length;s<u;++s)n[r++]=a[s];return n}},{key:"_createMeshes",value:function(e){for(var t=this._transforms,n=this._geoParams.Object,r=this._material,i=[],o=0,a=t.length;o<a;++o){var s=new n(e,r);s.applyMatrix(t[o]),i[o]=s}return i}}]),t}(o.Object3D);Ee(mi,"_inverseMatrix",new o.Matrix4),Ee(mi,"_ray",new o.Ray);var vi=function(e){function t(e,n,r,i,o,a,s){var u;if(g(this,t),(u=C(this,k(t).call(this))).constructor===t)throw new Error("Can not instantiate abstract class!");return u._selection=n,u._mode=i,u._colorer=r,u._chunksIdc=n.chunks,u._polyComplexity=a,u._geo=new(function(e,t){var n=[e].concat(t);return e.bind.apply(e,In(n))}(e.Geometry,u._makeGeoArgs())),u._mesh=new mi(u._geo,e,s,o),u.add(u._mesh),u._build(),u}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){throw new Error("ChemGroup subclass must override _makeGeoArgs() method")}},{key:"getSubset",value:function(e,t){t=void 0!==t&&t;var n=this._calcChunksList(e,t);return 0===n.length?[]:this._mesh.getSubset(n)}},{key:"_changeSubsetOpacity",value:function(e,t,n){var r=this._calcChunksList(e,n);0!==r.length&&this._geo.setOpacity(r,t)}},{key:"enableSubset",value:function(e,t){t=void 0===t||t,this._changeSubsetOpacity(e,1,t)}},{key:"disableSubset",value:function(e,t){t=void 0===t||t,this._changeSubsetOpacity(e,0,t)}}]),t}(an),gi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"raycast",value:function(e,t){var n=this._selection.atoms,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[r[o].chunkIdx];s<n.length&&(r[o].atom=n[s],t.push(r[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._selection.atoms,r=this._chunksIdc,i=0,o=r.length;i<o;++i){0!==(n[r[i]].mask&e)&&t.push(i)}return t}}]),t}(vi),yi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){return[this._selection.chunks.length,this._polyComplexity]}},{key:"_build",value:function(){for(var e=this._selection.chunks,t=this._selection,n=t.atoms,r=t.parent,i=this._mode,o=this._colorer,a=this._geo,s=0,u=e.length;s<u;++s){var c=n[e[s]];a.setItem(s,c.position,i.calcAtomRadius(c)),a.setColor(s,o.getAtomColor(c,r))}a.finalize()}},{key:"updateToFrame",value:function(e){for(var t=this._selection.chunks,n=this._selection.atoms,r=this._mode,i=this._colorer,o=e.needsColorUpdate(i),a=this._geo,s=0,u=t.length;s<u;++s){var c=n[t[s]];a.setItem(s,e.getAtomPos(t[s]),r.calcAtomRadius(c)),o&&a.setColor(s,e.getAtomColor(i,c))}a.finalize()}}]),t}(gi),_i=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){for(var e=[],t=this._selection,n=t.atoms,r=t.chunks,i=r.length,o=0;o<i;++o)e[o]=n[r[o]];var a=this._mode.getSurfaceOpts();return a.atoms=e,[i,a]}}]),t}(yi),xi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){for(var e=[],t=this._selection,n=t.atoms,r=t.chunks,i=r.length,o=0;o<i;++o)e[o]=n[r[o]];var a=this._mode.getSurfaceOpts();return a.atoms=e,a.selection=this._selection,a.colorMode=this._colorer,[i,a]}}]),t}(yi);function bi(e){return null!==e.name.getNode()?e.name.getNode():e.getVisualName()}var wi={none:function(e){return e},adjust:function(e){var t=e>>16&255,n=e>>8&255,r=255&e;return.2126*t+.7152*n+.0722*r>127?(t=3*t/10,n=3*n/10,r=3*r/10):(t=255-3*(255-t)/10,n=255-3*(255-n)/10,r=255-3*(255-r)/10),t<<16|n<<8|r},inverse:function(e){return 255-(e>>16&255)<<16|255-(e>>8&255)<<8|255-(255&e)}};function Si(e,t){var n;if(wi.hasOwnProperty(t))n=Q.hexColor(wi[t](e));else{var r=parseInt(t,16);n=!Number.isNaN(r)&&t.toLowerCase().startsWith("0x")?Q.hexColor(r):"#000000"}return n}var Ei={serial:function(e){return e.serial},name:function(e){return e.getVisualName()},elem:function(e){return e.element.name},residue:function(e){return e.residue.getType().getName()},sequence:function(e){return e.residue.getSequence()},chain:function(e){return e.residue.getChain().getName()},hetatm:function(e){return e.isHet()},water:function(e){return"HOH"===e.residue.getType().getName()||"WAT"===e.residue.getType().getName()}},Ti=function(e,t){return t.replace(/\{\{(\s*\w+\s*)\}\}/g,(function(t){var n=t.replace(/\s+/g,"");return n=n.substring(2,n.length-2).toLowerCase(),Ei.hasOwnProperty(n)?Ei[n](e):"null"}))},Ai=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){var e=this._mode.getLabelOpts();return[this._selection.chunks.length,e]}},{key:"_build",value:function(){for(var e=this._mode.getLabelOpts(),t=this._selection.chunks,n=this._selection,r=n.atoms,i=n.parent,o=this._colorer,a=this._geo,s=0,u=t.length;s<u;++s){var c=r[t[s]],l=e.template?Ti(c,e.template):bi(c);if(l){var f=o.getAtomColor(c,i),h=parseInt(Si(f,e.fg).substring(1),16),p=e.showBg?parseInt(Si(f,e.bg).substring(1),16):"transparent";a.setItem(s,c.position,l),a.setColor(s,h,p)}}a.finalize()}},{key:"updateToFrame",value:function(e){for(var t=this._mode.getLabelOpts(),n=this._selection.chunks,r=this._selection.atoms,i=this._colorer,o=this._geo,a=e.needsColorUpdate(i),s=0,u=n.length;s<u;++s){var c=r[n[s]],l=t.template?Ti(c,t.template):bi(c);if(l){var f=e.getAtomColor(i,c),h=parseInt(Si(f,t.fg).substring(1),16),p=t.showBg?parseInt(Si(f,t.bg).substring(1),16):"transparent";o.setItem(s,e.getAtomPos(n[s]),l),a&&o.setColor(s,h,p)}}o.finalize()}}]),t}(gi);function Mi(e,t,n,r){var i=Math.sin(e);return t.clone().multiplyScalar(Math.sin((1-r)*e)/i).addScaledVector(n,Math.sin(r*e)/i)}var Ci=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_buildInner",value:function(e,t){for(var n=this._selection.chunks,r=new o.Vector3,i=new o.Vector3,a=this._segmentsHeight,s=1/a,u=this._colorer,c=this._selection,l=c.cycles,f=c.parent,h=0,p=n[h],d=0,m=l.length;d<m;++d){var v=l[d],g=v.atoms,y=[],_=[],x=v.center,b=v.radius-e,w=g.length,S=0,E=g[w-1].position,T=g[S].position;r.subVectors(E,x),i.subVectors(T,x);for(var A=i.clone().cross(r).normalize();S<w;++S){var M=r.angleTo(i);_[S]=Mi(M,r,i,.5).normalize(),T=g[(S+1)%w].position,r.copy(i),i.subVectors(T,x)}for(S=0;S<w;++S)if(g[S].index===p){for(var C=_[S],k=_[(S+1)%w],R=u.getAtomColor(g[S],f),P=C.angleTo(k),L=0;L<=a;++L)y[L]=Mi(P,C,k,L*s).multiplyScalar(b).add(x);t(h++,R,y,x,A),p=n[h]}}}}]),t}(gi);function ki(e,t){for(var n=[],r=0;r<t;++r){var i=-2*r/t*Math.PI;n.push(new o.Vector3(Math.cos(i)*e,Math.sin(i)*e,0))}return n}var Ri=Cn.calcChunkMatrix,Pi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){var e=this._segmentsHeight,t=this._mode.getAromRadius(),n=new o.Vector2(t,t),r=this._mode.calcStickRadius()+2*t,i=new o.Vector3,a=[],s=this._geo;this._buildInner(r,(function(t,r,o,u,c){for(var l=0;l<=e;++l){var f=o[l],h=f.clone().sub(u).cross(c);i.addVectors(f,h),a[l]=Ri(f,i,c,n)}s.setItem(t,a),s.setColor(t,r)})),s.finalize()}},{key:"_makeGeoArgs",value:function(){return this._segmentsHeight=this._polyComplexity,[ki(1,this._polyComplexity),this._segmentsHeight+1,this._selection.chunks.length]}}]),t}(Ci),Li=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){var e=this,t=this._geo,n=this._mode.getAromaticOffset();this._buildInner(n,(function(n,r,i){for(var o=i[0],a=1;a<=e._segmentsHeight;++a){var s=i[a];t.setSegment(n,a-1,o,s),o=s}t.setColor(n,r)})),t.finalize()}},{key:"_makeGeoArgs",value:function(){return this._segmentsHeight=this._mode.getAromaticArcChunks(),[this._selection.chunks.length,this._segmentsHeight,!0]}}]),t}(Ci),Oi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"raycast",value:function(e,t){var n=this._selection.residues,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[r[o].chunkIdx];s<n.length&&(r[o].residue=n[s],t.push(r[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._selection.residues,r=this._chunksIdc,i=0,o=r.length;i<o;++i){0!==(n[r[i]]._mask&e)&&t.push(i)}return t}}]),t}(vi),Ii=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"raycast",value:function(e,t){var n=this._selection.residues,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=i[Math.floor(r[o].chunkIdx/2)];s<n.length&&(r[o].residue=n[s],t.push(r[o]))}}},{key:"_build",value:function(){for(var e=this._selection,t=e.residues,n=e.parent,r=this._colorer,i=this._geo,o=this._mode.calcStickRadius(),a=0,s=this._selection.chunks,u=0,c=s.length;u<c;++u){var l=t[s[u]],f=r.getResidueColor(l,n);this._processItem(a++,l._cylinders[0],l._cylinders[1],o,f)}i.finalize()}},{key:"_calcChunksList",value:function(e){for(var t=[],n=0,r=this._selection.residues,i=this._chunksIdc,o=0,a=i.length;o<a;++o){0!==(r[i[o]]._mask&e)&&(t[n++]=2*o,t[n++]=2*o+1)}return t}},{key:"updateToFrame",value:function(e){for(var t=e.getResidues(),n=this._selection.parent,r=this._colorer,i=this._geo,o=this._mode.calcStickRadius(),a=0,s=this._selection.chunks,u=0,c=s.length;u<c;++u){var l=t[s[u]],f=r.getResidueColor(l,n);this._processItem(a++,l._cylinders[0],l._cylinders[1],o,f)}i.finishUpdate()}}]),t}(Oi),Ni=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){return[this._selection.chunks.length,this._polyComplexity]}},{key:"_processItem",value:function(e,t,n,r,i){var o=this._geo;o.setItem(e,t,n,r),o.setColor(e,i,i)}}]),t}(Ii),Di=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){return[2*this._selection.chunks.length,this._polyComplexity]}},{key:"_processItem",value:function(e,t,n,r,i){var o=this._geo,a=2*e;o.setItem(a,t,r),o.setColor(a,i),a++,o.setItem(a,n,r),o.setColor(a,i)}}]),t}(Ii),Fi=T((function(e,t){(function(){var e,n,r,i,o,a,s,u,c,l,f,h,p,d,m,v,g,y,_,x,b,w,S,E,T,A,M=Object.prototype.hasOwnProperty,C=function(e,t){for(var n in t)M.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};for(v in h={method:(r={METHOD_NEAREST:"nearest",METHOD_LINEAR:"linear",METHOD_CUBIC:"cubic",METHOD_LANCZOS:"lanczos",METHOD_SINC:"sinc",CLIP_CLAMP:"clamp",CLIP_ZERO:"zero",CLIP_PERIODIC:"periodic",CLIP_MIRROR:"mirror",CUBIC_TENSION_DEFAULT:0,CUBIC_TENSION_CATMULL_ROM:0}).METHOD_CUBIC,cubicTension:r.CUBIC_TENSION_DEFAULT,clip:r.CLIP_CLAMP,scaleTo:0,sincFilterSize:2,sincWindow:void 0},c=function(e,t){return Math.max(0,Math.min(e,t-1))},f=function(e,t){return(e%=t)<0&&(e+=t),e},l=function(e,t){var n;return(e=f(e,n=2*(t-1)))>t-1&&(e=n-e),e},e=function(){function e(e,t){if(this.array=e.slice(0),this.length=this.array.length,!(this.clipHelper={clamp:this.clipHelperClamp,zero:this.clipHelperZero,periodic:this.clipHelperPeriodic,mirror:this.clipHelperMirror}[t.clip]))throw"Invalid clip: "+t.clip}return e.prototype.getClippedInput=function(e){return 0<=e&&e<this.length?this.array[e]:this.clipHelper(e)},e.prototype.clipHelperClamp=function(e){return this.array[c(e,this.length)]},e.prototype.clipHelperZero=function(e){return 0},e.prototype.clipHelperPeriodic=function(e){return this.array[f(e,this.length)]},e.prototype.clipHelperMirror=function(e){return this.array[l(e,this.length)]},e.prototype.interpolate=function(e){throw"Subclasses of AbstractInterpolator must override the interpolate() method."},e}(),o=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.interpolate=function(e){return this.getClippedInput(Math.round(e))},t}(e),i=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.interpolate=function(e){var t;return(1-(e-=t=Math.floor(e)))*this.getClippedInput(t)+e*this.getClippedInput(t+1)},t}(e),n=function(e){function t(e,n){this.tangentFactor=1-Math.max(-1,Math.min(1,n.cubicTension)),t.__super__.constructor.apply(this,arguments)}return C(t,e),t.prototype.getTangent=function(e){return this.tangentFactor*(this.getClippedInput(e+1)-this.getClippedInput(e-1))/2},t.prototype.interpolate=function(e){var t,n,r,i,o;return t=Math.floor(e),n=[this.getTangent(t),this.getTangent(t+1)],(2*(o=(e-=t)*(i=e*e))-3*i+1)*(r=[this.getClippedInput(t),this.getClippedInput(t+1)])[0]+(o-2*i+e)*n[0]+(-2*o+3*i)*r[1]+(o-i)*n[1]},t}(e),w=Math.sin,a=Math.PI,S=function(e){return 0===e?1:w(a*e)/(a*e)},g=function(e){return function(t){return S(t/e)}},_=function(e){return function(t){return S(t)*e(t)}},s=function(e){function t(e,n){if(t.__super__.constructor.apply(this,arguments),this.a=n.sincFilterSize,!n.sincWindow)throw"No sincWindow provided";this.kernel=_(n.sincWindow)}return C(t,e),t.prototype.interpolate=function(e){var t,n,r,i,o;for(r=0,n=i=(t=Math.floor(e))-this.a+1,o=t+this.a;i<=o?n<=o:n>=o;i<=o?n++:n--)r+=this.kernel(e-n)*this.getClippedInput(n);return r},t}(e),p=function(e,t){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(n[t]);return o},y=function(e,t,n){var r,i;return"0,1"===n.join?e:(r=t/(n[1]-n[0]),i=n[0],function(t){return e(r*(t-i))})},d=function(e){return Object.prototype.toString.call(e).slice("[object ".length,-1)},T=function(e){if(isNaN(e))throw"NaN in Smooth() input";if("Number"!==d(e))throw"Non-number in Smooth() input";if(!isFinite(e))throw"Infinity in Smooth() input"},A=function(e,t){var n,r,i;if("Array"!==d(e))throw"Non-vector in Smooth() input";if(e.length!==t)throw"Inconsistent dimension in Smooth() input";for(r=0,i=e.length;r<i;r++)n=e[r],T(n)},m=function(e){return"Number"===d(e)&&isFinite(e)&&!isNaN(e)},x=function(e){var t;switch(t="scaleTo param must be number or array of two numbers",d(e)){case"Number":if(!m(e))throw t;e=[0,e];break;case"Array":if(2!==e.length)throw t;if(!m(e[0])||!m(e[1]))throw t;break;default:throw t}return e},b=function(e){var t,n,r;for(n in t={},e)M.call(e,n)&&(r=e[n],t[n]=r);return t},u=function(e,t){var r,a,c,l,f,m,v,_,w,S,E;for(v in null==t&&(t={}),w={},t=b(t),w.config=b(t),null==t.scaleTo&&(t.scaleTo=t.period),null==t.sincFilterSize&&(t.sincFilterSize=t.lanczosFilterSize),h)M.call(h,v)&&(E=h[v],null==t[v]&&(t[v]=E));if(!(f={nearest:o,linear:i,cubic:n,lanczos:s,sinc:s}[t.method]))throw"Invalid method: "+t.method;if("lanczos"===t.method&&(t.sincWindow=g(t.sincFilterSize)),e.length<2)throw"Array must have at least two elements";for(v in w.count=e.length,S=function(){var n,r,i,o;switch(d(e[0])){case"Number":if(w.dimension="scalar",u.deepValidation)for(n=0,i=e.length;n<i;n++)_=e[n],T(_);return l=new f(e,t),function(e){return l.interpolate(e)};case"Array":if(w.dimension=a=e[0].length,!a)throw"Vectors must be non-empty";if(u.deepValidation)for(r=0,o=e.length;r<o;r++)E=e[r],A(E,a);return m=function(){var n;for(n=[],c=0;0<=a?c<a:c>a;0<=a?c++:c--)n.push(new f(p(e,c),t));return n}(),function(e){var t,n,r,i;for(i=[],n=0,r=m.length;n<r;n++)t=m[n],i.push(t.interpolate(e));return i};default:throw"Invalid element type: "+d(e[0])}}(),r="periodic"===t.clip?e.length:e.length-1,t.scaleTo||(t.scaleTo=r),w.domain=x(t.scaleTo),S=y(S,r,w.domain),w.domain.sort(),w)M.call(w,v)&&(E=w[v],S[v]=E);return S},r)M.call(r,v)&&(E=r[v],u[v]=E);u.deepValidation=!0,(null!==t?t:window).Smooth=u}).call(E)})).Smooth,zi=rn.ResidueType,Bi=Cn.calcChunkMatrix;function ji(e,t){var n=Fi(e,{method:Fi.METHOD_CUBIC,clip:Fi.CLIP_CLAMP,cubicTension:t,scaleTo:1});return function(t,r){var i=r;null===i&&(i=function(t){return(t*(e.length-1-2)+1)/(e.length-1)});var a=i(t),s=n(a);return new o.Vector3(s[0],s[1],s[2])}}function Vi(e,t,n,r){if(!r._isValid)return e[n]=e[n-1],void(t[n]=t[n-1]);var i=r._controlPoint;e[n]=[i.x,i.y,i.z];var o=i.clone().add(r._wingVector);t[n]=[o.x,o.y,o.z]}function Ui(e,t,n,r){var i=r.start,o=r.end;function a(t){return t>i&&e[t-1]._isValid?t-1:t}function s(t){return t<o&&e[t+1]._isValid?t+1:t}var u=[],c=[],l=0;function f(t,n){var r=e[t]._controlPoint.clone().lerp(e[n]._controlPoint,-.25),i=r.clone().add(e[t]._wingVector);c[l]=[r.x,r.y,r.z],u[l++]=[i.x,i.y,i.z],c[l]=[r.x,r.y,r.z],u[l++]=[i.x,i.y,i.z]}var h=a(t),p=s(n);if(h===p)return function(e,t,n,r){var i,o,a=0!==(r._type.flags&zi.Flags.NUCLEIC),s=a?"C5'":"N",u=a?"C3'":"C";if(r.forEachAtom((function(e){var t=e.getVisualName();i||t!==s?o||t!==u||(o=e.position):i=e.position})),i&&o||(i=r._firstAtom.position,o=r._lastAtom.position),i&&o){var c=o.clone().sub(i),l=r._wingVector,f=r._controlPoint,h=f.clone().add(l),p=f.clone().sub(c),d=p.clone().add(l);e[n]=[p.x,p.y,p.z],t[n]=[d.x,d.y,d.z],e[++n]=[p.x,p.y,p.z],t[n]=[d.x,d.y,d.z],e[++n]=[f.x,f.y,f.z],t[n]=[h.x,h.y,h.z],++n;var m=f.clone().add(c),v=m.clone().add(l);e[n]=[m.x,m.y,m.z],t[n]=[v.x,v.y,v.z],e[++n]=[m.x,m.y,m.z],t[n]=[v.x,v.y,v.z]}}(c,u,l,e[t]),{centerPoints:c,topPoints:u};t===h?f(t,s(t)):(Vi(c,u,l++,e[a(h)]),Vi(c,u,l++,e[h]));for(var d=t;d<=n;++d)Vi(c,u,l++,e[d]);return p===s(p)?f(n,a(n)):(Vi(c,u,l++,e[p]),Vi(c,u,l,e[s(p)])),{centerPoints:c,topPoints:u}}var Gi=function(){function e(t,n,r,i,o,a){g(this,e);var s=Ui(t,n,r,a);this._topInterp=ji(s.topPoints,o),this._centerInterp=ji(s.centerPoints,o),this._shift=.5/(r-n+2),this._valueStep=(1-2*this._shift)/(2*(r-n+1)*(i-1)),this._segmentsCount=i}return _(e,[{key:"prepareMatrices",value:function(e,t,n){for(var r=this._segmentsCount,i=new Array(r),a=new o.Vector2(0,0),s=this._topInterp,u=this._centerInterp,c=this._shift+this._valueStep*(r-1)*e,l=0;l<r;++l){var f=Math.min(1,l/(r-1));a.lerpVectors(t,n,f);var h=s(c,null),p=u(c,null),d=u(c+=this._valueStep,null);i[l]=Bi(p.clone(),d.clone(),h.clone().sub(p),a)}return i}}]),e}();function Hi(e,t){for(var n=[],r=0;r<t;++r){var i=Math.PI/2-2*Math.PI*r/t;n.push(new o.Vector3(Math.cos(i)*e,Math.sin(i)*e,0))}return n}function Wi(e,t,n,r,i,o){for(var a=0,s=e.length;a<s;++a)for(var u=e[a].arr,c=e[a].boundaries,l=0,f=u.length;l<f;++l)for(var h=[u[l].start,u[l].end],p=new Gi(t,h[0],h[1],n,r,c),d=null,m=2*u[l].start,v=2*u[l].end+1,g=i.getResidueRadius(t[0],0),y=m;y<=v;++y){var _=t[y/2|0],x=i.getResidueRadius(_,y%2),b=i.getResidueRadius(_,1+y%2),w=p.prepareMatrices(y-2*h[0],x,b);w.unshift(null===d?w[0]:d),o(_,w,x.x!==b.x||x.y!==b.y,x.x!==g.x||x.y!==g.y),d=w[n],g=b}}var qi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){var e=this._mode.getHeightSegmentsRatio();return this._segmentsHeight=this._polyComplexity*e|0,[Hi(1,this._polyComplexity),this._segmentsHeight+1,2*this._selection.chunks.length]}},{key:"_build",value:function(){var e=this._selection,t=e.residues,n=e.parent,r=this._mode,i=this._colorer,o=r.getTension(),a=this._geo,s=0,u=[];Wi(this._selection.subdivs,t,this._segmentsHeight,o,r,(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=i.getResidueColor(e,n);u[s]=e._index,a.setItem(s,t,r,o),a.setColor(s++,c)})),this._chunksIdc=u,a.finalize()}},{key:"updateToFrame",value:function(e){var t=this._selection.parent,n=this._mode,r=this._colorer,i=n.getTension(),o=this._geo,a=e.getResidues(),s=0,u=e.needsColorUpdate(r);Wi(this._selection.subdivs,a,this._segmentsHeight,i,n,(function(e,n){o.setItem(s,n),u&&o.setColor(s,r.getResidueColor(e,t)),s++})),o.finalize()}}]),t}(Oi),Yi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){for(var e=this._selection.subdivs,t=0,n=0,r=e.length;n<r;++n)for(var i=e[n].arr,o=0,a=i.length;o<a;++o)t+=i[o].end-i[o].start;return[t,this._polyComplexity]}},{key:"_build",value:function(){for(var e=this._selection,t=e.residues,n=e.parent,r=this._mode,i=this._colorer,o=this._geo,a=0,s=[],u=this._selection.subdivs,c=r.calcStickRadius(),l=0,f=u.length;l<f;++l)for(var h=u[l].arr,p=0,d=h.length;p<d;++p)for(var m=h[p].start,v=h[p].end,g=t[m],y=m+1;y<=v;++y){var _=t[y];s[a]={first:g._index,second:_._index},o.setItem(a,g._controlPoint,_._controlPoint,c),o.setColor(a,i.getResidueColor(g,n),i.getResidueColor(_,n)),a++,g=_}this._chunksIdc=s,o.finalize()}},{key:"updateToFrame",value:function(e){for(var t=e.getResidues(),n=this._selection.parent,r=this._mode,i=this._colorer,o=this._geo,a=0,s=this._selection.subdivs,u=r.calcStickRadius(),c=e.needsColorUpdate(i),l=0,f=s.length;l<f;++l)for(var h=s[l].arr,p=0,d=h.length;p<d;++p)for(var m=h[p].start,v=h[p].end,g=t[m],y=m+1;y<=v;++y){var _=t[y];o.setItem(a,g._controlPoint,_._controlPoint,u),c&&o.setColor(a,i.getResidueColor(g,n),i.getResidueColor(_,n)),a++,g=_}o.finalize()}},{key:"raycast",value:function(e,t){var n=[],r=this._selection.residues;this._mesh.raycast(e,n);for(var i=this._chunksIdc,o=0,a=n.length;o<a;++o)if(n[o].hasOwnProperty("chunkIdx")){var s=n[o].chunkIdx,u=i[Math.floor(s/2)],c=s%2===0?u.first:u.second;c<r.length&&(n[o].residue=r[c],t.push(n[o]))}}},{key:"_calcChunksList",value:function(e){for(var t=[],n=this._chunksIdc,r=this._selection.residues,i=0,o=n.length;i<o;++i){var a=n[i];r[a.first]._mask&e&&t.push(2*i),r[a.second]._mask&e&&t.push(2*i+1)}return t}}]),t}(vi);var Xi=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_makeGeoArgs",value:function(){for(var e=this._mode.drawMultiorderBonds(),t=this._mode.showAromaticLoops(),n=this._selection.chunks,r=this._selection.bonds,i=0,o=0,a=n.length;o<a;++o)i+=this.getBondOrder(r[n[o]],e,t);return[i,this._polyComplexity]}},{key:"getBondOrder",value:function(e,t,n){var r=1;return!t||n&&e._type===ke.BondType.AROMATIC||(r=function(e){return e<2?1:e}(e._order)),r}},{key:"raycast",value:function(e,t){var n=this._selection.bonds,r=[];this._mesh.raycast(e,r);for(var i=this._chunksIdc,o=0,a=r.length;o<a;++o)if(r[o].hasOwnProperty("chunkIdx")){var s=r[o].chunkIdx,u=i[Math.floor(s/2)];if(u<n.length){var c=n[u];r[o].atom=s%2===0?c._left:c._right,t.push(r[o])}}}},{key:"_calcChunksList",value:function(e,t){for(var n=[],r=this._selection.bonds,i=this._chunksIdc,o=0,a=i.length;o<a;++o){var s=r[i[o]];s._left.mask&e&&(!t||s._right.mask&e)&&n.push(2*o),s._right.mask&e&&(!t||s._left.mask&e)&&n.push(2*o+1)}return n}}]),t}(vi),$i={AtomsSphereGroup:yi,AtomsSurfaceGroup:_i,AtomsSASSESGroupStub:xi,AtomsTextGroup:Ai,AromaticTorusGroup:Pi,AromaticLinesGroup:Li,NucleicCylindersGroup:Ni,NucleicSpheresGroup:Di,ResiduesSubseqGroup:qi,ResiduesTraceGroup:Yi,BondsCylinderGroup:function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){for(var e,t=this._selection.chunks,n=this._selection,r=n.bonds,i=n.parent,a=this._mode,s=this._colorer,u=this._geo,c=a.drawMultiorderBonds(),l=a.showAromaticLoops(),f=a.calcStickRadius(),h=a.calcSpaceFraction(),p=new o.Vector3,d=new o.Vector3,m=0,v=[],g=0,y=t.length;g<y;++g){var _=r[t[g]],x=_._left,b=_._right,w=x.position,S=b.position;e=_.calcNormalDir();for(var E=this.getBondOrder(_,c,l),T=2*Math.min(a.calcAtomRadius(x),a.calcAtomRadius(b))/E,A=c?Math.min(f,.5*T*(1-h)):f,M=0;M<E;++M){var C=T*(E%2===0?(.5+(M/2|0))*(1-M%2*2):((M+1)/2|0)*(M%2*2-1));v[m]=_._index,p.copy(w),p.addScaledVector(e,C),d.copy(S),d.addScaledVector(e,C),u.setItem(m,p,d,A),u.setColor(m++,s.getAtomColor(x,i),s.getAtomColor(b,i))}}u.finalize(),this._chunksIdc=v}},{key:"updateToFrame",value:function(e){for(var t,n=this._selection.chunks,r=this._selection.bonds,i=this._mode,a=this._colorer,s=this._geo,u=i.drawMultiorderBonds(),c=i.showAromaticLoops(),l=i.calcStickRadius(),f=i.calcSpaceFraction(),h=new o.Vector3,p=new o.Vector3,d=0,m=e.needsColorUpdate(a),v=0,g=n.length;v<g;++v){var y=r[n[v]],_=y._left,x=y._right,b=e.getAtomPos(_.index).clone(),w=e.getAtomPos(x.index);t=y.calcNormalDir();for(var S=this.getBondOrder(y,u,c),E=2*Math.min(i.calcAtomRadius(_),i.calcAtomRadius(x))/S,T=u?Math.min(l,.5*E*(1-f)):l,A=0;A<S;++A){var M=E*(S%2===0?(.5+(A/2|0))*(1-A%2*2):((A+1)/2|0)*(A%2*2-1));h.copy(b),h.addScaledVector(t,M),p.copy(w),p.addScaledVector(t,M),s.setItem(d,h,p,T),m&&s.setColor(d,e.getAtomColor(a,_),e.getAtomColor(a,x)),d++}}s.finalize()}}]),t}(Xi),BondsLinesGroup:function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_build",value:function(){for(var e=this._selection.chunks,t=this._selection,n=t.bonds,r=t.parent,i=this._mode,a=this._colorer,s=this._geo,u=i.drawMultiorderBonds(),c=i.showAromaticLoops(),l=new o.Vector3,f=new o.Vector3,h=new o.Vector3,p=0,d=[],m=0,v=e.length;m<v;++m){var g=n[e[m]],y=g._left,_=g._right,x=y.position,b=_.position,w=1===y.bonds.length,S=1===_.bonds.length;l.subVectors(b,x);for(var E=l.length(),T=g.calcNormalDir(),A=this.getBondOrder(g,u,c),M=0;M<A;++M){f.copy(x),h.copy(b);var C=A%2===0?(.5+(M/2|0))*(1-M%2*2):((M+1)/2|0)*(M%2*2-1);d[p]=g._index,2!==A||w||S||(C-=.5,C*=-1),!w&&!S&&A>1&&0!==C&&(f.lerpVectors(x,b,.15/E),h.lerpVectors(x,b,1-.15/E)),C*=.15,f.addScaledVector(T,C),h.addScaledVector(T,C),s.setItem(p,f,h),s.setColor(p++,a.getAtomColor(y,r),a.getAtomColor(_,r))}}s.finalize(),this._chunksIdc=d}},{key:"updateToFrame",value:function(e){for(var t=this._selection.chunks,n=this._selection.bonds,r=this._mode,i=this._colorer,a=this._geo,s=r.drawMultiorderBonds(),u=r.showAromaticLoops(),c=new o.Vector3,l=new o.Vector3,f=new o.Vector3,h=0,p=e.needsColorUpdate(i),d=0,m=t.length;d<m;++d){var v=n[t[d]],g=v._left,y=v._right,_=e.getAtomPos(g.index).clone(),x=e.getAtomPos(y.index),b=1===g.bonds.length,w=1===y.bonds.length;c.subVectors(x,_);for(var S=c.length(),E=v.calcNormalDir(),T=this.getBondOrder(v,s,u),A=0;A<T;++A){l.copy(_),f.copy(x);var M=T%2===0?(.5+(A/2|0))*(1-A%2*2):((A+1)/2|0)*(A%2*2-1);2!==T||b||w||(M-=.5,M*=-1),!b&&!w&&T>1&&0!==M&&(l.lerpVectors(_,x,.15/S),f.lerpVectors(_,x,1-.15/S)),M*=.15,l.addScaledVector(E,M),f.addScaledVector(E,M),a.setItem(h,l,f),p&&a.setColor(h,e.getAtomColor(i,g),e.getAtomColor(i,y)),h++}}a.finalize()}}]),t}(Xi)},Zi=function(e){function t(e,n,r,i,o,a,s,u){var c;g(this,t),c=C(this,k(t).call(this));var l=M(c);c._complex=r,c._mode=o;var f=r.getAtoms(),h=r.getTransforms();return r.forEachComponent((function(t){var c=[],p=0;if(t.forEachAtom((function(e){l._checkAtom(e,s)&&(c[p++]=e.index)})),0!==p){var d=new e(n,{atoms:f,chunks:c,parent:r},i,o,h,a,u);d._component=t,l.add(d)}})),c}return P(t,e),_(t,[{key:"_checkAtom",value:function(e,t){return e.mask&t}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,c=s.length;u<c;++u){var l=s[u];l._component=r[o]._component,n[i++]=l}return n}}]),t}(an),Ki=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_checkAtom",value:function(e,t){if(!(e.mask&t))return!1;for(var n=e.bonds,r=0,i=n.length;r<i;++r)if(n[r]._left.mask&t&&n[r]._right.mask&t)return!1;return!0}}]),t}(Zi),Ji=function(e){function t(e,n,r,i,o,a,s,u){var c;g(this,t),c=C(this,k(t).call(this));var l=M(c);c._complex=r;var f=r.getResidues(),h=r.getTransforms();return r.forEachComponent((function(t){var c=0,p=[];if(t.forEachResidue((function(e){l._checkResidue(e,s)&&(p[c++]=e._index)})),0!==c){var d=new e(n,{residues:f,chunks:p,parent:r},i,o,h,a,u);d._component=t,l.add(d)}})),c}return P(t,e),_(t,[{key:"checkResidue",value:function(e,t){return e._mask&t}},{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,c=s.length;u<c;++u){var l=s[u];l._component=r[o]._component,n[i++]=l}return n}}]),t}(an),Qi={Atoms:Zi,OrphanAtoms:Ki,Residues:Ji,Nucleic:function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_checkResidue",value:function(e,t){return t&e._mask&&null!==e._cylinders}}]),t}(Ji),Subseqs:function(e){function t(e,n,r,i,o,a,s,u){var c;g(this,t),c=C(this,k(t).call(this));var l=M(c);c._complex=r;var f=r.getResidues(),h=r.getTransforms();return r.forEachComponent((function(t){for(var c=t.getMaskedSubdivSequences(s),p=0,d=[],m=0,v=c.length;m<v;++m)for(var g=c[m].arr,y=0,_=g.length;y<_;++y)for(var x=g[y].start,b=g[y].end;x<=b;++x)d[p++]=f[x]._index;if(0!==p){var w=new e(n,{residues:f,chunks:d,subdivs:c,parent:r},i,o,h,a,u);w._component=t,l.add(w)}})),c}return P(t,e),_(t,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,c=s.length;u<c;++u){var l=s[u];l._component=r[o]._component,n[i++]=l}return n}}]),t}(an),Bonds:function(e){function t(e,n,r,i,o,a,s,u){var c;g(this,t),c=C(this,k(t).call(this));var l=M(c);c._complex=r;var f=r.getBonds(),h=r.getTransforms();return r.forEachComponent((function(t){var c=[],p=0;if(t.forEachBond((function(e){var t=e._left,n=e._right;t.mask&s&&n.mask&s&&(c[p++]=e._index)})),0!==p){var d=new e(n,{bonds:f,chunks:c,parent:r},i,o,h,a,u);d._component=t,l.add(d)}})),c}return P(t,e),_(t,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,c=s.length;u<c;++u){var l=s[u];l._component=r[o]._component,n[i++]=l}return n}}]),t}(an),Aromatic:function(e){function t(e,n,r,i,o,a,s,u){var c;g(this,t),c=C(this,k(t).call(this));var l=M(c);c._complex=r;var f=r.getAtoms(),h=r.getTransforms();return o.showAromaticLoops()?(r.forEachComponent((function(t){var c=[],p=0,d=[],m=0;t.forEachCycle((function(e){for(var t=e.atoms,n=0,r=0,i=t.length;r<i;++r)0!==(t[r].mask&s)&&(++n,c[p++]=t[r].index);n>0&&(d[m++]=e)}));var v=new e(n,{cycles:d,atoms:f,chunks:c,parent:r},i,o,h,a,u);v._component=t,l.add(v)})),c):C(c)}return P(t,e),_(t,[{key:"getSubset",value:function(e,t){for(var n=[],r=this.children,i=0,o=0,a=r.length;o<a;++o)if(r[o].getSubset)for(var s=r[o].getSubset(e,t),u=0,c=s.length;u<c;++u){var l=s[u];l._component=r[o]._component,n[i++]=l}return n}}]),t}(an)};function eo(e,t,n){return function(r,i,o,a,s,u){return new t(n,e,r,i,o,a,s,u)}}var to=function(){function e(){g(this,e)}return _(e,null,[{key:"AtomsSpheres",value:function(e,t){return eo(di.createSpheres(e,t),Qi.Atoms,$i.AtomsSphereGroup)}},{key:"OrphanedAtomsCrosses",value:function(e,t,n){return eo(di.createCrosses(e,t,n),Qi.OrphanAtoms,$i.AtomsSphereGroup)}},{key:"BondsCylinders",value:function(e,t){return eo(di.create2CCylinders(e,t),Qi.Bonds,$i.BondsCylinderGroup)}},{key:"BondsLines",value:function(e,t,n){return eo(di.create2CLines(e,t,n),Qi.Bonds,$i.BondsLinesGroup)}},{key:"CartoonChains",value:function(e,t){return eo(di.createExtrudedChains(e,t),Qi.Subseqs,$i.ResiduesSubseqGroup)}},{key:"TraceChains",value:function(e,t){return eo(di.create2CClosedCylinders(e,t),Qi.Subseqs,$i.ResiduesTraceGroup)}},{key:"NucleicSpheres",value:function(e,t){return eo(di.createSpheres(e,t),Qi.Nucleic,$i.NucleicSpheresGroup)}},{key:"NucleicCylinders",value:function(e,t){return eo(di.create2CCylinders(e,t),Qi.Nucleic,$i.NucleicCylindersGroup)}},{key:"ALoopsTorus",value:function(e,t){return eo(di.createExtrudedChains(e,t),Qi.Aromatic,$i.AromaticTorusGroup)}},{key:"ALoopsLines",value:function(e,t,n){return eo(di.createChunkedLines(e,t,n),Qi.Aromatic,$i.AromaticLinesGroup)}},{key:"QuickSurfGeo",value:function(e,t,n){return eo(di.createQuickSurface(e,t,n),Qi.Atoms,$i.AtomsSurfaceGroup)}},{key:"ContactSurfaceGeo",value:function(e,t,n){return eo(di.createContactSurface(e,t,n),Qi.Atoms,$i.AtomsSurfaceGroup)}},{key:"SASSESSurfaceGeo",value:function(e,t,n){return eo(di.createSASSES(e,t,n),Qi.Atoms,$i.AtomsSASSESGroupStub)}},{key:"TextLabelsGeo",value:function(e,t){return eo(di.createLabels(e,t),Qi.Atoms,$i.AtomsTextGroup)}}]),e}(),no=function(){function e(t){if(g(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.opts=i.a.merge(Q.deriveDeep(this.settings.now.modes[this.id],!0),t)}return _(e,[{key:"identify",value:function(){var e=Q.objectsDiff(this.opts,this.settings.now.modes[this.id]);return i.a.isEmpty(e)?this.id:[this.id,e]}},{key:"buildGeometry",value:function(e,t,n,r){for(var o=this.opts.polyComplexity?this.opts.polyComplexity[this.settings.now.resolution]:0,a=this.depGroups,s=a.length,u=new Cn.RCGroup,l=0;l<s;++l){var f=a[l],h={};if(i.a.isArray(f))h=f[1].call(this),f=c(f,1)[0];var p=new(to[f](null,this.settings,h))(e,t,this,o,n,r);p.children.length>0&&u.add(p)}return u}}]),e}();function ro(){return{lineWidth:this.opts.lineWidth}}Fn(no.prototype),no.prototype.id="__",no.prototype.depGroups=[];var io=function(e){function t(e){var n;g(this,t),(n=C(this,k(t).call(this,e))).depGroups=n.depGroups.slice(0);for(var r=n.depGroups,i=0,o=r.length;i<o;++i)r[i]=[r[i],ro];return n}return P(t,e),_(t,[{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}},{key:"calcAtomRadius",value:function(){return this.opts.atom}},{key:"getAromaticOffset",value:function(){return this.opts.offsarom}},{key:"getAromaticArcChunks",value:function(){return this.opts.chunkarom}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}}]),t}(no);Ee(io,"id","LN"),io.prototype.id="LN",io.prototype.name="Lines",io.prototype.shortName="Lines",io.prototype.depGroups=["ALoopsLines","BondsLines","OrphanedAtomsCrosses"];var oo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"calcAtomRadius",value:function(e){return this.opts.bond}},{key:"calcStickRadius",value:function(){return this.opts.bond}},{key:"calcSpaceFraction",value:function(){return this.opts.space}},{key:"getAromRadius",value:function(){return this.opts.aromrad}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}},{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}}]),t}(no);Ee(oo,"id","LC"),oo.prototype.id="LC",oo.prototype.name="Licorice",oo.prototype.shortName="Licorice",oo.prototype.depGroups=["AtomsSpheres","BondsCylinders","ALoopsTorus"];var ao=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"calcAtomRadius",value:function(e){return e.element.radius*this.opts.atom}},{key:"calcStickRadius",value:function(){return this.opts.bond}},{key:"getAromRadius",value:function(){return this.opts.aromrad}},{key:"showAromaticLoops",value:function(){return this.opts.showarom}},{key:"calcSpaceFraction",value:function(){return this.opts.space}},{key:"drawMultiorderBonds",value:function(){return this.opts.multibond}}]),t}(no);Ee(ao,"id","BS"),ao.prototype.id="BS",ao.prototype.name="Balls and Sticks",ao.prototype.shortName="Balls",ao.prototype.depGroups=["AtomsSpheres","BondsCylinders","ALoopsTorus"];var so=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"calcAtomRadius",value:function(e){return e.element.radius}}]),t}(no);Ee(so,"id","VW"),so.prototype.id="VW",so.prototype.name="Van der Waals",so.prototype.shortName="VDW",so.prototype.depGroups=["AtomsSpheres"];var uo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"calcStickRadius",value:function(){return this.opts.radius}}]),t}(no);Ee(uo,"id","TR"),uo.prototype.id="TR",uo.prototype.name="Trace",uo.prototype.shortName="Trace",uo.prototype.depGroups=["TraceChains"];var co=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getResidueRadius",value:function(e){return this.TUBE_RADIUS}},{key:"getHeightSegmentsRatio",value:function(){return this.opts.heightSegmentsRatio}},{key:"getTension",value:function(){return this.opts.tension}},{key:"buildGeometry",value:function(e,t,n,r){var i=this.opts.radius;return this.TUBE_RADIUS=new o.Vector2(i,i),no.prototype.buildGeometry.call(this,e,t,n,r)}}]),t}(no);Ee(co,"id","TU"),co.prototype.id="TU",co.prototype.name="Tube",co.prototype.shortName="Tube",co.prototype.depGroups=["CartoonChains"];var lo=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,e))).secCache={},n}return P(t,e),_(t,[{key:"getResidueStartRadius",value:function(e){var t=e.getSecondary();if(!t||!t.generic)return this.TUBE_RADIUS;var n=this.secCache[t.generic];return n?t.term===e?n.start:n.center:this.TUBE_RADIUS}},{key:"getResidueEndRadius",value:function(e){var t=e.getSecondary();if(null===t||!t.generic)return this.TUBE_RADIUS;var n=this.secCache[t.generic];return n?t.term===e?this.ARROW_END:n.center:this.TUBE_RADIUS}},{key:"getResidueRadius",value:function(e,t){var n=this.getResidueStartRadius(e);if(0===t)return n;var r=this.getResidueEndRadius(e);return 2===t?r:n.clone().lerp(r,t/2)}},{key:"calcStickRadius",value:function(e){return this.opts.radius}},{key:"getHeightSegmentsRatio",value:function(){return this.opts.heightSegmentsRatio}},{key:"getTension",value:function(){return this.opts.tension}},{key:"buildGeometry",value:function(e,t,n,r){var i=this.opts.radius,a=this.opts.depth;this.TUBE_RADIUS=new o.Vector2(i,i),this.ARROW_END=new o.Vector2(a,i);var s={},u=this.opts.ss;for(var c in u)s[c]={center:new o.Vector2(a,u[c].width),start:new o.Vector2(a,u[c].arrow)};return this.secCache=s,no.prototype.buildGeometry.call(this,e,t,n,r)}}]),t}(no);Ee(lo,"id","CA"),lo.prototype.id="CA",lo.prototype.name="Cartoon",lo.prototype.shortName="Cartoon",lo.prototype.depGroups=["CartoonChains","NucleicSpheres","NucleicCylinders"];var fo=rn.selectors;function ho(){return{wireframe:this.opts.wireframe,zClip:this.opts.zClip}}var po=function(e){function t(e){var n;g(this,t),(n=C(this,k(t).call(this,e))).depGroups=n.depGroups.slice(0);for(var r=n.surfaceNames,i=n.depGroups,o=0,a=r.length;o<a;++o)i[i.length]=[r[o],ho];return n}return P(t,e),_(t,[{key:"calcAtomRadius",value:function(e){return e.element.radius}},{key:"getVisibilitySelector",value:function(){var e=null;if(""!==this.opts.subset){var t=fo.parse(this.opts.subset);t.error||(e=t.selector)}return e}}]),t}(no);po.prototype.isSurface=!0,po.prototype.surfaceNames=[];var mo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getSurfaceOpts",value:function(){return{useBeads:!1,isoValue:this.opts.isoValue,gaussLim:this.opts.gaussLim[this.settings.now.resolution],radScale:this.opts.scale,gridSpacing:this.opts.gridSpacing[this.settings.now.resolution],zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector()}}}]),t}(po);Ee(mo,"id","QS"),mo.prototype.id="QS",mo.prototype.name="Quick Surface",mo.prototype.shortName="Quick Surf",mo.prototype.surfaceNames=["QuickSurfGeo"];var vo=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,n)))._excludeProbe=e,r}return P(t,e),_(t,[{key:"calcAtomRadius",value:function(e){return e.element.radius}},{key:"getSurfaceOpts",value:function(){return{gridSpacing:this.opts.polyComplexity[this.settings.now.resolution],radScale:this._radScale,zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector(),probeRadius:this.opts.probeRadius,excludeProbe:this._excludeProbe}}}]),t}(po);vo.prototype.id="SU",vo.prototype.name="Surface",vo.prototype.shortName="Surface",vo.prototype.surfaceNames=["SASSESSurfaceGeo"],vo.prototype._radScale=1,vo.prototype._excludeProbe=!1;var go=function(e){function t(e){return g(this,t),C(this,k(t).call(this,!1,e))}return P(t,e),t}(vo);Ee(go,"id","SA"),go.prototype.id="SA",go.prototype.name="Solvent Accessible Surface",go.prototype.shortName="SAS";var yo=function(e){function t(e){return g(this,t),C(this,k(t).call(this,!0,e))}return P(t,e),t}(vo);Ee(yo,"id","SE"),yo.prototype.id="SE",yo.prototype.name="Solvent Excluded Surface",yo.prototype.shortName="SES";var _o=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getSurfaceOpts",value:function(){return{probeRadius:this.opts.probeRadius,radScale:this.opts.polyComplexity[this.settings.now.resolution],scaleFactor:this.opts.polyComplexity[this.settings.now.resolution],gridSpacing:1/this.opts.polyComplexity[this.settings.now.resolution],isoValue:this.opts.isoValue,probePositions:this.opts.probePositions,zClip:this.opts.zClip,visibilitySelector:this.getVisibilitySelector()}}}]),t}(po);Ee(_o,"id","CS"),_o.prototype.id="CS",_o.prototype.name="Contact Surface",_o.prototype.shortName="Contact Surf",_o.prototype.isSurface=!0,_o.prototype.surfaceNames=["ContactSurfaceGeo"];var xo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getTemplateOptions",value:function(){return this.opts.template}},{key:"getLabelOpts",value:function(){return i.a.merge(this.opts,{colors:!0,adjustColor:!0,transparent:!0})}}]),t}(no);Ee(xo,"id","TX"),xo.prototype.id="TX",xo.prototype.name="Text mode",xo.prototype.shortName="Text",xo.prototype.depGroups=["TextLabelsGeo"];var bo=new Dn([io,oo,ao,so,uo,co,lo,mo,go,yo,_o,xo]);function wo(e,t,n){return e<=n?e<0?0:e:n}var So=function(){function e(t,n){g(this,e),this.name=t||"Custom",this.id=n||"CP"}return _(e,[{key:"getElementColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.elementColors[e];return void 0!==n||t?n:this.defaultElementColor}},{key:"getResidueColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.residueColors[e];return void 0!==n||t?n:this.defaultResidueColor}},{key:"getChainColor",value:function(e){var t=e.charCodeAt(0);return t=(31&(t<0?0:t>=256?t-256:t))%this.chainColors.length,this.chainColors[t]}},{key:"getSecondaryColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.secondaryColors[e];return void 0!==n||t?n:this.defaultSecondaryColor}},{key:"getSequentialColor",value:function(e){var t=this.colors,n=t.length;return e<0?t[e%n+n]:t[e%n]}},{key:"getGradientColor",value:function(e,t){var n=this.gradients[t];if(!n)return this.defaultNamedColor;var r=n.length,i=e*(r-1),o=Math.floor(i),a=wo(o+1,0,r-1);return function(e,t,n){var r=1-n;return r*(e>>16&255)+n*(t>>16&255)<<16|r*(e>>8&255)+n*(t>>8&255)<<8|r*(255&e)+n*(255&t)}(n[o=wo(o,0,r-1)],n[a],i-o)}},{key:"getNamedColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.namedColors[e];return void 0!==n||t?n:this.defaultNamedColor}}]),e}();i.a.assign(So.prototype,{colors:[16777215,16711680,65280,255,8421504],minRangeColor:0,midRangeColor:8355711,maxRangeColor:16777215,defaultElementColor:16777215,elementColors:{},defaultResidueColor:16777215,residueColors:{},chainColors:[16777215],defaultSecondaryColor:16777215,secondaryColors:{},defaultGradientColor:0,defaultNamedColor:16777215,namedColorsArray:[["indianred",13458524],["lightcoral",15761536],["salmon",16416882],["darksalmon",15308410],["lightsalmon",16752762],["crimson",14423100],["red",16711680],["firebrick",11674146],["darkred",9109504],["pink",16761035],["lightpink",16758465],["hotpink",16738740],["deeppink",16716947],["mediumvioletred",13047173],["palevioletred",14381203],["coral",16744272],["tomato",16737095],["orangered",16729344],["darkorange",16747520],["orange",16753920],["gold",16766720],["yellow",16776960],["lightyellow",16777184],["lemonchiffon",16775885],["lightgoldenrodyellow",16448210],["papayawhip",16773077],["moccasin",16770229],["peachpuff",16767673],["palegoldenrod",15657130],["khaki",15787660],["darkkhaki",12433259],["lavender",15132410],["thistle",14204888],["plum",14524637],["violet",15631086],["orchid",14315734],["fuchsia",16711935],["magenta",16711935],["mediumorchid",12211667],["mediumpurple",9662683],["rebeccapurple",6697881],["blueviolet",9055202],["darkviolet",9699539],["darkorchid",10040012],["darkmagenta",9109643],["purple",8388736],["indigo",4915330],["slateblue",6970061],["mediumslateblue",8087790],["darkslateblue",4734347],["greenyellow",11403055],["chartreuse",8388352],["lawngreen",8190976],["lime",65280],["limegreen",3329330],["palegreen",10025880],["lightgreen",9498256],["mediumspringgreen",64154],["springgreen",65407],["mediumseagreen",3978097],["seagreen",3050327],["forestgreen",2263842],["green",32768],["darkgreen",25600],["yellowgreen",10145074],["olivedrab",7048739],["olive",8421376],["darkolivegreen",5597999],["mediumaquamarine",6737322],["darkseagreen",9419919],["lightseagreen",2142890],["darkcyan",35723],["teal",32896],["aqua",65535],["cyan",65535],["lightcyan",14745599],["paleturquoise",11529966],["aquamarine",8388564],["turquoise",4251856],["mediumturquoise",4772300],["darkturquoise",52945],["cadetblue",6266528],["steelblue",4620980],["lightsteelblue",11584734],["powderblue",11591910],["lightblue",11393254],["skyblue",8900331],["lightskyblue",8900346],["deepskyblue",49151],["dodgerblue",2003199],["cornflowerblue",6591981],["royalblue",4286945],["blue",255],["mediumblue",205],["darkblue",139],["navy",128],["midnightblue",1644912],["cornsilk",16775388],["blanchedalmond",16772045],["bisque",16770244],["navajowhite",16768685],["wheat",16113331],["burlywood",14596231],["tan",13808780],["rosybrown",12357519],["sandybrown",16032864],["goldenrod",14329120],["darkgoldenrod",12092939],["peru",13468991],["chocolate",13789470],["saddlebrown",9127187],["sienna",10506797],["brown",10824234],["maroon",8388608],["white",16777215],["snow",16775930],["honeydew",15794160],["mintcream",16121850],["azure",15794175],["aliceblue",15792383],["ghostwhite",16316671],["whitesmoke",16119285],["seashell",16774638],["beige",16119260],["oldlace",16643558],["floralwhite",16775920],["ivory",16777200],["antiquewhite",16444375],["linen",16445670],["lavenderblush",16773365],["mistyrose",16770273],["gainsboro",14474460],["lightgray",13882323],["silver",12632256],["darkgray",11119017],["gray",8421504],["dimgray",6908265],["lightslategray",7833753],["slategray",7372944],["darkslategray",3100495],["black",0]],namedColors:{},gradients:{rainbow:[255,65535,65280,16776960,16711680],temp:[255,32767,16777215,16744192,16711680],hot:[16777215,16744192,16711680],cold:[16777215,32767,255],"blue-red":[255,16777215,16711680],reds:[16777215,16711680],blues:[16777215,255]}});for(var Eo=So.prototype,To=Eo.namedColorsArray,Ao=Eo.namedColors,Mo=0,Co=To.length;Mo<Co;++Mo){var ko=c(To[Mo],2),Ro=ko[0],Po=ko[1];Ao[Ro]=Po}var Lo,Oo=new So("CPK","CP");Oo.elementColors={H:16777215,C:2105376,N:2121983,O:15605776,F:65280,P:8397055,S:16776960,CL:47872,FE:13684944,CO:13684944,NI:13684944,CU:13684944,BR:34816,I:21760};var Io=new So("Jmol","JM");Io.colors=[255,22015,44031,65535,65451,65365,65280,5635840,11271936,16776960,16755456,16733440,16711680,16711765,16711851,16711935,11206911,5570815],Io.elementColors={H:16777215,D:16777152,T:16777120,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:4366e3,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998},Io.defaultResidueColor=12492910,Io.residueColors={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,A:10526975,C:16747595,G:16740464,I:8454143,T:10551200,U:16744576,DA:10526975,DC:16747595,DG:16740464,DI:8454143,DT:10551200,DU:16744576,"+A":10526975,"+C":16747595,"+G":16740464,"+I":8454143,"+T":10551200,"+U":16744576},Io.chainColors=[4294967295,4290826495,4289789872,4294951112,4294967168,4294951167,4289786096,4294955120,4293951616,4294303411,4278239231,4291648604,4284927402,4288335154,4293821166,4278243025,4278255487,4282168177,4278190219,4290623339,4278215680,4286578688,4286611456,4286578816,4278222976,4290283019,4289864226];var No,Do=He.Type;Io.secondaryColors=(Ee(Lo={},Do.HELIX_ALPHA,16711808),Ee(Lo,Do.HELIX_PI,6291584),Ee(Lo,Do.HELIX_310,10485888),Ee(Lo,Do.STRAND,16762880),Ee(Lo,Do.TURN,6324479),Ee(Lo,"dna",11403518),Ee(Lo,"rna",16580962),Lo);var Fo=new So("VMD","VM");Fo.colors=[255,16711680,6316128,16744448,16776960,8421427,10066329,65280,16777215,16751001,4243648,10879142,8447590,15099571,8408320,8421568],Fo.defaultElementColor=8408320,Fo.elementColors={H:16777215,C:4243391,N:255,O:16711680,P:8421427,S:16776960},Fo.defaultResidueColor=4243648,Fo.residueColors={ALA:255,ARG:16777215,ASN:8421427,ASP:16711680,CYS:16776960,GLN:16744448,GLU:16751001,GLY:16777215,HIS:4243648,ILE:65280,LEU:16751001,LYS:4243648,MET:16776960,PHE:10879142,PRO:8408064,SER:16776960,THR:15099571,TRP:10066329,TYR:65280,VAL:8421427,A:255,C:16744448,G:16776960,T:10879142,U:65280,DA:255,DC:16744448,DG:16776960,DT:10879142,DU:65280,"+A":255,"+C":16744448,"+G":16776960,"+T":10879142,"+U":65280,WAT:4243648,H2O:4243648,HOH:4243648},Fo.chainColors=[16777215].concat(Fo.colors);var zo=He.Type;Fo.secondaryColors=(Ee(No={},zo.HELIX_ALPHA,10879142),Ee(No,zo.HELIX_310,255),Ee(No,zo.HELIX_PI,16711680),Ee(No,zo.STRAND,16776960),Ee(No,zo.BRIDGE,8421427),Ee(No,zo.TURN,4243648),No);var Bo=new Dn([Oo,Io,Fo]),jo=function(){function e(t){if(g(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.opts=i.a.merge(Q.deriveDeep(re.now.colorers[this.id],!0),t),this.palette=Bo.first}return _(e,[{key:"identify",value:function(){var e=Q.objectsDiff(this.opts,re.now.colorers[this.id]);return i.a.isEmpty(e)?this.id:[this.id,e]}}]),e}();jo.prototype.id="__";var Vo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){var n=e.element.name;return"C"===n&&this.opts.carbon>=0?this.opts.carbon:this.palette.getElementColor(n)}},{key:"getResidueColor",value:function(e,t){return this.palette.defaultResidueColor}}]),t}(jo);Ee(Vo,"id","EL"),Vo.prototype.id="EL",Vo.prototype.name="Element",Vo.prototype.shortName="Element";var Uo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){return this.palette.getResidueColor(e._type._name)}}]),t}(jo);Ee(Uo,"id","RT"),Uo.prototype.id="RT",Uo.prototype.name="Residue Type",Uo.prototype.shortName="Residue";var Go=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=e._chain;if(n.minSequence===Number.POSITIVE_INFINITY&&n.maxSequence===Number.NEGATIVE_INFINITY)return this.palette.defaultNamedColor;var r=n.minSequence,i=n.maxSequence>r?n.maxSequence:r+1;return this.palette.getGradientColor((e._sequence-r)/(i-r),this.opts.gradient)}}]),t}(jo);Ee(Go,"id","SQ"),Go.prototype.id="SQ",Go.prototype.name="Sequence",Go.prototype.shortName="Sequence";var Ho=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){return this.palette.getChainColor(e.getChain()._name)}}]),t}(jo);Ee(Ho,"id","CH"),Ho.prototype.id="CH",Ho.prototype.name="Chain",Ho.prototype.shortName="Chain";var Wo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){if(e._type.flags&De.Flags.DNA)return this.palette.getSecondaryColor("dna");if(e._type.flags&De.Flags.RNA)return this.palette.getSecondaryColor("rna");var n=e.getSecondary();if(n){var r=this.palette.getSecondaryColor(n.type,!0);return void 0===r&&(r=this.palette.getSecondaryColor(n.generic)),r}return this.palette.defaultSecondaryColor}}]),t}(jo);Ee(Wo,"id","SS"),Wo.prototype.id="SS",Wo.prototype.name="Secondary Structure",Wo.prototype.shortName="Structure";var qo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.opts.color}},{key:"getResidueColor",value:function(e,t){return this.opts.color}}]),t}(jo);Ee(qo,"id","UN"),qo.prototype.id="UN",qo.prototype.name="Uniform",qo.prototype.shortName="Uniform";var Yo=function(e){function t(e){var n;g(this,t),n=C(this,k(t).call(this,e));var r=bt.parse(n.opts.subset);return n._subsetCached=r.error?bt.none():r.selector,n}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this._subsetCached.includesAtom(e)?this.opts.color:this.opts.baseColor}},{key:"getResidueColor",value:function(e,t){for(var n=this._subsetCached,r=!0,i=e._atoms,o=0,a=i.length;o<a;++o)r=r&&n.includesAtom(i[o]);return r?this.opts.color:this.opts.baseColor}}]),t}(jo);Ee(Yo,"id","CO"),Yo.prototype.id="CO",Yo.prototype.name="Conditional",Yo.prototype.shortName="Conditional";var Xo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.palette.getChainColor(String.fromCharCode(e.location))}},{key:"getResidueColor",value:function(e,t){return this.palette.defaultResidueColor}}]),t}(jo);Ee(Xo,"id","CF"),Xo.prototype.id="CF",Xo.prototype.name="Conformation",Xo.prototype.shortName="Conformation";var $o=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){var n=this.opts,r=1;return e.temperature&&n?(r=n.min===n.max?e.temperature>n.max?1:0:(e.temperature-n.min)/(n.max-n.min),this.palette.getGradientColor(r,n.gradient)):this.palette.defaultGradientColor}},{key:"getResidueColor",value:function(e,t){var n=this.opts;if(!n)return this.palette.defaultGradientColor;if(e.temperature){var r=0;return r=n.min===n.max?e.temperature>n.max?1:0:(e.temperature-n.min)/(n.max-n.min),this.palette.getGradientColor(r,n.gradient)}return this.palette.defaultGradientColor}}]),t}(jo);Ee($o,"id","TM"),$o.prototype.id="TM",$o.prototype.name="Temperature",$o.prototype.shortName="Temperature";var Zo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){var n=this.opts;if(e.occupancy&&n){var r=1-e.occupancy;return this.palette.getGradientColor(r,n.gradient)}return this.palette.defaultGradientColor}},{key:"getResidueColor",value:function(e,t){var n=this.opts;if(!n)return this.palette.defaultGradientColor;if(e.occupancy>0){var r=1-e.occupancy;return this.palette.getGradientColor(r,n.gradient)}return this.palette.defaultGradientColor}}]),t}(jo);Ee(Zo,"id","OC"),Zo.prototype.id="OC",Zo.prototype.name="Occupancy",Zo.prototype.shortName="Occupancy";var Ko=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=this.palette.defaultResidueColor;if(e._type.hydrophobicity){n=this.palette.getGradientColor((e._type.hydrophobicity- -4.5)/9,this.opts.gradient)}return n}}]),t}(jo);Ee(Ko,"id","HY"),Ko.prototype.id="HY",Ko.prototype.name="Hydrophobicity",Ko.prototype.shortName="Hydrophobicity";var Jo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){return this.getResidueColor(e.residue,t)}},{key:"getResidueColor",value:function(e,t){var n=e._molecule,r=t.getMoleculeCount();return r>1?this.palette.getGradientColor((n.index-1)/(r-1),this.opts.gradient):this.palette.getGradientColor(0,this.opts.gradient)}}]),t}(jo);Ee(Jo,"id","MO"),Jo.prototype.id="MO",Jo.prototype.name="Molecule",Jo.prototype.shortName="Molecule";var Qo=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"getAtomColor",value:function(e,t){var n,r,i=this.opts.color,o=(n=i,(r=this.opts.factor)*(n>>16&255)<<16|r*(n>>8&255)<<8|r*(255&n));return e.flags&Te.Flags.CARBON?i:o}},{key:"getResidueColor",value:function(e,t){return this.opts.color}}]),t}(jo);Ee(Qo,"id","CB"),Qo.prototype.id="CB",Qo.prototype.name="Carbon",Qo.prototype.shortName="Carbon";var ea=new Dn([Vo,Uo,Go,Ho,Wo,qo,Yo,Xo,$o,Zo,Ko,Jo,Qo]);function ta(e){return new o.Color(e,e,e)}var na=new Dn([{id:"DF",name:"Diffuse",shortName:"Diffuse",uberOptions:{diffuse:ta(1),specular:ta(0),shininess:1,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"SF",name:"Soft Plastic",shortName:"Soft",uberOptions:{diffuse:ta(1),specular:ta(.1),shininess:30,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"PL",name:"Glossy Plastic",shortName:"Glossy",uberOptions:{diffuse:ta(.56),specular:ta(.28),shininess:100,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"ME",name:"Metal",shortName:"Metal",uberOptions:{diffuse:ta(.56),specular:ta(.55),shininess:30,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!1}},{id:"TR",name:"Transparent",shortName:"Transparent",uberOptions:{diffuse:ta(1),specular:ta(0),shininess:1,opacity:.5},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!0,toonShading:!1}},{id:"GL",name:"Glass",shortName:"Glass",uberOptions:{diffuse:ta(.5),specular:ta(.65),shininess:100,opacity:.5},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!0,toonShading:!1}},{id:"BA",name:"Backdrop",shortName:"Backdrop",uberOptions:{diffuse:ta(1),specular:ta(0),shininess:1,opacity:1},values:{lights:!1,fog:!1,depthWrite:!1,transparent:!1,toonShading:!1}},{id:"TN",name:"Toon",shortName:"Toon",uberOptions:{diffuse:ta(1),specular:ta(0),shininess:1,opacity:1},values:{lights:!0,fog:!0,depthWrite:!0,transparent:!1,toonShading:!0}},{id:"FL",name:"Flat",shortName:"Flat",uberOptions:{diffuse:ta(1),specular:ta(0),shininess:0,opacity:1},values:{lights:!1,fog:!0,depthWrite:!0,transparent:!1}}]),ra=rn.selectors,ia=function(){function e(t,n,r,i){g(this,e);var o={clipPlane:re.now.draft.clipPlane,fogTransparent:re.now.bg.transparent,shadowmap:re.now.shadow.on,shadowmapType:re.now.shadow.type};this.index=t,this.mode=n,this.colorer=r,this.selector=i,this.selectorString="",this.count=0,this.material=new bn,this.material.setValues(o),this.material.setUberOptions({fogAlpha:re.now.fogAlpha}),this.materialPreset=na.first,this.needsRebuild=!0,this.visible=!0,this.setMode(n)}return _(e,[{key:"markAtoms",value:function(e){return this.count=e.markAtoms(this.selector,1<<this.index),this.needsRebuild=!0,this.count}},{key:"unmarkAtoms",value:function(e){e.clearAtomBits(1<<this.index),this.count=0}},{key:"setMode",value:function(e){this.mode=e}},{key:"setMaterialPreset",value:function(e){this.materialPreset=e,this.material.setUberOptions(e.uberOptions),this.material.setValues(e.values)}},{key:"reset",value:function(){this.geo=null,this.selectionGeo=null}},{key:"buildGeometry",value:function(e){return this.reset(),this.needsRebuild=!1,re.now.ao&&this.material.setValues({normalsToGBuffer:re.now.ao}),this.geo=this.mode.buildGeometry(e,this.colorer,1<<this.index,this.material),this.material.uberOptions.opacity<.99&&"prepass"===re.now.transparency&&Cn.processTransparentMaterial(this.geo,this.material),this.geo.visible=this.visible,Cn.processObjRenderOrder(this.geo,this.materialPreset.id),Cn.processColFromPosMaterial(this.geo,this.material),re.now.shadow.on&&Cn.createShadowmapMaterial(this.geo,this.material),this.geo}},{key:"buildSelectionGeometry",value:function(e){var t=null;if(this.geo&&"getSubset"in this.geo){var n=this.geo.getSubset(e);if(n&&n.length>0){(t=new o.Group).matrixAutoUpdate=!1,t.matrix=this.geo.matrix;for(var r=0;r<n.length;r++){var i=n[r];t.add(i)}}}return t&&(t.visible=this.visible),this.selectionGeo=t,this.selectionGeo}},{key:"compare",value:function(e){var t={},n=String(this.selector);e&&n.valueOf()===String(e.selector).valueOf()||(t.selector=n);var r=this.mode.identify();e&&!Array.isArray(r)&&r===e.mode||(t.mode=r);var i=this.colorer.identify();return e&&!Array.isArray(i)&&i===e.colorer||(t.colorer=i),e&&this.materialPreset.id===e.material||(t.material=this.materialPreset.id),t}},{key:"change",value:function(e,t,n,r){var o={};if(e.selector){var a=ra.parse(e.selector).selector,s=String(a);this.selectorString!==s&&(o.selector=s,this.selectorString=s,this.selector=a,this.markAtoms(t))}if(e.mode){var u=e.mode;i.a.isEqual(this.mode.identify(),u)||(o.mode=u,this.setMode(n))}if(e.colorer){var c=e.colorer;i.a.isEqual(this.colorer.identify(),c)||(o.colorer=c,this.colorer=r)}if(e.material){var l=e.material;i.a.isEqual(this.materialPreset.id,l)||(o.material=l,this.setMaterialPreset(na.get(e.material)))}return o}},{key:"show",value:function(e){this.visible=e,this.geo&&(this.geo.visible=e),this.selectionGeo&&(this.selectionGeo.visible=e)}}]),e}();function oa(){}var aa={ComponentEditor:function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this)))._complexVisual=e,n._inProgress=!1,n}return P(t,e),_(t,[{key:"begin",value:function(){var e=this._complexVisual.getComplex();this._componentTransforms=[];for(var t=0;t<e._components.length;++t){var n=e._components[t];this._componentTransforms[n._index]=new o.Object3D}return this._inProgress=!0,!0}},{key:"apply",value:function(){if(this._inProgress){for(var e=this._complexVisual.getComplex(),t=0;t<e._components.length;++t)this._bakeComponentTransform(e._components[t]);e.onAtomPositionChanged(),this._resetComponentTransform(),this._complexVisual.finalizeEdit()}}},{key:"discard",value:function(){this._inProgress&&(this._resetComponentTransform(),this._complexVisual.finalizeEdit())}},{key:"getAltObj",value:function(){var e={objects:[],pivot:new o.Vector3(0,0,0)},t=this._complexVisual,n=t.getSelectedComponent();if(null===n)return e;var r,i,a,s,u=this._complexVisual.getSelectionGeo(),c=1<<t.getSelectionBit();for(function e(t,n,r){var i=t.children;if(i)for(var o=0,a=i.length;o<a;++o){var s=i[o];s._component===n&&r(s),s instanceof Cn.RCGroup&&e(s,n,r)}}(t,n,(function(t){e.objects.push(t)})),r=0;r<u.children.length;++r)for(a=u.children[r],i=0;i<a.children.length;++i)(s=a.children[i]).hasOwnProperty("_component")&&s._component===n&&e.objects.push(s);e.objects.push(this._componentTransforms[n._index]);var l=new o.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),f=new o.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return n.forEachResidue((function(e){var t=e._atoms;for(i=0;i<t.length;++i)t[i].mask&c&&(l.min(t[i].position),f.max(t[i].position))})),e.pivot.lerpVectors(l,f,.5),e}},{key:"_bakeComponentTransform",value:function(e){var t=this._componentTransforms[e._index];!t||0===t.position.x&&0===t.position.y&&0===t.position.z&&0===t.quaternion.x&&0===t.quaternion.y&&0===t.quaternion.z&&1===t.quaternion.w||(t.updateMatrix(),e.forEachResidue((function(e){for(var n=e._atoms,r=0;r<n.length;++r)n[r].position.applyMatrix4(t.matrix)})))}},{key:"_resetComponentTransform",value:function(){var e,t,n,r,i=this._complexVisual,o=this._complexVisual.getSelectionGeo();for(e=0;e<this._componentTransforms.length;++e)(r=this._componentTransforms[e]).position.set(0,0,0),r.quaternion.set(0,0,0,1);for(e=0;e<i.children.length;++e)for(n=i.children[e],t=0;t<n.children.length;++t)(r=n.children[t]).hasOwnProperty("_component")&&(r.position.set(0,0,0),r.quaternion.set(0,0,0,1));for(e=0;e<o.children.length;++e)for(n=o.children[e],t=0;t<n.children.length;++t)(r=n.children[t]).hasOwnProperty("_component")&&(r.position.set(0,0,0),r.quaternion.set(0,0,0,1))}}]),t}(oa),FragmentEditor:function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this)))._complexVisual=e,n._inProgress=!1,n}return P(t,e),_(t,[{key:"begin",value:function(){var e=this._complexVisual,t=this._complexVisual.getSelectionGeo(),n=this._getSelectionBorderAtoms();if(n.length<1||n.length>2)return j.error("Can only edit fragments with one or two bound atoms."),!1;this._fragmentBoundAtoms=n;var r=1<<e.getSelectionBit();e.disableSubset(r,!0);for(var i=0;i<t.children.length;++i)t.children[i].visible=!1;var a=n[0].position.clone();2===n.length&&a.lerp(n[1].position,.5),this._fragmentGeo=new o.Group,e.add(this._fragmentGeo),this._fragmentGeo.position.copy(a),this._fragmentSelectionGeo=new o.Group,t.add(this._fragmentSelectionGeo),this._fragmentSelectionGeo.position.copy(a);var s=a.clone();s.negate();for(var u=0;u<e.children.length;++u){var c=e.children[u];if("getSubset"in c){var l=new o.Group;this._fragmentGeo.add(l);var f=new o.Group;this._fragmentSelectionGeo.add(f);for(var h=c.getSubset(r,!0),p=0;p<h.length;p++){var d=h[p];l.add(d),d.position.copy(s)}for(var m=c.getSubset(r,!0),v=0;v<m.length;v++){var g=m[v];f.add(g),g.position.copy(s)}}}return Cn.applySelectionMaterial(this._fragmentSelectionGeo),this._inProgress=!0,!0}},{key:"apply",value:function(){if(this._inProgress){var e=this._complexVisual,t=e.getSelectionBit(),n=this._fragmentGeo.position,r=this._fragmentGeo.matrix.clone();r.multiply((new o.Matrix4).makeTranslation(-n.x,-n.y,-n.z)),this._bakeAtomTransform(r,1<<t),e.enableSubset(1<<t,!0),e.getComplex().onAtomPositionChanged(),e.finalizeEdit()}}},{key:"discard",value:function(){if(this._inProgress){var e=this._complexVisual,t=this._complexVisual.getSelectionGeo();this._fragmentGeo.parent.remove(this._fragmentGeo),e.enableSubset(1<<e.getSelectionBit(),!0);for(var n=0;n<t.children.length;++n){var r=t.children[n];r.visible?t.remove(r):r.visible=!0}e.finalizeEdit()}}},{key:"isFreeRotationAllowed",value:function(){return this._fragmentBoundAtoms.length<2}},{key:"getAltObj",value:function(){var e={objects:[],pivot:new o.Vector3(0,0,0)};e.objects.push(this._fragmentGeo,this._fragmentSelectionGeo);var t=this._fragmentBoundAtoms;if(1===t.length){if(1===t[0].bonds.length){var n=t[0].bonds[0];e.axis=(new o.Vector3).subVectors(n._right.position,n._left.position),e.axis.normalize(),e.axis.transformDirection(this._complexVisual.matrixWorld)}}else 2===t.length&&(e.axis=(new o.Vector3).subVectors(t[1].position,t[0].position),e.axis.normalize(),e.axis.transformDirection(this._complexVisual.matrixWorld));return e}},{key:"_getSelectionBorderAtoms",value:function(){var e=this._complexVisual.getComplex(),t=1<<this._complexVisual.getSelectionBit(),n={};e.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(n[e._left.index]=1):e._right.mask&t&&(n[e._right.index]=1)}));for(var r=[],i=Object.keys(n),o=0,a=i.length;o<a;++o){var s=i[o];r.push(e._atoms[s])}return r}},{key:"_bakeAtomTransform",value:function(e,t){this._complexVisual.getComplex().forEachAtom((function(n){n.mask&t&&n.position.applyMatrix4(e)}))}}]),t}(oa)},sa=rn.selectors;function ua(e,t){Array.isArray(t)||(t=[t]);var n=c(t,2),r=n[0],i=n[1];return new(e.get(r)||e.first)(i)}var ca=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._complex=n,r._reprList=[],r._repr=null,r._reprListChanged=!0,r._selectionBit=0,r._reprUsedBits=0,r._selectionCount=0,r._selectionGeometry=new o.Group,r}return P(t,e),_(t,[{key:"getBoundaries",value:function(){return this._complex.getBoundaries()}},{key:"release",value:function(){this._selectionGeometry.parent&&this._selectionGeometry.remove(this._selectionGeometry),Rn.prototype.release.call(this)}},{key:"getComplex",value:function(){return this._complex}},{key:"getSelectionCount",value:function(){return this._selectionCount}},{key:"getSelectionGeo",value:function(){return this._selectionGeometry}},{key:"getSelectionBit",value:function(){return this._selectionBit}},{key:"getEditor",value:function(){return this._editor}},{key:"resetReps",value:function(e){this._complex&&this._complex.clearAtomBits(-1),this._reprListChanged=!0,this._reprUsedBits=0,this._reprList.length=e.length;for(var t=0,n=e.length;t<n;++t){var r=e[t],i=void 0,o=void 0;if("string"===typeof r.selector)o=r.selector,i=sa.parse(o).selector;else if("undefined"===typeof r.selector){o=re.now.presets.default[0].selector,i=sa.parse(o).selector}else o=(i=r.selector).toString();var a=ua(bo,r.mode),s=ua(ea,r.colorer),u=na.get(r.material)||na.first;this._reprList[t]=new ia(t,a,s,i),this._reprList[t].setMaterialPreset(u),this._reprList[t].selectorString=o,this._complex&&this._complex.markAtoms(i,1<<t),this._reprUsedBits|=1<<t}this._repr=e.length>0?this._reprList[0]:null,this._selectionBit=e.length,this._reprUsedBits|=1<<this._selectionBit,this._selectionCount=0,this._complex&&this._complex.update()}},{key:"repCount",value:function(){return this._reprList.length}},{key:"repCurrent",value:function(e){return e>=0&&e<this._reprList.length?this._repr=this._reprList[e]:e=this._reprList.indexOf(this._repr),e}},{key:"rep",value:function(e,t){if(!t&&(void 0===e||e instanceof Object)&&(t=e,e=this.repCurrent()),e<0||e>this._reprList.length)return j.error("Rep ".concat(e," does not exist!")),null;if(e===this._reprList.length){var n=this.repAdd(t);return j.warn("Rep ".concat(e," does not exist! New representation was created.")),{desc:n.desc,index:e,status:"created"}}var r=this._reprList[e],o={selector:r.selectorString,mode:r.mode.identify(),colorer:r.colorer.identify(),material:r.materialPreset.id};if(t){var a=r.change(t,this._complex,ua(bo,t.mode),ua(ea,t.colorer));if(!i.a.isEmpty(a)){for(var s in r.needsRebuild=!0,a)a.hasOwnProperty(s)&&(o[s]=a[s],j.debug("rep[".concat(e,"].").concat(s," changed to ").concat(a[s])));return a.mode&&r.mode.isSurface&&("ultra"===re.now.resolution||"high"===re.now.resolution)&&(j.report('Surface resolution was changed to "medium" to avoid hang-ups.'),re.set("resolution","medium")),{desc:o,index:e,status:"changed"}}}return{desc:o,index:e,status:""}}},{key:"repGet",value:function(e){return(void 0===e||e instanceof Object)&&(e=this.repCurrent()),e<0||e>=this._reprList.length?null:this._reprList[e]}},{key:"_getFreeReprIdx",value:function(){for(var e=this._reprUsedBits,n=0;n<=t.NUM_REPRESENTATION_BITS;++n,e>>=1)if(0===(1&e))return n;return-1}},{key:"repAdd",value:function(e){if(this._reprList.length>=t.NUM_REPRESENTATION_BITS)return null;var n=this._getFreeReprIdx();if(n<0)return null;var r=this.buildSelectorFromMask(1<<this._selectionBit),o=re.now.presets.default[0],a=i.a.merge({selector:o.selector,mode:o.mode,colorer:o.colorer,material:o.material},e),s="string"===typeof a.selector?sa.parse(a.selector).selector:a.selector,u=new ia(this._selectionBit,ua(bo,a.mode),ua(ea,a.colorer),s);return u.selectorString=s.toString(),u.setMaterialPreset(na.get(a.material)),u.markAtoms(this._complex),this._reprList.push(u),this._selectionBit=n,this._reprUsedBits|=1<<this._selectionBit,this._complex.markAtoms(r,1<<this._selectionBit),{desc:a,index:this._reprList.length-1}}},{key:"repRemove",value:function(e){void 0===e&&(e=this.repCurrent());var t=this._reprList.length;if(!(e<0||e>=t||t<=1)){var n=this._reprList[e];n.unmarkAtoms(this._complex),this._reprUsedBits&=~(1<<n.index),this._reprList.splice(e,1),n===this._repr&&(e=e<--t?e:t-1,this._repr=this._reprList[e]),this._reprListChanged=!0}}},{key:"repHide",value:function(e,t){(void 0===t&&(t=!0),e<0||e>=this._reprList.length)||this._reprList[e].show(!t)}},{key:"select",value:function(e,t){t?this._selectionCount+=this._complex.markAtomsAdditionally(e,1<<this._selectionBit):this._selectionCount=this._complex.markAtoms(e,1<<this._selectionBit),this._complex.updateStructuresMask(),this.rebuildSelectionGeometry()}},{key:"resetSelectionMask",value:function(){0!==this._selectionCount&&(this._selectionCount=0,this._complex&&this._complex.clearAtomBits(1<<this._selectionBit))}},{key:"updateSelectionMask",value:function(e){var t=this,n=e.atom,r=e.residue,i=e.chain,o=e.molecule,a=1<<this._selectionBit,s=~a;if(n)r=n.residue,i=r._chain,o=r._molecule,n.mask&a?(n.mask&=s,r._mask&=s,i._mask&=s,o&&(o.mask&=s),this._selectionCount--):(n.mask|=a,this._selectionCount++,r.collectMask(),i.collectMask(),o&&o.collectMask());else if(r)i=r._chain,o=r._molecule,r._mask&a?(r._mask&=s,i._mask&=s,r.forEachAtom((function(e){e.mask&a&&(e.mask&=s,t._selectionCount--)}))):(r._mask|=a,r.forEachAtom((function(e){e.mask&a||(e.mask|=a,t._selectionCount++)})),i.collectMask(),o&&o.collectMask());else if(i||o){var u=i||o;u._mask&a?(u._mask&=s,u.forEachResidue((function(e){e._mask&a&&(e._mask&=s,e.forEachAtom((function(e){e.mask&a&&(e.mask&=s,t._selectionCount--)})),e._mask&=s)}))):(u._mask|=a,u.forEachResidue((function(e){if(!(e._mask&a)){e._mask|=a,e.forEachAtom((function(e){e.mask&a||(e.mask|=a,t._selectionCount++)}));var n=i?e.getMolecule():e.getChain();n&&n.collectMask()}})))}else this.resetSelectionMask()}},{key:"expandSelection",value:function(){var e=this,t=1<<this._selectionBit;this._complex.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(e._right.mask|=1<<31):e._right.mask&t&&(e._left.mask|=1<<31)}));this._complex.forEachAtom((function(n){n.mask&1<<31&&(n.mask=n.mask&~(1<<31)|t,++e._selectionCount)})),this._complex.updateStructuresMask()}},{key:"shrinkSelection",value:function(){var e=this,t=1<<this._selectionBit;this._complex.forEachBond((function(e){e._left.mask&t?0===(e._right.mask&t)&&(e._left.mask|=1<<31):e._right.mask&t&&(e._right.mask|=1<<31)})),this._complex.forEachAtom((function(e){e.mask&t&&1===e.bonds.length&&(e.mask|=1<<31)}));var n=~(t|1<<31);this._complex.forEachAtom((function(t){t.mask&1<<31&&(t.mask&=n,--e._selectionCount)})),this._complex.updateStructuresMask()}},{key:"getSelectedComponent",value:function(){var e=1<<this._selectionBit,t=null,n=!1;return this._complex.forEachAtom((function(r){r.mask&e&&(null===t?t=r.residue._component:t!==r.residue._component&&(n=!0))})),n?null:t}},{key:"getSelectionCenter",value:function(e,t,n){e.set(0,0,0);var r=0;return this._complex.forEachAtom((function(i){t(i,n)&&(e.add(i.position),r++)})),0!==r&&(e.divideScalar(r),e.applyMatrix4(this.matrix),!0)}},{key:"needsRebuild",value:function(){if(this._reprListChanged)return!0;for(var e=this._reprList,t=0,n=e.length;t<n;++t){if(e[t].needsRebuild)return!0}return!1}},{key:"rebuild",value:function(){var e=this;return Cn.clearTree(this),new Promise((function(t){var n=e._complex;if(n){var r=!1;setTimeout((function(){console.time("build");for(var i=e._reprList,o=Bo.get(re.now.palette)||Bo.first,a=!1,s=0,u=i.length;s<u;++s){var c=i[s];if(c.colorer.palette=o,c.needsRebuild){c.reset();try{c.buildGeometry(n)}catch(l){if(!(l instanceof Q.OutOfMemoryError))throw l;c.needsRebuild=!1,c.reset(),j.error("Not enough memory to build geometry for representation ".concat(c.index+1)),r=!0}}a=r||a||Cn.groupHasGeometryToRender(c.geo),c.geo&&e.add(c.geo)}e._reprListChanged=!1,console.timeEnd("build"),t()}),10)}else t()}))}},{key:"setNeedsRebuild",value:function(){for(var e=this._reprList,t=0,n=e.length;t<n;++t)e[t].needsRebuild=!0}},{key:"rebuildSelectionGeometry",value:function(){var e=1<<this._selectionBit;Cn.clearTree(this._selectionGeometry);for(var t=0,n=this._reprList.length;t<n;++t){var r=this._reprList[t].buildSelectionGeometry(e);if(r){this._selectionGeometry.add(r);for(var i=0;i<r.children.length;i++){var o=r.children[i];if(this._editor&&this._editor._componentTransforms){var a=this._editor._componentTransforms[o._component._index];a&&(o.position.copy(a.position),o.quaternion.copy(a.quaternion))}}Cn.applySelectionMaterial(r)}}}},{key:"_buildSelectorFromSortedLists",value:function(e,t,n){var r=this._complex;function i(e){for(var t=[],n=0,r=NaN,i=NaN,o=0,a=e.length;o<a;++o){var s=e[o];s===i+1?i=s:(Number.isNaN(r)||(t[n++]=new sa.Range(r,i)),r=i=s)}return Number.isNaN(r)||(t[n]=new sa.Range(r,i)),t}var o=null;if(n.length===r._chains.length)o=sa.all();else{var a;if(n.length>0&&(a=sa.chain(n),o=o?sa.or(o,a):a),Object.keys(t).length>0)for(var s in t)t.hasOwnProperty(s)&&(a=sa.and(sa.chain(s),sa.residx(i(t[s]))),o=o?sa.or(o,a):a);e.length>0&&(a=sa.serial(i(e)),o=o?sa.or(o,a):a),o||(o=sa.none())}return o}},{key:"buildSelectorFromMask",value:function(e){var t=this._complex,n=[],r={},i=[];return t.forEachChain((function(t){t._mask&e&&n.push(t._name)})),t.forEachResidue((function(t){if(t._mask&e&&!(t._chain._mask&e)){var n=t._chain._name;n in r?r[n].push(t._index):r[n]=[t._index]}})),t.forEachAtom((function(t){t.mask&e&&!(t.residue._mask&e)&&i.push(t.serial)})),this._buildSelectorFromSortedLists(i,r,n)}},{key:"forSelectedResidues",value:function(e){var t=1<<this._selectionBit;this._complex.forEachResidue((function(n){n._mask&t&&e(n)}))}},{key:"beginComponentEdit",value:function(){if(this._editor)return null;var e=new aa.ComponentEditor(this);return e.begin()?(this._editor=e,e):null}},{key:"beginFragmentEdit",value:function(){if(this._editor)return null;var e=new aa.FragmentEditor(this);return e.begin()?(this._editor=e,e):null}},{key:"finalizeEdit",value:function(){this._editor=null}},{key:"setMaterialValues",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=0,i=this._reprList.length;r<i;++r){var a=this._reprList[r];a.material.setValues(e),t&&a.geo.traverse((function(t){t instanceof o.Mesh&&(t.material.setValues(e),void 0!==n&&n(t),t.material.needsUpdate=!0)}))}}},{key:"setUberOptions",value:function(e){for(var t=0,n=this._reprList.length;t<n;++t){this._reprList[t].material.setUberOptions(e)}}},{key:"within",value:function(e,t){var n=this._complex.getVoxelWorld();if(null===n)return!1;var r=1<<this._selectionBit;return this._complex.markAtoms(e,r),n&&n.forEachAtomWithinDistFromMasked(this._complex,r,Number(t),(function(e){e.mask|=r})),this._selectionCount=this._complex.countAtomsByMask(r),this._complex.updateStructuresMask(),this.buildSelectorFromMask(r)}}]),t}(Rn);ca.NUM_REPRESENTATION_BITS=30;var la=o.UniformsUtils.merge([{volumeDim:{type:"v3",value:new o.Vector3(512,512,512)},tileTex:{type:"t",value:null},tileTexSize:{type:"v2",value:new o.Vector2(512,512)},tileStride:{type:"v2",value:new o.Vector2(512,512)},boxAngles:{type:"v3",value:new o.Vector3(1,1,1)},delta:{type:"v3",value:new o.Vector3(0,0,0)},_isoLevel0:{type:"v2",value:new o.Vector3(.5,.75,1)},_flipV:{type:"f",value:0},_BFLeft:{type:"t",value:null},_BFRight:{type:"t",value:null},_FFLeft:{type:"t",value:null},_FFRight:{type:"t",value:null},_WFFLeft:{type:"t",value:null},_WFFRight:{type:"t",value:null}}]);function fa(e,t){var n=o.UniformsUtils.clone(t);for(var r in e)n.hasOwnProperty(r)&&(n[r].value=e[r]);return n}function ha(e,t){return{uniforms:fa(e,{}),vertexShader:"varying vec3 pos;\r\n\r\nvoid main() {\r\n  // we're assuming local position is in [-0.5, 0.5]\r\n  // we need to offset it to be represented in RGB\r\n  pos = position.xyz + 0.5;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n}",fragmentShader:"varying vec3 pos;\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4(pos, 0.5);\r\n}",transparent:!1,depthTest:!1,depthWrite:!1,side:t}}var pa=function(e){function t(e){g(this,t);var n=ha(e,o.BackSide);return C(this,k(t).call(this,n))}return P(t,e),t}(o.ShaderMaterial),da=function e(t,n,r,i){g(this,e),this.uniforms=fa(t,n),this.vertexShader=r,this.fragmentShader=i,this.transparent=!1,this.depthTest=!1,this.depthWrite=!1,this.side=o.FrontSide},ma={BackFacePosMaterial:pa,BackFacePosMaterialFarPlane:function(e){function t(e){g(this,t);var n=o.UniformsUtils.merge([{aspectRatio:{type:"f",value:0},farZ:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},matWorld2Volume:{type:"4fv",value:new o.Matrix4}}]),r=new da(e,n,"varying vec4 volPos;\r\nuniform float aspectRatio;\r\nuniform float farZ;\r\nuniform float tanHalfFOV;\r\nuniform mat4  matWorld2Volume;\r\n\r\nvoid main() {\r\n  // rescale plane to fill in the whole far plane area seen from camera\r\n  vec3 pos = position.xyz;\r\n  pos.x = pos.x * tanHalfFOV * farZ * aspectRatio;\r\n  pos.y = pos.y * tanHalfFOV * farZ;\r\n  // common transformation\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\r\n  // calc pos in volume CS\r\n  volPos = matWorld2Volume * modelMatrix * vec4(pos, 1.0);\r\n  // we're assuming local position is in [-0.5, 0.5]\r\n  // we need to offset it to be represented in RGB\r\n  volPos = volPos + 0.5;\r\n  volPos.w = 0.5;\r\n}\r\n","varying vec4 volPos;\r\n\r\nvoid main() {\r\n  gl_FragColor = volPos;\r\n}");return C(this,k(t).call(this,r))}return P(t,e),t}(o.ShaderMaterial),FrontFacePosMaterial:function(e){function t(e){g(this,t);var n=ha(e,o.FrontSide);return C(this,k(t).call(this,n))}return P(t,e),t}(o.ShaderMaterial),VolumeMaterial:function(e){function t(e){var n;g(this,t);var r=new da(e,la,"varying vec4 screenSpacePos;\r\n\r\nvoid main() {\r\n  screenSpacePos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n  gl_Position = screenSpacePos;\r\n}","uniform mat4 projectionMatrix;\r\n\r\n// 3D volume texture\r\nuniform vec3 volumeDim;    // volume dimensions, pixels\r\nuniform sampler2D tileTex; // tiled texture containing all Z-slices of a 3D data\r\nuniform vec2 tileTexSize;  // size of tiled texture, pixels\r\nuniform vec2 tileStride;   // UV stride between slices in tile tex, pixels\r\n\r\nuniform vec3 boxAngles;//value of angles({x: alpha, y:beta, z:gamma}) types 1 - if angle is obtuse, 0 - if acute\r\nuniform vec3 delta; //Projection box delta's from non-orthogonal origin axes; {x: XY, y : XZ, z: YZ}\r\n\r\nuniform vec3 _isoLevel0;\r\nuniform float _flipV;\r\nuniform sampler2D _BFLeft;\r\nuniform sampler2D _BFRight;\r\nuniform sampler2D _FFLeft;\r\nuniform sampler2D _FFRight;\r\nuniform sampler2D _WFFLeft;\r\nuniform sampler2D _WFFRight;\r\n\r\nvarying vec4 screenSpacePos;\r\n\r\n#define NO_COLOR vec4(0., 0., 0., 0.)\r\n\r\nvec4 sample3DTexture(vec3 texCoord) {\r\n  // a pair of Z slices is determined by nearest slice border\r\n  float zSliceBorder = floor(texCoord.z * volumeDim.z + 0.5);\r\n  float zSliceNumber1 = max(zSliceBorder - 1.0, 0.0);\r\n  float zSliceNumber2 = min(zSliceBorder, volumeDim.z - 1.0);\r\n\r\n  float rowTiles = floor(tileTexSize.x / tileStride.x);\r\n\r\n  // calculate coords in tile texture for both slices\r\n  vec2 tileOffset = vec2(mod(zSliceNumber1, rowTiles), floor(zSliceNumber1 / rowTiles));\r\n  vec2 texCoordSlice1 = (texCoord.xy * volumeDim.xy + tileOffset * tileStride) / tileTexSize.xy;\r\n  tileOffset = vec2(mod(zSliceNumber2, rowTiles), floor(zSliceNumber2 / rowTiles));\r\n  vec2 texCoordSlice2 = (texCoord.xy * volumeDim.xy + tileOffset * tileStride) / tileTexSize.xy;\r\n\r\n  // bilinear filtering\r\n  vec4 colorSlice1 = texture2D(tileTex, texCoordSlice1);\r\n  vec4 colorSlice2 = texture2D(tileTex, texCoordSlice2);\r\n  float weightSlice2 = texCoord.z * volumeDim.z - (zSliceNumber1 + 0.5);\r\n  return mix(colorSlice1, colorSlice2, weightSlice2);\r\n}\r\n\r\nvec4 sample3DTextureInclined(vec3 boxCoord) { // delta:{ x: XY, y : XZ, z: YZ }\r\n  vec3 textCoord = boxCoord;\r\n  vec2 currDelta = mix(boxCoord.zz, vec2(1., 1.) - boxCoord.zz, boxAngles.yx) * delta.yz;\r\n\r\n  textCoord.y = (boxCoord.y  - currDelta.y) / (1. - delta.z);\r\n  if (textCoord.y < 0.0 || textCoord.y > 1.0)\r\n    return NO_COLOR;\r\n\r\n  currDelta.x += mix(textCoord.y, 1.0 - textCoord.y, boxAngles.z) * delta.x;\r\n\r\n  textCoord.x = (boxCoord.x - currDelta.x) / (1. - delta.x - delta.y);\r\n  if (textCoord.x < 0.0 || textCoord.x > 1.0)\r\n    return NO_COLOR;\r\n\r\n  return sample3DTexture(textCoord);\r\n}\r\n\r\nfloat CalcColor(vec3 iter, vec3 dir) {\r\n  float d = 1. / 128.;\r\n  vec3 dx = vec3(d, 0.0, 0.0);\r\n  vec3 dy = vec3(0.0, d, 0.0);\r\n  vec3 dz = vec3(0.0, 0.0, d);\r\n\r\n  // #Opt: coordInc.x:(iter + dx).x > 1. ? 0.: sample3DTextureInclined(iter + dx).x,\r\n  vec3 coordInc = mix(\r\n    vec3(\r\n      sample3DTextureInclined(iter + dx).x,\r\n      sample3DTextureInclined(iter + dy).x,\r\n      sample3DTextureInclined(iter + dz).x\r\n    ),\r\n    vec3(0. ,0. , 0.),\r\n    vec3(floor((iter + dx).x), floor((iter + dy).y), floor((iter + dz).z))\r\n  );\r\n\r\n  // #Opt: coordDec.x:(iter - dx).x < 0. ? 0.: sample3DTextureInclined(iter - dx).x,\r\n  vec3 coordDec = mix(\r\n    vec3(0. ,0. , 0.),\r\n    vec3(\r\n      sample3DTextureInclined(iter - dx).x,\r\n      sample3DTextureInclined(iter - dy).x,\r\n      sample3DTextureInclined(iter - dz).x\r\n    ),\r\n    vec3(ceil((iter - dx).x), ceil((iter - dy).y), ceil((iter - dz).z))\r\n  );\r\n\r\n  vec3 N = normalize(coordInc - coordDec);\r\n  float dif = max(0.0, dot(N, dir));\r\n  return dif;\r\n}\r\n\r\nvec3 AccuracyIso(vec3 left, vec3 right, float volLeft, float threshold) {\r\n  for (int i = 0; i < 5; i++) {\r\n    vec3 iterator = 0.5 * (left + right);\r\n    float vol = sample3DTextureInclined(iterator).r;\r\n    if ((volLeft - threshold) * (vol - threshold) < 0.)\r\n      right = iterator;\r\n    else\r\n      left = iterator;\r\n  }\r\n  return 0.5 * (left + right);\r\n}\r\n\r\nvec3 CorrectIso(vec3 left, vec3 right, float tr) {\r\n  for (int j = 0; j < 5; j++) {\r\n    vec3 iterator = 0.5 * (left + right);\r\n    float vol = sample3DTextureInclined(iterator).r;\r\n    if (vol < tr)\r\n      right = iterator;\r\n    else\r\n      left = iterator;\r\n  }\r\n  return 0.5 * (left + right);\r\n}\r\n\r\nvec4 GetIso1(vec3 start, vec3 back, float molDist, vec3 dir, float tr, int count) {\r\n  float vol, stepSize = (float(count) + 2.) / float(STEPS_COUNT);\r\n  vec3 step = stepSize * dir, iterator = start, left, right;\r\n  vec4 acc = NO_COLOR;\r\n\r\n  for (int i = 0; i < STEPS_COUNT; i++) {\r\n    iterator = iterator + step;\r\n    vol = sample3DTextureInclined(iterator).r;\r\n    if (length(iterator - back) <= stepSize || (vol > tr))\r\n      break;\r\n  }\r\n\r\n  if (vol > tr)\r\n    acc = vec4(CorrectIso(iterator, iterator - step, tr).xyz, 1.);\r\n\r\n  return acc;\r\n}\r\n\r\nfloat easeOut(float x0, float x1, float x) {\r\n  float t = clamp((x - x0) / (x1 - x0), 0.0, 1.0);\r\n  return 1.0 - (1.0 - t) * (1.0 - t);\r\n}\r\n\r\nfloat easeIn(float x0, float x1, float x) {\r\n  float t = clamp((x - x0) / (x1 - x0), 0.0, 1.0);\r\n  return t * t;\r\n}\r\n\r\nvec3 GetColSimple(float vol) {\r\n  float t = easeOut(_isoLevel0.x, _isoLevel0.y, vol);\r\n  float s = easeIn(_isoLevel0.y, _isoLevel0.z, vol);\r\n  return vec3(0.5, 0.6, 0.7) * (1.0 - t) + 2.0 * vec3(s, 0, 0);\r\n}\r\n\r\nvec4 VolRender(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  vec4 acc = NO_COLOR, iso;\r\n  vec3 iterator = start, sumColor = vec3(0., 0., 0.);\r\n  float stepSize, alpha, sumAlpha = 0.0, vol, curStepSize, molD;\r\n  vec3 step, col, colOld, right;\r\n  float tr0 = _isoLevel0.x;\r\n  float dif, r, kd, finish;\r\n  int count = 0, stopMol = 0;\r\n\r\n  for (int k = 0; k < 3; k++) {\r\n    stepSize = (float(k) + 2.) / float(STEPS_COUNT);\r\n    kd = 140. * tr0 * stepSize;\r\n    r = 1. - kd;\r\n    step = stepSize * dir;\r\n    iso = GetIso1(iterator, back, molDist, dir, tr0, k);\r\n    if (iso.a < 0.1 || length(iso.xyz - start) > molDist)\r\n      break;\r\n    iterator = iso.xyz;\r\n    dif = 1.;// CalcColor(iterator, dir);\r\n    colOld = GetColSimple(tr0);\r\n    curStepSize = stepSize;\r\n    for (int i = 0; i < STEPS_COUNT; i++) {\r\n      iterator = iterator + step;\r\n      molD = length(iterator - start);\r\n      vol = sample3DTextureInclined(iterator).r;\r\n      finish = distance(iterator, back) - stepSize;\r\n      if (finish < 0.0 || vol < tr0 || (sumAlpha > 0.97) || molD > molDist)\r\n        break;\r\n      alpha = (1. - r);\r\n      col = GetColSimple(vol);\r\n      vol = sample3DTextureInclined(iterator - 0.5 * step).r;\r\n      vec3 colMid = GetColSimple(vol);\r\n      sumColor += (1. - sumAlpha) * (colOld + 4.* colMid + col) * alpha / 6.;\r\n      sumAlpha += (1. - sumAlpha) * alpha;// *(1. - 1.0*dif*dif);\r\n      colOld = col;\r\n    } // for i\r\n\r\n    if (finish < 0.0 || sumAlpha > 0.97)\r\n      break;\r\n\r\n    if (molD > molDist) {\r\n      curStepSize = stepSize - (molD - molDist);\r\n      right = iterator - (molD - molDist) * dir;\r\n      vol = sample3DTextureInclined(right).r;\r\n    } else {\r\n      vec3 left = iterator - step;\r\n      right = CorrectIso(left, iterator, tr0);\r\n      curStepSize = distance(left, right);\r\n      vol = tr0;\r\n    }\r\n\r\n    alpha = (1. - r) * curStepSize / stepSize;\r\n    dif = 1.;// CalcColor(right, dir);\r\n    col = GetColSimple(vol);\r\n    vol = sample3DTextureInclined(iterator - 0.5 * curStepSize / stepSize * step).r;\r\n    vec3 colMid = GetColSimple(vol);\r\n    sumColor += (1. - sumAlpha) * (colOld + 4. * colMid + col) * alpha / 6.;\r\n    sumAlpha += (1. - sumAlpha) * alpha;// *(1. - 1.0*dif*dif);\r\n\r\n    if (molD > molDist)\r\n      break;\r\n  } // for k\r\n  acc.rgb = 1. * sumColor / sumAlpha;\r\n  acc.a = sumAlpha;\r\n  return acc;\r\n}\r\n\r\nvec4 VolRender1(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  float stepSize = 1.0 / float(STEPS_COUNT);\r\n  float len = length(back - start);\r\n  vec3 step = stepSize * dir;\r\n  vec3 iterator = start;\r\n  float acc = 0.0;\r\n\r\n  for (int i = 0; i < STEPS_COUNT; i++) {\r\n    if (float(i) * stepSize > len)\r\n      break;\r\n    iterator = iterator + step;\r\n    if (sample3DTextureInclined(iterator).r > _isoLevel0.x)\r\n      acc += 10. * sample3DTextureInclined(iterator).r / float(STEPS_COUNT);\r\n  }\r\n\r\n  return vec4(1.,1.,1., acc);\r\n}\r\n\r\nvec4 IsoRender(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  vec4 tst = GetIso1(start, back, 2., dir, _isoLevel0.x, 0);\r\n  vec4 col = NO_COLOR;\r\n\r\n  if (length(tst.xyz - start) < molDist && tst.a > 0.1) {\r\n    float dif =  CalcColor(tst.xyz, dir);\r\n    dif = 0.9 * dif * dif;\r\n    col = vec4(dif, dif, dif, 1);\r\n  }\r\n  return col;\r\n}\r\n\r\nvec4 VolRender2(vec3 start, vec3 back, float molDist, vec3 dir) {\r\n  return sample3DTexture(start);\r\n}\r\n\r\nvoid main() {\r\n  vec3 tc = screenSpacePos.xyz / screenSpacePos.w * 0.5 + 0.5;\r\n\r\n  if (_flipV > 0.0) {\r\n    tc.y = 1.0 - tc.y;\r\n  }\r\n\r\n  vec3 start;\r\n  vec3 back;\r\n  vec3 molBack;\r\n  if (projectionMatrix[0][2] < 0.0) {\r\n    start = texture2D(_FFLeft, tc.xy).xyz;\r\n    back = texture2D(_BFLeft, tc.xy).xyz;\r\n    molBack = texture2D(_WFFLeft, tc.xy).xyz;\r\n  } else {\r\n    start = texture2D(_FFRight, tc.xy).xyz;\r\n    back = texture2D(_BFRight, tc.xy).xyz;\r\n    molBack = texture2D(_WFFRight, tc.xy).xyz;\r\n  }\r\n\r\n  vec3 dir = normalize(back - start);\r\n\r\n  float molDist = 2.0;\r\n  if (length(molBack) > 0.001) {\r\n    molDist = distance(start, molBack);\r\n  }\r\n\r\n  #ifdef ISO_MODE\r\n    gl_FragColor = IsoRender(start, back, molDist, dir);\r\n  #else\r\n    gl_FragColor = VolRender(start, back, molDist, dir);\r\n  #endif\r\n}\r\n");return r.transparent=!0,r.depthTest=!0,(n=C(this,k(t).call(this,r))).updateDefines(),n}return P(t,e),_(t,[{key:"updateDefines",value:function(){this.defines={ISO_MODE:re.now.modes.VD.isoMode,STEPS_COUNT:100*re.now.modes.VD.polyComplexity[re.now.resolution]},this.needsUpdate=!0}}]),t}(o.ShaderMaterial)},va=function(e){function t(){var e;g(this,t);var n=new o.BufferGeometry;e=C(this,k(t).call(this,n)),Ee(M(e),"volumeInfo",{}),e.clipPlane=new o.Plane;var r=new o.Vector3(.5,.5,.5);return e.size=r,e.cullFlag=[!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1],e.faces=[{indices:[],norm:new o.Vector3(0,0,-1)},{indices:[],norm:new o.Vector3(0,0,1)},{indices:[],norm:new o.Vector3(0,-1,0)},{indices:[],norm:new o.Vector3(0,1,0)},{indices:[],norm:new o.Vector3(-1,0,0)},{indices:[],norm:new o.Vector3(1,0,0)},{indices:[],norm:new o.Vector3(0,0,0)}],e.vertices=[new o.Vector3(-r.x,-r.y,-r.z),new o.Vector3(-r.x,r.y,-r.z),new o.Vector3(r.x,-r.y,-r.z),new o.Vector3(r.x,r.y,-r.z),new o.Vector3(-r.x,-r.y,r.z),new o.Vector3(-r.x,r.y,r.z),new o.Vector3(r.x,-r.y,r.z),new o.Vector3(r.x,r.y,r.z),new o.Vector3(0,0,0),new o.Vector3(0,0,0),new o.Vector3(0,0,0),new o.Vector3(0,0,0),new o.Vector3(0,0,0),new o.Vector3(0,0,0)],n.setAttribute("position",new o.BufferAttribute(new Float32Array(3*e.vertices.length),3)),e.name="VolumeMesh",e}return P(t,e),_(t,[{key:"_updateVertices",value:function(){var e,n=t._corners,r=t._edges,i=t._edgeIntersections,a=this.clipPlane.normal,s=this.clipPlane.constant,u=this.vertices,c=this.size,l=[0,0,0,0,0,0,0,0],f=[1,1,1,1,1,1,1,1,1,1,1,1],h=new o.Vector3,p=null;function d(){if(0===a.x)return 0;var e=-(a.dot(h)+s)/a.x;return-c.x<=e&&e<=c.x?(p.set(e,h.y,h.z),e===c.x?2:e===-c.x?-2:1):0}function m(){if(0===a.y)return 0;var e=-(a.dot(h)+s)/a.y;return-c.y<=e&&e<=c.y?(p.set(h.x,e,h.z),e===c.y?2:e===-c.y?-2:1):0}function v(){if(0===a.z)return 0;var e=-(a.dot(h)+s)/a.z;return-c.z<=e&&e<=c.z?(p.set(h.x,h.y,e),e===c.z?2:e===-c.z?-2:1):0}for(var g=0;g<12;++g){var y=r[g];p=i[g],h.set(y[2],y[3],y[4]),h.multiply(c);var _=0;0===y[2]&&(_=d()),0===y[3]&&(_=m()),0===y[4]&&(_=v()),-2===_?l[y[0]]=1:2===_?l[y[1]]=1:0===_&&(f[g]=0)}var x={indices:[],norm:a.clone().negate()},b=8;for(e=0;e<8;++e)1===l[e]&&(u[b].set(n[e][0],n[e][1],n[e][2]).multiply(c),x.indices.push(b++),f[n[e][3]]=0,f[n[e][4]]=0,f[n[e][5]]=0);for(e=0;e<12;++e)1===f[e]&&(u[b].copy(i[e]),x.indices.push(b++));this.faces[6]=x;var w=new o.Vector3,S=new o.Vector3;for(this.clipPlane.coplanarPoint(S),e=0;e<u.length;++e)this.cullFlag[e]=!1,e<8?(w.subVectors(u[e],S),this.cullFlag[e]=a.dot(w)>=0):e<8+x.indices.length&&(this.cullFlag[e]=!0);var E=this.geometry.getAttribute("position"),T=0;for(e=0;e<u.length;++e)E.array[T++]=u[e].x,E.array[T++]=u[e].y,E.array[T++]=u[e].z;E.needsUpdate=!0}},{key:"_collectVertices",value:function(e,t){var n,r=this.vertices;for(e.indices=[],n=0;n<r.length;++n)this.cullFlag[n]&&t(r[n])&&e.indices.push(n)}},{key:"_sortIndices",value:function(e,t){var n,r,i=this.vertices,a=[],s=new o.Vector3;for(n=1;n<e.indices.length;++n)s.subVectors(i[e.indices[n]],i[e.indices[0]]),s.normalize(),s.cross(t),s.negate(),a[n]=e.norm.dot(s);for(n=1;n<e.indices.length-1;++n)for(r=n+1;r<e.indices.length;++r)if(a[r]<a[n]){var u=a[n];a[n]=a[r],a[r]=u,u=e.indices[n],e.indices[n]=e.indices[r],e.indices[r]=u}}},{key:"_updateIndices",value:function(){var e,t,n,r=this.vertices,i=this.size;this._collectVertices(this.faces[0],(function(e){return e.z===-i.z})),this._collectVertices(this.faces[1],(function(e){return e.z===i.z})),this._collectVertices(this.faces[2],(function(e){return e.y===-i.y})),this._collectVertices(this.faces[3],(function(e){return e.y===i.y})),this._collectVertices(this.faces[4],(function(e){return e.x===-i.x})),this._collectVertices(this.faces[5],(function(e){return e.x===i.x}));var a=new o.Vector3,s=new o.Vector3,u=new o.Vector3;for(t=0;t<this.faces.length;++t)if(0!==(n=this.faces[t]).indices.length){for(a.set(0,0,0),e=0;e<n.indices.length;++e)a.add(r[n.indices[e]]);a.multiplyScalar(1/n.indices.length),s.subVectors(r[n.indices[0]],a),s.normalize();var l=[];for(e=0;e<n.indices.length;++e)u.subVectors(r[n.indices[e]],a),l[e]=u.dot(s);for(e=1;e<n.indices.length;++e)if(l[e]<l[0]){var f=l[0];l[0]=l[e],l[e]=f,f=c(n.indices,1)[0],n.indices[0]=n.indices[e],n.indices[e]=f}this._sortIndices(n,s)}var h=0;for(t=0;t<this.faces.length;++t)(n=this.faces[t]).indices.length>=3&&(h+=3*(n.indices.length-2));var p=0,d=new Uint16Array(h);for(t=0;t<this.faces.length;++t)for(n=this.faces[t],e=0;e<n.indices.length-2;++e)d[p]=n.indices[0],d[p+1]=n.indices[e+1],d[p+2]=n.indices[e+2],p+=3;this.geometry.setIndex(new o.BufferAttribute(d,1))}},{key:"setDataSource",value:function(e){var t=new ma.VolumeMaterial,n=e.getDimensions(),r=e.getTiledTextureStride(),i=e.buildTiledTexture(),o=e.getBox();t.uniforms.volumeDim.value.set(n[0],n[1],n[2]),t.uniforms.tileTex.value=i,t.uniforms.tileTexSize.value.set(i.image.width,i.image.height),t.uniforms.tileStride.value.set(r[0],r[1]),Object.assign(this.volumeInfo,e.getVolumeInfo());var a=this.volumeInfo;t.uniforms.delta.value.copy(a.delta),t.uniforms.boxAngles.value.set(a.obtuseAngle[0],a.obtuseAngle[1],a.obtuseAngle[2]),this.material=t,o.getSize(this.scale),o.getCenter(this.position)}},{key:"_updateIsoLevel",value:function(){var e=re.now.modes.VD,t=e.kSigma,n=e.kSigmaMed,r=e.kSigmaMax,i=this.volumeInfo,o=i.dmean-i.dmin,a=i.dmax-i.dmin,s=function(e){return(o+e*i.sd)/a};this.material.uniforms._isoLevel0.value.set(s(t),s(n),s(r))}},{key:"rebuild",value:function(e){var n=t._nearClipPlaneOffset,r=t._pos,i=t._norm,o=t._norm4D,a=t._matrixWorldToLocal,s=t._clipPlane;this._updateIsoLevel(),e.getWorldDirection(i),e.getWorldPosition(r),r.addScaledVector(i,e.near+n),a.getInverse(this.matrixWorld),r.applyMatrix4(a),o.set(i.x,i.y,i.z,0),o.applyMatrix4(a),i.copy(o),i.normalize(),s.setFromNormalAndCoplanarPoint(i,r),this.clipPlane.equals(s)||(this.clipPlane=s.clone(),this._updateVertices(),this._updateIndices())}}]),t}(o.Mesh);Ee(va,"_corners",[[-1,-1,-1,0,4,8],[1,-1,-1,0,5,9],[1,1,-1,1,5,10],[-1,1,-1,1,4,11],[-1,-1,1,2,6,8],[1,-1,1,2,7,9],[1,1,1,3,7,10],[-1,1,1,3,6,11]]),Ee(va,"_edges",[[0,1,0,-1,-1],[2,3,0,1,-1],[4,5,0,-1,1],[6,7,0,1,1],[0,3,-1,0,-1],[1,2,1,0,-1],[4,7,-1,0,1],[5,6,1,0,1],[0,4,-1,-1,0],[1,5,1,-1,0],[2,6,-1,1,0],[3,7,1,1,0]]),Ee(va,"_edgeIntersections",function(){for(var e=[],t=0;t<12;++t)e.push(new o.Vector3);return e}()),Ee(va,"_nearClipPlaneOffset",.2),Ee(va,"_pos",new o.Vector3),Ee(va,"_norm",new o.Vector3),Ee(va,"_norm4D",new o.Vector4),Ee(va,"_matrixWorldToLocal",new o.Matrix4),Ee(va,"_clipPlane",new o.Plane);var ga=function(){function e(t,n){g(this,e);var r=n.delta,i=n.obtuseAngle,a=new o.Vector3;t.getSize(a),a.multiplyScalar(.5);for(var s=this._getBaseVertices(r,i),u=new o.Geometry,c=0;c<4;c++)u.vertices.push(s[c].clone().multiply(a)),u.vertices.push(s[(c+1)%4].clone().multiply(a));for(var l=new o.Vector3(2*a.x*(1-r.x-r.y),0,0),f=0;f<8;f++)u.vertices.push(u.vertices[f].clone().add(l));for(var h=0;h<4;h++)u.vertices.push(u.vertices[2*h].clone()),u.vertices.push(u.vertices[2*h+8].clone());var p=new o.Vector3;t.getCenter(p),u.vertices.forEach((function(e){return e.add(p)})),this._lines=new o.LineSegments(u,new o.LineBasicMaterial({color:16777215})),this._lines.layers.set(Cn.LAYERS.VOLUME)}return _(e,[{key:"_getBaseVertices",value:function(t,n){var r=e._projectionTable,i=function(e,i){var o=t[r[e][0]];return(-.5*(i-1)+i*n[r[e][1]])*o};return[new o.Vector3(2*(i("XZ",1)+i("XY",1))-1,2*i("YZ",1)-1,-1),new o.Vector3(2*(i("XZ",-1)+i("XY",1))-1,2*i("YZ",-1)-1,1),new o.Vector3(2*(i("XZ",-1)+i("XY",-1))-1,1-2*i("YZ",1),1),new o.Vector3(2*(i("XZ",1)+i("XY",-1))-1,1-2*i("YZ",-1),-1)]}},{key:"getMesh",value:function(){return this._lines}}]),e}();Ee(ga,"_projectionTable",{XY:["x",2],XZ:["y",1],YZ:["z",0]});var ya=function(){function e(t,n,r){g(this,e);var i=this._initPlaneGeo(n,r),a=new ma.BackFacePosMaterialFarPlane;this._plane=new ci.Mesh(i,a),this._plane.frustumCulled=!1,this._plane.doubleSided=!0;var s=new o.Matrix4;this._plane._onBeforeRender=function(e,n,r,i,a,u){var c=this.material;if(t&&c){var l=new o.Vector4(0,0,-(r.far-.1),1);l.applyMatrix4(r.matrixWorld),this.matrix.identity(),this.matrix.makeTranslation(l.x,l.y,l.z),this.matrixWorld.copy(this.matrix),this.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,this.matrixWorld),this.normalMatrix.getNormalMatrix(this.modelViewMatrix);var f=t.matrixWorld;s.getInverse(f),c.uniforms.aspectRatio.value=r.aspect,c.uniforms.farZ.value=r.far,c.uniforms.tanHalfFOV.value=Math.tan(.5*o.Math.DEG2RAD*r.fov),c.uniforms.matWorld2Volume.value=s}},this._plane.layers.set(Cn.LAYERS.VOLUME_BFPLANE)}return _(e,[{key:"_initPlaneGeo",value:function(e,t){var n=new o.Geometry;return e=e||1,t=t||1,n.vertices.push(new o.Vector3(-.5*e,.5*t,0)),n.vertices.push(new o.Vector3(.5*e,.5*t,0)),n.vertices.push(new o.Vector3(-.5*e,-.5*t,0)),n.vertices.push(new o.Vector3(.5*e,-.5*t,0)),n.faces.push(new o.Face3(0,2,1)),n.faces.push(new o.Face3(2,3,1)),n}},{key:"getMesh",value:function(){return this._plane}}]),e}();function _a(e,t){Rn.call(this,e,t),this._mesh=new va,this._mesh.setDataSource(t),this.add(this._mesh),this._frame=new ga(this.getBoundaries().boundingBox,this._mesh.volumeInfo),this.add(this._frame.getMesh()),this.showFrame(re.now.modes.VD.frame),this._farPlane=new ya(this._mesh,2,2),this.add(this._farPlane.getMesh())}Q.deriveClass(_a,Rn),_a.prototype.getBoundaries=function(){var e=this._dataSource.getBox(),t=new o.Sphere;return e.getBoundingSphere(t),{boundingBox:e,boundingSphere:t}},_a.prototype.getMesh=function(){return this._mesh},_a.prototype.showFrame=function(e){this._frame.getMesh().material.visible=e};var xa=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g(this,t),C(this,k(t).call(this,e,["types"]))}return P(t,e),_(t,[{key:"find",value:function(e){var t=[];if(e.type)t=this._dict.types[e.type.toLowerCase()]||[];else if(e.source)return this._list.filter((function(t){return t.canProbablyLoad&&t.canProbablyLoad(e.source)}));return In(t)}}]),t}(Dn),ba=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this)))._source=e,r._options=n||{},r._abort=!1,r._agent=null,r}return P(t,e),_(t,[{key:"load",value:function(){return Promise.reject(new Error("Loading from this source is not implemented"))}},{key:"abort",value:function(){this._abort=!0,this._agent&&this._agent.abort()}}],[{key:"extractName",value:function(e){}}]),t}(D);Fn(ba.prototype);var wa=function(e){function t(e,n){var r;return g(this,t),n=(r=C(this,k(t).call(this,e,n)))._options,r._binary=!0===n.binary,r}return P(t,e),_(t,[{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e._abort)throw new Error("Loading aborted");var r=e._source,i=e._agent=new FileReader;i.addEventListener("load",(function(){t(i.result)})),i.addEventListener("error",(function(){n(i.error)})),i.addEventListener("abort",(function(){n(new Error("Loading aborted"))})),i.addEventListener("progress",(function(t){e.dispatchEvent(t)})),e._binary?i.readAsArrayBuffer(r):i.readAsText(r)}))}}],[{key:"canProbablyLoad",value:function(e){return File&&e instanceof File||Blob&&e instanceof Blob}},{key:"extractName",value:function(e){return e&&e.name}}]),t}(ba);wa.types=["file","blob"];var Sa=/^(https?|ftp):\/\//i,Ea=function(e){function t(e,n){var r;return g(this,t),n=(r=C(this,k(t).call(this,e,n)))._options,r._binary=!0===n.binary,r}return P(t,e),_(t,[{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e._abort)throw new Error("Loading aborted");var r=e._source,i=e._agent=new XMLHttpRequest;i.addEventListener("load",(function(){200===i.status?t(i.response):n(new Error("HTTP ".concat(i.status," while fetching ").concat(r)))})),i.addEventListener("error",(function(){n(new Error("HTTP request failed"))})),i.addEventListener("abort",(function(){n(new Error("Loading aborted"))})),i.addEventListener("progress",(function(t){e.dispatchEvent(t)})),i.open("GET",r),e._binary?i.responseType="arraybuffer":i.responseType="text",i.send()}))}}],[{key:"canProbablyLoad",value:function(e){return i.a.isString(e)&&Sa.test(e)}},{key:"extractName",value:function(e){if(e){var t=(e.indexOf("?")+1||e.lastIndexOf("#")+1||e.length+1)-1;return e.slice(e.lastIndexOf("/",t)+1,t)}}}]),t}(ba);Ea.types=["url"];var Ta=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"load",value:function(){var e=this;return new Promise((function(t){if(e._abort)throw new Error("Loading aborted");t(e._source)}))}}],[{key:"canProbablyLoad",value:function(e){return!1}}]),t}(ba);Ta.types=["immediate"];var Aa=new xa([wa,Ea,Ta]),Ma=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g(this,t),C(this,k(t).call(this,e,["formats","extensions"]))}return P(t,e),_(t,[{key:"find",value:function(e){var t=[];return e.format?t=this._dict.formats[e.format.toLowerCase()]||[]:e.ext&&(t=this._dict.extensions[e.ext.toLowerCase()]||[]),0===t.length&&!e.format&&e.data?this._list.filter((function(t){return t.canProbablyParse&&t.canProbablyParse(e.data)})):In(t)}}]),t}(Dn),Ca=function(){function e(t,n){g(this,e),this._data=t,this._options=n||{},this._abort=!1}return _(e,[{key:"parseSync",value:function(){throw new Error("Parsing this type of data is not implemented")}},{key:"parse",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){try{return e._abort?n(new Error("Parsing aborted")):t(e.parseSync())}catch(r){return n(r)}}))}))}},{key:"getModel",value:function(){return this.model._parseHeader(this._data),this.model}},{key:"abort",value:function(){this._abort=!0}}]),e}();Fn(Ca.prototype);var ka=function(){function e(){g(this,e),this.matrices=[],this._matrix=null,this._matrixIndex=-1}return _(e,[{key:"parse",value:function(e){var t=this._matrix;if("  SMTRY"===e.readString(12,18)){var n=e.readCharCode(19)-49,r=e.readString(20,80).trim().split(/\s+/),i=parseInt(r[0],10);null!==this._matrix&&i===this._matrixIndex||(this._matrixIndex=i,this._matrix=t=new o.Matrix4,this.matrices[this.matrices.length]=t);var a=t.elements;a[n]=parseFloat(r[1]),a[n+4]=parseFloat(r[2]),a[n+8]=parseFloat(r[3]),a[n+12]=parseFloat(r[4])}}}]),e}();ka.prototype.id=290;var Ra=rn.Assembly,Pa=function(){function e(t){g(this,e),this._complex=t,this.assemblies=[],this._assembly=null,this._matrix=null,this._matrixIndex=-1}return _(e,[{key:"parse",value:function(e){var t=this._assembly,n=this._matrix;if(t&&"  BIOMT"===e.readString(12,18)){var r=e.readCharCode(19)-49,i=e.readString(20,80).trim().split(/\s+/),a=parseInt(i[0],10);null!==this._matrix&&a===this._matrixIndex||(this._matrixIndex=a,this._matrix=n=new o.Matrix4,t.addMatrix(n));var s=n.elements;s[r]=parseFloat(i[1]),s[r+4]=parseFloat(i[2]),s[r+8]=parseFloat(i[3]),s[r+12]=parseFloat(i[4])}else if(t&&"CHAINS:"===e.readString(35,41))for(var u=e.readString(42,80).split(","),c=0,l=u.length;c<l;++c){var f=u[c].trim();f.length>0&&t.addChain(f)}else"BIOMOLECULE:"===e.readString(12,23)&&(this._matrix=null,this._matrixIndex=-1,this._assembly=t=new Ra(this._complex),this.assemblies.push(t))}}]),e}();Pa.prototype.id=350;var La=function(){function e(t){g(this,e),this._data=t,this._start=0,this._nextCR=-1,this._nextLF=-1,this._next=-1,this._end=t.length,this.next()}return _(e,[{key:"readLine",value:function(){return this._data.slice(this._start,this._next)}},{key:"readChar",value:function(e){return(e=this._start+e-1)<this._next?this._data[e]:" "}},{key:"readCharCode",value:function(e){return(e=this._start+e-1)<this._next?this._data.charCodeAt(e):32}},{key:"readString",value:function(e,t){var n=this._start+e-1,r=this._start+t;return this._data.slice(n,r<this._next?r:this._next)}},{key:"readInt",value:function(e,t){return parseInt(this.readString(e,t),10)}},{key:"readFloat",value:function(e,t){return parseFloat(this.readString(e,t))}},{key:"end",value:function(){return this._start>=this._end}},{key:"next",value:function(){var e=this._next+1;this._start=e<this._end?e:this._end,this._start>this._nextCR&&(this._nextCR=(this._data.indexOf("\r",this._start)+1||this._end+1)-1),this._start>this._nextLF&&(this._nextLF=(this._data.indexOf("\n",this._start)+1||this._end+1)-1),this._next=this._nextCR+1<this._nextLF?this._nextCR:this._nextLF}}]),e}(),Oa=rn.Complex,Ia=rn.Element,Na=rn.Helix,Da=rn.Sheet,Fa=rn.Strand,za=rn.Bond,Ba=rn.Molecule;var ja=/^(HEADER\s|COMPND\s|REMARK\s|ATOM {2}|HETATM|MODEL )/i,Va={290:ka,350:Pa},Ua=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._complex=null,r._chain=null,r._residue=null,r._sheet=null,r._serialAtomMap=null,r._modelId=1,r._compaundFound=!1,r._biomoleculeFound=!1,r._allowedChainsIDs=null,r._lastMolId=-1,r._remarks={},r._remark=null,r._molecules=[],r._molecule=null,r._compndCurrToken="",r._options.fileType="pdb",r}return P(t,e),_(t,[{key:"_finalize",value:function(){this._fixBondsArray(),this._fixChains();var e=this._remarks[290];this._complex.symmetry=i.a.isUndefined(e)?[]:e.matrices;var t=this._remarks[350];this._complex.units=this._complex.units.concat(i.a.isUndefined(t)?[]:t.assemblies),this._finalizeMolecules(),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"_finalizeMolecules",value:function(){var e,t={},n=this._complex._chains;for(e=0;e<n.length;++e){var r=n[e];t[r._name]=r}for(e=0;e<this._molecules.length;e++){for(var i=this._molecules[e],o=[],a=0;a<i._chains.length;a++){var s=t[i._chains[a]];o=o.concat(s._residues.slice())}var u=new Ba(this._complex,i._name,e+1);u.residues=o,this._complex._molecules[e]=u}}},{key:"_fixChains",value:function(){for(var e={},t=this._complex,n=0;n<t._chains.length;n++){var r=t._chains[n];e[r._name.charCodeAt(0)]=r}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap={},t=this._complex,n=t._atoms,r=0,i=n.length;r<i;++r){var o=n[r];e[o.serial]=o}for(var a=t._bonds,s=this.logger,u=0,c=a.length;u<c;++u){var l=a[u];l._right<l._left&&s.debug("_fixBondsArray: Logic error."),l._left=e[l._left]||null,l._right=e[l._right]||null}}},{key:"_parseATOM",value:function(e){if(1===this._modelId){var t=72===e.readCharCode(1),n=t?e.readInt(7,11):e.readInt(6,11),r=e.readString(13,16),i=e.readChar(17),a=e.readString(18,20).trim(),s=e.readChar(22),u=e.readInt(23,26),c=e.readChar(27),l=e.readFloat(31,38),f=e.readFloat(39,46),h=e.readFloat(47,54),p=e.readFloat(55,60),d=e.readFloat(61,66),m=e.readString(77,78).trim()||function(e){var t=4===e.trim().length;return e.slice(0,t?1:2).trim()}(r),v=e.readInt(79,80)||0;if(!this.settings.now.nowater||"HOH"!==a&&"WAT"!==a){r=r.trim();var g=Ia.getByName(m),y=Ia.Role[r],_=this._chain;_&&_.getName()===s||(this._chain=_=this._complex.getChain(s)||this._complex.addChain(s),this._residue=null);var x=this._residue;x&&x.getSequence()===u&&x.getICode()===c||(this._residue=x=_.addResidue(a,u,c));var b=new o.Vector3(l,f,h);x.addAtom(r,g,b,y,t,n,i,p,d,v)}}}},{key:"_parseENDMDL",value:function(){this._modelId+=1}},{key:"_parseCONECT",value:function(e){var t=e.readInt(7,11),n=e.readInt(12,16),r=e.readInt(17,21),i=e.readInt(22,26),o=e.readInt(27,31),a=this._complex;n&&n>t&&a.addBond(t,n,0,za.BondType.UNKNOWN,!0),r&&r>t&&a.addBond(t,r,0,za.BondType.UNKNOWN,!0),i&&i>t&&a.addBond(t,i,0,za.BondType.UNKNOWN,!0),o&&o>t&&a.addBond(t,o,0,za.BondType.UNKNOWN,!0)}},{key:"_parseCOMPND",value:function(e){var t=e.readString(11,80),n=t.indexOf(":");if(this._compndCurrToken=n>0?t.substring(0,n).trim():this._compndCurrToken,"MOL_ID"===this._compndCurrToken)this._molecule={_index:"",_chains:[]},this._molecule._index=parseInt(t.substring(n+1,t.indexOf(";")),10),this._molecules.push(this._molecule);else if("MOLECULE"===this._compndCurrToken&&null!=this._molecule)this._molecule._name=t.substring(n+1,t.indexOf(";")).trim();else if("CHAIN"===this._compndCurrToken&&null!=this._molecule){var r=t.substring(n+1,80).trim(),i=r[r.length-1];";"!==i&&","!==i||(r=r.slice(0,-1));var o=(r=r.replace(/\s+/g,"")).split(",");this._molecule._chains=this._molecule._chains.concat(o)}}},{key:"_parseREMARK",value:function(e){var t=e.readInt(8,10),n=this._remarks[t];if(i.a.isUndefined(n)){var r=Va[t];i.a.isFunction(r)&&(this._remarks[t]=n=new r(this._complex))}i.a.isUndefined(n)||n.parse(e)}},{key:"_parseHELIX",value:function(e){var t=this;this._parseSTRUCTURE(e,[20,22,32,34],(function(e){t._complex.addHelix(e),t._complex.structures.push(e)}))}},{key:"_parseSHEET",value:function(e){var t=this;this._parseSTRUCTURE(e,[22,23,33,34],(function(e){t._complex.addSheet(e)}))}},{key:"_parseSTRUCTURE",value:function(e,t,n){var r=e.readInt(8,10),i=e.readString(12,14).trim(),o=e.readString(41,70).trim(),a=e.readInt(72,76),s=e.readInt(39,40),u=e.readInt(15,16),c=e.readInt(42,45),l=e.readInt(57,60),f=e.readString(t[0],t[2]+1).charCodeAt(0),h=e.readString(t[2],t[2]+1).charCodeAt(0),p=e.readInt(t[1],t[1]+3),d=e.readString(t[1]+4,t[1]+4),m=0;d.length>0&&(m=d.charCodeAt(0));var v,g=e.readInt(t[3],t[3]+3),y=0;(d=e.readString(t[3]+4,t[3]+4)).length>0&&(y=d.charCodeAt(0));var _=this._sheet;if(83===e.readCharCode(1)){null!==_&&_.getName()!==i&&(_=null,this._sheet=null),null===_?(this._sheet=v=new Da(i,u),n(v)):v=_;var x=new Fa(v,this._complex.getUnifiedSerial(f,p,m),this._complex.getUnifiedSerial(h,g,y),s,c,l);v.addStrand(x),this._complex.structures.push(x)}else n(v=new Na(s,this._complex.getUnifiedSerial(f,p,m),this._complex.getUnifiedSerial(h,g,y),r,i,o,a))}},{key:"_parseHEADER",value:function(e){var t=this._complex.metadata;t.classification=e.readString(11,50).trim(),t.date=e.readString(51,59).trim();var n=e.readString(63,66).trim();t.id=n,n&&(this._complex.name=n),t.format="pdb"}},{key:"_parseTITLE",value:function(e){var t=this._complex.metadata;t.title=t.title||[];var n=e.readInt(9,10)||1;t.title[n-1]=e.readString(11,80).trim()}},{key:"parseSync",value:function(){for(var e=new La(this._data),n=this._complex=new Oa;!e.end();){var r=e.readString(1,6),o=t.tagParsers[r];i.a.isFunction(o)&&o.call(this,e),e.next()}if(this._finalize(),this._serialAtomMap=null,this._sheet=null,this._residue=null,this._chain=null,this._complex=null,0===n.getAtomCount())throw new Error("The data does not contain valid atoms");return n}}],[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&ja.test(e)}}]),t}(Ca);Ee(Ua,"tagParsers",{HEADER:Ua.prototype._parseHEADER,"TITLE ":Ua.prototype._parseTITLE,"ATOM  ":Ua.prototype._parseATOM,HETATM:Ua.prototype._parseATOM,ENDMDL:Ua.prototype._parseENDMDL,CONECT:Ua.prototype._parseCONECT,COMPND:Ua.prototype._parseCOMPND,REMARK:Ua.prototype._parseREMARK,"HELIX ":Ua.prototype._parseHELIX,"SHEET ":Ua.prototype._parseSHEET,"ATOM 1":Ua.prototype._parseATOM,"ATOM 2":Ua.prototype._parseATOM,"ATOM 3":Ua.prototype._parseATOM,"ATOM 4":Ua.prototype._parseATOM,"ATOM 5":Ua.prototype._parseATOM,"ATOM 6":Ua.prototype._parseATOM,"ATOM 7":Ua.prototype._parseATOM,"ATOM 8":Ua.prototype._parseATOM,"ATOM 9":Ua.prototype._parseATOM}),Ua.formats=["pdb"],Ua.extensions=[".pdb",".ent"];var Ga=rn.Complex,Ha=rn.Element,Wa=rn.SGroup,qa=rn.Bond,Ya={A:0,S:1,D:2,T:3},Xa=/\s*<\?xml\b[^?>]*\?>\s*<(?:cml|molecule)\b/i,$a=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._complex=null,r._residue=null,r._serialAtomMap=null,r._modelId=1,r._lastMolId=-1,r._readOnlyOneMolecule=!1,r._options.fileType="cml",r}return P(t,e),_(t,[{key:"_rebuidBondIndexes",value:function(e,t){for(var n=e.length,r=0;r<n;r++)for(var i=e[r].id,o=t.length,a=0;a<o;a++){var s=t[a].atomRefs2.split(" ");s[0]===i&&(t[a].start=r),s[1]===i&&(t[a].end=r)}}},{key:"_createSGroup",value:function(e,t){var n=new Wa(e.id,e.fieldData,new o.Vector3(parseFloat(e.x),parseFloat(e.y),0),e.atomRefs,e);"Relative"===e.placement&&(n._center=new o.Vector3(0,0,0)),"MDLBG_FRAGMENT_CHARGE"===e.fieldName&&(n._charge=parseInt(e.fieldData,10)||0),"MDLBG_FRAGMENT_COEFFICIENT"===e.fieldName&&(n._repeat=parseInt(e.fieldData,10)||1),t.push(n)}},{key:"_extractSGroup",value:function(e,t){if(Array.isArray(t)||(t=[]),e)if(Array.isArray(e))for(var n=e.length,r=0;r<n;r++)e[r].molecule&&(t=t.concat(this._extractSGroup(e[r].molecule))),this._createSGroup(e[r],t);else e.molecule&&e.molecule&&(t=t.concat(this._extractSGroup(e.molecule))),this._createSGroup(e,t);return t}},{key:"_extractSGroups",value:function(e,t){var n,r,i=this._extractSGroup(e),a=t.length;for(n=0;n<a;n++){var s=t[n].id;for(r=0;r<i.length;r++){i[r]._atoms.split(" ")[0]===s&&(t[n].sgroupRef||(t[n].sgroupRef=[]),t[n].sgroupRef.push(i[r]))}}var u,c={},l=null,f=1e8,h=new o.Vector3(f,f,f),p=new o.Vector3(-f,-f,-f);function d(e){(l=c[e])&&i[r]._atoms.push(l.a)}function m(e){(l=c[e])&&(h.set(Math.min(h.x,l.x),Math.min(h.y,l.y),Math.min(h.z,l.z)),p.set(Math.max(p.x,l.x),Math.max(p.y,l.y),Math.max(p.z,l.z)),d(e))}for(n=0;n<t.length;n++)c[t[n].id]={},c[t[n].id].x=t[n].x2,t[n].x3&&(c[t[n].id].x=t[n].x3),c[t[n].id].x=parseFloat(c[t[n].id].x),c[t[n].id].y=t[n].y2,t[n].y3&&(c[t[n].id].y=t[n].y3),c[t[n].id].y=parseFloat(c[t[n].id].y),c[t[n].id].z="0.0",t[n].z3&&(c[t[n].id].z=t[n].z3),c[t[n].id].z=parseFloat(c[t[n].id].z),c[t[n].id].a=t[n];for(r=0;r<i.length;r++)null!==i[r]._center?(h.set(f,f,f),p.set(-f,-f,-f),u=i[r]._atoms.split(" "),i[r]._atoms=[],u.forEach(m),i[r]._center.addVectors(h,p),i[r]._center.multiplyScalar(.5)):(u=i[r]._atoms.split(" "),i[r]._atoms=[],u.forEach(d));c=null}},{key:"_traverseData",value:function(e){var t={};return e.childNodes.length&&function e(t,n){if("#text"!==t.nodeName||""!==t.nodeValue.trim()){var r={};r.xmlNode=t;var i,o,a,s=n[t.nodeName];if(s?(i=s,"[object Array]"!==Object.prototype.toString.apply(i)?n[t.nodeName]=[s,r]:n[t.nodeName].push(r)):n[t.nodeName]=r,t.attributes)for(o=t.attributes.length,a=0;a<o;a++){var u=t.attributes[a];r[u.nodeName]=u.nodeValue}for(o=t.childNodes.length,a=0;a<o;a++)e(t.childNodes[a],r)}}(e.childNodes[0],t),t}},{key:"_findSuitableMolecule",value:function(e,t){for(var n in e)if("xmlNode"!==n)if("molecule"===n){if(e.molecule&&(e.molecule.atomArray&&e.molecule.atomArray.atom&&t.push(e),Array.isArray(e.molecule)))for(var r=0;r<e.molecule.length;r++)e.molecule[r].atomArray&&e.molecule[r].atomArray.atom&&t.push({molecule:e.molecule[r]})}else e[n]&&null!==e[n]&&"object"===A(e[n])&&this._findSuitableMolecule(e[n],t)}},{key:"_selectComponents",value:function(e){var t,n=(new DOMParser).parseFromString(e,"application/xml"),r=this._traverseData(n),i=this;t=r.cml?r.cml:r;var o=[],a=[];return this._findSuitableMolecule(t,a),this._readOnlyOneMolecule&&a.length>1&&a.splice(1,a.length-1),a.forEach((function(e){var t=function(e){var t,r=[];if(e.molecule&&e.molecule.atomArray&&e.molecule.atomArray.atom)Array.isArray(e.molecule.atomArray.atom)?r=e.molecule.atomArray.atom:r.push(e.molecule.atomArray.atom);else if(!e.molecule){var o={atomLabels:null,labelsCount:1};return o}e.molecule.molecule&&i._extractSGroups(e.molecule.molecule,r);for(var a=r.length,s=0;s<a;s++)(t=r[s]).edges=[];var u,c=[];e.molecule.bondArray&&e.molecule.bondArray.bond&&(Array.isArray(e.molecule.bondArray.bond)?c=e.molecule.bondArray.bond:c.push(e.molecule.bondArray.bond)),a=c.length,i._rebuidBondIndexes(r,c);for(var l=0;l<a;l++)if(u=c[l],(t=r[u.start])&&(t.edges.push(u.end),(t=r[u.end])&&(t.edges.push(u.start),1))){var f=u.xmlNode.getAttribute("order"),h=parseInt(f,10);if(c[l].order=0,c[l].type=qa.BondType.UNKNOWN,h>1)c[l].order=h;else{var p=Ya[f];void 0!==p&&(c[l].order=p,"A"===f&&(c[l].type=qa.BondType.AROMATIC))}}a=r.length;for(var d=0;d<a;d++)(t=r[d]).edges.sort();var m=i._breadWidthSearch(r,0),v={};return v.atoms=r,v.bonds=c,v.labels=m.atomLabels,v.count=Math.min(1,m.labelsCount),v.curr=-1,v.originalCML=n,v}(e);t.atoms.length>0&&o.push(t)})),o}},{key:"_packLabel",value:function(e,t){return(t<<16)+e}},{key:"_unpackLabel",value:function(e){return{molId:e>>>16,compId:65535&e}}},{key:"_breadWidthSearch",value:function(e,t){var n,r=new Array(e.length);for(n=0;n<r.length;n++)r[n]=this._packLabel(0,t);for(var i=[],o=0,a=e.length;a>0;){o++;var s=-1;for(n=0;n<r.length;n++)if(0===this._unpackLabel(r[n]).compId){s=n;break}if(s<0)break;for(i.push(e[s]),r[s]=this._packLabel(o,t),a--;i.length>0;){var u=i.shift();if(u)for(var c=0;c<u.edges.length;c++)r[u.edges[c]]!==o&&(i.push(e[u.edges[c]]),r[u.edges[c]]=o,a--)}}var l={};return l.atomLabels=r,l.labelsCount=o,l}},{key:"_parseBond",value:function(e,t,n,r){if(e>=0){var i=[Math.min(e,t),Math.max(e,t)];this._complex.addBond(i[0],i[1],n,r,!0)}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap={},t=this._complex,n=t._atoms,r=0,i=n.length;r<i;++r){var o=n[r];e[o.serial]=o}for(var a=t._bonds,s=this.logger,u=0,c=a.length;u<c;++u){var l=a[u];l._right<l._left&&s.debug("_fixBondsArray: Logic error."),l._left=e[l._left]||null,l._right=e[l._right]||null}}},{key:"_parseSet",value:function(e){var t,n,r=this._complex=new Ga,i=e,a=i.curr,s=i.atoms,u=i.labels,c=null,l=s.length;var f,h={},p=[];for(t=0;t<l;t++)p.push(t);for(p.sort((function(e,t){return u[e]-u[t]})),t=0;t<l;t++){var d=u[p[t]];if(this._unpackLabel(d).molId===this._unpackLabel(a).molId){var m=(c=s[p[t]]).elementType;if(c.sgroupRef)for(var v=c.sgroupRef.length,g=0;g<v;++g)r._sgroups.push(c.sgroupRef[g]);if(c.x3||c.x2){var y=this._unpackLabel(d).compId,_=y,x=y.toString();1===x.length&&(x="0".concat(x));var b="N".concat(x),w=h[" "];w&&" "===w.getName()||(h[" "]=w=this._complex.getChain(" ")||this._complex.addChain(" "),this._residue=null);var S=this._residue;S&&S.getSequence()===_&&" "===S.getICode()||(this._residue=S=w.addResidue(b,_," "));var E=null;c.x3?E=new o.Vector3(parseFloat(c.x3),parseFloat(c.y3),parseFloat(c.z3)):c.x2&&(E=new o.Vector3(parseFloat(c.x2),parseFloat(c.y2),0));var T=Ha.ByName[c.elementType.toUpperCase()];T||((T=JSON.parse(JSON.stringify(Ha.ByName[Object.keys(Ha.ByName)[Object.keys(Ha.ByName).length-1]]))).number+=1,T.name=c.elementType.toUpperCase(),T.fullName="Unknown",Ha.ByName[c.elementType.toUpperCase()]=T);var A=parseInt(c.id.replace(/[^0-9]/,""),10),M=S.addAtom(m,T,E,Ha.Role.SG,!0,A," ",1,0,0);c.hydrogenCount&&(M.hydrogenCount=parseInt(c.hydrogenCount,10)),c.mrvValence&&(M.valence=parseInt(c.mrvValence,10)),(f=M).xmlNodeRef=c,c.x2&&(c.x3=c.x2,delete c.x2),c.y2&&(c.y3=c.y2,delete c.y2),c.z3||(c.z3="0.0"),c.complexAtom=f}}}for(h=null,t=0;t<i.bonds.length;t++){var C=i.bonds[t];if(this._unpackLabel(u[C.start]).molId===this._unpackLabel(a).molId&&this._unpackLabel(u[C.end]).molId===this._unpackLabel(a).molId){if(!(c=s[C.start])||!s[C.end])continue;this._parseBond(parseInt(c.id.replace(/[^0-9]/,""),10),parseInt(s[C.end].id.replace(/[^0-9]/,""),10),C.order,C.type)}}for(t=0;t<this._complex.getSGroupCount();t++){var k=this._complex.getSGroups()[t];for(n=0;n<k._atoms.length;n++)k._atoms[n]=k._atoms[n].complexAtom}for(t=0;t<l;t++)this._unpackLabel(u[t]).molId===this._unpackLabel(a).molId&&((c=s[t]).complexAtom=null,delete c.complexAtom);return this._complex.originalCML=i.originalCML,this._fixBondsArray(),r.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._serialAtomMap=null,this._complex=null,r}},{key:"parseSync",value:function(){var e=[],t=this;this._selectComponents(this._data).forEach((function(n){n.curr=2,0===n.count&&(n.count=1);for(var r=0;r<n.count;r++)n.curr=r+1,e.push(t._parseSet(n,!1))}));var n=0;if(e.forEach((function(e){n+=e.getAtomCount()})),n<=0)throw new Error("The data does not contain valid atoms");if(e.length>1){var r=new Ga;return r.joinComplexes(e),r.originalCML=e[0].originalCML,r}return 1===e.length?e[0]:new Ga}}],[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&Xa.test(e)}}]),t}(Ca);$a.formats=["cml"],$a.extensions=[".cml"];var Za=T((function(e,t){!function(e){function t(e,t,n){for(var r=(e.byteLength,0),i=n.length;i>r;r++){var o=n.charCodeAt(r);if(128>o)e.setUint8(t++,o>>>0&127|0);else if(2048>o)e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);else if(65536>o)e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);else{if(!(1114112>o))throw new Error("bad codepoint "+o);e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128)}}}function n(e){for(var t=0,n=0,r=e.length;r>n;n++){var i=e.charCodeAt(n);if(128>i)t+=1;else if(2048>i)t+=2;else if(65536>i)t+=3;else{if(!(1114112>i))throw new Error("bad codepoint "+i);t+=4}}return t}function r(e,i,o){var a=typeof e;if("string"===a){if(32>(s=n(e)))return i.setUint8(o,160|s),t(i,o+1,e),1+s;if(256>s)return i.setUint8(o,217),i.setUint8(o+1,s),t(i,o+2,e),2+s;if(65536>s)return i.setUint8(o,218),i.setUint16(o+1,s),t(i,o+3,e),3+s;if(4294967296>s)return i.setUint8(o,219),i.setUint32(o+1,s),t(i,o+5,e),5+s}if(e instanceof Uint8Array){var s=e.byteLength,u=new Uint8Array(i.buffer);if(256>s)return i.setUint8(o,196),i.setUint8(o+1,s),u.set(e,o+2),2+s;if(65536>s)return i.setUint8(o,197),i.setUint16(o+1,s),u.set(e,o+3),3+s;if(4294967296>s)return i.setUint8(o,198),i.setUint32(o+1,s),u.set(e,o+5),5+s}if("number"===a){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return i.setUint8(o,203),i.setFloat64(o+1,e),9;if(e>=0){if(128>e)return i.setUint8(o,e),1;if(256>e)return i.setUint8(o,204),i.setUint8(o+1,e),2;if(65536>e)return i.setUint8(o,205),i.setUint16(o+1,e),3;if(4294967296>e)return i.setUint8(o,206),i.setUint32(o+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return i.setInt8(o,e),1;if(e>=-128)return i.setUint8(o,208),i.setInt8(o+1,e),2;if(e>=-32768)return i.setUint8(o,209),i.setInt16(o+1,e),3;if(e>=-2147483648)return i.setUint8(o,210),i.setInt32(o+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e)return i.setUint8(o,192),1;if("boolean"===a)return i.setUint8(o,e?195:194),1;if("object"===a){var c=0,l=Array.isArray(e);if(l)s=e.length;else{var f=Object.keys(e);s=f.length}if(16>s?(i.setUint8(o,s|(l?144:128)),c=1):65536>s?(i.setUint8(o,l?220:222),i.setUint16(o+1,s),c=3):4294967296>s&&(i.setUint8(o,l?221:223),i.setUint32(o+1,s),c=5),l)for(var h=0;s>h;h++)c+=r(e[h],i,o+c);else for(h=0;s>h;h++){var p=f[h];c+=r(p,i,o+c),c+=r(e[p],i,o+c)}return c}throw new Error("Unknown type "+a)}function i(e){var t=typeof e;if("string"===t){if(32>(r=n(e)))return 1+r;if(256>r)return 2+r;if(65536>r)return 3+r;if(4294967296>r)return 5+r}if(e instanceof Uint8Array){if(256>(r=e.byteLength))return 2+r;if(65536>r)return 3+r;if(4294967296>r)return 5+r}if("number"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(128>e)return 1;if(256>e)return 2;if(65536>e)return 3;if(4294967296>e)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e)return 1;if("object"===t){var r,o=0;if(Array.isArray(e)){r=e.length;for(var a=0;r>a;a++)o+=i(e[a])}else{var s=Object.keys(e);for(r=s.length,a=0;r>a;a++){var u=s[a];o+=i(u)+i(e[u])}}if(16>r)return 1+o;if(65536>r)return 3+o;if(4294967296>r)return 5+o;throw new Error("Array or object too long 0x"+r.toString(16))}throw new Error("Unknown type "+t)}function o(e){var t=new ArrayBuffer(i(e));return r(e,new DataView(t),0),new Uint8Array(t)}function a(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function s(e){return a(DataView,e)}function u(e){return a(Uint8Array,e)}function c(e){return a(Int8Array,e)}function l(e){return a(Int32Array,e,4)}function f(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;n>r;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function h(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;n>r;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function p(e,t){var n=e.length;t||(t=new Uint8Array(4*n));for(var r=s(t),i=0;n>i;++i)r.setInt32(4*i,e[i]);return u(t)}function d(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;r>o;++o)n[o]=e[o]*i;return n}function m(e,t,n){var r=e.length;n||(n=new Int32Array(r));for(var i=0;r>i;++i)n[i]=Math.round(e[i]*t);return n}function v(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;r>n;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;r>n;n+=2)for(var a=e[n],s=e[n+1],u=0;s>u;++u)t[o]=a,++o;return t}function g(e){if(0===e.length)return new Int32Array;var t,n,r=2;for(t=1,n=e.length;n>t;++t)e[t-1]!==e[t]&&(r+=2);var i=new Int32Array(r),o=0,a=1;for(t=1,n=e.length;n>t;++t)e[t-1]!==e[t]?(i[o]=e[t-1],i[o+1]=a,a=1,o+=2):++a;return i[o]=e[e.length-1],i[o+1]=a,i}function y(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;n>r;++r)t[r]=e[r]+t[r-1];return t}function _(e,t){var n=e.length;t||(t=new e.constructor(n)),t[0]=e[0];for(var r=1;n>r;++r)t[r]=e[r]-e[r-1];return t}function x(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,a=e.length;if(!t){var s=0;for(n=0;a>n;++n)e[n]<i&&e[n]>o&&++s;t=new Int32Array(s)}for(n=0,r=0;a>n;){for(var u=0;e[n]===i||e[n]===o;)u+=e[n],++n;u+=e[n],++n,t[r]=u,++r}return t}function b(e,t,n){return d(x(e,l(n)),t,n)}function w(e,t,n){var r=x(e,l(n));return function(e,t,n){return d(y(e,l(n)),t,n)}(r,t,function(e){return a(Float32Array,e,4)}(r))}function S(e,t,n){return function(e,t){var n,r=t?127:32767,i=-r-1,o=e.length,a=0;for(n=0;o>n;++n)0===(c=e[n])?++a:a+=c===r||c===i?2:c>0?Math.ceil(c/r):Math.ceil(c/i);var s=t?new Int8Array(a):new Int16Array(a),u=0;for(n=0;o>n;++n){var c;if((c=e[n])>=0)for(;c>=r;)s[u]=r,++u,c-=r;else for(;i>=c;)s[u]=i,++u,c-=i;s[u]=c,++u}return s}(function(e,t,n){return _(m(e,t),n)}(e,t),n)}function E(e,t,n,r){var i=new ArrayBuffer(12+r.byteLength),o=new Uint8Array(i),a=new DataView(i);return a.setInt32(0,e),a.setInt32(4,t),n&&o.set(n,8),o.set(r,12),o}function T(e){return E(2,e.length,void 0,u(e))}function A(e){return E(4,e.length,void 0,p(e))}function M(e,t){return E(5,e.length/t,p([t]),u(e))}function C(e){return E(6,e.length,void 0,p(g(e)))}function k(e){return E(8,e.length,void 0,p(function(e){return g(_(e))}(e)))}function R(e,t){return E(9,e.length,p([t]),p(function(e,t){return g(m(e,t))}(e,t)))}function P(e,t){var n=e.length,r=p([t]),i=function(e,t){var n=e.length;t||(t=new Uint8Array(2*n));for(var r=s(t),i=0;n>i;++i)r.setInt16(2*i,e[i]);return u(t)}(S(e,t));return E(10,n,r,i)}function L(e){var t={};return B.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),e.bondAtomList&&(t.bondAtomList=A(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=T(e.bondOrderList)),t.xCoordList=P(e.xCoordList,1e3),t.yCoordList=P(e.yCoordList,1e3),t.zCoordList=P(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=P(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=k(e.atomIdList)),e.altLocList&&(t.altLocList=C(e.altLocList)),e.occupancyList&&(t.occupancyList=R(e.occupancyList,100)),t.groupIdList=k(e.groupIdList),t.groupTypeList=A(e.groupTypeList),e.secStructList&&(t.secStructList=T(e.secStructList)),e.insCodeList&&(t.insCodeList=C(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=k(e.sequenceIndexList)),t.chainIdList=M(e.chainIdList,4),e.chainNameList&&(t.chainNameList=M(e.chainNameList,4)),t}function O(e){function t(e){for(var t={},n=0;e>n;n++)t[o()]=o();return t}function n(t){var n=e.subarray(a,a+t);return a+=t,n}function r(t){var n=e.subarray(a,a+t);a+=t;var r=65535;if(t>r){for(var i=[],o=0;o<n.length;o+=r)i.push(String.fromCharCode.apply(null,n.subarray(o,o+r)));return i.join("")}return String.fromCharCode.apply(null,n)}function i(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=o();return t}function o(){var o,u,c=e[a];if(0===(128&c))return a++,c;if(128===(240&c))return a++,t(u=15&c);if(144===(240&c))return a++,i(u=15&c);if(160===(224&c))return a++,r(u=31&c);if(224===(224&c))return o=s.getInt8(a),a++,o;switch(c){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return u=s.getUint8(a+1),a+=2,n(u);case 197:return u=s.getUint16(a+1),a+=3,n(u);case 198:return u=s.getUint32(a+1),a+=5,n(u);case 202:return o=s.getFloat32(a+1),a+=5,o;case 203:return o=s.getFloat64(a+1),a+=9,o;case 204:return o=e[a+1],a+=2,o;case 205:return o=s.getUint16(a+1),a+=3,o;case 206:return o=s.getUint32(a+1),a+=5,o;case 208:return o=s.getInt8(a+1),a+=2,o;case 209:return o=s.getInt16(a+1),a+=3,o;case 210:return o=s.getInt32(a+1),a+=5,o;case 217:return u=s.getUint8(a+1),a+=2,r(u);case 218:return u=s.getUint16(a+1),a+=3,r(u);case 219:return u=s.getUint32(a+1),a+=5,r(u);case 220:return u=s.getUint16(a+1),a+=3,i(u);case 221:return u=s.getUint32(a+1),a+=5,i(u);case 222:return u=s.getUint16(a+1),a+=3,t(u);case 223:return u=s.getUint32(a+1),a+=5,t(u)}throw new Error("Unknown type 0x"+c.toString(16))}var a=0,s=new DataView(e.buffer);return o()}function I(e,t,n,r){switch(e){case 1:return function(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=s(t),i=s(e),o=0,a=0,u=n/4;u>o;++o,a+=4)r.setFloat32(a,i.getFloat32(a),!0);return t}(t);case 2:return c(t);case 3:return f(t);case 4:return h(t);case 5:return u(t);case 6:return v(h(t),new Uint8Array(n));case 7:return v(h(t));case 8:return function(e,t){return y(v(e),t)}(h(t));case 9:return function(e,t,n){return d(v(e,l(n)),t,n)}(h(t),h(r)[0]);case 10:return w(f(t),h(r)[0]);case 11:return d(f(t),h(r)[0]);case 12:return b(f(t),h(r)[0]);case 13:return b(c(t),h(r)[0]);case 14:return x(f(t));case 15:return x(c(t))}}function N(e,t){var n=(t=t||{}).ignoreFields,r={};return j.forEach((function(t){var i=!!n&&-1!==n.indexOf(t),o=e[t];i||void 0===o||(o instanceof Uint8Array?r[t]=I.apply(null,function(e){var t=s(e),n=t.getInt32(0),r=t.getInt32(4),i=e.subarray(8,12);return[n,e=e.subarray(12),r,i]}(o)):r[t]=o)})),r}function D(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")}function F(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),N(e instanceof Uint8Array?O(e):e,t)}function z(e,t,n,r){var i=new XMLHttpRequest;i.addEventListener("load",(function(){try{var e=F(i.response);n(e)}catch(t){r(t)}}),!0),i.addEventListener("error",r,!0),i.responseType="arraybuffer",i.open("GET",t+e.toUpperCase()),i.send()}var B=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],j=B.concat(["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"]),V="//mmtf.rcsb.org/v1.0/",U=V+"full/",G=V+"reduced/";e.encode=function(e){return o(L(e))},e.decode=F,e.traverse=function(e,t,n){var r,i,o,a,s,u,c=(n=n||{}).firstModelOnly,l=t.onModel,f=t.onChain,h=t.onGroup,p=t.onAtom,d=t.onBond,m=0,v=0,g=0,y=0,_=0,x=-1,b=e.chainNameList,w=e.secStructList,S=e.insCodeList,E=e.sequenceIndexList,T=e.atomIdList,A=e.bFactorList,M=e.altLocList,C=e.occupancyList,k=e.bondAtomList,R=e.bondOrderList;for(r=0,i=e.chainsPerModel.length;i>r&&!(c&&m>0);++r){var P=e.chainsPerModel[m];for(l&&l({chainCount:P,modelIndex:m}),o=0;P>o;++o){var L=e.groupsPerChain[v];if(f){var O=D(e.chainIdList.subarray(4*v,4*v+4)),I=null;b&&(I=D(b.subarray(4*v,4*v+4))),f({groupCount:L,chainIndex:v,modelIndex:m,chainId:O,chainName:I})}for(a=0;L>a;++a){var N=e.groupList[e.groupTypeList[g]],F=N.atomNameList.length;if(h){var z=null;w&&(z=w[g]);var B=null;e.insCodeList&&(B=String.fromCharCode(S[g]));var j=null;E&&(j=E[g]),h({atomCount:F,groupIndex:g,chainIndex:v,modelIndex:m,groupId:e.groupIdList[g],groupType:e.groupTypeList[g],groupName:N.groupName,singleLetterCode:N.singleLetterCode,chemCompType:N.chemCompType,secStruct:z,insCode:B,sequenceIndex:j})}for(s=0;F>s;++s){if(p){var V=null;T&&(V=T[y]);var U=null;A&&(U=A[y]);var G=null;M&&(G=String.fromCharCode(M[y]));var H=null;C&&(H=C[y]),p({atomIndex:y,groupIndex:g,chainIndex:v,modelIndex:m,atomId:V,element:N.elementList[s],atomName:N.atomNameList[s],formalCharge:N.formalChargeList[s],xCoord:e.xCoordList[y],yCoord:e.yCoordList[y],zCoord:e.zCoordList[y],bFactor:U,altLoc:G,occupancy:H})}y+=1}if(d){var W=N.bondAtomList;for(s=0,u=N.bondOrderList.length;u>s;++s)d({atomIndex1:y-F+W[2*s],atomIndex2:y-F+W[2*s+1],bondOrder:N.bondOrderList[s]})}g+=1}v+=1}if(_=x+1,x=y-1,d&&k)for(s=0,u=k.length;u>s;s+=2){var q=k[s],Y=k[s+1];(q>=_&&x>=q||Y>=_&&x>=Y)&&d({atomIndex1:q,atomIndex2:Y,bondOrder:R?R[s/2]:null})}m+=1}},e.fetch=function(e,t,n){z(e,U,t,n)},e.fetchReduced=function(e,t,n){z(e,G,t,n)},e.version="v1.1.0dev",e.fetchUrl=U,e.fetchReducedUrl=G,e.encodeMsgpack=o,e.encodeMmtf=L,e.decodeMsgpack=O,e.decodeMmtf=N}(t)})),Ka=rn.Complex,Ja=rn.Chain,Qa=rn.Atom,es=rn.Element,ts=rn.Helix,ns=rn.Sheet,rs=rn.Strand,is=rn.Bond,os=rn.Assembly,as=rn.Molecule,ss=function(){function e(t){g(this,e),this._original=Array.from(t),this._original.sort(),this._sum=0;for(var n=0;n<this._original.length;++n)this._sum+=this._original[n]}return _(e,[{key:"compare",value:function(e){var t=e.length;if(t!==this._original.length)return!1;var n,r=0;for(n=0;n<t;++n)r+=e[n];if(r!==this._sum)return!1;var i=Array.from(e);for(i.sort(),n=0;n<t;++n)if(i[n]!==this._original[n])return!1;return!0}}]),e}();ss.prototype.constructor=ss;var us=He.Type,cs=[us.HELIX_PI,us.BEND,us.HELIX_ALPHA,us.STRAND,us.HELIX_310,us.BRIDGE,us.TURN,us.COIL];var ls=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._options.fileType="mmtf",r}return P(t,e),_(t,[{key:"_onModel",value:function(e){}},{key:"_onChain",value:function(e){if(0===e.modelIndex){var t=new Ja(this._complex,e.chainName);this._complex._chains[e.chainIndex]=t,t._index=e.chainIndex}}},{key:"_onGroup",value:function(e){if(0===e.modelIndex&&(!this.settings.now.nowater||"HOH"!==e.groupName&&"WAT"!==e.groupName)){var t=this._complex._chains[e.chainIndex],n=e.insCode.charCodeAt(0)?e.insCode:"",r=t.addResidue(e.groupName,e.groupId,n);r._index=e.groupIndex,this._updateSecStructure(this._complex,r,e)}}},{key:"_onAtom",value:function(e){if(0===e.modelIndex){var t=e.altLoc.charCodeAt(0)?e.altLoc:"",n=new Qa(e.groupIndex,e.atomName,es.getByName(e.element.toUpperCase()),new o.Vector3(e.xCoord,e.yCoord,e.zCoord),es.Role[e.atomName],!1,e.atomId,t,e.occupancy,e.bFactor,e.formalCharge);this._complex._atoms[e.atomIndex]=n,n.index=e.atomIndex,this._serialAtomMap[e.atomId]=n}}},{key:"_onBond",value:function(e){var t=Math.max(e.atomIndex1,e.atomIndex2);if(!(t>=this._complex._atoms.length)){var n=Math.min(e.atomIndex1,e.atomIndex2);this._complex.addBond(this._complex._atoms[n],this._complex._atoms[t],e.bondOrder,is.BondType.UNKNOWN,!0)}}},{key:"_updateSecStructure",value:function(e,t,n){if(!i.a.isUndefined(n)&&n.secStruct===this._ssType)return t._secondary=this._ssStruct,void(this._ssStruct&&(this._ssStruct.term=t));if(!i.a.isUndefined(n)){var r=cs[n.secStruct];this._ssType=n.secStruct,this._ssStart=t;var o=null;switch(this._ssType){case-1:case 7:break;case 0:case 2:case 4:o=new ts([3,-1,1,-1,5][this._ssType],t,t,0,"","",0),e._helices.push(o);break;case 3:var a=new ns("",0);e._sheets.push(a),o=new rs(a,t,t,0,null,null);break;default:void 0!==r&&(o=new He(r,t,t))}this._ssStruct=o,t._secondary=o,o&&e.structures.push(o)}}},{key:"_updateMolecules",value:function(e){var t=e.entityList;if(t)for(var n=e.chainsPerModel[0],r=0;r<t.length;r++){for(var i=t[r],o=i.chainIndexList,a=[],s=0;s<o.length;s++){var u=o[s];if(!(u>=n)){var c=this._complex._chains[u];a=a.concat(c._residues.slice())}}var l=new as(this._complex,i.description,r+1);l.residues=a,this._complex._molecules[r]=l}}},{key:"_traverse",value:function(e){var t=this,n=this._complex.metadata;n.id=e.structureId,n.title=[],n.title[0]=e.title,n.date=e.releaseDate,n.format="mmtf";var r={onModel:function(e){t._onModel(e)},onChain:function(e){t._onChain(e)},onGroup:function(e){t._onGroup(e)},onAtom:function(e){t._onAtom(e)},onBond:function(e){t._onBond(e)}};this._ssType=-1,this._ssStruct=null,this._ssStart=null,Za.traverse(e,r),this._updateSecStructure(this._complex),this._updateMolecules(e)}},{key:"_linkAtomsToResidues",value:function(){for(var e=0;e<this._complex._atoms.length;++e){var t=this._complex._atoms[e],n=this._complex._residues[t.residue];t.residue=n,n._atoms.push(t)}}},{key:"_findSynonymousChains",value:function(){for(var e={},t=0;t<this._complex._chains.length;++t){var n=this._complex._chains[t],r=n.getName();e.hasOwnProperty(r)||(e[r]=[]),e[r].push(n._index)}return e}},{key:"_parseAssemblyInfo",value:function(e){var t,n,r,i=[],a=this.logger;for(t=0;t<e.bioAssemblyList.length;++t){var s=e.bioAssemblyList[t];if(0!==s.transformList.length){var u=s.transformList[0].chainIndexList,c=new ss(u),l={};for(n=0;n<u.length;++n)l[this._complex._chains[u[n]].getName()]=1;var f=[],h=void 0;for(h in l)l.hasOwnProperty(h)&&Array.prototype.push.apply(f,this._chainsByName[h]);c.compare(f)||a.debug("MMTF: Assembly is missing some of the synonymous chains. Skipping...");var p=new os(this._complex);for(h in l)l.hasOwnProperty(h)&&p.addChain(h);for(p.addMatrix((new o.Matrix4).fromArray(s.transformList[0].matrix).transpose()),n=1;n<s.transformList.length;++n){var d=s.transformList[n];if(c.compare(d.chainIndexList)){var m=(new o.Matrix4).fromArray(d.matrix).transpose();for(r=0;r<p.matrices.length&&!p.matrices[r].equals(m);++r);r===p.matrices.length&&p.addMatrix(m)}else a.debug("MMTF: Chain lists differ for different transforms in one assembly. Skipping...")}p.finalize(),i.push(p)}}return i}},{key:"_markHeteroAtoms",value:function(e){for(var t=e.chainsPerModel[0],n=0;n<e.entityList.length;++n){var r=e.entityList[n];if("polymer"!==r.type)for(var i=0;i<r.chainIndexList.length;++i){var o=r.chainIndexList[i];if(!(o>=t))for(var a=this._complex._chains[o],s=0;s<a._residues.length;++s)for(var u=a._residues[s],c=0;c<u._atoms.length;++c)u._atoms[c].het=!0}}}},{key:"_joinSynonymousChains",value:function(){var e,t,n=[],r={};for(e=0;e<this._complex._chains.length;++e){var i=this._complex._chains[e],o=i.getName();if(r.hasOwnProperty(o)){var a=r[o];for(t=0;t<i._residues.length;++t){var s=i._residues[t];a._residues.push(s),s._chain=a}}else r[o]=i,i._index=n.length,n.push(i)}this._complex._chains=n}},{key:"parseSync",value:function(){var e=Za.decode(this._data);return this._complex=new Ka,this._serialAtomMap={},this._traverse(e),this._linkAtomsToResidues(),this._markHeteroAtoms(e),this._chainsByName=this._findSynonymousChains(),Array.prototype.push.apply(this._complex.units,this._parseAssemblyInfo(e)),this._joinSynonymousChains(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._complex}}],[{key:"canProbablyParse",value:function(e){return i.a.isArrayBuffer(e)&&223===(1|new Uint8Array(e,0,1)[0])}}]),t}(Ca);ls.formats=["mmtf"],ls.extensions=[".mmtf"],ls.binary=!0;var fs=function(e){function t(e,n,r){var i;return g(this,t),i=C(this,k(t).call(this,"data:".concat(n,":").concat(r,": ").concat(e))),Error.captureStackTrace&&Error.captureStackTrace(M(i),t),i.name="ParsingError",i.parseLine=n,i.parseColumn=r,i}return P(t,e),t}(I(Error));function hs(e){return 32===e||10===e||13===e||9===e}function ps(e,t,n){for(var r=t.length,i=-1;n<r&&(i=t.charCodeAt(n))!==e&&10!==i;)++n;return i===e?n:-1}var ds=rn.Complex,ms=rn.Element,vs=rn.Helix,gs=rn.Sheet,ys=rn.Strand,_s=rn.Assembly,xs=rn.Molecule,bs=["auth_seq_id","Cartn_x","Cartn_y","Cartn_z","label_atom_id"],ws={helx:"helix",turn:"turn",strn:"strand"};function Ss(e){var t=/[A-Za-z]+/.exec(e);return t?ws[t[0].toLowerCase()]:null}function Es(e){return null===e||void 0===e||i.a.isArray(e)?e:[e]}function Ts(e){var t=4===e.trim().length;return e.slice(0,t?1:2).trim()}var As=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this))).name="AtomDataError",n.message=e,n}return P(t,e),t}(I(Error));function Ms(e,t){for(var n=(e=i.a.isString(e)?e:"".concat(e)).replace(/\)\s*\(/g,"!").replace(/[()']/g,"").split("!"),r=[],a=0,s=n.length;a<s;++a){for(var u=n[a].split(","),c=[],l=0,f=0,h=u.length;f<h;++f){var p=u[f];if(p.includes("-"))for(var d=p.split("-"),m=parseInt(d[0],10),v=parseInt(d[1],10);m<=v;++m)c[l++]=t[m];else c[l++]=t[p]}r.push(c)}var g=[],y=0;return function e(t,n){for(var i=0,a=r[t].length;i<a;++i){var s=n?n.clone():new o.Matrix4;s.multiplyMatrices(r[t][i],s),0===t?g[y++]=s:e(t-1,s)}}(r.length-1),g}var Cs=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n))).asymDict={},r.molecules=[],r._options.fileType="cif",r}return P(t,e),_(t,[{key:"parseSync",value:function(){this.logger.info("Parsing CIF file..");var e=function(e){var t,n,r,o,a=0,s=0,u=e.length,c=NaN,l=!0,f=1,h=1,p=0,d={},m={},v=[],g=0,y="",_=[],x=0;function b(){var t;if((46===c||63===c)&&(a+1>=u||hs(e.charCodeAt(a+1))))return++h,void++a;if(l&&59===c){s=a;var n=0;do{if(-1===(s=ps(10,e,s+1)))throw new fs("Unterminated text block found",f,h);++n}while(s+1<u&&e.charCodeAt(s+1)!==c||s+1>=u);return t=e.substring(a+1,s).replace(/\r/g,""),a=s+2,f+=n,h=1,l=!1,t}if(39===c||34===c){s=a;do{if(-1===(s=ps(c,e,s+1)))throw new fs("Unterminated quoted string found",f,h)}while(s+1<u&&!hs(e.charCodeAt(s+1)));return t=e.substring(a+1,s),h+=s-a+1,a=s+1,t}for(s=a;s<u&&!hs(e.charCodeAt(s));)++s;t=e.substring(a,s),h+=s-a,a=s;var r=Number(t);return Number.isNaN(r)?t:r}for(;a<=u;){if(13===(c=e.charCodeAt(a)));else if(10===c)l=!0,++f,h=1;else{if(32!==c&&9!==c){if(35===c){if(-1===(a=ps(10,e,a+1)))break;continue}if(0===p){if(68!==c&&100!==c||"ata_"!==e.substr(a+1,4).toLowerCase()){if(Number.isNaN(c))break;throw new fs("Unexpected character in state ".concat(p),f,h)}for(t=s=a+5;s<u&&!hs(e.charCodeAt(s));)++s;if(h+=s-a,t<(a=s)){d[e.substring(t,a)]=m={},p=1;continue}throw new fs("Data block name missing",f,h)}if(1===p){if(68!==c&&100!==c||"ata_"!==e.substr(a+1,4).toLowerCase()){if(95===c){for(t=s=a+1;s<u&&!hs(e.charCodeAt(s));)++s;if(h+=s-a,t<(a=s)){y=e.substring(t,a),p=2;continue}throw new fs("Tag name missing",f,h)}if(76!==c&&108!==c||"oop_"!==e.substr(a+1,4).toLowerCase()){if(Number.isNaN(c))break;throw new fs("Unexpected character in state ".concat(p),f,h)}if(h+=5,(a+=5)<u&&!hs(e.charCodeAt(a)))throw new fs("Unexpected character in state ".concat(p),f,h);v=[],g=0,_=[],x=0,p=3;continue}p=0;continue}if(2===p){if(Number.isNaN(c))break;n=b(),i.a.set(m,y,n),p=1;continue}if(3===p){if(95===c){for(t=s=a+1;s<u&&!hs(e.charCodeAt(s));)++s;if(h+=s-a,t<(a=s)){o=e.substring(t,a),v[g++]=o;continue}throw new fs("Tag name missing",f,h)}if(g>0){for(var w=0;w<g;++w)n=[],_[w]=n,i.a.set(m,v[w],n);p=4;continue}throw new fs("Data tags are missing inside a loop",f,h)}if(4===p){68!==c&&100!==c||"ata_"!==e.substr(a+1,4).toLowerCase()?95===c?p=1:76!==c&&108!==c||"oop_"!==e.substr(a+1,4).toLowerCase()?Number.isNaN(c)?p=0:(r=b(),_[x%g].push(r),++x):p=1:p=0;continue}throw new fs("Unexpected internal state ".concat(p),f,h)}l=!1,++h}++a}if(2===p)throw new fs("Unexpected end of file in state ".concat(p),f,h);return d}(this._data);return this._toComplex(e)}},{key:"_toComplex",value:function(e){var t=new ds,n=e[Object.keys(e)[0]];return this._extractAtoms(t,n),this._extractSecondary(t,n),this._extractAssemblies(t,n),this._extractMolecules(t,n),this._extractMetadata(t,n),t.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing}),t}},{key:"_extractMetadata",value:function(e,t){var n=e.metadata;n.id=t.entry.id,n.classification=t.struct_keywords.pdbx_keywords;var r=t.database_PDB_rev;n.date=r&&r.date_original?r.date_original:"",n.format="cif",n.title=[],n.title[0]=t.struct.title}},{key:"_extractMolecules",value:function(e,t){var n,r=Es(t.entity.pdbx_description),i=r.length;for(n=0;n<i;n++)this.molecules[n].name=r[n];var o=e.getMolecules();for(n=0;n<i;n++){var a=this.molecules[n];o[n]=new xs(e,a.name,n+1),o[n].residues=a.residues}}},{key:"_extractAtoms",value:function(e,t){var n=t.atom_site;if(!n)throw new As("CIF parsing error: atom_site is not specified!");for(var r=0,i=bs.length;r<i;++r)if(!n[bs[r]])throw new As("CIF parsing error: requires field ".concat(bs[r]," not found!"));for(var a=this.asymDict,s=Es(n.auth_seq_id),u=Es(n.Cartn_x),c=Es(n.Cartn_y),l=Es(n.Cartn_z),f=Es(n.label_atom_id),h=f.length,p=Es(n.group_PDB)||[],d=Es(n.auth_asym_id)||[],m=Es(n.label_asym_id)||[],v=Es(n.id)||[],g=Es(n.pdbx_PDB_ins_code)||[],y=Es(n.label_comp_id)||[],_=Es(n.type_symbol)||[],x=Es(n.B_iso_or_equiv)||[],b=Es(n.occupancy)||[],w=Es(n.pdbx_formal_charge)||[],S=Es(n.label_alt_id)||[],E=Es(n.pdbx_PDB_model_num)||[],T=Es(n.label_entity_id)||[],A=null,M=null,C=0;C<h;++C){if(1===(E[C]||1)){var k=String(d[C]||" ");A&&A.getName()===k||(A=e.getChain(k)||e.addChain(k)),a[String(m[C]||" ")]=k;var R=s[C],P=String(g[C]||" "),L=String(y[C]||"");if(!M||M.getSequence()!==R||M.getICode()!==P){M=A.addResidue(L,R,P);var O=T[C]-1,I=this.molecules[O];I||(this.molecules[O]={name:"",residues:[]},I=this.molecules[O]),I.residues.push(M)}var N=f[C],D=_[C]||Ts(N),F=ms.getByName(D),z=ms.Role[N.trim()],B=new o.Vector3(u[C],c[C],l[C]),j="HETATM"===p[C]||!1,V=v[C]||C,U=x[C]||0,G=b[C]||0,H=String(S[C]||""),W=w[C]||0;M.addAtom(N,F,B,z,j,V,H,G,U,W)}}}},{key:"_extractSecondary",value:function(e,t){t.struct_conf&&this._extractConfs(e,t.struct_conf),t.struct_sheet_range&&this._extractSheets(e,t.struct_sheet_range)}},{key:"_extractSheets",value:function(e,t){var n=this.asymDict;if(t.sheet_id&&t.id&&t.beg_label_seq_id&&t.end_label_seq_id&&t.beg_label_asym_id)for(var r=e._sheets,i=Es(t.sheet_id),o=Es(t.id),a=Es(t.beg_auth_seq_id),s=Es(t.end_auth_seq_id),u=Es(t.beg_label_asym_id),c=Es(t.pdbx_beg_PDB_ins_code)||[],l=Es(t.pdbx_end_PDB_ins_code)||[],f=0,h=o.length;f<h;++f){var p=e.getChain(n[u[f]]),d=E(i[f]),m=a[f],v=s[f],g=c[f]||" ",y=l[f]||" ",_=p.findResidue(m,g),x=p.findResidue(v,y);if(_&&x){for(var b=new ys(d,_[0],x[0],0,null,null),w=p.getResidues(),S=_[1];S<=x[1];++S)w[S]._secondary=b;d.addStrand(b),e.structures.push(b)}}function E(e){for(var t=r.length,n=0;n<t;++n)if(r[n]._name===e)return r[n];return r[t]=new gs(e,0),r[t]}}},{key:"_extractConfs",value:function(e,t){var n=this.asymDict;if(t.conf_type_id&&t.beg_label_seq_id&&t.end_label_seq_id&&t.beg_label_asym_id)for(var r=Es(t.conf_type_id),i=Es(t.beg_auth_seq_id),o=Es(t.pdbx_beg_PDB_ins_code)||[],a=Es(t.end_auth_seq_id),s=Es(t.pdbx_end_PDB_ins_code)||[],u=Es(t.details)||[],c=Es(t.pdbx_PDB_helix_length)||[],l=Es(t.pdbx_PDB_helix_class)||[],f=Es(t.id)||[],h=Es(t.beg_label_asym_id),p=0,d=r.length;p<d;++p){var m=Ss(r[p]);if(m){var v=f[p]||r[p],g=e.getChain(n[h[p]]),y=i[p],_=a[p],x=o[p]||" ",b=s[p]||" ",w=g.findResidue(y,x),S=g.findResidue(_,b);if(w&&S){var E=u[p]||"",T=c[p]||0,A=l[p]||" ",M=void 0;if("helix"===m){var C=e._helices.length;M=new vs(A,w[0],S[0],C,v,E,T),e.addHelix(M),e.structures.push(M)}else"turn"===m?(M=new He(He.Type.TURN,w[0],S[0]),e.structures.push(M)):M=null;if(M)for(var k=g.getResidues(),R=w[1];R<=S[1];++R)k[R]._secondary=M}}}}},{key:"_extractAssemblies",value:function(e,t){var n=this.asymDict,r=t.pdbx_struct_assembly_gen;if(r){var i=Es(r.assembly_id),a=Es(r.oper_expression),s=Es(r.asym_id_list);if(i&&a&&s){var u=function(e){if(!e)return null;var t=Es(e.id),n=e.matrix,r=e.vector;if(!t||!n||!r)return null;for(var i=[],a=0,s=t.length;a<s;++a){for(var u=new o.Matrix4,c=u.elements,l=0;l<3;++l){var f=n[l+1];c[l]=Es(f[1])[a],c[l+4]=Es(f[2])[a],c[l+8]=Es(f[3])[a],c[l+12]=Es(r[l+1])[a]}i[t[a]]=u}return i}(t.pdbx_struct_oper_list);if(u)for(var c=0,l=i.length;c<l;++c){for(var f=new _s(e),h=Ms(a[c],u),p=s[c].split(","),d=0,m=p.length;d<m;++d){var v=p[d].trim();v.length>0&&f.addChain(n[v])}f.matrices=h,e.units.push(f)}}}}}],[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&/^\s*data_/i.test(e)}}]),t}(Ca);Cs.formats=["cif","mmcif"],Cs.extensions=[".cif",".mmcif"];var ks=0,Rs=1,Ps=2,Ls=3,Os=function(){function e(){g(this,e),Ee(this,"_xyz2crs",[]),Ee(this,"_origin",new o.Vector3(0,0,0)),this._header={},this._boxSize=new o.Vector3,this._boxStart=new o.Vector3,this._header.delta={},this._header.extent=[],this._header.nstart=[],this._header.grid=[],this._header.crs2xyz=[],this._header.cellDims=new o.Vector3,this._header.angles=[],this._header.origin=new o.Vector3(0,0,0),this._header.dmin=0,this._header.dmean=0,this._header.dmax=0}return _(e,[{key:"_typedCheck",value:function(){if(i.a.isTypedArray(this._buff))this._buff=this._buff.buffer;else if(!i.a.isArrayBuffer(this._buff))throw new TypeError("Expected ArrayBuffer or TypedArray")}},{key:"_fillHeader",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n))switch(e[n][0]){case ks:this._header[n]=t[e[n][1]][e[n][2]];break;case Ps:this._parseArray(this._header[n],t[e[n][1]],e[n][2]);break;case Rs:this._parseVector(this._header[n],t[e[n][1]],e[n][2]);break;case Ls:this._header[n]=new Uint8Array(t[e[n][1]],4*[e[n][2]],4*[e[n][3]])}}},{key:"_parseVector",value:function(e,t,n){var r=[t[n],t[n+1],t[n+2]];e.x=r[0],e.y=r[1],e.z=r[2]}},{key:"_parseArray",value:function(e,t,n){e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}},{key:"_parseHeader",value:function(e){}},{key:"_setAxisIndices",value:function(){}},{key:"_setOrigins",value:function(){}},{key:"_getAxis",value:function(){var e=this._header,t=e.cellDims.x/e.grid[0],n=e.cellDims.y/e.grid[1],r=e.cellDims.z/e.grid[2],i=c(e.angles,3),a=i[0],s=i[1],u=i[2],l=Math.cos(s),f=(Math.cos(a)-Math.cos(s)*Math.cos(u))/Math.sin(u),h=Math.sqrt(1-l*l-f*f);return[new o.Vector3(t,0,0),new o.Vector3(Math.cos(u)*n,Math.sin(u)*n,0),new o.Vector3(l*r,f*r,h*r)]}},{key:"_getXYZdim",value:function(){return[this._header.extent[this._xyz2crs[0]],this._header.extent[this._xyz2crs[1]],this._header.extent[this._xyz2crs[2]]]}},{key:"_getVolumeInfo",value:function(){var e=i.a.pick(this._header,["dmean","dmin","dmax","sd","delta"]);return e.obtuseAngle=this._header.angles.map((function(e){return Number(e>=Math.PI/2)})),e}},{key:"_setBoxParams",value:function(e,t,n){var r=this,i=0,a=0,s=c(this._header.angles,3),u=s[0],l=s[1];s[2]>=Math.PI/2&&(i+=Math.abs(t.x)),l>=Math.PI/2&&(i+=Math.abs(n.x)),u>=Math.PI/2&&(a+=Math.abs(n.y)),this._boxStart=new o.Vector3(this._origin.x-i,this._origin.y-a,this._origin.z),this._boxSize=new o.Vector3(Math.abs(e.x)+Math.abs(t.x)+Math.abs(n.x),Math.abs(t.y)+Math.abs(n.y),Math.abs(n.z));var f=function(e,t){return Math.abs(e[t])/r._boxSize[t]};this._header.delta.x=f(t,"x"),this._header.delta.y=f(n,"x"),this._header.delta.z=f(n,"y")}},{key:"_getXYZbox",value:function(){return new o.Box3(this._boxStart.clone(),this._boxStart.clone().add(this._boxSize))}},{key:"_toXYZData",value:function(){}},{key:"parse",value:function(e){return this._parseHeader(e),this._setOrigins(),new nn(Float32Array,this._getXYZdim(),this._getXYZbox(),1,this._toXYZData(),this._getVolumeInfo())}}]),e}(),Is={extent:[Ps,"u32",0],type:[ks,"u32",3],nstart:[Ps,"i32",4],grid:[Ps,"u32",7],cellDims:[Rs,"f32",10],angles:[Ps,"f32",13],crs2xyz:[Ps,"i32",16],dmin:[ks,"f32",19],dmax:[ks,"f32",20],dmean:[ks,"f32",21],ispg:[ks,"u32",22],nsymbt:[ks,"u32",23],lksflg:[ks,"u32",24],customData:[Ls,"buffer",25,9],origin:[Rs,"f32",34],map:[Ls,"buffer",52,1],machine:[ks,"u32",53],sd:[ks,"f32",54],nlabel:[ks,"f32",55],label:[Ls,"buffer",56,200]},Ns=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_parseHeader",value:function(e){this._buff=e,this._typedCheck();var t={};t.u32=new Uint32Array(this._buff,0,56),t.i32=new Int32Array(this._buff,0,56),t.f32=new Float32Array(this._buff,0,56),t.buffer=this._buff;var n=this._header;this._fillHeader(Is,t),n.angles.forEach((function(e,t,n){n[t]*=Math.PI/180}))}},{key:"_setAxisIndices",value:function(){var e=this._header;0===e.cellDims.x&&0===e.cellDims.y&&0===e.cellDims.z&&e.cellDims.set(1,1,1);var t=this._header.crs2xyz;0===t[0]&&0===t[1]&&0===t[2]&&(t[0]=1,t[1]=2,t[2]=3);var n=this._xyz2crs;n[t[0]-1]=0,n[t[1]-1]=1,n[t[2]-1]=2}},{key:"_setOrigins",value:function(){var e=this._getAxis(),t=c(e,3),n=t[0],r=t[1],i=t[2];this._setAxisIndices();var o=this._header,a=this._xyz2crs;if(0===o.origin.x&&0===o.origin.y&&0===o.origin.z?(this._origin.addScaledVector(n,o.nstart[a[0]]),this._origin.addScaledVector(r,o.nstart[a[1]]),this._origin.addScaledVector(i,o.nstart[a[2]])):this._origin=o.origin,n.multiplyScalar(o.extent[a[0]]-1),r.multiplyScalar(o.extent[a[1]]-1),i.multiplyScalar(o.extent[a[2]]-1),2!==o.type)throw new Error("CCP4: Unsupported format ".concat(o.type));this._data=new Float32Array(this._buff,1024+o.nsymbt,o.extent[0]*o.extent[1]*o.extent[2]),this._setBoxParams(n,r,i)}},{key:"_toXYZData",value:function(){var e=this._header,t=this._data,n=this._xyz2crs,r=new Float32Array(t.length),i=this._getXYZdim(),o=i[0],a=i[1],s=0,u=[];for(u[2]=0;u[2]<e.extent[2];u[2]++)for(u[1]=0;u[1]<e.extent[1];u[1]++)for(u[0]=0;u[0]<e.extent[0];u[0]++,s++)r[u[n[0]]+o*(u[n[1]]+a*u[n[2]])]=t[s];return r}}]),t}(Os),Ds=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._options.fileType="ccp4",r.model=new Ns,r}return P(t,e),_(t,[{key:"parseSync",value:function(){return this.model.parse(this._data)}}],[{key:"canProbablyParse",value:function(e){return!1}}]),t}(Ca);Ds.formats=["ccp4"],Ds.extensions=[".ccp4",".map",".mrc"],Ds.binary=!0;var Fs=rn.Complex,zs=rn.Element,Bs=rn.Molecule,js=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._complex=null,r._atomsInf=null,r._options.fileType="xyz",r._fileName=n.name,r}return P(t,e),_(t,[{key:"_parseToAtomsInf",value:function(e){var t=e.indexOf("\n"),n=parseInt(e.substring(0,t),10),r=e.indexOf("\n",t+1),i=e.slice(t+1,r).trim();0===i.length&&(i=this._fileName);var o=r+e.substring(r).search(/\S/);this._atomsInf=e.substring(o).split(/[\s,]*\n[\s,]*/),Number.isNaN(n)||this._atomsInf.length-1===n?(this._complex.metadata.format="xyz",this._complex.name=i):this._complex.error={message:"wrong number of atoms"}}},{key:"_parseAtomsInf",value:function(){for(var e=this._complex.addChain("A").addResidue("UNK",1," "),t=0;t<this._atomsInf.length-1;t++){var n=this._atomsInf[t].split(/[\s,]+/);if(4!==n.length){this._complex.error={message:"missed parameters"};break}var r=t+1,i=n[0],a=new o.Vector3(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])),s=zs.getByName(i);e.addAtom(i,s,a,void 0,!0,r," ",1,1,0)}var u=new Bs(this._complex,this._complex.name,1);u.residues=e,this._complex._molecules[0]=u}},{key:"parseSync",value:function(){var e=this._complex=new Fs;if(this._parseToAtomsInf(this._data),this._parseAtomsInf(),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap}),this._complex=null,this._atomsInf=null,e.error)throw new Error(e.error.message);return e}}],[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&/^\s*\d+ *\n[^\n]*\n\s*\w{1,3}\s+-?\d/.test(e)}}]),t}(Ca);Ee(js,"formats",["xyz"]),Ee(js,"extensions",[".xyz"]);var Vs=rn.Complex,Us=rn.Element,Gs=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._options.fileType="pubchem+json",r}return P(t,e),_(t,[{key:"parseSync",value:function(){return this.logger.info("Parsing PubChem JSON file..."),this._toComplex(JSON.parse(this._data))}},{key:"_toComplex",value:function(e){var t=new Vs,n=e.PC_Compounds&&e.PC_Compounds[0];return n&&(this._extractAtoms(t,n),t.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing})),t}},{key:"_extractAtoms",value:function(e,t){var n=t.atoms&&t.atoms.aid,r=n&&t.atoms.element;if(!r||n.length!==r.length)throw new Error("Unable to parse atom elements");r=i.a.fromPairs(i.a.zip(n,r));var a={},s=t.coords&&t.coords[0],u=s&&s.conformers&&s.conformers[0],c=u&&u.x,l=u&&u.y,f=u&&u.z||[];if(!(n=s&&s.aid)||!c||!l)throw new Error("Coordinates are not found in the file");for(var h=e.addChain(" ").addResidue("UNK",1," "),p=0,d=n.length;p<d;++p){var m=n[p],v=Us.ByAtomicNumber[r[m]],g=new o.Vector3(c[p],l[p],f[p]||0);a[m]=h.addAtom(v.name,v,g,void 0,!0,m," ",1,0,0)}var y=t.bonds&&t.bonds.aid1,_=t.bonds&&t.bonds.aid2,x=t.bonds&&t.bonds.order||[];if(y&&_&&y.length===_.length)for(var b=0,w=y.length;b<w;++b)e.addBond(a[y[b]],a[_[b]],x[b]||1,0,!0)}}],[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&"{"===e[0]}}]),t}(Ca);Gs.formats=["pubchem","pubchem+json","pc"],Gs.extensions=[".json"];var Hs=function(){function e(t){g(this,e),this._strings=t.split(/\r?\n|\r/),this._currentStart=0,this._currentStringIndx=0}return _(e,[{key:"setStart",value:function(e){e>=this._strings.length?(this._currentStart=this._strings.length-1,this._currentStringIndx=this._strings.length-1):(this._currentStart=e,this._currentStringIndx=e)}},{key:"getNextString",value:function(){return this._strings[++this._currentStringIndx]}},{key:"getCurrentString",value:function(){return this._strings[this._currentStringIndx]}},{key:"getStringFromStart",value:function(e){return this._currentStringIndx=this._currentStart+e,this._strings[this._currentStart+e]}},{key:"findNextDataItem",value:function(){for(var e=this.getNextString(),t=!1;!i.a.isUndefined(e)&&"$$$$"!==e.trim();){if(e.match(/>\s+<(.*)>/)){t=!0;break}e=this.getNextString()}return t}},{key:"findNextCompoundStart",value:function(){for(var e=this.getCurrentString();!i.a.isUndefined(e)&&"$$$$"!==e.trim();)e=this.getNextString();return this.setStart(++this._currentStringIndx),this.probablyHaveDataToParse()}},{key:"probablyHaveDataToParse",value:function(){return this._currentStringIndx<this._strings.length-2}}]),e}(),Ws=rn.Complex,qs=rn.Element,Ys=rn.Bond,Xs=rn.Molecule,$s=[0,3,2,1,0,-1,-2,-3],Zs=[0,1,2,3,1,1,1,2],Ks=[Ys.BondType.UNKNOWN,Ys.BondType.COVALENT,Ys.BondType.COVALENT,Ys.BondType.COVALENT,Ys.BondType.AROMATIC,Ys.BondType.UNKNOWN,Ys.BondType.AROMATIC,Ys.BondType.AROMATIC],Js=/.*(M\s\sEND).*|.*(^$$$$).*|.*>\s+<(.+)>.*/,Qs=/.*($$$$).*|.*>\s+<(.+)>.*/,eu="sdf",tu="mol",nu=["name","id","title"],ru={name:["PUBCHEM_IUPAC_TRADITIONAL_NAME",/PUBCHEM_(.+)_NAME/,/(.+)name/,/(.+)NAME/],id:["PUBCHEM_COMPOUND_CID","id","ID",/.*CID/,/.*ID/,/.*id/],title:["msg","MSG","message","title","description","desc"]};var iu=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._format="sdf",r._complex=null,r._chain=null,r._residue=null,r._molecules=null,r._metadata={},r._metadata.molecules=[],r._currentMolProps={},r._compoundIndx=-1,r._assemblies=[],r._atomsParsed=0,r._atomsIndexes=[],r}return P(t,e),_(t,[{key:"canProbablyParse",value:function(e){return i.a.isString(e)&&Js.test(e)}},{key:"_parseHeader",value:function(e){var t={};t.name=e.getStringFromStart(0);var n=parseInt(e.getStringFromStart(1).substr(10,6).trim(),10);t.date=n.toString()||"",t.title=e.getStringFromStart(2),this._metadata.molecules.push(t)}},{key:"_parseAtoms",value:function(e,t){var n,r=this._atomsParsed,i=function(e){if(!e)return"A";for(var t=[];e;)t.push(65+e%26),e=Math.trunc(e/26);return t.length>1&&(t.reverse(),t[0]-=1),String.fromCharCode.apply(String,t)}(this._compoundIndx);this._chain=this._complex.getChain(i)||this._complex.addChain(i),this._residue=this._chain.addResidue("UNK",1," ");for(var a=0;a<t;a++){n=e.getNextString(),r++;var s=parseFloat(n.substr(0,10)),u=parseFloat(n.substr(10,10)),c=parseFloat(n.substr(20,10)),l=$s[parseInt(n.substr(36,3),10)],f=new o.Vector3(s,u,c),h=n.substr(31,3).trim().toUpperCase(),p=qs.getByName(h);this._atomsIndexes[h]||(this._atomsIndexes[h]=0),this._atomsIndexes[h]+=1,h+=this._atomsIndexes[h],this._residue.addAtom(h,p,f,void 0,!0,r," ",1,0,l)}}},{key:"_parseBonds",value:function(e,t){for(var n,r=0;r<t;r++){n=e.getNextString();var i=parseInt(n.substr(0,3),10)+this._atomsParsed,o=parseInt(n.substr(3,3),10)+this._atomsParsed,a=parseInt(n.substr(6,3),10);if(i>o){var s=[o,i];i=s[0],o=s[1]}this._complex.addBond(i,o,Zs[a]||1,Ks[a]||Ys.BondType.UNKNOWN,!0)}}},{key:"_parseMOL",value:function(e){this._compoundIndx++,this._parseHeader(e);var t=e.getStringFromStart(3),n=parseInt(t.substr(0,3),10),r=parseInt(t.substr(3,3),10);this._parseAtoms(e,n),this._parseBonds(e,r),this._atomsParsed+=n,this._metadata.molecules[this._compoundIndx]._residues=[],this._metadata.molecules[this._compoundIndx]._residues.push(this._residue)}},{key:"_parseDataItem",value:function(e){for(var t=e.getCurrentString(),n=[],r=e.getNextString();""!==r.trim();)n.push(r),r=e.getNextString();1===n.length&&(n=c(n,1)[0]);this._currentMolProps[t.replace(/[<>]/g,"").trim()]=n}},{key:"_parseCompound",value:function(e){if(this._parseMOL(e),this._format===eu){for(this._currentMolProps={};e.findNextDataItem();)this._parseDataItem(e);if(0!==Object.keys(this._currentMolProps).length){var t=this._metadata.molecules[this._compoundIndx];t.props=this._currentMolProps,this._tryToUpdateMoleculeData(t)}}}},{key:"_fixBondsArray",value:function(){for(var e=this._serialAtomMap,t=this._complex._bonds,n=0;n<t.length;n++){var r=t[n];r._right<r._left&&console.log("_fixBondsArray: Logic error."),r._left=e[r._left]||null,r._right=e[r._right]||null}}},{key:"_buildAssemblies",value:function(){var e=this._complex._chains;if(1===e.length)return this._assemblies;for(var t=0;t<e.length;t++){var n=new St(this._complex),r=new o.Matrix4;n.addMatrix(r),n.addChain(e[t]._name),this._assemblies.push(n)}return this._assemblies}},{key:"_buildMolecules",value:function(){this._complex._molecules=[];for(var e=this._metadata.molecules,t=0;t<e.length;t++){var n=new Xs(this._complex,e[t].name,t+1);n.residues=e[t]._residues,this._complex._molecules[t]=n}return this._complex._molecules}},{key:"_searchTag",value:function(e,t){for(var n=0;n<t.length;n++)if(e instanceof RegExp&&e.test(t[n].tag)||e===t[n].tag)return t[n].data}},{key:"_tryToFind",value:function(e,t){for(var n=0;n<e.length;n++){var r=this._searchTag(e[n],t);if(r)return r}}},{key:"_tryToUpdateMoleculeData",value:function(e){for(var t=!1,n=0;n<nu.length;n++){var r=ru[nu[n]],i=this._tryToFind(r,e.props);i&&(e[nu[n]]=i,t=!0)}return e.name=e.name||e.id,e.name.match(/^\d+$/)&&(e.name="CID: ".concat(e.name)),t}},{key:"_finalizeMetadata",value:function(){var e=this._metadata.molecules,t=this._complex.metadata,n=this._complex;if(1===e.length)n.name=e[0].name,t.title=e[0].title,t.date=e[0].date,t.properties=e[0].props;else if(e.length>1){t.molecules=[];for(var r=0;r<e.length;r++)t.molecules.push({name:e[r].name,date:e[r].date,title:e[r].title,properties:e[r].props})}}},{key:"_finalize",value:function(){for(var e=this._serialAtomMap={},t=this._complex._atoms,n=0;n<t.length;n++){var r=t[n];e[r.serial]=r}this._complex._finalizeBonds(),this._fixBondsArray(),this._finalizeMetadata(),this._buildAssemblies(),this._complex.units=this._complex.units.concat(this._assemblies),this._buildMolecules(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:!1,enableEditing:!1,serialAtomMap:this._serialAtomMap})}},{key:"defineFormat",value:function(e){return Qs.test(e)?eu:tu}},{key:"parseSync",value:function(){var e=this._complex=new Ws,t=new Hs(this._data);this._format=this.defineFormat(this._data),e.metadata.format=this._format;do{this._parseCompound(t)}while(t.findNextCompoundStart());return this._finalize(),e}}]),t}(Ca);iu.formats=["mol","sdf"],iu.extensions=[".mol",".sdf"];var ou={nstart:[Ps,"i16",0],extent:[Ps,"i16",3],grid:[Ps,"i16",6],cellDims:[Rs,"i16",9],angles:[Ps,"i16",12],div:[ks,"i16",15],adder:[ks,"i16",16],scaleFactor:[ks,"i16",17]},au=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"_parseHeader",value:function(e){this._buff=e,this._typedCheck();var t={};if(t.i16=new Int16Array(this._buff),100!==t.i16[18])for(var n=0,r=t.i16.length;n<r;++n){var i=t.i16[n];t.i16[n]=(255&i)<<8|i>>8&255}if(100!==t.i16[18])throw new Error("DSN6: Incorrect format ");var o=this._header;this._fillHeader(ou,t),o.cellDims.multiplyScalar(1/o.scaleFactor),o.angles.forEach((function(e,t,n){n[t]*=Math.PI/180/o.scaleFactor})),o.div/=100}},{key:"_setAxisIndices",value:function(){this._xyz2crs[0]=0,this._xyz2crs[1]=1,this._xyz2crs[2]=2}},{key:"_setOrigins",value:function(){var e=this._header,t=this._getAxis(),n=c(t,3),r=n[0],i=n[1],o=n[2];this._setAxisIndices(),this._origin.addScaledVector(r,e.nstart[0]),this._origin.addScaledVector(i,e.nstart[1]),this._origin.addScaledVector(o,e.nstart[2]),r.multiplyScalar(e.extent[0]),i.multiplyScalar(e.extent[1]),o.multiplyScalar(e.extent[2]),this._setBoxParams(r,i,o)}},{key:"_pointCalculate",value:function(e,t,n,r,i,o,a){var s=this._header;return i<s.extent[0]&&r<s.extent[1]&&n<s.extent[2]?(e[i+s.extent[0]*(r+s.extent[1]*n)]=(t[o.counter]-s.adder)/s.div,++o.counter,!0):(o.counter+=8-a,!1)}},{key:"_blockCalculate",value:function(e,t,n,r,i,o){for(var a=0;a<8;++a)for(var s=8*n+a,u=0;u<8;++u)for(var c=8*r+u,l=!0,f=0;l&&f<8;){var h=8*i+f;l=this._pointCalculate(e,t,s,c,h,o,f),f++}}},{key:"_toXYZData",value:function(){for(var e=this._header,t=new Uint8Array(this._buff),n=new Float32Array(e.extent[0]*e.extent[1]*e.extent[2]),r=new o.Vector3(e.extent[0]/8,e.extent[1]/8,e.extent[2]/8),i={counter:512},a=0;a<r.z;++a)for(var s=0;s<r.y;++s)for(var u=0;u<r.x;++u)this._blockCalculate(n,t,a,s,u,i);return this._calculateInfoParams(n),n}},{key:"_calculateInfoParams",value:function(e){this._header.dmean/=e.length;for(var t=0,n=e[0],r=e[0],i=0;i<e.length;i++)t+=Math.pow(this._header.dmean-e[i],2),e[i]<n&&(n=e[i]),e[i]>r&&(r=e[i]);this._header.sd=Math.sqrt(t/e.length),this._header.dmax=r,this._header.dmin=n}}]),t}(Os),su=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._options.fileType="dsn6",r.model=new au,r}return P(t,e),_(t,[{key:"parseSync",value:function(){return this.model.parse(this._data)}}],[{key:"canParse",value:function(e,t){return!!e&&(e instanceof ArrayBuffer&&Ca.checkDataTypeOptions(t,"dsn6"))}},{key:"canProbablyParse",value:function(e){return!1}}]),t}(Ca);su.formats=["dsn6"],su.extensions=[".dsn6",".omap"],su.binary=!0;var uu=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,e)))._next=-1,n.next(),n}return P(t,e),_(t,[{key:"getNext",value:function(){return this._next}}]),t}(La),cu=rn.Complex,lu=rn.Element,fu=rn.Molecule,hu=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._time=null,r._numAtoms=null,r._residueNumber=null,r._residueName="",r._atomName="",r._atomNumber=null,r._atomPosition=[],r._atomVelocity=[],r._complex=null,r._molecules=[],r._molecule=null,r._options.filetype="gro",r}return P(t,e),_(t,[{key:"canProbablyParse",value:function(e){return i.a.isString(this._data)&&/^\s*[^\n]*\n\s*\d+ *\n\s*\d+[^\n\d]{3}\s*\w+\s*\d+\s*-?\d/.test(e)}},{key:"_parseTitle",value:function(e){var t=this._complex.metadata;t.id=e.readLine().trim(),t.name=t.id.slice(t.id.lastIndexOf("\\")+1,t.id.lastIndexOf(".")),t.format="gro"}},{key:"_parseNumberOfAtoms",value:function(e){if(this._numAtoms=e.readInt(0,e.getNext()),Number.isNaN(this._numAtoms))throw new Error("Line 2 is not representing atom number. Consider checking input file")}},{key:"_parseAtom",value:function(e){this._residueNumber=e.readInt(1,5),this._residueName=e.readString(6,10).trim(),this._atomName=e.readString(11,15).trim(),this._atomNumber=e.readInt(16,20);var t=10*e.readFloat(21,28),n=10*e.readFloat(29,36),r=10*e.readFloat(37,45);if(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))this._complex.error={message:'Atom position is invalid in "'.concat(e.readLine(),'"')};else{var i=lu.getByName(this._atomName[0]);if("Unknown"!==i.fullName){var a=lu.Role[this._atomName],s=this._chain;s||(this._chain=s=this._complex.addChain("A"));var u=this._residue;u&&u.getSequence()===this._residueNumber||(this._residue=u=s.addResidue(this._residueName,this._residueNumber," ")),this._atomPosition=new o.Vector3(t,n,r);u.addAtom(this._atomName,i,this._atomPosition,a,!0,this._atomNumber," ",1,1,0)}else this._complex.error={message:"".concat(this._atomName[0]," hasn't been recognised as an atom name.")}}}},{key:"_finalize",value:function(){var e=new fu(this._complex,this._complex.metadata.name,1);e.residues=this._chain._residues,e._chains=this._chain,this._complex._molecules[0]=e,this._molecules.push(e),this._complex.finalize({needAutoBonding:!0,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"parseSync",value:function(){var e=this._complex=new cu,t=new uu(this._data),n=0;for(this._parseTitle(t),t.next(),this._parseNumberOfAtoms(t),t.next(),n=0;n<this._numAtoms&&!t.end();++n)this._parseAtom(t),t.next();if(n<this._numAtoms&&(this._complex.error={message:"File ended unexpectedly."}),e.error)throw new Error(e.error.message);return this._finalize(),this._atomPosition=null,this._complex=null,this._molecules=null,this._molecule=null,e}}]),t}(Ca);hu.formats=["gro"],hu.extensions=[".gro"];var pu=rn.Complex,du=rn.Element,mu=rn.Bond,vu=rn.Molecule,gu={un:0,1:1,2:2,3:3,ar:1,am:1,nc:0,du:1},yu={un:mu.BondType.UNKNOWN,1:mu.BondType.COVALENT,2:mu.BondType.COVALENT,3:mu.BondType.COVALENT,ar:mu.BondType.AROMATIC,am:mu.BondType.COVALENT,nc:mu.BondType.UNKNOWN,du:mu.BondType.COVALENT},_u=/\d+$/,xu=/\s+/;function bu(e){return e.trim().split(xu)}var wu=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._complex=null,r._chain=null,r._residue=null,r._compoundIndx=-1,r._molecules=[],r._molecule=null,r._currPosIdx=0,r._currStartIdx=0,r._serialAtomMap={},r._options.fileType="mol2",r}return P(t,e),_(t,[{key:"_parseRawStrings",value:function(e){return e.split(/\r?\n|\r/)}},{key:"_toStringFromStart",value:function(e,t){var n=this._currStartIdx+e;this._currPosIdx=n<t.length?n:this._currStartIdx}},{key:"_toHeaderString",value:function(e,t){for(this._toStringFromStart(0,t);this._currPosIdx<t.length;){if(t[this._currPosIdx].match("@<TRIPOS>".concat(e)))return;this._currPosIdx++}this._toStringFromStart(0,t)}},{key:"_toStringFromHeader",value:function(e,t,n){this._toHeaderString(e,n);var r=this._currPosIdx+t;n[this._currPosIdx].match("@<TRIPOS>".concat(e))&&r<n.length&&(this._currPosIdx=r)}},{key:"_setStart",value:function(e,t){e>=t.length?this._currStartIdx=this._currPosIdx=t.length-1:this._currStartIdx=this._currPosIdx=e}},{key:"_probablyHaveDataToParse",value:function(e){return this._currPosIdx<e.length-2}},{key:"_findNextCompoundStart",value:function(e){for(;this._currPosIdx<e.length&&"@<TRIPOS>MOLECULE>"!==e[this._currPosIdx].trim();)this._currPosIdx++;return this._setStart(++this._currPosIdx,e),this._probablyHaveDataToParse(e)}},{key:"_parseMolecule",value:function(e){this._toHeaderString("MOLECULE",e);var t=this._complex.metadata;t.name=e[++this._currPosIdx],t.format="mol2",this._molecule={_index:"",_chains:[]},this._molecule._index=this._compoundIndx+1,this._molecules.push(this._molecule)}},{key:"_parseAtoms",value:function(e,t){this._toHeaderString("ATOM",t);for(var n=0;n<e;n++){var r=bu(t[++this._currPosIdx]);if(r.length<6)throw new Error("MOL2 parsing error: Not enough information to create atom!");var i=parseInt(r[0],10),a=r[1],s=parseFloat(r[2]),u=parseFloat(r[3]),c=parseFloat(r[4]),l=r[5].split(".")[0].toUpperCase(),f=0;r.length>=9&&(f=parseFloat(r[8])||0);var h=this._chain;if(h||(this._chain=h=this._complex.getChain("A")||this._complex.addChain("A"),this._residue=null),this._setResidue(r)){var p=du.getByName(l),d=du.Role[a],m=new o.Vector3(s,u,c);this._residue.addAtom(a,p,m,d,!1,i," ",1,0,f)}}}},{key:"_setResidue",value:function(e){var t=1,n="UNK";if(e.length>=7&&(t=parseInt(e[6],10)),e.length>=8&&"<0>"!==e[7]&&(n=e[7].replace(_u,"")),this.settings.now.nowater&&("HOH"===n||"WAT"===n))return!1;var r=this._residue,i=this._chain;return r&&r.getSequence()===t||(this._residue=i.addResidue(n,t,"A")),!0}},{key:"_parseBonds",value:function(e,t){this._toHeaderString("BOND",t);for(var n=0;n<e;n++){var r=bu(t[++this._currPosIdx]);if(r.length<3)throw new Error("MOL2 parsing error: Missing information about bonds!");var i=parseInt(r[1],10),o=parseInt(r[2],10),a=r[3];if(i>o){var s=[o,i];i=s[0],o=s[1]}this._complex.addBond(i,o,gu[a]||0,yu[a]||mu.BondType.UNKNOWN,!0)}}},{key:"_fixSerialAtoms",value:function(){for(var e=this._complex._atoms,t=0;t<e.length;t++){var n=e[t];this._serialAtomMap[n.serial]=n}}},{key:"_fixBondsArray",value:function(){var e=this._serialAtomMap,t=this._complex;if(0===Object.keys(e).length)throw new Error("MOL2 parsing error: Missing atom information!");for(var n=t._bonds,r=0;r<n.length;r++){var i=n[r];i._left=e[i._left]||null,i._right=e[i._right]||null}}},{key:"_finalizeMolecules",value:function(){var e=this._complex._chains[0];this._complex._molecules=[];for(var t=0;t<this._molecules.length;t++){var n=this._molecules[t],r=e._residues,i=new vu(this._complex,n._name,t+1);i.residues=r,this._complex._molecules[t]=i}}},{key:"_finalize",value:function(){this._complex._finalizeBonds(),this._fixSerialAtoms(),this._fixBondsArray(),this._finalizeMolecules(),this._complex.finalize({needAutoBonding:!1,detectAromaticLoops:this.settings.now.aromatic,enableEditing:this.settings.now.editing,serialAtomMap:this._serialAtomMap})}},{key:"_parseCompound",value:function(e){this._compoundIndx++,this._parseMolecule(e),this._toStringFromHeader("MOLECULE",2,e);var t=e[this._currPosIdx].trim().split(xu),n=t[0],r=t[1];this._parseAtoms(n,e),this._parseBonds(r,e)}},{key:"parseSync",value:function(){var e=this._complex=new pu,t=this._parseRawStrings(this._data);do{this._parseCompound(t)}while(this._findNextCompoundStart(t));return this._finalize(),e}}]),t}(Ca);wu.formats=["mol2"],wu.extensions=[".mol2",".ml2",".sy2"];var Su=new Ma([Ua,Cs,ls,js,$a,Gs,iu,Ds,su,hu,wu]),Eu=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g(this,t),C(this,k(t).call(this,e,["formats"]))}return P(t,e),_(t,[{key:"find",value:function(e){var t=[];return e.format&&(t=this._dict.formats[e.format.toLowerCase()]||[]),In(t)}}]),t}(Dn),Tu=function(){function e(t,n){g(this,e),this._source=t,this._options=n||{},this._abort=!1}return _(e,[{key:"exportSync",value:function(){throw new Error("Exporting to this source is not implemented")}},{key:"export",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){try{return e._abort?n(new Error("Export aborted")):t(e.exportSync())}catch(r){return n(r)}}))}))}},{key:"abort",value:function(){this._abort=!0}}]),e}();Fn(Tu.prototype);var Au=function(){function e(){g(this,e),this._resultArray=[],this._currentStr=-1,this._tag=null,this._fixedNumeration=!1,this._numeration=!1,this._tagStrNum=0}return _(e,[{key:"getResult",value:function(){return this.writeString("\n",81,81),this._resultArray.join("")}},{key:"_currentStrLength",value:function(){var e=this._resultArray[this._currentStr];return e?e.length:0}},{key:"newTag",value:function(e,t){this._tag=e||null,i.a.isUndefined(t)?(this._numeration=!1,this._fixedNumeration=!1,this._tagStrNum=0):i.a.isNumber(t)?(this._tagStrNum=t,this._numeration=!0,this._fixedNumeration=!0):i.a.isBoolean(t)&&(this._tagStrNum=0,this._numeration=t,this._fixedNumeration=!1)}},{key:"newString",value:function(e){this.writeString("\n",81,81),this._currentStr++,this._resultArray.push(""),e?this.writeString(e,1,6):this._tag&&this.writeString(this._tag,1,6),this._numeration&&(this._fixedNumeration||this._tagStrNum++,1!==this._tagStrNum&&this.writeString(this._tagStrNum.toString(),10,8))}},{key:"writeEntireString",value:function(e,t,n){t||(t=81);for(var r=0;r<e.length;r++)this._currentStrLength()===t&&r!==e.length-1&&(this.newString(),n&&this.writeString(n.tag,n.begin,n.end)),"\n"===e[r]?this.newString():this.writeString(e[r])}},{key:"writeString",value:function(e,t,n){var r,o=this._resultArray[this._currentStr],a=o?o.length:0;if(!i.a.isUndefined(e)){i.a.isNumber(t)||(t=a+1),i.a.isNumber(n)||(n=a+e.length);var s=t<n?n:t,u=t<n?t:n;if((r=i.a.isString(e)?e:e.toString()).length>Math.abs(t-n)+1&&(r=r.substr(0,Math.abs(t-n+1))),u>a+1)this._resultArray[this._currentStr]+=" ".repeat(u-a-1);else if(u<=a){var c=this._resultArray[this._currentStr];this._resultArray[this._currentStr]=c.slice(0,u-1)}if(n<t)r=" ".repeat(t-n+1-r.length)+r;11===u&&this._numeration&&1!==this._tagStrNum&&(r=" ".concat(r)),this._resultArray[this._currentStr]+=r,s>(o=this._resultArray[this._currentStr]).length&&(this._resultArray[this._currentStr]+=" ".repeat(s-o.length))}}},{key:"writeBondsArray",value:function(e,t){for(var n=this._getSubArrays(e,4),r=0;r<n.length;r++){this.newString(),this.writeString(t.serial,11,7);for(var i=0;i<n[r].length;i++){var o=n[r][i]._left.serial===t.serial?n[r][i]._right.serial:n[r][i]._left.serial;this.writeString(o,16+5*i,12+5*i)}}}},{key:"_getSubArrays",value:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},{key:"writeMatrix",value:function(e,t,n){for(var r=0;r<3;r++){this.newString(),this.writeString(n,14,18),this.writeString((r+1).toString(),19,19),this.writeString(t.toString(),23,20);for(var i=0;i<3;i++){var o=parseFloat(e.elements[4*r+i]).toFixed(6);this.writeString(o.toString(),33+10*i,24+10*i)}var a=parseFloat(e.elements[4*r+3]).toFixed(5);this.writeString(a.toString(),68,55)}}},{key:"writeMatrices",value:function(e,t){if(e)for(var n=new o.Matrix4,r=0;r<e.length;r++)n.copy(e[r]).transpose(),this.writeMatrix(n,r+1,t)}}]),e}(),Mu=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._tags=["HEADER","TITLE","COMPND","REMARK","HELIX","SHEET","ATOM and HETATM","CONECT"],r._result=null,r._tagExtractors={HEADER:r._extractHEADER,TITLE:r._extractTITLE,"ATOM and HETATM":r._extractATOM,CONECT:r._extractCONECT,COMPND:r._extractCOMPND,REMARK:r._extractREMARK,HELIX:r._extractHELIX,SHEET:r._extractSHEET},r._stringForRemark350="COORDINATES FOR A COMPLETE MULTIMER REPRESENTING THE KNOWN\nBIOLOGICALLY SIGNIFICANT OLIGOMERIZATION STATE OF THE\nMOLECULE CAN BE GENERATED BY APPLYING BIOMT TRANSFORMATIONS\nGIVEN BELOW.  BOTH NON-CRYSTALLOGRAPHIC AND\nCRYSTALLOGRAPHIC OPERATIONS ARE GIVEN.",r._stringForRemark290="CRYSTALLOGRAPHIC SYMMETRY TRANSFORMATIONS\nTHE FOLLOWING TRANSFORMATIONS OPERATE ON THE ATOM/HETATM\nRECORDS IN THIS ENTRY TO PRODUCE CRYSTALLOGRAPHICALLY\nRELATED MOLECULES.",r}return P(t,e),_(t,[{key:"exportSync",value:function(){var e=new Au;if(!this._source)return this._result;for(var t=0;t<this._tags.length;t++){var n=this._tags[t],r=this._tagExtractors[n];i.a.isFunction(r)&&r.call(this,e)}return this._result=e.getResult(),this._result}},{key:"_extractHEADER",value:function(e){if(this._source.metadata){var t=this._source.metadata;e.newTag("HEADER"),e.newString(),t.classification&&e.writeString(t.classification,11,50),t.date&&e.writeString(t.date,51,59),t.id&&e.writeString(t.id,63,66)}}},{key:"_extractTITLE",value:function(e){if(this._source.metadata){var t=this._source.metadata;if(t.title){e.newTag("TITLE",!0);for(var n=0;n<t.title.length;n++)e.newString(),e.writeString(t.title[n],11,80)}}}},{key:"_extractCONECT",value:function(e){if(this._source._atoms){var t=this._source._atoms;e.newTag("CONECT");for(var n=0;n<t.length;n++){var r=t[n].bonds.filter((function(e){return e._fixed}));0!==r.length&&e.writeBondsArray(r.reverse(),t[n])}}}},{key:"_extractSHEET",value:function(e){if(this._source._sheets){e.newTag("SHEET");for(var t=this._source._sheets,n=0;n<t.length;n++)if(t[n]._strands)for(var r=t[n]._strands,i=0;i<r.length;i++)e.newString(),e.writeString(i+1,10,8),e.writeString(t[n]._name,14,12),e.writeString(r.length,16,15),e.writeString(r[i].init._type._name,18,20),e.writeString(r[i].init._chain._name,22,22),e.writeString(r[i].init._sequence,26,23),e.writeString(r[i].init._icode,27,27),e.writeString(r[i].term._type._name,29,31),e.writeString(r[i].init._chain._name,33,33),e.writeString(r[i].term._sequence,37,34),e.writeString(r[i].term._icode,38,38),e.writeString(r[i].sense,40,39)}}},{key:"_extractHELIX",value:function(e){if(this._source._helices){e.newTag("HELIX");for(var t=this._source._helices,n=0;n<t.length;n++){var r=t[n],o=i.a.invert(Xe);e.newString(),e.writeString(r.serial,10,8),e.writeString(r.name,14,12),e.writeString(r.init._type._name,16,18),e.writeString(r.init._chain._name,20,20),e.writeString(r.init._sequence,25,22),e.writeString(r.init._icode,26,26),e.writeString(r.term._type._name,28,30),e.writeString(r.term._chain._name,32,32),e.writeString(r.term._sequence,37,34),e.writeString(r.term._icode,38,38),e.writeString(o[r.type],40,39),e.writeString(r.comment,41,70),e.writeString(r.length,76,72)}}}},{key:"_extractATOM",value:function(e){if(this._source._atoms)for(var t=this._source._atoms,n=0;n<t.length;n++){var r=t[n].het?"HETATM":"ATOM";e.newString(r);var i=t[n].element.name.length>1||t[n].name.length>3?13:14;e.writeString(t[n].serial,11,7),e.writeString(t[n].name,i,16),e.writeString(String.fromCharCode(t[n].location),17,17),e.writeString(t[n].residue._type._name,20,18),e.writeString(t[n].residue._chain._name,22,22),e.writeString(t[n].residue._sequence,26,23),e.writeString(t[n].residue._icode,27,27),e.writeString(t[n].position.x.toFixed(3),38,31),e.writeString(t[n].position.y.toFixed(3),46,39),e.writeString(t[n].position.z.toFixed(3),54,47),e.writeString(t[n].occupancy.toFixed(2),60,55),e.writeString(t[n].temperature.toFixed(2),66,61),e.writeString(t[n].element.name,78,77),t[n].charge&&e.writeString(t[n].charge,79,80)}}},{key:"_extractCOMPND",value:function(e){if(this._source._molecules){var t=this._source._molecules;e.newTag("COMPND",!0);for(var n=0;n<t.length;n++){var r=this._getMoleculeChains(t[n]);e.newString(),e.writeString("MOL_ID: ".concat(t[n].index,";"),11,80),e.newString(),e.writeString("MOLECULE: ".concat(t[n].name,";"),11,80),e.newString(),e.writeString("CHAIN: ",11,18);var i="".concat(r.join(", "),";");e.writeEntireString(i,81)}}}},{key:"_extractREMARK",value:function(e){this._Remark290(e),this._Remark350(e)}},{key:"_Remark290",value:function(e){if(this._source.symmetry&&0!==this._source.symmetry.length){var t=this._source.symmetry;e.newTag("REMARK",290),e.newString(),e.newString(),e.writeEntireString(this._stringForRemark290),e.writeMatrices(t,"SMTRY"),e.newString(),e.newString(),e.writeString("REMARK: NULL",11,80)}}},{key:"_Remark350",value:function(e){if(this._source.units){var t=this._source.units,n=0;e.newTag("REMARK",350),e.newString(),e.newString(),e.writeEntireString(this._stringForRemark350);for(var r=t.filter((function(e){return e instanceof St})),i=0;i<r.length;i++){e.newString(),e.newString(),n++,e.writeString("BIOMOLECULE: ".concat(n),11,80);var o=r[i].chains.join(", ");e.newString(),e.writeString("APPLY THE FOLLOWING TO CHAINS: "),e.writeEntireString(o,69,{tag:"AND CHAINS: ",begin:31,end:42});var a=r[i].matrices;e.writeMatrices(a,"BIOMT")}}}},{key:"_getMoleculeChains",value:function(e){var t=e.residues.map((function(e){return e._chain._name}));return t.filter((function(e,n){return t.indexOf(e)===n}))}}]),t}(Tu);Mu.formats=["pdb"],Mu.SourceClass=en;function Cu(e,t,n,r){n[r]=e[t],n[r+1]=e[t+1],n[r+2]=e[t+2]}function ku(e,t,n,r,i){n[r]=e[t],n[r+1]=e[t+1],n[r+2]=e[t+2],n[r+3]=i}var Ru=new o.Vector4;function Pu(e,t,n,r,i){Ru.set(e[t],e[t+1],e[t+2],i.w),Ru.applyMatrix4(i.matrix),n[r]=Ru.x,n[r+1]=Ru.y,n[r+2]=Ru.z}function Lu(e,t,n,r,i){if(!((t.array.length-t.start)/t.stride<n||(e.array.length-e.start)/e.stride<n))if(e.stride===t.stride)t.array.set(e.array,t.start);else for(var o=t.start,a=e.start,s=0;s<n;++s,o+=t.stride,a+=e.stride)r(e.array,a,t.array,o,i)}var Ou=function(){function e(){g(this,e),this.positions=null,this.normals=null,this.colors=null,this.indices=null,this.lastPos=0,this.lastNorm=0,this.lastCol=0,this.lastIdx=0}return _(e,[{key:"init",value:function(e,t){this.positions=new Float32Array(3*e),this.normals=new Float32Array(3*e),this.colors=new Float32Array(4*e),this.indices=new Int32Array(t)}},{key:"setPositions",value:function(e,t,n,r){Lu({array:e,start:t,stride:r},{array:this.positions,start:this.lastPos,stride:3},n,Cu),this.lastPos+=3*n}},{key:"setTransformedPositions",value:function(e,t,n,r,i){for(var o=this.lastPos,a=t,s={matrix:i,w:1},u=0;u<n;++u,a+=r,o+=3)Pu(e,a,this.positions,o,s);this.lastPos+=3*n}},{key:"setNormals",value:function(e,t,n,r){Lu({array:e,start:t,stride:r},{array:this.normals,start:this.lastNorm,stride:3},n,Cu),this.lastNorm+=3*n}},{key:"setTransformedNormals",value:function(e,t,n,r,i){for(var o=this.lastNorm,a=t,s={matrix:i,w:0},u=0;u<n;++u,a+=r,o+=3)Pu(e,a,this.normals,o,s);this.lastNorm+=3*n}},{key:"setColors",value:function(e,t,n,r){Lu({array:e,start:t,stride:r},{array:this.colors,start:this.lastCol,stride:4},n,ku,1),this.lastCol+=4*n}},{key:"setIndices",value:function(e,t,n){this.indices.set(e,this.lastIdx),this.lastIdx+=n}},{key:"setShiftedIndices",value:function(e,t,n){var r=e.map((function(e){return e+n}));this.setIndices(r,0,t)}},{key:"getVerticesNumber",value:function(){return this.lastPos/3}},{key:"addInstance",value:function(e,t){var n=this.getVerticesNumber();this.setShiftedIndices(t.indices,t.indices.length,n);var r=t.itemSize;this.setTransformedPositions(t.positions,0,t.vertsCount,r.position,e),this.setTransformedNormals(t.normals,0,t.vertsCount,r.normal,e),this.setColors(t.colors,0,t.vertsCount,r.color)}}]),e}(),Iu=function(){function e(){g(this,e),this.positions=null,this.normals=null,this.colors=null,this.indices=null,this.vertsCount=0,this.itemSize=null}return _(e,[{key:"init",value:function(e,t){var n=e.attributes;this.itemSize={position:n.position.itemSize,normal:n.normal.itemSize,color:n.color.itemSize}}}]),e}(),Nu=function(e){function t(){return g(this,t),C(this,k(t).apply(this,arguments))}return P(t,e),_(t,[{key:"init",value:function(e,n){Ke(k(t.prototype),"init",this).call(this,e,n);var r=e.attributes,i=r.position,o=r.normal,a=e.index;this.vertsCount=i.count,this.positions=i.array,this.normals=o.array,this.colors=new Float32Array(this.vertsCount*this.itemSize.color),this.indices=a.array}},{key:"setColors",value:function(e){for(var t=0,n=0,r=this.colors.length,i=this.itemSize.color;n<r;n+=i)this.colors[t++]=e.r,this.colors[t++]=e.g,this.colors[t++]=e.b}}]),t}(Iu),Du=function(e){function t(){var e;return g(this,t),(e=C(this,k(t).call(this)))._cutRawStart=0,e._cutRawEnd=0,e._facesPerSlice=0,e}return P(t,e),_(t,[{key:"init",value:function(e,n){Ke(k(t.prototype),"init",this).call(this,e,n);var r=e.attributes.position,i=e.index;this.vertsCount=r.count+n.addPerCylinder,this._facesPerSlice=n.addPerCylinder,this.positions=new Float32Array(this.vertsCount*r.itemSize),this.normals=new Float32Array(this.vertsCount*this.itemSize.normal),this.colors=new Float32Array(this.vertsCount*this.itemSize.color),this._extendVertices(e,n),this.indices=new Uint32Array(i.count),this._extendIndices(e,n)}},{key:"_extendVertices",value:function(e,t){var n=e.attributes.position,r=e.attributes.normal,i=e.getGeoParams();this._cutRawStart=1*i.radialSegments,this._cutRawEnd=this._cutRawStart+t.addPerCylinder;var o=n.array.slice(0,this._cutRawEnd*n.itemSize);this.positions.set(o,0),o=r.array.slice(0,this._cutRawEnd*r.itemSize),this.normals.set(o,0);var a=n.array.slice(this._cutRawStart*n.itemSize,n.array.length);this.positions.set(a,this._cutRawEnd*n.itemSize),a=r.array.slice(this._cutRawStart*r.itemSize,r.array.length),this.normals.set(a,this._cutRawEnd*r.itemSize)}},{key:"_extendIndices",value:function(e,t){var n=e.index,r=6*t.addPerCylinder,i=t.addPerCylinder,o=n.array.slice(r,n.count);o=o.map((function(e){return e+i})),this.indices.set(n.array,0),this.indices.set(o,r)}},{key:"_setColorRange",value:function(e,t,n,r){for(var i=r.length,o=e;o<t;o+=i)n.set(r,o)}},{key:"setColors",value:function(e,t){var n=this.itemSize.color,r=this._cutRawEnd*n,i=2*r;if(this._setColorRange(0,r,this.colors,e.toArray()),this._setColorRange(r,i,this.colors,t.toArray()),i<this.colors.length){var o=(this._facesPerSlice+1)*n,a=i+o;this._setColorRange(i,a,this.colors,t.toArray());var s=a+o;this._setColorRange(a,s,this.colors,e.toArray())}}}]),t}(Iu),Fu=function(){function e(){g(this,e),this._materials=[],this._models=[]}return _(e,[{key:"process",value:function(e){this._extractModelsAndMaterials(e);var t=this._flattenModels();return{name:e.name,models:t,materials:this._materials}}},{key:"_extractModelsAndMaterials",value:function(e){var t=this,n=new o.Layers;n.set(Cn.LAYERS.DEFAULT),n.enable(Cn.LAYERS.TRANSPARENT),e.traverse((function(e){e instanceof o.Mesh&&e.layers.test(n)&&t.checkExportAbility(e)&&("InstancedBufferGeometry"===e.geometry.type?t._collectInstancedGeoInfo(e):t._collectGeoInfo(e))}))}},{key:"_reworkIndices",value:function(e){for(var t=2;t<e.length;t+=3)e[t]*=-1,e[t]--}},{key:"_flattenModels",value:function(){var e=0;function t(t){return t+e}for(var n=[],r=0,i=this._models.length;r<i;r++){var o=this._models[r],a=[],s=[],u=[],c=[];e=0;for(var l=0;l<o.length;l++){var f=o[l];a.push(f.indices.map(t)),e+=f.getVerticesNumber(),s.push(f.positions),u.push(f.normals),c.push(f.colors)}a=Q.mergeTypedArraysUnsafe(a),this._reworkIndices(a),s=Q.mergeTypedArraysUnsafe(s),u=Q.mergeTypedArraysUnsafe(u),c=Q.mergeTypedArraysUnsafe(c),n.push({indices:a,positions:s,normals:u,colors:c,verticesCount:e})}return n}},{key:"checkExportAbility",value:function(e){return 0!==e.geometry.attributes.position.count&&(e instanceof Qr?(j.warn("Currently we cannot export 'sprites' modes, like BS, WV, LC. Please turn of settings 'zSprites' and try again"),!1):!(e instanceof si)||(j.warn("Currently we cannot export Lines mode"),!1))}},{key:"_collectGeoInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,o=n.normal,a=t.index,s=e.matrix,u=new Ou,c=r.count;u.init(c,a.count),s.isIdentity()?(u.setPositions(r.array,0,c,r.itemSize),u.setNormals(o.array,0,c,o.itemSize)):(u.setTransformedPositions(r.array,0,c,r.itemSize,s),u.setTransformedNormals(o.array,0,c,o.itemSize,s)),u.setColors(i.array,0,c,i.itemSize),u.setIndices(a.array,0,a.count);var l=this._collectMaterialInfo(e);this._addToPool(u,l)}},{key:"_collectSpheresInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,a=t.index,s=e.matrix,u=new Ou,c=e.geometry.maxInstancedCount,l=r.count,f=a.count;u.init(c*l,c*f);var h=new Nu;h.init(e.geometry);for(var p=new o.Matrix4,d=new o.Matrix4,m=new o.Color,v=0;v<c;++v){var g=v*i.itemSize;m.fromArray(i.array,g),h.setColors(m),this._getSphereInstanceMatrix(e.geometry,v,p),d.multiplyMatrices(s,p),u.addInstance(d,h)}var y=this._collectMaterialInfo(e);this._addToPool(u,y)}},{key:"_collectCylindersInfo",value:function(e){var t=e.geometry,n=t.attributes,r=n.position,i=n.color,a=n.color2,s=t.index,u=e.matrix,c=new Ou,l=e.geometry.maxInstancedCount,f=new Nu;f.init(e.geometry);var h=this._gatherCylindersColoringInfo(e.geometry),p=null;h.needToSplit>0&&(p=new Du).init(e.geometry,h);var d=h.addPerCylinder*h.needToSplit,m=r.count,v=s.count;c.init(l*m+d,l*v);for(var g=new o.Matrix4,y=new o.Matrix4,_=new o.Color,x=new o.Color,b={},w=0;w<l;++w){var S=w*i.itemSize;h.is2Colored[w]?(_.fromArray(a.array,S),x.fromArray(i.array,S),p&&(p.setColors(_,x),b=p)):(_.fromArray(i.array,S),f.setColors(_),b=f),this._getCylinderInstanceMatrix(e.geometry,w,g),y.multiplyMatrices(u,g),c.addInstance(y,b)}var E=this._collectMaterialInfo(e);this._addToPool(c,E)}},{key:"_addToPool",value:function(e,t){var n=this._checkExistingMaterial(t);n<0?(this._models.push([e]),this._materials.push(t)):this._models[n].push(e)}},{key:"_checkExistingMaterial",value:function(e){return i.a.findIndex(this._materials,(function(t){return i.a.isEqual(t,e)}))}},{key:"_gatherCylindersColoringInfo",value:function(e){for(var t=e.maxInstancedCount,n=e.attributes.color.array,r=e.attributes.color2.array,i=e.attributes.color.itemSize,o=new Array(t),a=0,s=0,u=0;u<t;u++,s+=i){var c=Math.abs(n[s]-r[s])>1e-7||Math.abs(n[s+1]-r[s+1])>1e-7||Math.abs(n[s+2]-r[s+2])>1e-7;o[u]=c,a+=c}return{is2Colored:o,needToSplit:a,addPerCylinder:e.getGeoParams().radialSegments}}},{key:"_collectInstancedGeoInfo",value:function(e){e.geometry instanceof Un?this._collectSpheresInfo(e):e.geometry instanceof ir&&this._collectCylindersInfo(e)}},{key:"_collectMaterialInfo",value:function(e){var t=e.material.uberOptions;return{diffuse:t.diffuse.toArray(),opacity:t.opacity,shininess:t.shininess,specular:t.specular.toArray()}}},{key:"_getCylinderInstanceMatrix",value:function(e,t,n){var r=e.attributes.matVector1.array,i=e.attributes.matVector2.array,o=e.attributes.matVector3.array,a=4*t;n.set(r[a],r[a+1],r[a+2],r[a+3],i[a],i[a+1],i[a+2],i[a+3],o[a],o[a+1],o[a+2],o[a+3],0,0,0,1)}},{key:"_getSphereInstanceMatrix",value:function(e,t,n){var r=e.attributes.offset,i=t*r.itemSize,o=r.array[i],a=r.array[i+1],s=r.array[i+2],u=r.array[i+3];n.set(u,0,0,o,0,u,0,a,0,0,u,s,0,0,0,1)}}]),e}(),zu=function(){function e(){g(this,e),this._resultArray=[],this._info=null}return _(e,[{key:"getResult",value:function(e){return this._info=e,this._resultArray.push(this._writeHeader()),this._resultArray.push(this._writeDefinitions()),this._resultArray.push(this._writeObjects(e.models,e.materials)),this._resultArray.push(this._writeRelations()),this._resultArray.push(this._writeConnections()),this._info=null,this._resultArray.join("")}},{key:"_writeHeader",value:function(){var e=new Date,t="Miew FBX Exporter v".concat(this._info.version);return"; FBX 6.1.0 project file\n; Created by ".concat(t," Copyright (c) 2015-2020 EPAM Systems, Inc.\n; For support please contact miew@epam.com\n; ----------------------------------------------------\n\nFBXHeaderExtension:  {\n  FBXHeaderVersion: ").concat(1003,"\n  FBXVersion: ").concat(6100,"\n  CreationTimeStamp:  {\n    Version: ").concat(1e3,"\n    Year: ").concat(e.getFullYear(),"\n    Month: ").concat(e.getMonth()+1," \n    Day: ").concat(e.getDate(),"\n    Hour: ").concat(e.getHours(),"\n    Minute: ").concat(e.getMinutes(),"\n    Second: ").concat(e.getSeconds(),"\n    Millisecond: ").concat(e.getMilliseconds(),'\n  }\n  Creator: "').concat(t,'"\n  OtherFlags:  {\n    FlagPLE: 0\n  }\n}\nCreationTime: "').concat(e,'"\nCreator: "').concat(t,'"  \n')}},{key:"_writeDefinitions",value:function(){return"\n; Object definitions\n;------------------------------------------------------------------\n\n".concat('\nDefinitions:  {\n  Version: 100\n  Count: 3\n  ObjectType: "Model" {\n    Count: 1\n  }\n  ObjectType: "Geometry" {\n    Count: 1\n  }\n  ObjectType: "Material" {\n    Count: 1\n  }\n  ObjectType: "Pose" {\n    Count: 1\n  }\n  ObjectType: "GlobalSettings" {\n    Count: 1\n  }\n} ',"\n")}},{key:"_models",value:function(){for(var e="",t=this._info.models,n=0;n<t.length;++n){var r=t[n],i=r.verticesCount;e+='\n  Model: "Model::'.concat(this._info.name,"_").concat(n,'", "Mesh" {\n    Version: ').concat(232," \n    ").concat('Properties60: {\n      Property: "QuaternionInterpolate", "bool", "",0\n      Property: "Visibility", "Visibility", "A",1\n      Property: "Lcl Translation", "Lcl Translation", "A",0.000000000000000,0.000000000000000,-1789.238037109375000\n      Property: "Lcl Rotation", "Lcl Rotation", "A",0.000009334667643,-0.000000000000000,0.000000000000000\n      Property: "Lcl Scaling", "Lcl Scaling", "A",1.000000000000000,1.000000000000000,1.000000000000000\n      Property: "RotationOffset", "Vector3D", "",0,0,0\n      Property: "RotationPivot", "Vector3D", "",0,0,0\n      Property: "ScalingOffset", "Vector3D", "",0,0,0\n      Property: "ScalingPivot", "Vector3D", "",0,0,0\n      Property: "TranslationActive", "bool", "",0\n      Property: "TranslationMin", "Vector3D", "",0,0,0\n      Property: "TranslationMax", "Vector3D", "",0,0,0\n      Property: "TranslationMinX", "bool", "",0\n      Property: "TranslationMinY", "bool", "",0\n      Property: "TranslationMinZ", "bool", "",0\n      Property: "TranslationMaxX", "bool", "",0\n      Property: "TranslationMaxY", "bool", "",0\n      Property: "TranslationMaxZ", "bool", "",0\n      Property: "RotationOrder", "enum", "",0\n      Property: "RotationSpaceForLimitOnly", "bool", "",0\n      Property: "AxisLen", "double", "",10\n      Property: "PreRotation", "Vector3D", "",0,0,0\n      Property: "PostRotation", "Vector3D", "",0,0,0\n      Property: "RotationActive", "bool", "",0\n      Property: "RotationMin", "Vector3D", "",0,0,0\n      Property: "RotationMax", "Vector3D", "",0,0,0\n      Property: "RotationMinX", "bool", "",0\n      Property: "RotationMinY", "bool", "",0\n      Property: "RotationMinZ", "bool", "",0\n      Property: "RotationMaxX", "bool", "",0\n      Property: "RotationMaxY", "bool", "",0\n      Property: "RotationMaxZ", "bool", "",0\n      Property: "RotationStiffnessX", "double", "",0\n      Property: "RotationStiffnessY", "double", "",0\n      Property: "RotationStiffnessZ", "double", "",0\n      Property: "MinDampRangeX", "double", "",0\n      Property: "MinDampRangeY", "double", "",0\n      Property: "MinDampRangeZ", "double", "",0\n      Property: "MaxDampRangeX", "double", "",0\n      Property: "MaxDampRangeY", "double", "",0\n      Property: "MaxDampRangeZ", "double", "",0\n      Property: "MinDampStrengthX", "double", "",0\n      Property: "MinDampStrengthY", "double", "",0\n      Property: "MinDampStrengthZ", "double", "",0\n      Property: "MaxDampStrengthX", "double", "",0\n      Property: "MaxDampStrengthY", "double", "",0\n      Property: "MaxDampStrengthZ", "double", "",0\n      Property: "PreferedAngleX", "double", "",0\n      Property: "PreferedAngleY", "double", "",0\n      Property: "PreferedAngleZ", "double", "",0\n      Property: "InheritType", "enum", "",0\n      Property: "ScalingActive", "bool", "",0\n      Property: "ScalingMin", "Vector3D", "",1,1,1\n      Property: "ScalingMax", "Vector3D", "",1,1,1\n      Property: "ScalingMinX", "bool", "",0\n      Property: "ScalingMinY", "bool", "",0\n      Property: "ScalingMinZ", "bool", "",0\n      Property: "ScalingMaxX", "bool", "",0\n      Property: "ScalingMaxY", "bool", "",0\n      Property: "ScalingMaxZ", "bool", "",0\n      Property: "GeometricTranslation", "Vector3D", "",0,0,0\n      Property: "GeometricRotation", "Vector3D", "",0,0,0\n      Property: "GeometricScaling", "Vector3D", "",1,1,1\n      Property: "LookAtProperty", "object", ""\n      Property: "UpVectorProperty", "object", ""\n      Property: "Show", "bool", "",1\n      Property: "NegativePercentShapeSupport", "bool", "",1\n      Property: "DefaultAttributeIndex", "int", "",0\n      Property: "Color", "Color", "A+",0,0,0\n      Property: "Size", "double", "",100\n      Property: "Look", "enum", "",1\n    }',"\n    ").concat(this._verticesIndices(r.positions,r.indices),"\n    ").concat(this._normalLayer(r.normals)," \n    ").concat(this._colorLayer(r.colors,i)," \n    ").concat('\n    LayerElementMaterial: 0 {\n      Version: 101\n      Name: ""\n      MappingInformationType: "AllSame"\n      ReferenceInformationType: "Direct"\n      Materials: 0\n    }',"  \n    ").concat('\n    Layer: 0 {\n      Version: 100\n      LayerElement:  {\n        Type: "LayerElementNormal"\n        TypedIndex: 0\n      }\n      LayerElement:  {\n        Type: "LayerElementColor"\n        TypedIndex: 0\n      }\n      LayerElement:  {\n        Type: "LayerElementMaterial"\n        TypedIndex: 0\n      }\n    }',"\n  }")}return e}},{key:"_materials",value:function(){for(var e="",t=this._info.materials,n=0;n<t.length;++n){var r=t[n];e+='\n  Material: "Material::'.concat(this._info.name,"_").concat(n,'_default", "" {\n    Version: ').concat(102,'\n    ShadingModel: "lambert"\n    MultiLayer: 0\n    ').concat(this._materialProperties(r),"\n  }")}return e}},{key:"_writeObjects",value:function(){return"\n; Object properties\n;------------------------------------------------------------------\n\nObjects:  {\n  ".concat(this._models(),"\n  ").concat(this._materials(),"\n  ").concat('GlobalSettings: {\n    Version: 1000\n    Properties60:  {\n      Property: "UpAxis", "int", "",1\n      Property: "UpAxisSign", "int", "",1\n      Property: "FrontAxis", "int", "",2\n      Property: "FrontAxisSign", "int", "",1\n      Property: "CoordAxis", "int", "",0\n      Property: "CoordAxisSign", "int", "",1\n      Property: "UnitScaleFactor", "double", "",1\n    }\n  }',"\n}\n")}},{key:"_writeRelations",value:function(){for(var e="",t=0;t<this._info.models.length;++t)e+='\n  Model: "Model::'.concat(this._info.name,"_").concat(t,'", "Mesh" {\n  }');for(var n="",r=0;r<this._info.materials.length;++r)n+='\n  Material: "Material::'.concat(this._info.name,"_").concat(r,'_default", "" {\n  }');return"\n; Object relations\n;------------------------------------------------------------------\n\nRelations:  {\n  ".concat(e,'\n  Model: "Model::Producer Perspective", "Camera" {\n  }\n  Model: "Model::Producer Top", "Camera" {\n  }\n  Model: "Model::Producer Bottom", "Camera" {\n  }\n  Model: "Model::Producer Front", "Camera" {\n  }\n  Model: "Model::Producer Back", "Camera" {\n  }\n  Model: "Model::Producer Right", "Camera" {\n  }\n  Model: "Model::Producer Left", "Camera" {\n  }\n  Model: "Model::Camera Switcher", "CameraSwitcher" {\n  }\n  ').concat(n,"\n}")}},{key:"_writeConnections",value:function(){for(var e="",t=this._info.name,n=0;n<this._info.models.length;++n)e+='\n  Connect: "OO", "Model::'.concat(t,"_").concat(n,'", "Model::Scene"');for(var r="",i=0;i<this._info.materials.length;++i)r+='\n  Connect: "OO", "Material::'.concat(t,"_").concat(i,'_default", "Model::').concat(t,"_").concat(i,'"');return"\n; Object connections\n;------------------------------------------------------------------\n\nConnections:  {\n  ".concat(e,"\n  ").concat(r,"\n}")}},{key:"_floatArrayToString",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].toFixed(6);return t.join(",")}},{key:"_colorLayer",value:function(e,t){var n=this._floatArrayToString(e),r=In(Array(t).keys());return"\n    LayerElementColor: ".concat(0," {\n      Version: ").concat(101,'\n      Name: "').concat("",'"\n      MappingInformationType: "ByVertice"\n      ReferenceInformationType: "Direct"\n      Colors: ').concat(n,"\n      ColorIndex: ").concat(r,"\n    }")}},{key:"_normalLayer",value:function(e){var t=this._floatArrayToString(e);return"\n    LayerElementNormal: ".concat(0," {\n      Version: ").concat(101,'\n      Name: "').concat("",'"\n      MappingInformationType: "ByVertice"\n      ReferenceInformationType: "Direct" \n      Normals: ').concat(t,"\n    }")}},{key:"_verticesIndices",value:function(e,t){var n=this._floatArrayToString(e);return"MultiLayer: ".concat(0,"\n    MultiTake: ").concat(1,"\n    Shading: ").concat("Y",'\n    Culling: "').concat("CullingOff",'"\n    Vertices: ').concat(n,"\n    PolygonVertexIndex: ").concat(t,"\n    GeometryVersion: ").concat(124)}},{key:"_materialProperties",value:function(e){return'Properties60:  {\n      Property: "ShadingModel", "KString", "", "Lambert"\n      Property: "MultiLayer", "bool", "",0\n      Property: "EmissiveColor", "ColorRGB", "",0,0,0\n      Property: "EmissiveFactor", "double", "",0.0000\n      Property: "AmbientColor", "ColorRGB", "",1,1,1\n      Property: "AmbientFactor", "double", "",0.0000\n      Property: "DiffuseColor", "ColorRGB", "",'.concat(e.diffuse,'\n      Property: "DiffuseFactor", "double", "",1.0000\n      Property: "Bump", "Vector3D", "",0,0,0\n      Property: "TransparentColor", "ColorRGB", "",1,1,1\n      Property: "TransparencyFactor", "double", "",0.0000\n      Property: "SpecularColor", "ColorRGB", "",').concat(e.specular,'\n      Property: "SpecularFactor", "double", "",1.0000\n      Property: "ShininessExponent", "double", "",').concat(e.shininess,'\n      Property: "ReflectionColor", "ColorRGB", "",0,0,0\n      Property: "ReflectionFactor", "double", "",1\n      Property: "Ambient", "ColorRGB", "",1,1,1\n      Property: "Diffuse", "ColorRGB", "",').concat(e.diffuse,'\n      Property: "Specular", "ColorRGB", "",').concat(e.specular,'\n      Property: "Shininess", "double", "",').concat(e.shininess,'\n      Property: "Opacity", "double", "",').concat(e.opacity,'\n      Property: "Reflectivity", "double", "",0\n    }')}}]),e}(),Bu=function(e){function t(e,n){var r;return g(this,t),(r=C(this,k(t).call(this,e,n)))._data=e,r._version=n.miewVersion||"0.0-UNSPECIFIED",r._extractor=new Fu,r}return P(t,e),_(t,[{key:"exportSync",value:function(){var e=new zu;if(!this._source)return this._result;var t=this._extractor.process(this._data);return t.version=this._version,this._result=e.getResult(t),this._result}}]),t}(Tu);Bu.formats=["fbx"],Bu.SourceClass=ca;var ju={loaders:Aa,parsers:Su,exporters:new Eu([Mu,Bu])},Vu=new o.Color,Uu=function(){function e(){g(this,e),this._width=0,this._height=0,this._widthHalf=0,this._heightHalf=0,this._vector=new o.Vector3,this._viewMatrix=new o.Matrix4,this._projectionMatrix=new o.Matrix4,this._domElement=document.createElement("div"),this._domElement.style.overflow="hidden",this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.zIndex="0",this._domElement.style.pointerEvents="none"}return _(e,[{key:"getElement",value:function(){return this._domElement}},{key:"reset",value:function(){for(var e=this.getElement();e.firstChild;)e.removeChild(e.firstChild)}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this._widthHalf=this._width/2,this._heightHalf=this._height/2,this._domElement.style.width="".concat(e,"px"),this._domElement.style.height="".concat(t,"px")}},{key:"_renderObject",value:function(e,t,n){function r(e,t,n){return Vu.setHex(e),Vu.lerp(t,n),"#".concat(Vu.getHexString())}function i(e){return Vu.setHex(e),"#".concat(Vu.getHexString())}if(e instanceof on){if(this._vector.setFromMatrixPosition(e.matrixWorld),void 0!==e.userData&&void 0!==e.userData.offset){var a=new o.Vector3(e.userData.offset.x,e.userData.offset.y,0);this._vector.add(a.multiplyScalar(e.matrixWorld.getMaxScaleOnAxis()))}this._vector.applyMatrix4(this._viewMatrix);var s=this._vector.z>-t.near?"hidden":"visible",u=1e4*(t.far- -this._vector.z)/(t.far-t.near),c=e.getElement();if("undefined"===typeof n.fog)c.style.color=i(e.userData.color),"transparent"!==e.userData.background&&(c.style.background=i(e.userData.background));else{var l=o.Math.smoothstep(-this._vector.z,n.fog.near,n.fog.far);c.style.color=r(e.userData.color,n.fog.color,l),"transparent"!==e.userData.background&&(c.style.background=r(e.userData.background,n.fog.color,l))}this._vector.applyMatrix4(this._projectionMatrix);var f="".concat(e.userData!=={}?e.userData.translation:"translate(-50%, -50%) ","translate(").concat(this._vector.x*this._widthHalf+this._widthHalf,"px,").concat(-this._vector.y*this._heightHalf+this._heightHalf,"px)");c.style.visibility=s,c.style.WebkitTransform=f,c.style.MozTransform=f,c.style.oTransform=f,c.style.transform=f,c.style.zIndex=Number(u).toFixed(0),c.parentNode!==this._domElement&&this._domElement.appendChild(c)}for(var h=0,p=e.children.length;h<p;h++)this._renderObject(e.children[h],t,n)}},{key:"render",value:function(e,t){e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),this._viewMatrix.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),this._projectionMatrix.copy(t.projectionMatrix),this._renderObject(e,t,e)}}]),e}(),Gu=-1,Hu=0,Wu=1,qu=2,Yu=3,Xu=new o.Quaternion,$u=new o.Matrix4;function Zu(e,t,n,r){this.objects=e;var i=c(e,1);this.object=i[0],this.camera=t,this.pivot=n,this.axis=new o.Vector3(0,0,1),this.options=r,this.lastRotation={axis:new o.Vector3,angle:0}}function Ku(e,t,n,r,i){D.call(this);var a=this;this.object=e,this.objectPivot=t,this.camera=n,this.domElement="undefined"!==typeof r?r:document,this.getAltObj=i,this.enabled=!0,this.hotkeysEnabled=!0,this.screen={left:0,top:0,width:0,height:0},this.options={rotateFactor:Math.PI,axisRotateFactor:4*Math.PI,intertia:!0,dynamicDampingFactor:.1,intertiaThreshold:.001},this._state=Gu,this._mousePrevPos=new o.Vector2,this._mouseCurPos=new o.Vector2,this._mainObj=new Zu([this.object],this.camera,new o.Vector3(0,0,0),this.options),this._altObj=new Zu([this.object],this.camera,new o.Vector3(0,0,0),this.options),this._affectedObj=this._mainObj,this._isAltObjFreeRotationAllowed=!0,this._isTranslationAllowed=!0,this._isKeysTranslatingObj=!1,this._pressedKeys=[],this._clock=new x,this._clock.start(),this._lastUpdateTime=this._clock.getElapsedTime(),this._listeners=[{obj:a.domElement,type:"mousedown",handler:function(e){a.mousedown(e)}},{obj:a.domElement,type:"mouseup",handler:function(e){a.mouseup(e)}},{obj:a.domElement,type:"mousemove",handler:function(e){a.mousemove(e)}},{obj:a.domElement,type:"mousewheel",handler:function(e){a.mousewheel(e)}},{obj:a.domElement,type:"DOMMouseScroll",handler:function(e){a.mousewheel(e)}},{obj:a.domElement,type:"mouseout",handler:function(e){a.mouseup(e)}},{obj:a.domElement,type:"touchstart",handler:function(e){a.touchstartend(e)}},{obj:a.domElement,type:"touchend",handler:function(e){a.touchstartend(e)}},{obj:a.domElement,type:"touchmove",handler:function(e){a.touchmove(e)}},{obj:a.getKeyBindObject(),type:"keydown",handler:function(e){a.keydownup(e)}},{obj:a.getKeyBindObject(),type:"keyup",handler:function(e){a.keydownup(e)}},{obj:window,type:"resize",handler:function(){a.handleResize()}},{obj:window,type:"blur",handler:function(){a.resetKeys()}},{obj:a.domElement,type:"contextmenu",handler:function(e){a.contextmenu(e)}}];for(var s=0;s<this._listeners.length;s++){var u=this._listeners[s];u.obj.addEventListener(u.type,u.handler)}this.handleResize(),this.resetKeys(),this.update()}function Ju(e,t,n){D.call(this);var r=this;this.gfxObj=e,this.camera=t,this.domElement="undefined"!==typeof n?n:document,this.screen={left:0,top:0,width:0,height:0},this._lastMousePos=new o.Vector2(0,0),this._mouseTotalDist=0,this._lastClickBeginTime=-1e3,this._lastClickPos=new o.Vector2(0,0),this._clickBeginTime=0,this._clock=new x,this._clock.start(),this._listeners=[{obj:r.domElement,type:"mousedown",handler:function(e){r.mousedown(e)}},{obj:r.domElement,type:"mouseup",handler:function(e){r.mouseup(e)}},{obj:r.domElement,type:"mousemove",handler:function(e){r.mousemove(e)}},{obj:r.domElement,type:"touchstart",handler:function(e){r.touchstart(e)}},{obj:r.domElement,type:"touchend",handler:function(e){r.touchend(e)}},{obj:window,type:"resize",handler:function(){r.handleResize()}}];for(var i=0;i<this._listeners.length;i++){var a=this._listeners[i];a.obj.addEventListener(a.type,a.handler)}this.handleResize()}Zu.prototype._rotate=function(){var e=new o.Vector3,t=new o.Quaternion,n=new o.Vector3,r=new o.Matrix4;return function(i){var o=0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z;if(r.copy(this.object.matrix),o?r.multiply($u.makeRotationFromQuaternion(i)):(r.multiply($u.makeTranslation(this.pivot.x,this.pivot.y,this.pivot.z)),r.multiply($u.makeRotationFromQuaternion(i)),r.multiply($u.makeTranslation(-this.pivot.x,-this.pivot.y,-this.pivot.z))),r.decompose(e,t,n),!o)for(var a=0;a<this.objects.length;++a)this.objects[a].position.copy(e);for(var s=0;s<this.objects.length;++s)this.objects[s].quaternion.copy(t),this.objects[s].updateMatrix()}}(),Zu.prototype.setObjects=function(e){this.objects=e;var t=c(e,1);this.object=t[0]},Zu.prototype.rotate=function(){var e={axis:new o.Vector3,angle:0};return function(t,n,r,i){this.mouse2rotation(e,n,r,i),t.setFromAxisAngle(e.axis,e.angle),e.angle&&this._rotate(t),this.lastRotation=e}}(),Zu.prototype.translate=function(){var e=new o.Vector3,t=new o.Vector3;return function(n){e.set(n.x/this.camera.projectionMatrix.elements[0],n.y/this.camera.projectionMatrix.elements[5],0);var r=e.length();e.normalize(),e.transformDirection($u.getInverse(this.object.matrixWorld)),t.copy(this.pivot),this.object.localToWorld(t),r*=Math.abs(t.z-this.camera.position.z),r/=this.object.matrixWorld.getMaxScaleOnAxis();for(var i=0;i<this.objects.length;++i)this.objects[i].translateOnAxis(e,r)}}(),Zu.prototype.update=function(){var e=new o.Vector3;return function(t,n){if(0!==re.now.autoRotation)return re.now.autoRotationAxisFixed||0===this.lastRotation.axis.length()?e.set(0,1,0).transformDirection($u.getInverse(this.object.matrixWorld)):e.copy(this.lastRotation.axis),this._rotate(Xu.setFromAxisAngle(e,re.now.autoRotation*t)),!0;if(this.options.intertia&&this.lastRotation.angle){var r=this.lastRotation.angle*Math.pow(1-this.options.dynamicDampingFactor,40*n);if(!(Math.abs(r)<=this.options.intertiaThreshold))return this._rotate(Xu.setFromAxisAngle(this.lastRotation.axis,r)),!0;this.lastRotation.angle=0}return!1}}(),Zu.prototype.stop=function(){this.lastRotation.angle=0},Zu.prototype.mouse2rotation=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3,r=new o.Vector3,i=new o.Vector3,a=new o.Vector3,s=new o.Vector2;return function(o,u,c,l){if(l)o.axis.copy(this.axis),o.angle=this.options.axisRotateFactor*(c.y-u.y);else{s.subVectors(c,u);var f=s.length();if(0===f)return;e.copy(this.pivot),this.object.localToWorld(e),t.subVectors(this.camera.position,e),n.copy(t).normalize(),r.copy(this.camera.up).normalize(),i.crossVectors(r,n).normalize(),r.setLength(s.y),i.setLength(s.x),a.copy(r.add(i)),o.axis.crossVectors(a,t),o.angle=-f*this.options.rotateFactor}o.axis.transformDirection($u.getInverse(this.object.matrixWorld)),o.angle<0&&(o.axis.negate(),o.angle=-o.angle)}}(),Ku.prototype=Object.create(D.prototype),Ku.prototype.constructor=Ku,Ku.prototype.resetKeys=function(){this._pressedKeys[37]=!1,this._pressedKeys[38]=!1,this._pressedKeys[39]=!1,this._pressedKeys[40]=!1},Ku.prototype.contextmenu=function(e){e.stopPropagation(),e.preventDefault()},Ku.prototype.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},Ku.prototype.enable=function(e){this.enabled=e},Ku.prototype.enableHotkeys=function(e){this.hotkeysEnabled=e},Ku.prototype.allowTranslation=function(e){this._isTranslationAllowed=e},Ku.prototype.allowAltObjFreeRotation=function(e){this._isAltObjFreeRotationAllowed=e},Ku.prototype.keysTranslateObj=function(e){this._isKeysTranslatingObj=e},Ku.prototype.isEditingAltObj=function(){return(this._state===Hu||this._state===Wu)&&this._affectedObj===this._altObj},Ku.prototype.convertMouseToOnCircle=function(e,t,n){var r=Math.min(this.screen.width,this.screen.height);0!==r?e.set((t-.5*this.screen.width-this.screen.left)/r,(.5*this.screen.height+this.screen.top-n)/r):e.set(0,0)},Ku.prototype.convertMouseToViewport=function(e,t,n){0!==this.screen.width&&0!==this.screen.height?e.set(2*(t-.5*this.screen.width-this.screen.left)/this.screen.width,2*(.5*this.screen.height+this.screen.top-n)/this.screen.height):e.set(0,0)},Ku.prototype.stop=function(){this._mainObj.stop(),this._altObj.stop()},Ku.prototype.rotateByMouse=function(){var e=new o.Quaternion;return function(t){this._affectedObj.rotate(e,this._mousePrevPos,this._mouseCurPos,t),this.dispatchEvent({type:"change",action:"rotate",quaternion:e})}}(),Ku.prototype.rotate=function(e){this.object.quaternion.multiply(e),this.dispatchEvent({type:"change",action:"rotate",quaternion:e})},Ku.prototype.getOrientation=function(){return this.object.quaternion},Ku.prototype.setOrientation=function(e){this.object.quaternion.copy(e)},Ku.prototype.translate=function(){var e=new o.Vector2;return function(){e.subVectors(this._mouseCurPos,this._mousePrevPos),this._affectedObj.translate(e),this.dispatchEvent({type:"change",action:"translate"})}}(),Ku.prototype.getScale=function(){return this.object.scale.x},Ku.prototype.setScale=function(e){this.object.scale.set(e,e,e)},Ku.prototype.scale=function(e){e<=0||(this.setScale(this.object.scale.x*e),this.dispatchEvent({type:"change",action:"zoom",factor:e}))},Ku.prototype.update=function(){var e=new o.Vector2;return function(){var t=this._clock.getElapsedTime(),n=t-this._lastUpdateTime;if(this._state===Gu){var r=t-this._lastMouseMoveTime;(this._mainObj.update(n,r)||this._altObj.update(n,r))&&this.dispatchEvent({type:"change",action:"auto"})}if(this._isKeysTranslatingObj){var i=Number(this._pressedKeys[39])-Number(this._pressedKeys[37]),o=Number(this._pressedKeys[38])-Number(this._pressedKeys[40]);if(0!==i||0!==o){var a=n,s=this.getAltObj();s.objects.length>0&&(this._altObj.setObjects(s.objects),this._altObj.pivot=s.pivot,"axis"in s?this._altObj.axis=s.axis.clone():this._altObj.axis.set(0,0,1),e.set(a*i,a*o),this._altObj.translate(e),this.dispatchEvent({type:"change",action:"translate"}))}}this._lastUpdateTime=t}}(),Ku.prototype.reset=function(){this._state=Gu,this.object.quaternion.copy(Xu.set(0,0,0,1))},Ku.prototype.mousedown=function(e){if(!1!==this.enabled&&this._state===Gu){if(e.preventDefault(),e.stopPropagation(),this._state===Gu)if(0===e.button){this._affectedObj.stop();var t=!1;if(e.altKey){var n=this.getAltObj();(t=n.objects.length>0)&&(this._altObj.setObjects(n.objects),this._altObj.pivot=n.pivot,"axis"in n?this._altObj.axis=n.axis.clone():this._altObj.axis.set(0,0,1))}this._affectedObj=t?this._altObj:this._mainObj,this._state=t&&e.ctrlKey&&this._isTranslationAllowed?Wu:Hu}else 2===e.button&&(this._state=Yu);this._state===Hu&&(this.convertMouseToOnCircle(this._mouseCurPos,e.pageX,e.pageY),this._mousePrevPos.copy(this._mouseCurPos)),this._state!==Wu&&this._state!==Yu||(this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this._mousePrevPos.copy(this._mouseCurPos))}},Ku.prototype.mousemove=function(e){if(!1!==this.enabled&&this._state!==Gu)switch(e.preventDefault(),e.stopPropagation(),this._state){case Hu:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToOnCircle(this._mouseCurPos,e.pageX,e.pageY),this.rotateByMouse(e.altKey&&!this._isAltObjFreeRotationAllowed||e.shiftKey),this._lastMouseMoveTime=this._clock.getElapsedTime();break;case Wu:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this.translate();break;case Yu:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToViewport(this._mouseCurPos,e.pageX,e.pageY),this.translatePivotByMouse()}},Ku.prototype.mousewheel=function(e){if(!1!==this.enabled&&re.now.zooming&&this._state===Gu&&!e.shiftKey){e.preventDefault();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3);var n=1+.05*t;n=Math.max(n,.01),this.scale(n)}},Ku.prototype.mouseup=function(e){!1!==this.enabled&&this._state!==Gu&&(e.preventDefault(),e.stopPropagation(),this._state=Gu,this._clock.getElapsedTime()-this._lastMouseMoveTime>.1&&this._affectedObj.stop())},Ku.prototype.touchstartend=function(e){if(!1!==this.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:this._state=Hu,this.convertMouseToOnCircle(this._mouseCurPos,e.touches[0].pageX,e.touches[0].pageY),this._mousePrevPos.copy(this._mouseCurPos);break;case 2:this._mainObj.stop(),this._altObj.stop(),this._state=qu;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchDistanceCur=this._touchDistanceStart=Math.sqrt(t*t+n*n),this._scaleStart=this.object.scale.x;break;default:this._state=Gu}},Ku.prototype.touchmove=function(e){if(!1!==this.enabled&&this._state!==Gu)switch(e.preventDefault(),e.stopPropagation(),this._state){case Hu:this._mousePrevPos.copy(this._mouseCurPos),this.convertMouseToOnCircle(this._mouseCurPos,e.touches[0].pageX,e.touches[0].pageY),this.rotateByMouse(!1),this._lastMouseMoveTime=this._clock.getElapsedTime();break;case qu:if(re.now.zooming){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchDistanceCur=Math.sqrt(t*t+n*n);var r=this._scaleStart*this._touchDistanceCur/this._touchDistanceStart/this.object.scale.x;this.scale(r)}}},Ku.prototype.keydownup=function(e){if(!1!==this.enabled&&!1!==this.hotkeysEnabled)switch(e.keyCode){case 37:case 38:case 39:case 40:this._pressedKeys[e.keyCode]="keydown"===e.type,e.preventDefault(),e.stopPropagation()}},Ku.prototype.getKeyBindObject=function(){return window.top},Ku.prototype.dispose=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];t.obj.removeEventListener(t.type,t.handler)}},Ku.prototype.translatePivotByMouse=function(){var e=new o.Vector2;return function(){e.subVectors(this._mouseCurPos,this._mousePrevPos),this.translatePivotInWorld(re.now.translationSpeed*e.x,re.now.translationSpeed*e.y,0)}}(),Ku.prototype.translatePivotInWorld=function(e,t,n){var r=this.objectPivot.position;r.applyMatrix4(this.object.matrixWorld),r.setX(r.x+e),r.setY(r.y+t),r.setZ(r.z+n),r.applyMatrix4($u.getInverse(this.object.matrixWorld)),this.dispatchEvent({type:"change",action:"translatePivot"})},Ku.prototype.translatePivot=function(e,t,n){var r=this.objectPivot.position;r.setX(r.x+e),r.setY(r.y+t),r.setZ(r.z+n),this.dispatchEvent({type:"change",action:"translatePivot"})},Ku.prototype.setPivot=function(e){this.objectPivot.position.copy(e),this.dispatchEvent({type:"change",action:"translatePivot"})},Ju.prototype=Object.create(D.prototype),Ju.prototype.constructor=Ju,Ju.prototype.reset=function(){this.picked={},this.dispatchEvent({type:"newpick",obj:{}})},Ju.prototype.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},Ju.prototype.pickObject=function(e){if(!this.gfxObj)return this.picked={},void this.dispatchEvent({type:"newpick",obj:{}});var t=this.gfxObj,n=new o.Raycaster;n.ray.origin.setFromMatrixPosition(this.camera.matrixWorld),n.ray.direction.set(e.x,e.y,.5).unproject(this.camera).sub(n.ray.origin).normalize();var r=re.now.draft.clipPlane&&this.clipPlaneValue?this.clipPlaneValue:1/0,i=re.now.fog&&this.fogFarValue?this.fogFarValue:1/0,a=n.intersectVisibleObject(t,this.camera,r,i);if(!a)return this.picked={},void this.dispatchEvent({type:"newpick",obj:{}});var s={};if(a.residue||a.atom){var u=a.residue||a.atom.residue;"chain"===re.now.pick?s={chain:u.getChain()}:"molecule"===re.now.pick?s={molecule:u.getMolecule()}:a.residue||"residue"===re.now.pick?s={residue:u}:a.atom&&(s={atom:a.atom})}this.picked=s,this.dispatchEvent({type:"newpick",obj:s})},Ju.prototype.getMouseInViewport=function(e,t){return new o.Vector2((e-this.screen.left)/this.screen.width*2-1,-(t-this.screen.top)/this.screen.height*2+1)},Ju.prototype.mousedown=function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&(this._lastMousePos=this.getMouseInViewport(e.pageX,e.pageY),this._mouseTotalDist=0,this._clickBeginTime=this._clock.getElapsedTime())},Ju.prototype.mousemove=function(e){e.preventDefault(),e.stopPropagation();var t=this.getMouseInViewport(e.pageX,e.pageY);this._mouseTotalDist+=t.sub(this._lastMousePos).length()},Ju.prototype.mouseup=function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),0===e.button&&this._mouseTotalDist<.01){var n=this._clock.getElapsedTime(),r=this.getMouseInViewport(e.pageX,e.pageY);if(n-this._lastClickBeginTime<.7)if((new o.Vector2).subVectors(r,this._lastClickPos).length()<.01)return this.dispatchEvent({type:"dblclick",obj:this.picked}),this._lastClickPos=r,void(this._lastClickBeginTime=-1e3);setTimeout((function(){t.pickObject(r)}),0),this._lastClickPos=r,this._lastClickBeginTime=this._clickBeginTime}},Ju.prototype.touchstart=function(e){e.preventDefault(),e.stopPropagation(),1===e.touches.length&&(this._lastTouchdownPos=this.getMouseInViewport(e.touches[0].pageX,e.touches[0].pageY))},Ju.prototype.touchend=function(e){var t=this;(e.preventDefault(),e.stopPropagation(),0===e.touches.length&&1===e.changedTouches.length)&&(this.getMouseInViewport(e.changedTouches[0].pageX,e.changedTouches[0].pageY).sub(this._lastTouchdownPos).length()<.01&&setTimeout((function(){t.pickObject(t._lastTouchdownPos)}),0))},Ju.prototype.dispose=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];t.obj.removeEventListener(t.type,t.handler)}};var Qu=function(){function e(t,n){g(this,e),this._target=t,this._targetCamera=n,this._camera=new o.PerspectiveCamera(n.fov,n.aspect,1,100),this._object=new o.AxesHelper(1),this._scene=new o.Scene,this._scene.add(this._object),this._full=new o.Vector2,this._update()}return _(e,[{key:"_update",value:function(){var e=this._targetCamera.fov,t=this._camera;t.aspect=this._targetCamera.aspect,t.setMinimalFov(e),t.setDistanceToFit(1,e),t.updateProjectionMatrix(),this._object.quaternion.copy(this._target.quaternion)}},{key:"render",value:function(e){this._update(),e.getSize(this._full);var t=.25*this._full.width,n=.25*this._full.height,r=e.autoClear;e.autoClear=!1,e.setViewport(0,0,t,n),e.clear(!1,!0,!1),e.render(this._scene,this._camera),e.setViewport(0,0,this._full.width,this._full.height),e.autoClear=r}}]),e}(),ec=["helix","strand"],tc=["fs","ps","ns","us"];function nc(e,t){for(var n=t._residues,r=n.length,i=new Uint8Array(r),o=t._atoms,a=0,s=e.length;a<s;++a){i[o[a].residue._index]=e[a]}for(var u=[],c=0;c<r;){if(0!==i[c]){for(var l=c,f=i[c];c<r-1&&i[c+1]===f&&n[c].isConnected(n[c+1]);)++c;u.push({start:l,end:c,type:ec[f-1]})}++c}return u}function rc(e){return e>=1<<19?e-(1<<20):e}var ic=function(){function e(t,n,r){g(this,e),this._complex=t,this._secondary=null,this.isLoading=!1,this._framesRange={start:0,end:-1},this.frameIsReady=!1,this._buffer=null,this._frameRequest=null,this._callbacks=r,"function"===typeof n?(this._framesRequestLength=1,this._downloadDataFn=n):this.parseBinaryData(n,!0),this.reset(),this.setFrame(0)}return _(e,[{key:"_prepareBuffer",value:function(e,t){if(void 0!==e&&null!==e||(e=0),void 0!==t&&null!==t||(t=e+this._framesRequestLength),void 0!==this._framesCount&&(t=Math.min(this._framesCount-1,t)),this._downloadDataFn){var n=this;this._buffer||(this._buffer={}),this._buffer.state="downloading",this.isLoading=!0,n._callbacks&&"function"===typeof n._callbacks.onLoadStatusChanged&&n._callbacks.onLoadStatusChanged(),this._downloadDataFn({start:e,end:t+1},(function(r){if(n.isLoading=!1,n._callbacks&&"function"===typeof n._callbacks.onLoadStatusChanged&&n._callbacks.onLoadStatusChanged(),n._buffer={data:r,state:"ready",start:e,end:t},null!==n._frameRequest){var i=n._frameRequest;n._frameRequest=null,n.setFrame(i)}}),(function(){n.isLoading=!1,n._callbacks&&"function"===typeof n._callbacks.onError&&n._callbacks.onError("Streaming failed")}))}}},{key:"_parseBuffer",value:function(){if(this._buffer&&"ready"===this._buffer.state){this._framesRange={start:this._buffer.start,end:this._buffer.end},this.parseBinaryData(this._buffer.data,!1);var e=(this._buffer.end+1)%this._framesCount;if(e>=this._framesCount&&(e=0),this._buffer={state:"none"},this._prepareBuffer(e,e+this._framesRequestLength),null!==this._frameRequest){var t=this._frameRequest;this._frameRequest=null,this.setFrame(t)}}}},{key:"parseBinaryData",value:function(e){var t=new DataView(e),n=0,r=t.getUint32(n,!0);n+=4;var i=t.getUint32(n,!0);this._framesCount=i,this._framesRange.end=this._framesRange.end>0?Math.min(this._framesRange.end,i-1):i-1,n+=4,this._atomsCount=r;this._framesRequestLength=Math.ceil(1048576/(8*r));var o=this._framesRange.end-this._framesRange.start+1;if(r!==this._complex._atoms.length||e.byteLength!==12+o*r*8)throw new Error;for(var a=this._complex,s=t.getUint32(n,!0),u=0;s>1e3&&u<tc.length-1;)s/=1e3,++u;this._timeStep="".concat(s.toString()," ").concat(tc[u]),n+=4;for(var c=[],l=new Float32Array(o*r*3),f=0,h=new Int8Array(r),p=0;p<o;++p){for(var d=0;d<r;++d){var m=t.getUint32(n,!0);n+=4;var v=t.getUint32(n,!0);n+=4;var g=(4026531840&v)>>>28,y=rc((268435200&v)>>>8>>0),_=rc(((255&v)<<12|(4293918720&m)>>>20)>>0),x=rc((1048575&m)>>0);h[d]=0,g>0&&g<4?h[d]=1:4===g&&(h[d]=2),l[f++]=y/100,l[f++]=_/100,l[f++]=x/100}c.push(nc(h,a))}this._secondaryData=c,this._data=l}},{key:"nextFrame",value:function(){this.setFrame((this._currFrame+1)%this._framesCount)}},{key:"needsColorUpdate",value:function(e){return e instanceof Wo}},{key:"getAtomColor",value:function(e,t){return e.getResidueColor(this._residues[t.residue._index],this._complex)}},{key:"getResidueColor",value:function(e,t){return e.getResidueColor(this._residues[t._index],this._complex)}},{key:"_updateSecondary",value:function(){var e,t=this._residues,n=t.length;for(e=0;e<n;++e)t[e]._secondary=null;var r=this._secondaryData[this._currFrame-this._framesRange.start];for(e=0,n=r.length;e<n;++e)for(var i=r[e],o=i.start,a=i.end,s={_start:t[o],_end:t[a],type:i.type,generic:i.generic},u=o;u<=a;++u)t[u]._secondary=s}},{key:"reset",value:function(){var e=this._complex._residues,t=e.length;this._residues=new Array(t);for(var n=this._residues,r=function(){return this._secondary},i=0;i<t;++i)n[i]={_type:e[i]._type,_isValid:e[i]._isValid,_controlPoint:null,_wingVector:null,_secondary:null,getSecondary:r}}},{key:"setFrame",value:function(e){if(this.frameIsReady=!1,e>=this._framesRange.start&&e<=this._framesRange.end)this._currFrame=e,this._cachedResidues=!1,this._updateSecondary(),this.frameIsReady=!0;else if(this._frameRequest=e,this._buffer){switch(this._buffer.state){case"none":this._prepareBuffer(e);break;case"ready":this._parseBuffer()}}else this._prepareBuffer(e)}},{key:"disableEvents",value:function(){this._callbacks=null}},{key:"getAtomPos",value:function(t){var n=e._vec,r=this._data,i=3*(this._atomsCount*(this._currFrame-this._framesRange.start)+t);return n.set(r[i],r[i+1],r[i+2]),n}},{key:"getResidues",value:function(){return this._cachedResidues||this._complex.updateToFrame(this),this._residues}}]),e}();Ee(ic,"_vec",new o.Vector3);var oc=function(){function e(t,n){if(g(this,e),this.constructor===e)throw new Error("Can not instantiate abstract class!");this.params=t,this.opts=i.a.merge(Q.deriveDeep(re.now.objects[this.type],!0),n),this.needsRebuild=!1,this._mesh=null,this.id=null}return _(e,[{key:"identify",value:function(){var e={type:this.type,params:this.params},t=Q.objectsDiff(this.opts,re.now.modes[this.id]);return i.a.isEmpty(t)||(e.opts=t),e}},{key:"toString",value:function(){return"o=".concat(this.type,",").concat(this.params.join(","))+Q.compareOptionsWithDefaults(this.opts,re.defaults.objects[this.type])}},{key:"getGeometry",value:function(){return this._mesh}},{key:"destroy",value:function(){this._mesh&&Cn.destroyObject(this._mesh)}}]),e}();oc.prototype.type="__";var ac=function(e){function t(e,n){var r;if(g(this,t),r=C(this,k(t).call(this,e,n)),e.length<2)throw new Error("Wrong number of argumets on line object creation!");var i=c(e,2);return r._id1=i[0],r._id2=i[1],r}return P(t,e),_(t,[{key:"_getAtomFromName",value:function(e,t){var n=e.getAtomByFullname(t);if(!n)throw new Error(t+" - Wrong atom format it must be '#CHAIN_NAME.#RESIDUE_NUMBER.#ATOM_NAME' (e.g. 'A.38.CO1')");return n}},{key:"build",value:function(e){var t=new o.Geometry;this._atom1=this._getAtomFromName(e,this._id1),this._atom2=this._getAtomFromName(e,this._id2),t.vertices[0]=this._atom1.position.clone(),t.vertices[1]=this._atom2.position.clone(),t.dynamic=!0,t.computeBoundingBox(),this._line=new ci.Line(t,new bn({lights:!1,overrideColor:!0,dashedLine:!0,fogTransparent:re.now.bg.transparent})),this._line.computeLineDistances(),this._line.material.setUberOptions({fixedColor:new o.Color(this.opts.color),dashedLineSize:this.opts.dashSize,dashedLinePeriod:this.opts.dashSize+this.opts.gapSize}),this._line.material.updateUniforms(),this._line.raycast=function(e,t){},this._mesh=this._line;var n=e.getTransforms();n.length>0&&(this._mesh=new o.Group,this._mesh.add(this._line),Cn.applyTransformsToMeshes(this._mesh,n))}},{key:"updateToFrame",value:function(e){if(this._atom1&&this._atom2&&this._line){var t=this._line.geometry;t.vertices[0].copy(e.getAtomPos(this._atom1.index)),t.vertices[1].copy(e.getAtomPos(this._atom2.index)),this._line.computeLineDistances(),t.computeBoundingSphere(),t.verticesNeedUpdate=!0}}}]),t}(oc);ac.prototype.constructor=ac,ac.prototype.type="line";var sc=function(e){function t(e){var n;g(this,t),n=C(this,k(t).call(this,e));var r={uniforms:{srcTex:{type:"t",value:null},srcDepthTex:{type:"t",value:null},srcTexSize:{type:"v2",value:new o.Vector2(512,512)},color:{type:"v3",value:null},threshold:{type:"f",value:null},opacity:{type:"f",value:1},thickness:{type:"v2",value:new o.Vector2(1,1)}},vertexShader:sn,fragmentShader:"precision highp float;\r\n\r\nuniform sampler2D srcTex;\r\nuniform vec2 srcTexSize;\r\nuniform vec2 thickness;\r\nvarying vec2 vUv;\r\n\r\n#ifdef DEPTH_OUTLINE\r\n  uniform sampler2D srcDepthTex; //depthTexture\r\n  uniform vec3 color;\r\n  uniform float threshold;\r\n#endif\r\n\r\nvoid main() {\r\n\r\n  vec2 pixelSize = thickness / srcTexSize;\r\n\r\n  #ifdef DEPTH_OUTLINE\r\n    float c00 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,-pixelSize.y)).x;\r\n    float c01 = texture2D(srcDepthTex, vUv + vec2(0,-pixelSize.y)).x;\r\n    float c02 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,-pixelSize.y)).x;\r\n    float c10 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,0)).x;\r\n    float c12 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,0)).x;\r\n    float c20 = texture2D(srcDepthTex, vUv + vec2(-pixelSize.x,pixelSize.y)).x;\r\n    float c21 = texture2D(srcDepthTex, vUv + vec2(0,pixelSize.y)).x;\r\n    float c22 = texture2D(srcDepthTex, vUv + vec2(pixelSize.x,pixelSize.y)).x;\r\n\r\n    float horizEdge = - c00 - 2.0 * c01 - c02 + c20 + 2.0 * c21 + c22;\r\n    float vertEdge  = - c00 - 2.0 * c10 - c20 + c02 + 2.0 * c12 + c22;\r\n\r\n    float grad = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\r\n\r\n    gl_FragColor = ( grad > threshold ) ? vec4(color.rgb, 1.0) : gl_FragColor = texture2D(srcTex, vUv);\r\n\r\n  #else\r\n    vec4 c00 = texture2D(srcTex, vUv + vec2(-pixelSize.x,-pixelSize.y));\r\n    vec4 c01 = texture2D(srcTex, vUv + vec2(0,-pixelSize.y));\r\n    vec4 c02 = texture2D(srcTex, vUv + vec2(pixelSize.x,-pixelSize.y));\r\n    vec4 c10 = texture2D(srcTex, vUv + vec2(-pixelSize.x,0));\r\n    vec4 c12 = texture2D(srcTex, vUv + vec2(pixelSize.x,0));\r\n    vec4 c20 = texture2D(srcTex, vUv + vec2(-pixelSize.x,pixelSize.y));\r\n    vec4 c21 = texture2D(srcTex, vUv + vec2(0,pixelSize.y));\r\n    vec4 c22 = texture2D(srcTex, vUv + vec2(pixelSize.x,pixelSize.y));\r\n\r\n    vec4 horizEdge = - c00 - 2.0 * c01 - c02 + c20 + 2.0 * c21 + c22;\r\n    vec4 vertEdge  = - c00 - 2.0 * c10 - c20 + c02 + 2.0 * c12 + c22;\r\n\r\n    vec4 grad = sqrt(horizEdge * horizEdge + vertEdge * vertEdge);\r\n    gl_FragColor = grad;\r\n  #endif\r\n}\r\n",transparent:!0,depthTest:!1,depthWrite:!1};return n.setValues(r),n}return P(t,e),_(t,[{key:"copy",value:function(e){Ke(k(t.prototype),"copy",this).call(this,e),this.depth=e.depth}},{key:"setValues",value:function(e){if("undefined"!==typeof e){Ke(k(t.prototype),"setValues",this).call(this,e);var n={};this.depth&&(n.DEPTH_OUTLINE=1),this.defines=n}}}]),t}(o.RawShaderMaterial);sc.prototype.depth=!1;var uc=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,e))).setValues.call(M(n),{uniforms:{srcTex:{type:"t",value:null},srcTexelSize:{type:"v2",value:new o.Vector2(1/512,1/512)},bgColor:{type:"c",value:new o.Color(16777215)}},vertexShader:sn,fragmentShader:"precision highp float;\r\n\r\n// edge end finding algorithm parameters\r\n#define FXAA_QUALITY_PS 8\r\n#define FXAA_QUALITY_P0 1.0\r\n#define FXAA_QUALITY_P1 1.5\r\n#define FXAA_QUALITY_P2 2.0\r\n#define FXAA_QUALITY_P3 2.0\r\n#define FXAA_QUALITY_P4 2.0\r\n#define FXAA_QUALITY_P5 2.0\r\n#define FXAA_QUALITY_P6 4.0\r\n#define FXAA_QUALITY_P7 12.0\r\n// constants\r\nfloat fxaaQualityEdgeThreshold = 0.125;\r\nfloat fxaaQualityEdgeThresholdMin = 0.0625;\r\nfloat fxaaQualitySubpix = 0.7; //0.65;\r\n// global params\r\nuniform sampler2D srcTex;\r\nuniform vec2 srcTexelSize;\r\nuniform vec3 bgColor;\r\n// from vs\r\nvarying vec2 vUv;\r\n//=====================================================================//\r\n// calc luminance from rgb\r\n//'float FxaaLuma(vec3 rgb) {return rgb.y * (0.587/0.299) + rgb.x; } // Lotte's idea about game luminance\r\nfloat FxaaLuma(vec3 rgb) {return dot(rgb, vec3(0.299, 0.587, 0.114)); } // real luminance calculation\r\n                                                                           // for non-real scene rendering\r\n// texture sampling by pixel position(coords) and offset(in pixels)\r\n vec3 FxaaTex(sampler2D tex, vec2 pos, vec2 off,  vec2 res ) {\r\n  #ifdef BG_TRANSPARENT\r\n    vec4 color = texture2D( tex, pos + off * res );\r\n    return mix(color.rgb, bgColor, 1.0 - color.a);\r\n  #else\r\n    return texture2D( tex, pos + off * res ).xyz;\r\n  #endif\r\n}\r\nvec3 FxaaTexTop(sampler2D tex, vec2 pos) {\r\n  #ifdef BG_TRANSPARENT\r\n    vec4 color = texture2D( tex, pos );\r\n    return mix(color.rgb, bgColor, 1.0 - color.a);\r\n  #else\r\n    return texture2D( tex, pos).xyz;\r\n  #endif\r\n}\r\nvec4 FxaaTexTopAlpha(sampler2D tex, vec2 pos) {\r\n  return texture2D( tex, pos);\r\n}\r\n\r\n//=====================================================================//\r\nvoid main() {\r\n  // renaming\r\n  vec2 posM = vUv;\r\n  // get luminance for neighbours\r\n  float lumaS = FxaaLuma(FxaaTex(srcTex, posM, vec2( 0.0, 1.0 ), srcTexelSize));\r\n  float lumaE = FxaaLuma(FxaaTex(srcTex, posM, vec2( 1.0, 0.0 ), srcTexelSize));\r\n  float lumaN = FxaaLuma(FxaaTex(srcTex, posM, vec2( 0.0, -1.0 ), srcTexelSize));\r\n  float lumaW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0, 0.0 ), srcTexelSize));\r\n  float lumaM = FxaaLuma(FxaaTexTop(srcTex, posM));\r\n  // find max and min luminance\r\n  float rangeMax = max(max(lumaN, lumaW), max(lumaE, max(lumaS, lumaM)));\r\n  float rangeMin = min(min(lumaN, lumaW), min(lumaE, min(lumaS, lumaM)));\r\n  // calc maximum non-edge range\r\n  float rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\r\n  float range = rangeMax - rangeMin;\r\n  float rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\r\n  // exit when luma contrast is small (is not edge)\r\n  if(range < rangeMaxClamped){\r\n    gl_FragColor = FxaaTexTopAlpha(srcTex, posM);\r\n    return;\r\n  }\r\n  float subpixRcpRange = 1.0/range;\r\n  // note: the sampling coordinates can be calculated in vertex shader but the approach doesn't affect performance\r\n  // visibly, thus we decided to leave calculation here for better readability.\r\n  // calc other neighbours luminance\r\n  float lumaNE = FxaaLuma(FxaaTex(srcTex, posM, vec2(  1.0, -1.0 ), srcTexelSize));\r\n  float lumaSW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0,  1.0 ), srcTexelSize));\r\n  float lumaSE = FxaaLuma(FxaaTex(srcTex, posM, vec2(  1.0,  1.0 ), srcTexelSize));\r\n  float lumaNW = FxaaLuma(FxaaTex(srcTex, posM, vec2( -1.0, -1.0 ), srcTexelSize));\r\n/*--------------span calculation and subpix amount calulation-----------------*/\r\n  float lumaNS = lumaN + lumaS;\r\n  float lumaWE = lumaW + lumaE;\r\n  float subpixNSWE = lumaNS + lumaWE;\r\n  float edgeHorz1 = (-2.0 * lumaM) + lumaNS;\r\n  float edgeVert1 = (-2.0 * lumaM) + lumaWE;\r\n/*--------------------------------------------------------------------------*/\r\n  float lumaNESE = lumaNE + lumaSE;\r\n  float lumaNWNE = lumaNW + lumaNE;\r\n  float edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\r\n  float edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\r\n/*--------------------------------------------------------------------------*/\r\n  float lumaNWSW = lumaNW + lumaSW;\r\n  float lumaSWSE = lumaSW + lumaSE;\r\n  float edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\r\n  float edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\r\n  float edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\r\n  float edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\r\n  float edgeHorz = abs(edgeHorz3) + edgeHorz4;\r\n  float edgeVert = abs(edgeVert3) + edgeVert4;\r\n/*--------------------subpix amount calulation------------------------------*/\r\n  float subpixNWSWNESE = lumaNWSW + lumaNESE;\r\n  float lengthSign = srcTexelSize.x;\r\n  bool horzSpan = edgeHorz >= edgeVert;\r\n   // debug  code edge span visualization\r\n/*'  if (horzSpan)\r\n      gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);\r\n  else\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n  return;*/\r\n  float subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\r\n/*--------------------------------------------------------------------------*/\r\n  if(!horzSpan) lumaN = lumaW;\r\n  if(!horzSpan) lumaS = lumaE;\r\n  if(horzSpan) lengthSign = srcTexelSize.y;\r\n  float subpixB = (subpixA * (1.0/12.0)) - lumaM;\r\n/*--------------------------------------------------------------------------*/\r\n  float gradientN = lumaN - lumaM;\r\n  float gradientS = lumaS - lumaM;\r\n  float lumaNN = lumaN + lumaM;\r\n  float lumaSS = lumaS + lumaM;\r\n  bool pairN = abs(gradientN) >= abs(gradientS);\r\n  float gradient = max(abs(gradientN), abs(gradientS));\r\n  if(pairN) lengthSign = -lengthSign;\r\n  float subpixC = clamp(abs(subpixB) * subpixRcpRange, 0.0, 1.0);\r\n/*--------------------------------------------------------------------------*/\r\n  vec2 posB;\r\n  posB = posM;\r\n  vec2 offNP;\r\n  offNP.x = (!horzSpan) ? 0.0 : srcTexelSize.x;\r\n  offNP.y = ( horzSpan) ? 0.0 : srcTexelSize.y;\r\n  if(!horzSpan) posB.x += lengthSign * 0.5;\r\n  if( horzSpan) posB.y += lengthSign * 0.5;\r\n/*--------------------------------------------------------------------------*/\r\n  vec2 posN;\r\n  posN = posB - offNP * FXAA_QUALITY_P0;\r\n  vec2 posP;\r\n  posP = posB + offNP * FXAA_QUALITY_P0;\r\n  float subpixD = ((-2.0)*subpixC) + 3.0;\r\n  float lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN));\r\n  float subpixE = subpixC * subpixC;\r\n  float lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP));\r\n/*--------------------------------------------------------------------------*/\r\n  if(!pairN) lumaNN = lumaSS;\r\n  float gradientScaled = gradient * 1.0/4.0;\r\n  float lumaMM = lumaM - lumaNN * 0.5;\r\n  float subpixF = subpixD * subpixE;\r\n  bool lumaMLTZero = lumaMM < 0.0;\r\n/*---------------------looped edge-end search-------------------------------*/\r\n  lumaEndN -= lumaNN * 0.5;\r\n  lumaEndP -= lumaNN * 0.5;\r\n  bool doneN = abs(lumaEndN) >= gradientScaled;\r\n  bool doneP = abs(lumaEndP) >= gradientScaled;\r\n  if(!doneN) posN -= offNP * FXAA_QUALITY_P1;\r\n  bool doneNP = (!doneN) || (!doneP);\r\n  if(!doneP) posP += offNP * FXAA_QUALITY_P1;\r\n/*--------------------------------------------------------------------------*/\r\n  if(doneNP) {\r\n    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n    doneN = abs(lumaEndN) >= gradientScaled;\r\n    doneP = abs(lumaEndP) >= gradientScaled;\r\n    if(!doneN) posN -= offNP * FXAA_QUALITY_P2;\r\n    doneNP = (!doneN) || (!doneP);\r\n    if(!doneP) posP += offNP * FXAA_QUALITY_P2;\r\n/*--------------------------------------------------------------------------*/\r\n    #if (FXAA_QUALITY_PS > 3)\r\n      if(doneNP) {\r\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n        doneN = abs(lumaEndN) >= gradientScaled;\r\n        doneP = abs(lumaEndP) >= gradientScaled;\r\n        if(!doneN) posN -= offNP * FXAA_QUALITY_P3;\r\n        doneNP = (!doneN) || (!doneP);\r\n        if(!doneP) posP += offNP * FXAA_QUALITY_P3;\r\n/*--------------------------------------------------------------------------*/\r\n        #if (FXAA_QUALITY_PS > 4)\r\n          if(doneNP) {\r\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n            doneN = abs(lumaEndN) >= gradientScaled;\r\n            doneP = abs(lumaEndP) >= gradientScaled;\r\n            if(!doneN) posN -= offNP * FXAA_QUALITY_P4;\r\n            doneNP = (!doneN) || (!doneP);\r\n            if(!doneP) posP += offNP * FXAA_QUALITY_P4;\r\n/*--------------------------------------------------------------------------*/\r\n            #if (FXAA_QUALITY_PS > 5)\r\n               if(doneNP) {\r\n                 if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                 if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                 if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                 if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                 doneN = abs(lumaEndN) >= gradientScaled;\r\n                 doneP = abs(lumaEndP) >= gradientScaled;\r\n                 if(!doneN) posN -= offNP * FXAA_QUALITY_P5;\r\n                 doneNP = (!doneN) || (!doneP);\r\n                 if(!doneP) posP += offNP * FXAA_QUALITY_P5;\r\n/*--------------------------------------------------------------------------*/\r\n                 #if (FXAA_QUALITY_PS > 6)\r\n                   if(doneNP) {\r\n                     if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                     if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                     if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                     if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                     doneN = abs(lumaEndN) >= gradientScaled;\r\n                     doneP = abs(lumaEndP) >= gradientScaled;\r\n                     if(!doneN) posN -= offNP * FXAA_QUALITY_P6;\r\n                     doneNP = (!doneN) || (!doneP);\r\n                     if(!doneP) posP += offNP * FXAA_QUALITY_P6;\r\n/*--------------------------------------------------------------------------*/\r\n                     #if (FXAA_QUALITY_PS > 7)\r\n                       if(doneNP) {\r\n                         if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(srcTex, posN.xy));\r\n                         if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(srcTex, posP.xy));\r\n                         if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\r\n                         if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\r\n                         doneN = abs(lumaEndN) >= gradientScaled;\r\n                         doneP = abs(lumaEndP) >= gradientScaled;\r\n                         if(!doneN) posN -= offNP * FXAA_QUALITY_P7;\r\n                         doneNP = (!doneN) || (!doneP);\r\n                         if(!doneP) posP += offNP * FXAA_QUALITY_P7;\r\n/*--------------------------------------------------------------------------*/\r\n                       }\r\n                     #endif\r\n                   }\r\n                 #endif\r\n               }\r\n             #endif\r\n           }\r\n         #endif\r\n      }\r\n    #endif\r\n  }\r\n/*----------------calculate subpix offset due to edge ends-------------------*/\r\n  float dstN = posM.x - posN.x;\r\n  float dstP = posP.x - posM.x;\r\n  if(!horzSpan) dstN = posM.y - posN.y;\r\n  if(!horzSpan) dstP = posP.y - posM.y;\r\n/*--------------------------------------------------------------------------*/\r\n  bool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\r\n  float spanLength = (dstP + dstN);\r\n  bool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\r\n  float spanLengthRcp = 1.0 / spanLength;\r\n/*--------------------------------------------------------------------------*/\r\n  bool directionN = dstN < dstP;\r\n  float dst = min(dstN, dstP);\r\n  bool goodSpan = directionN ? goodSpanN : goodSpanP;\r\n  float subpixG = subpixF * subpixF;\r\n  float pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\r\n  float subpixH = subpixG * fxaaQualitySubpix;\r\n/*-----------------calc texture offest using subpix-------------------------*/\r\n  float pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\r\n  float pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\r\n\r\n  float offset = pixelOffsetSubpix * lengthSign;\r\n  #ifdef BG_TRANSPARENT\r\n    // get original texel\r\n    vec4 rgbaA = FxaaTexTopAlpha(srcTex, posM);\r\n    // calc step to blended texel\r\n    vec2 step = sign((!horzSpan) ? vec2 (offset, 0.0) : vec2 (0.0, offset));\r\n    // get neighboring texel\r\n    vec4 rgbaB = FxaaTexTopAlpha(srcTex, posM + step * srcTexelSize);\r\n    //  calc blend factor from offset\r\n    float f = (!horzSpan) ? offset / srcTexelSize.x : offset / srcTexelSize.y;\r\n    f = abs(f);\r\n    // calc alpha (special formula to emulate blending with bg)\r\n    gl_FragColor.a = 1.0 - mix(1.0 - rgbaA.a, 1.0 - rgbaB.a, f);\r\n    // calc color (special formula to emulate blending with bg)\r\n    gl_FragColor.rgb = mix(rgbaA.rgb * rgbaA.a, rgbaB.rgb * rgbaB.a, f) / gl_FragColor.a;\r\n  #else\r\n    if(!horzSpan) {\r\n       posM.x += offset;\r\n    } else {\r\n       posM.y += offset;\r\n    }\r\n    gl_FragColor = FxaaTexTopAlpha(srcTex, posM);\r\n  #endif\r\n  return;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),n.setValues(e),n}return P(t,e),_(t,[{key:"copy",value:function(e){Ke(k(t.prototype),"copy",this).call(this,e),this.depth=e.depth}},{key:"setValues",value:function(e){if("undefined"!==typeof e){Ke(k(t.prototype),"setValues",this).call(this,e);var n={};this.bgTransparent&&(n.BG_TRANSPARENT=1),this.defines=n}}}]),t}(o.RawShaderMaterial);uc.prototype.bgTransparent=!1;var cc=[new o.Vector3(.295184,.077723,.068429),new o.Vector3(-.271976,-.365221,.838363),new o.Vector3(.547713,.467576,.488515),new o.Vector3(.662808,-.031733,.584758),new o.Vector3(-.025717,.218955,.657094),new o.Vector3(-.310153,-.365223,.370701),new o.Vector3(-.101407,-.006313,.747665),new o.Vector3(-.769138,.360399,.086847),new o.Vector3(-.271988,-.27514,.905353),new o.Vector3(.09674,-.566901,.700151),new o.Vector3(.562872,-.735136,.094647),new o.Vector3(.379877,.359278,.190061),new o.Vector3(.519064,-.023055,.405068),new o.Vector3(-.301036,.114696,.088885),new o.Vector3(-.282922,.598305,.487214),new o.Vector3(-.181859,.25167,.679702),new o.Vector3(-.191463,-.635818,.512919),new o.Vector3(-.293655,.427423,.078921),new o.Vector3(-.267983,.680534,.13288),new o.Vector3(.139611,.319637,.477439),new o.Vector3(-.352086,.31104,.653913),new o.Vector3(.321032,.805279,.487345),new o.Vector3(.073516,.820734,.414183),new o.Vector3(-.155324,.589983,.41146),new o.Vector3(.335976,.170782,.527627),new o.Vector3(.46346,-.355658,.167689),new o.Vector3(.222654,.59655,.769406),new o.Vector3(.922138,-.04207,.147555),new o.Vector3(-.72705,-.329192,.369826),new o.Vector3(-.090731,.53382,.463767),new o.Vector3(-.323457,-.876559,.238524),new o.Vector3(-.663277,-.372384,.342856)],lc=function(e){function t(){var e;return g(this,t),(e=C(this,k(t).call(this))).setValues.call(M(e),{uniforms:{noiseTexture:{type:"t",value:vn.noiseTexture},noiseTexelSize:{type:"v2",value:new o.Vector2(1/vn.noiseWidth,1/vn.noiseHeight)},diffuseTexture:{type:"t",value:null},normalTexture:{type:"t",value:null},depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new o.Vector2(1/512,1/512)},camNearFar:{type:"v2",value:new o.Vector2(1,10)},projMatrix:{type:"mat4",value:new o.Matrix4},aspectRatio:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},samplesKernel:{type:"v3v",value:cc},kernelRadius:{type:"f",value:1},depthThreshold:{type:"f",value:1},factor:{type:"f",value:1}},vertexShader:sn,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 32\r\nuniform vec3 samplesKernel[MAX_SAMPLES_COUNT];\r\nuniform sampler2D noiseTexture;\r\nuniform vec2      noiseTexelSize;\r\nuniform sampler2D diffuseTexture;\r\nuniform sampler2D depthTexture;\r\nuniform sampler2D normalTexture;\r\nuniform vec2      srcTexelSize;\r\nuniform vec2      camNearFar;\r\nuniform mat4      projMatrix;\r\n\r\nuniform float aspectRatio;\r\nuniform float tanHalfFOV;\r\n\r\nuniform float kernelRadius;\r\nuniform float depthThreshold;\r\nuniform float factor;\r\n\r\nvarying vec2 vUv;\r\n\r\nfloat CalcViewZ(vec2 screenPos)\r\n{\r\n  float depth = texture2D(depthTexture, screenPos).x;\r\n  // [0, 1]->[-1, 1]\r\n  float clipedZ = 2.0 * depth - 1.0;\r\n  // see THREE.js camera.makeFrustum for projection details\r\n  return (-projMatrix[3][2] / (clipedZ + projMatrix[2][2]));\r\n}\r\n\r\nvec3 ViewPosFromDepth(vec2 screenPos)\r\n{\r\n  vec3 viewPos;\r\n  viewPos.z = CalcViewZ(screenPos);\r\n  //[0, 1]->[-1, 1]\r\n  vec2 projPos = 2.0 * screenPos - 1.0;\r\n  // reconstruct viewposition in right-handed sc with z to viewer\r\n  viewPos.xy = vec2(\r\n                    projPos.x * aspectRatio * tanHalfFOV * abs(viewPos.z),\r\n                    projPos.y * tanHalfFOV * abs(viewPos.z)\r\n                   );\r\n  return viewPos;\r\n}\r\n\r\nvoid main() {\r\n  vec3 viewPos = ViewPosFromDepth(vUv);\r\n  // remap coordinates to prevent noise exture rescale\r\n  vec2 vUvNoise = vUv / srcTexelSize * noiseTexelSize;\r\n  vec4 normalData = texture2D(normalTexture, vUv);\r\n  // return for background fragments (their normals are zero vectors)\r\n  if (length(normalData.rgb) < EPSILON) {\r\n    // 0.0 in alpha component means that it is background fragment\r\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n    return;\r\n  }\r\n  //[0, 1] -> [-1, 1]\r\n  vec3 normal = (normalData.rgb * 2.0 - 1.0);\r\n  // normalData.a store 1.0 if normal was build for frontfaced surface\r\n  // and 0.0 in other case\r\n  if (normalData.a < EPSILON) {\r\n    normal *= -1.0;\r\n  }\r\n  // get random vector for sampling sphere rotation\r\n  vec3 randN = texture2D(noiseTexture, vUvNoise).rgb * 2.0 - 1.0;\r\n  randN = normalize(randN);\r\n  // build TBN (randomly rotated around normal)\r\n  vec3 tangent   = normalize(randN - normal * dot(randN, normal));\r\n  vec3 bitangent = cross(tangent, normal);\r\n  mat3 TBN = mat3(tangent, bitangent, normal);\r\n  // calc AO value\r\n  float AO = 0.0;\r\n  for (int i = 0 ; i < MAX_SAMPLES_COUNT ; i++) {\r\n    // rotate sampling kernel around normal\r\n    vec3 reflectedSample = TBN * samplesKernel[i];\r\n    // get sample\r\n    vec3 samplePos = viewPos + reflectedSample * kernelRadius;\r\n\r\n    // project sample to screen to get sample's screen pos\r\n    vec4 SampleScrPos = vec4(samplePos, 1.0);\r\n    // eye -> clip\r\n    SampleScrPos = projMatrix * SampleScrPos;\r\n    // normalize\r\n    SampleScrPos.xy /= SampleScrPos.w;\r\n    //[-1, 1] -> [0, 1]\r\n    SampleScrPos.xy = (SampleScrPos.xy + vec2(1.0)) * 0.5;\r\n\r\n    // get view z for sample projected to the objct surface\r\n    float sampleDepth = CalcViewZ(SampleScrPos.xy);\r\n    // calc occlusion made by object surface at the sample\r\n    AO += step(samplePos.z, sampleDepth);\r\n  }\r\n  // calc result AO-map color\r\n  AO = 1.0 - max(0.0, AO / float(MAX_SAMPLES_COUNT) * factor);\r\n  // write value to AO-map\r\n  gl_FragColor = vec4(AO, AO, AO, 1.0);\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),e}return P(t,e),t}(o.RawShaderMaterial),fc=[-2,-1,0,1,2],hc=function(e){function t(){var e;return g(this,t),(e=C(this,k(t).call(this))).setValues.call(M(e),{uniforms:{depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new o.Vector2(1/512,1/512)},aoMap:{type:"t",value:null},samplesOffsets:{type:"fv1",value:fc}},vertexShader:sn,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 5\r\nuniform float samplesOffsets[MAX_SAMPLES_COUNT];\r\nuniform sampler2D aoMap;\r\nuniform sampler2D depthTexture;\r\nuniform vec2      srcTexelSize;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  float x = vUv.x;\r\n  float y = vUv.y;\r\n  vec4 res = vec4(0.0);\r\n  res.a = texture2D(aoMap, vec2(x, y )).a;\r\n  // return for background fragments (0.0 in alpha component means that it is background fragment)\r\n  if (res.a < EPSILON) {\r\n    gl_FragColor = res;\r\n    return;\r\n  }\r\n\r\n  float pixelDepth = texture2D(depthTexture, vec2(x, y)).x;\r\n  float weightSum = 0.0;\r\n  for (int i = 0; i < MAX_SAMPLES_COUNT; ++i) {\r\n    if (texture2D(aoMap, vec2(x + samplesOffsets[i] * srcTexelSize.x, y )).a < EPSILON) {\r\n      continue;\r\n    }\r\n    vec2 samplePos = vec2(x + samplesOffsets[i] * srcTexelSize.x, y);\r\n    float depth = texture2D(depthTexture, samplePos).x;\r\n    float weight = (1.0 / (0.0001 + abs(depth - pixelDepth)));\r\n    res.rgb += texture2D(aoMap, vec2(x + samplesOffsets[i] * srcTexelSize.x, y )).rgb * weight;\r\n    weightSum += weight;\r\n  }\r\n  res.rgb = res.rgb / weightSum;\r\n  gl_FragColor = res;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),e}return P(t,e),t}(o.RawShaderMaterial),pc=[-2,-1,0,1,2],dc=function(e){function t(e){var n;return g(this,t),(n=C(this,k(t).call(this,e))).setValues.call(M(n),{uniforms:{diffuseTexture:{type:"t",value:null},depthTexture:{type:"t",value:null},srcTexelSize:{type:"v2",value:new o.Vector2(1/512,1/512)},aoMap:{type:"t",value:null},samplesOffsets:{type:"fv1",value:pc},projMatrix:{type:"mat4",value:new o.Matrix4},aspectRatio:{type:"f",value:0},tanHalfFOV:{type:"f",value:0},fogNearFar:{type:"v2",value:new o.Vector2(100,100)},fogColor:{type:"v4",value:new o.Vector4(0,.5,0,1)}},vertexShader:sn,fragmentShader:"precision highp float;\r\n#define EPSILON 0.0000001\r\n\r\n#define MAX_SAMPLES_COUNT 5\r\nuniform float samplesOffsets[MAX_SAMPLES_COUNT];\r\nuniform sampler2D diffuseTexture;\r\nuniform sampler2D aoMap;\r\nuniform sampler2D depthTexture;\r\nuniform vec2      srcTexelSize;\r\n\r\nuniform mat4  projMatrix;\r\nuniform float aspectRatio;\r\nuniform float tanHalfFOV;\r\n\r\n#ifdef USE_FOG\r\n  uniform vec2 fogNearFar;\r\n  uniform vec4 fogColor;\r\n#endif\r\nvarying vec2 vUv;\r\n\r\nfloat CalcViewZ(vec2 screenPos)\r\n{\r\n  float depth = texture2D(depthTexture, screenPos).x;\r\n  // [0, 1]->[-1, 1]\r\n  float clipedZ = 2.0 * depth - 1.0;\r\n  // see THREE.js camera.makeFrustum for projection details\r\n  return (-projMatrix[3][2] / (clipedZ + projMatrix[2][2]));\r\n}\r\n\r\nvec3 ViewPosFromDepth(vec2 screenPos)\r\n{\r\n  vec3 viewPos;\r\n  viewPos.z = CalcViewZ(screenPos);\r\n  //[0, 1]->[-1, 1]\r\n  vec2 projPos = 2.0 * screenPos - 1.0;\r\n  // reconstruct viewposition in right-handed sc with z to viewer\r\n  viewPos.xy = vec2(\r\n  projPos.x * aspectRatio * tanHalfFOV * abs(viewPos.z),\r\n  projPos.y * tanHalfFOV * abs(viewPos.z)\r\n  );\r\n  return viewPos;\r\n}\r\n\r\nvoid main() {\r\n  vec3 viewPos = ViewPosFromDepth(vUv);\r\n  float x = vUv.x;\r\n  float y = vUv.y;\r\n  vec4 color = texture2D(diffuseTexture, vec2(x, y));\r\n  vec4 res = vec4(0.0);\r\n  res.a = texture2D(aoMap, vec2(x, y )).a;\r\n  // return for background fragments (0.0 in alpha component means that it is background fragment)\r\n  if (res.a < EPSILON) {\r\n    gl_FragColor = color;\r\n    return;\r\n  }\r\n\r\n  float pixelDepth = texture2D(depthTexture, vec2(x, y)).x;\r\n  float weightSum = 0.0;\r\n  for (int i = 0; i < MAX_SAMPLES_COUNT; ++i) {\r\n    if (texture2D(aoMap, vec2(x, y + samplesOffsets[i] * srcTexelSize.y)).a < EPSILON) {\r\n      continue;\r\n    }\r\n    vec2 samplePos = vec2(x, y + samplesOffsets[i] * srcTexelSize.y);\r\n    float depth = texture2D(depthTexture, samplePos).x;\r\n    float weight = (1.0 / (0.0001 + abs(depth - pixelDepth)));\r\n    res.rgb += texture2D(aoMap, vec2(x, y + samplesOffsets[i] * srcTexelSize.y)).rgb * weight;\r\n    weightSum += weight;\r\n  }\r\n  res.rgb /= weightSum;\r\n\r\n  #if defined(USE_FOG) && !defined(FOG_TRANSPARENT)\r\n    // Add fog to the result value\r\n    // Proper way to get an image with fog and ao requires formula:\r\n    //          gl_FragColor = fragColor*AO*(1-fogFactor) + fogColor*fogFactor\r\n    // But we have already fogged molecule to add AO too. Let's split the straight formula into our real steps!\r\n    // We have:  AO, fogFactor, fogColor,\r\n    //          color = fragColor*(1-fogFactor) + fogColor*fogFactor (it comes from diffuseTexture,\r\n    //                                                                where molecule has been already drawn with fog)\r\n    // Transform:\r\n    //          fragColor*AO*(1-fogFactor) + fogColor*fogFactor =\r\n    //        = [fragColor*(1-fogFactor) = color - fogColor*fogFactor] =\r\n    //        = (color - fogColor*fogFactor)*AO + fogColor*fogFactor =\r\n    //        = color*AO + fogColor*fogFactor*(1 - AO)\r\n    // Result:  gl_FragColor = color*AO + fogColor*fogFactor*(1 - AO)\r\n    float fogFactor = smoothstep(fogNearFar.x, fogNearFar.y, - viewPos.z) * fogColor.a;\r\n    gl_FragColor.rgb = color.rgb * res.rgb + fogColor.rgb * fogFactor *(vec3(1.0, 1.0, 1.0) - res.rgb);\r\n  #else\r\n    gl_FragColor.rgb = color.rgb * res.rgb;\r\n  #endif\r\n  gl_FragColor.a = color.a;\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1}),n.setValues(e),n}return P(t,e),_(t,[{key:"setValues",value:function(e){if("undefined"!==typeof e){Ke(k(t.prototype),"setValues",this).call(this,e);var n={};this.useFog&&(n.USE_FOG=1),this.fogTransparent&&(n.FOG_TRANSPARENT=1),this.defines=n}}}]),t}(o.RawShaderMaterial);dc.prototype.useFog=!0,dc.prototype.fogTransparent=!1;var mc=function(e){function t(){var e;g(this,t),e=C(this,k(t).call(this));var n={uniforms:{srcL:{type:"t",value:null},srcR:{type:"t",value:null}},vertexShader:sn,fragmentShader:"precision highp float;\r\n\r\nuniform sampler2D srcL;\r\nuniform sampler2D srcR;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vec4 l = texture2D(srcL, vUv);\r\n  vec4 r = texture2D(srcR, vUv);\r\n  gl_FragColor = vec4(l.r, r.g, r.b, 1.0);\r\n}\r\n",transparent:!1,depthTest:!1,depthWrite:!1};return e.setValues(n),e}return P(t,e),t}(o.RawShaderMaterial),vc=function(){function e(){g(this,e),this.position=new o.Vector3(0,0,0),this.scale=1,this.orientation=new o.Quaternion(0,0,0,1)}return _(e,[{key:"set",value:function(e,t,n){this.position=e,this.scale=t,this.orientation=n}}]),e}(),gc=function(){function e(){g(this,e)}return _(e,[{key:"setup",value:function(e,t){this._startTime=void 0,this._endTime=void 0,this._isPaused=!1,this._srcView=e,this._dstView=t,this._isMoving=!1}},{key:"isMoving",value:function(){return this._isMoving}},{key:"wasStarted",value:function(){return"undefined"!==typeof this._startTime&&"undefined"!==typeof this._endTime}},{key:"start",value:function(){this._startTime=Date.now();var e=re.now.interpolateViews?1500:0;this._endTime=this._startTime+e,this._isMoving=!0}},{key:"getCurrentView",value:function(){if("undefined"===typeof this._srcView||"undefined"===typeof this._dstView||!this._isMoving||!this.wasStarted())return{success:!1};var e=this.createView(),t=Date.now();if(t>this._endTime)return e=this._dstView,this.reset(),{success:!0,view:e};var n=(t-this._startTime)/(this._endTime-this._startTime);return e.position.copy(this._srcView.position),e.position.lerp(this._dstView.position,n),e.scale=(1-n)*this._srcView.scale+n*this._dstView.scale,e.orientation.copy(this._srcView.orientation),e.orientation.slerp(this._dstView.orientation,n),{success:!0,view:e}}},{key:"reset",value:function(){this._startTime=this._endTime=0,this._isMoving=!1}},{key:"pause",value:function(){this._isPaused||(this.setup(this.getCurrentView().view,this._dstView),this._isPaused=!0)}},{key:"resume",value:function(){this._isPaused=!1}},{key:"createView",value:function(){return new vc}}]),e}();function yc(e,t){this.context=e,this._opts=i.a.merge({path:"/"},t)}function _c(e){function t(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="transparent",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator){var n=document.createElement("button");return n.style.display="none",t(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){return t?function(t){t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR";var n=null;function r(){n.removeEventListener("end",r),t.textContent="ENTER VR",n=null}function i(i){i.addEventListener("end",r),e._gfx.renderer.xr.setReferenceSpaceType("local"),e._gfx.renderer.xr.setSession(i),t.textContent="EXIT VR",n=i}t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(null===n){navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(i),e.moveSceneBehindHeadset()}else n.end()}}(n):function(e){e.style.display="",e.style.cursor="auto",e.style.left="calc(50% - 75px)",e.style.width="150px",e.textContent="VR NOT FOUND",e.onmouseenter=null,e.onmouseleave=null,e.onclick=null}(n)})),n}var r=document.createElement("a");return r.href="https://webvr.info",r.innerHTML="WEBXR NOT SUPPORTED",r.style.left="calc(50% - 90px)",r.style.width="180px",r.style.textDecoration="none",t(r),r}Fn(yc.prototype),yc.prototype.removeCookie=function(e){var t=this._toCount(e),n=this._getSimpleCookie(t);if(n){this._removeSimpleCookie(t),n=parseInt(n,10);for(var r=0;r<n;++r)this._removeSimpleCookie(e+r)}else this._removeSimpleCookie(e)},yc.prototype.setCookie=function(e,t){this.removeCookie(e);var n=function(e,t){for(var n=e.length,r=[],i=0,o=0;o<n;i++,o+=t)r[i]=e.slice(o,o+t);return r}(t=encodeURIComponent(t),4e3-e.length-1),r=n.length;if(1!==r){var i=this._toCount(e);this._setSimpleCookie(i,r.toString());for(var o=0;o<r;++o)this._setSimpleCookie(e+o,n[o])}else this._setSimpleCookie(e,t)},yc.prototype.getCookie=function(e){var t=this._toCount(e),n=this._getSimpleCookie(t);if(!n)return this._getSimpleCookie(e);n=parseInt(n,10);for(var r=[],i=0;i<n;++i)r[i]=this._getSimpleCookie(e+i);return r.join("")},yc.prototype._toCount=function(e){return e+"Cnt"},yc.prototype._removeSimpleCookie=function(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;")},yc.prototype._getExpirationDate=function(){var e=new Date;return e.setFullYear(e.getFullYear()+10),e},yc.prototype._setSimpleCookie=function(e,t){document.cookie="".concat(e,"=").concat(t,";expires=").concat(this._getExpirationDate().toUTCString(),";path=").concat(this._opts.path)},yc.prototype._getSimpleCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e,"=([^;]*)")));return t?decodeURIComponent(t[1]):""},yc.prototype._exists=function(e){return document.cookie.match(new RegExp("(?:^|; )".concat(e,"=([^;]*)")))};var xc=function(){function e(t){g(this,e),this._mainCamera=new o.PerspectiveCamera,this._button=null,this._onToggle=t,this._molContainer=new Cn.RCGroup,this._user=new Cn.RCGroup,this._scalingPivot=new o.Object3D,this._user.add(this._scalingPivot),this._controller1=null,this._controller2=null,this._pressedGripsCounter=0,this._distance=0,this._gfx=null}return _(e,[{key:"startScalingByControllers",value:function(){this._distance=this._controller1.position.distanceTo(this._controller2.position),Cn.getMiddlePoint(this._controller1.position,this._controller2.position,this._scalingPivot.position),this._scalingPivot.scale.set(1,1,1),this._scalingPivot.updateMatrix(),this._scalingPivot.updateMatrixWorld(),this._scalingPivot.addSavingWorldTransform(this._molContainer)}},{key:"stopScalingByControllers",value:function(){this._gfx.scene.addSavingWorldTransform(this._molContainer)}},{key:"handleGripsDown",value:function(e){this._pressedGripsCounter++,2===this._pressedGripsCounter?this.startScalingByControllers():1===this._pressedGripsCounter&&e.target.addSavingWorldTransform(this._molContainer)}},{key:"handleGripsUp",value:function(e){(this._pressedGripsCounter--,1===this._pressedGripsCounter)?(this.stopScalingByControllers(),(e.target===this._controller1?this._controller2:this._controller1).addSavingWorldTransform(this._molContainer)):0===this._pressedGripsCounter&&this._gfx.scene.addSavingWorldTransform(this._molContainer)}},{key:"enable",value:function(e){if(e){this._gfx=e;var t=e.renderer,n=e.camera;if(!t)throw new Error("No renderer is available to toggle WebVR");if(!n)throw new Error("No camera is available to toggle WebVR");t.xr.enabled=!0,this._button?this._button.style.display="block":(this._button=_c(this),document.body.appendChild(this._button)),this._mainFog=re.now.fog,re.set("fog",!1),this._plugVRNodesIntoScene(e,t),this._setControllersListeners(),this._onToggle&&this._onToggle(!0)}else j.warn("WebVR couldn't be enabled, because gfx is not defined")}},{key:"_plugVRNodesIntoScene",value:function(e,t){this._mainCamera.copy(e.camera),e.scene.add(this._user),e.scene.add(this._molContainer),this._molContainer.add(e.root),this._controller1=t.xr.getController(0),this._controller2=t.xr.getController(1);var n=this._createControllerMesh();this._controller1.add(n),this._controller2.add(n.clone()),this._user.add(this._controller1),this._user.add(this._controller2)}},{key:"_setControllersListeners",value:function(){var e=this;this._controller1.addEventListener("selectstart",(function(t){e.handleGripsDown(t)})),this._controller1.addEventListener("selectend",(function(t){e.handleGripsUp(t)})),this._controller2.addEventListener("selectstart",(function(t){e.handleGripsDown(t)})),this._controller2.addEventListener("selectend",(function(t){e.handleGripsUp(t)})),this._controller1.addEventListener("squeezestart",(function(t){e.handleGripsDown(t)})),this._controller1.addEventListener("squeezeend",(function(t){e.handleGripsUp(t)})),this._controller2.addEventListener("squeezestart",(function(t){e.handleGripsDown(t)})),this._controller2.addEventListener("squeezeend",(function(t){e.handleGripsUp(t)}))}},{key:"disable",value:function(){if(this._gfx){var e=this._gfx,t=e.renderer,n=e.camera;if(!t)throw new Error("No renderer is available to toggle WebVR");t.setAnimationLoop(null);var r=t.xr.getSession();r&&r.end(),t.xr.enabled=!1,this._button&&(this._button.style.display="none"),re.set("fog",this._mainFog),this._unplugVRNodesFromScene(n),this._onToggle&&this._onToggle(!1)}}},{key:"_unplugVRNodesFromScene",value:function(e){this._mainCamera&&e&&e.copy(this._mainCamera);var t=this._molContainer.children[0];t&&this._gfx.scene.add(t),this._molContainer.parent.remove(this._molContainer),this._user&&this._gfx.scene.remove(this._user),this._molContainer=null,this._user=null,this._scalingPivot=null,this._user=null,this._controller1=null,this._controller2=null}},{key:"_createControllerMesh",value:function(){var e=new o.CylinderGeometry(.04,.04,.3),t=new bn({lights:!1,overrideColor:!0});t.setUberOptions({fixedColor:new o.Color(4474111)}),t.updateUniforms();var n=new o.Mesh(e,t);return n.rotateX(-Math.PI/2),n}},{key:"updateMoleculeScale",value:function(){if(this._controller1&&this._controller2){if(2===this._pressedGripsCounter){Cn.getMiddlePoint(this._controller1.position,this._controller2.position,this._scalingPivot.position);var e=this._controller1.position.distanceTo(this._controller2.position),t=e/this._distance;this._scalingPivot.scale.multiplyScalar(t),this._distance=e}}}},{key:"moveSceneBehindHeadset",value:function(){var e=this._gfx,t=e.camera,n=this._molContainer;n.matrix.identity(),n.position.set(0,0,-4),n.updateMatrix(),n.matrixWorld.multiplyMatrices(t.matrixWorld,n.matrix),e.scene.addSavingWorldTransform(n),this._onToggle&&this._onToggle(!0)}},{key:"getCanvas",value:function(){var e=this._gfx;return e&&e.renderer?e.renderer.domElement:null}}]),e}(),bc=rn.selectors,wc=rn.Atom,Sc=rn.Residue,Ec=rn.Chain,Tc=rn.Molecule,Ac=0,Mc=1,Cc=2,kc="Could not find suitable loader for this source",Rc=Q.createElement;function Pc(e){var t=e.lastIndexOf(".");return t>=0&&(e=e.substr(0,t)),e}function Lc(e,t,n){void 0!==n?e.debug("".concat(t,"... ").concat(Math.floor(100*n),"%")):e.debug("".concat(t,"..."))}function Oc(){return re.now.fogColorEnable?re.now.fogColor:re.now.bg.color}function Ic(e){D.call(this),this._opts=i.a.merge({settingsCookie:"settings",cookiePath:"/"},e),this._gfx=null,this._interpolator=new gc,this._container=e&&e.container||document.getElementById("miew-container")||i.a.head(document.getElementsByClassName("miew-container"))||document.body,this._containerRoot=this._container,this._running=!1,this._halting=!1,this._building=!1,this._needRender=!0,this._hotKeysEnabled=!0,this.settings=re;var t=j;t.console=!1,t.level="info",this.logger=t,this._cookies=new yc(this),this.restoreSettings(),e&&e.settings&&this.settings.set(e.settings),this._spinner=null,this._loading=[],this._animInterval=null,this._visuals={},this._curVisualName=null,this._objects=[],this._sourceWindow=null,this.reset(),this._repr&&t.debug("Selected ".concat(this._repr.mode.name," mode with ").concat(this._repr.colorer.name," colorer."));var n=this;Ic.registeredPlugins.forEach((function(e){e.call(n)})),this._initOnSettingsChanged()}function Nc(e,t){for(var n=e;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(t)}function Dc(e){return e.getExtension("EXT_frag_depth")}function Fc(e){return e.getExtension("WEBGL_depth_texture")&&e.getExtension("WEBGL_draw_buffers")}Ic.prototype=Object.create(D.prototype),Ic.prototype.constructor=Ic,Ic.prototype.getMaxRepresentationCount=function(){return ca.NUM_REPRESENTATION_BITS},Ic.prototype._updateShadowCamera=function(){var e=new o.Matrix4,t=new o.Vector3,n={center:new o.Vector3,halfSize:new o.Vector3};return function(){this._gfx.scene.updateMatrixWorld();for(var r=0;r<this._gfx.scene.children.length;r++)if("DirectionalLight"===this._gfx.scene.children[r].type){var i=this._gfx.scene.children[r];e.copy(i.shadow.camera.matrixWorldInverse),this.getOBB(e,n),t.subVectors(i.target.position,i.position),i.position.subVectors(n.center,t),i.target.position.copy(n.center),i.shadow.bias=.09,i.shadow.camera.bottom=-n.halfSize.y,i.shadow.camera.top=n.halfSize.y,i.shadow.camera.right=n.halfSize.x,i.shadow.camera.left=-n.halfSize.x,i.shadow.camera.near=t.length()-n.halfSize.z,i.shadow.camera.far=t.length()+n.halfSize.z,i.shadow.camera.updateProjectionMatrix()}}}(),Ic.prototype.init=function(){var e=this._container,t=Q.createElement("div",{class:"miew-canvas"});Nc(e,t),this._container=t;var n=document.createDocumentFragment();if(n.appendChild(this._msgMode=Rc("div",{class:"mode-message overlay"},Rc("p",{},"COMPONENT EDIT MODE"))),n.appendChild(this._msgAtomInfo=Rc("div",{class:"atom-info overlay"},Rc("p",{},""))),e.appendChild(n),null!==this._gfx)return!0;var r=this;this._showMessage("Viewer is being initialized...");try{this._initGfx(),this._initListeners(),this._spinner=new h({lines:13,length:28,width:14,radius:42,color:"#fff",zIndex:700}),window.top.addEventListener("keydown",(function(e){r._onKeyDown(e)})),window.top.addEventListener("keyup",(function(e){r._onKeyUp(e)})),this._objectControls=new Ku(this._gfx.root,this._gfx.pivot,this._gfx.camera,this._gfx.renderer.domElement,(function(){return r._getAltObj()})),this._objectControls.addEventListener("change",(function(e){switch(re.now.shadow.on&&r._updateShadowCamera(),e.action){case"rotate":r.dispatchEvent({type:"rotate",quaternion:e.quaternion});break;case"zoom":r.dispatchEvent({type:"zoom",factor:e.factor});break;default:r.dispatchEvent({type:e.action})}r.dispatchEvent({type:"transform"}),r._needRender=!0}));var i=this._gfx;this._picker=new Ju(i.root,i.camera,i.renderer.domElement),this._picker.addEventListener("newpick",(function(e){r._onPick(e)})),this._picker.addEventListener("dblclick",(function(e){r.center(e)}))}catch(s){if("TypeError"===s.name&&"Cannot read property 'getExtension' of null"===s.message)this._showMessage("Could not create WebGL context.");else{if(!(s.message.search(/webgl/i)>1))throw this._showMessage("Viewer initialization failed."),s;this._showMessage(s.message)}return!1}var o=this._opts&&this._opts.load;if(o){var a=this._opts&&this._opts.type;this.load(o,{fileType:a,keepRepsInfo:!0})}return!0},Ic.prototype.term=function(){this._showMessage("Viewer has been terminated."),this._loading.forEach((function(e){e.cancel()})),this._loading.length=0,this.halt(),this._gfx=null},Ic.prototype._showMessage=function(e){var t=document.createElement("div");t.setAttribute("class","miew-message"),t.appendChild(document.createElement("p")).appendChild(document.createTextNode(e)),Nc(this._container,t)},Ic.prototype._showCanvas=function(){Nc(this._container,this._gfx.renderer.domElement)},Ic.prototype._requestAnimationFrame=function(e){var t=this._gfx.renderer.xr;t&&t.enabled?this._gfx.renderer.setAnimationLoop(e):requestAnimationFrame(e)},Ic.prototype._initGfx=function(){var e={width:this._container.clientWidth,height:this._container.clientHeight},t={preserveDrawingBuffer:!0,alpha:!0,premultipliedAlpha:!1};re.now.antialias&&(t.antialias=!0),e.renderer2d=new Uu,e.renderer=new o.WebGLRenderer(t),e.renderer.shadowMap.enabled=re.now.shadow.on,e.renderer.shadowMap.autoUpdate=!1,e.renderer.shadowMap.type=o.PCFShadowMap,un.init(e.renderer),Dc(e.renderer.getContext())||re.set("zSprites",!1),Fc(e.renderer.getContext())||re.set("ao",!1),e.renderer.autoClear=!1,e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setSize(e.width,e.height),e.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent)),e.renderer.clearColor(),e.renderer2d.setSize(e.width,e.height),e.camera=new o.PerspectiveCamera(re.now.camFov,e.width/e.height,re.now.camNear,re.now.camFar),e.camera.setMinimalFov(re.now.camFov),e.camera.position.z=re.now.camDistance,e.camera.updateProjectionMatrix(),e.camera.layers.set(Cn.LAYERS.DEFAULT),e.camera.layers.enable(Cn.LAYERS.VOLUME),e.camera.layers.enable(Cn.LAYERS.VOLUME_BFPLANE),e.stereoCam=new o.StereoCamera,e.scene=new o.Scene;var n=Oc();e.scene.fog=new o.Fog(n,re.now.camNear,re.now.camFar),e.root=new Cn.RCGroup,e.scene.add(e.root),e.pivot=new Cn.RCGroup,e.root.add(e.pivot),e.selectionScene=new o.Scene,e.selectionRoot=new o.Group,e.selectionRoot.matrixAutoUpdate=!1,e.selectionScene.add(e.selectionRoot),e.selectionPivot=new o.Group,e.selectionPivot.matrixAutoUpdate=!1,e.selectionRoot.add(e.selectionPivot);var r=new o.DirectionalLight(16777215,.45);r.position.set(0,.414,1),r.layers.enable(Cn.LAYERS.TRANSPARENT),r.castShadow=!0,r.shadow=new o.DirectionalLightShadow,r.shadow.bias=.09,r.shadow.radius=re.now.shadow.radius,r.shadow.camera.layers.set(Cn.LAYERS.SHADOWMAP);var i=e.renderer.getPixelRatio(),a=Math.max(e.width,e.height)*i;r.shadow.mapSize.width=a,r.shadow.mapSize.height=a,r.target.position.set(0,0,0),e.scene.add(r),e.scene.add(r.target);var s=new o.AmbientLight(6710886);s.layers.enable(Cn.LAYERS.TRANSPARENT),e.scene.add(s),e.axes=new Qu(e.root,e.camera);var u=e.width*i,c=e.height*i;e.offscreenBuf=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.NearestFilter,format:o.RGBAFormat,depthBuffer:!0}),e.renderer.getContext().getExtension("WEBGL_depth_texture")&&(e.offscreenBuf.depthTexture=new o.DepthTexture,e.offscreenBuf.depthTexture.type=o.UnsignedShortType),e.offscreenBuf2=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,depthBuffer:!1}),e.offscreenBuf3=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,depthBuffer:!1}),e.offscreenBuf4=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,depthBuffer:!1}),e.volBFTex=e.offscreenBuf3,e.volFFTex=e.offscreenBuf4,e.volWFFTex=e.offscreenBuf,e.renderer.getContext().getExtension("OES_texture_float")?(e.offscreenBuf5=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,type:o.FloatType,depthBuffer:!1}),e.offscreenBuf6=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,type:o.FloatType,depthBuffer:!1}),e.offscreenBuf7=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,type:o.FloatType,depthBuffer:!0}),e.volBFTex=e.offscreenBuf5,e.volFFTex=e.offscreenBuf6,e.volWFFTex=e.offscreenBuf7):this.logger.warn("Device doesn't support OES_texture_float extension"),e.stereoBufL=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,depthBuffer:!1}),e.stereoBufR=new o.WebGLRenderTarget(u,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,depthBuffer:!1}),this._gfx=e,this._showCanvas(),this._embedWebXR("WEBVR"===re.now.stereo),this._container.appendChild(e.renderer2d.getElement());var l=new S;l.domElement.style.position="absolute",l.domElement.style.right="0",l.domElement.style.bottom="0",this._container.appendChild(l.domElement),this._fps=l,this._fps.show(re.now.fps)},Ic.prototype._initListeners=function(){var e=this;window.addEventListener("resize",(function(){e._onResize()}))},Ic.prototype._makeUniqueVisualName=function(e){if(!e)return Math.random().toString();for(var t=e,n=1;this._visuals.hasOwnProperty(t);)t="".concat(e," (").concat(n.toString(),")"),n++;return t},Ic.prototype._addVisual=function(e){if(!e)return null;var t=this._makeUniqueVisualName(e.name);return e.name=t,this._visuals[t]=e,this._gfx.pivot.add(e),e.getSelectionGeo&&this._gfx.selectionPivot.add(e.getSelectionGeo()),t},Ic.prototype._removeVisual=function(e){var t="",n=null;e instanceof Rn?(t=e.name,n=e):"string"===typeof e&&(t=e,n=this._visuals[t]),n&&this._visuals.hasOwnProperty(t)&&this._visuals[t]===n&&(t===this._curVisualName&&(this._curVisualName=void 0),delete this._visuals[t],n.release(),this._needRender=!0)},Ic.prototype._forEachVisual=function(e){for(var t in this._visuals)this._visuals.hasOwnProperty(t)&&e(this._visuals[t])},Ic.prototype._releaseAllVisuals=function(){if(this._gfx&&this._gfx.pivot){for(var e in this._visuals)this._visuals.hasOwnProperty(e)&&this._visuals[e].release();this._visuals={}}},Ic.prototype._forEachComplexVisual=function(e){if(this._gfx&&this._gfx.pivot)for(var t in this._visuals)this._visuals.hasOwnProperty(t)&&this._visuals[t]instanceof ca&&e(this._visuals[t])},Ic.prototype._getComplexVisual=function(e){e=e||this._curVisualName;var t=null,n=null;return this._forEachComplexVisual((function(r){t=r,r.name===e&&(n=r)})),n||t},Ic.prototype._getVolumeVisual=function(){var e=null;return this._forEachVisual((function(t){t instanceof _a&&(e=t)})),e},Ic.prototype._getVisualForComplex=function(e){if(!e)return null;var t=null;return this._forEachComplexVisual((function(n){n.getComplex()===e&&(t=n)})),t},Ic.prototype.getVisuals=function(){return Object.keys(this._visuals)},Ic.prototype.getComplexVisualsCount=function(){var e=0;return this._forEachComplexVisual((function(){return e++})),e},Ic.prototype.getCurrentVisual=function(){return this._curVisualName},Ic.prototype.setCurrentVisual=function(e){this._visuals[e]&&(this._curVisualName=e)},Ic.prototype.run=function(){var e=this;if(!this._running){if(this._running=!0,this._halting)return void(this._halting=!1);this._objectControls.enable(!0),this._interpolator.resume(),this._requestAnimationFrame((function(){return e._onTick()}))}},Ic.prototype.halt=function(){this._running&&(this._discardComponentEdit(),this._discardFragmentEdit(),this._objectControls.enable(!1),this._interpolator.pause(),this._halting=!0)},Ic.prototype.enableHotKeys=function(e){this._hotKeysEnabled=e,this._objectControls.enableHotkeys(e)},Ic.prototype._onResize=function(){this._needRender=!0;var e=this._gfx;e.width=this._container.clientWidth,e.height=this._container.clientHeight,e.camera.aspect=e.width/e.height,e.camera.setMinimalFov(re.now.camFov),e.camera.updateProjectionMatrix(),e.renderer.setSize(e.width,e.height),e.renderer2d.setSize(e.width,e.height),this.dispatchEvent({type:"resize"})},Ic.prototype._resizeOffscreenBuffers=function(e,t,n){var r=this._gfx,i="NONE"===(n=n||"NONE")||"ANAGLYPH"===n,o=i?1:.5;r.offscreenBuf.setSize(o*e,t),r.offscreenBuf2.setSize(o*e,t),r.offscreenBuf3.setSize(o*e,t),r.offscreenBuf4.setSize(o*e,t),r.offscreenBuf5&&r.offscreenBuf5.setSize(o*e,t),r.offscreenBuf6&&r.offscreenBuf6.setSize(o*e,t),r.offscreenBuf7&&r.offscreenBuf7.setSize(o*e,t),i&&(r.stereoBufL.setSize(e,t),r.stereoBufR.setSize(e,t))},Ic.prototype._onTick=function(){var e=this;if(this._halting)return this._running=!1,void(this._halting=!1);this._fps.update(),this._requestAnimationFrame((function(){return e._onTick()})),this._onUpdate(),this._needRender&&(this._onRender(),this._needRender=!re.now.suspendRender||"WEBVR"===re.now.stereo)},Ic.prototype._getBSphereRadius=function(){var e=0;return this._forEachVisual((function(t){e=Math.max(e,t.getBoundaries().boundingSphere.radius)})),e*this._objectControls.getScale()},Ic.prototype.getOBB=function(){var e=new o.Sphere,t=new o.Box3,n=new o.Box3,r=new o.Matrix4,i=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3];return function(o,a){n.makeEmpty(),this._forEachVisual((function(r){e.copy(r.getBoundaries().boundingSphere),e.applyMatrix4(r.matrixWorld).applyMatrix4(o),e.getBoundingBox(t),n.union(t)})),n.getCenter(a.center),r.getInverse(o),a.center.applyMatrix4(r);var s=n.min,u=n.max;i[0].set(s.x,s.y,s.z),i[1].set(u.x,s.y,s.z),i[2].set(s.x,u.y,s.z),i[3].set(s.x,s.y,u.z);for(var c=0,l=i.length;c<l;c++)i[c].applyMatrix4(r);a.halfSize.set(Math.abs(i[0].x-i[1].x),Math.abs(i[0].y-i[2].y),Math.abs(i[0].z-i[3].z)).multiplyScalar(.5)}}(),Ic.prototype._updateFog=function(){var e,t,n,r=this._gfx;if(re.now.fog){if("undefined"===typeof r.scene.fog||null===r.scene.fog){var i=Oc();r.scene.fog=new o.Fog(i),this._setUberMaterialValues({fog:re.now.fog})}e=r.scene.fog,t=r.camera.position.z,n=this._getBSphereRadius(),e.near=t-n*re.now.fogNearFactor,e.far=t+n*re.now.fogFarFactor}else r.scene.fog&&(r.scene.fog=void 0,this._setUberMaterialValues({fog:re.now.fog}))},Ic.prototype._onUpdate=function(){void 0!==this.isScriptingCommandAvailable&&this.isScriptingCommandAvailable()&&!this._building&&this.callNextCmd(),this._objectControls.update(),this._forEachComplexVisual((function(e){e.getComplex().update()})),re.now.autobuild&&!this._loading.length&&!this._building&&this._needRebuild()&&this.rebuild(),this._loading.length||this._building||this._needRebuild()||this._updateView(),this._updateFog(),this._gfx.renderer.xr.enabled&&this.webVR.updateMoleculeScale()},Ic.prototype._onRender=function(){var e=this._gfx;e.scene.updateMatrixWorld(),e.camera.updateMatrixWorld(),this._clipPlaneUpdateValue(this._getBSphereRadius()),this._fogFarUpdateValue(),e.renderer.setRenderTarget(null),e.renderer.clear(),this._renderFrame(re.now.stereo)},Ic.prototype._renderFrame=function(){var e=new mc,t=new o.Vector2;return function(n){var r=this._gfx,i=r.renderer;i.getSize(t),"NONE"!==n&&(r.camera.focus=r.camera.position.z,r.stereoCam.aspect=1,"ANAGLYPH"===n?r.stereoCam.update(r.camera):r.stereoCam.updateHalfSized(r.camera,re.now.camFov));var o=r.renderer.getPixelRatio();switch(this._resizeOffscreenBuffers(t.width*o,t.height*o,n),this._renderShadowMap(),n){case"WEBVR":case"NONE":this._renderScene(r.camera,!1);break;case"SIMPLE":case"DISTORTED":i.setScissorTest(!0),i.setScissor(0,0,t.width/2,t.height),i.setViewport(0,0,t.width/2,t.height),this._renderScene(this._gfx.stereoCam.cameraL,"DISTORTED"===n),i.setScissor(t.width/2,0,t.width/2,t.height),i.setViewport(t.width/2,0,t.width/2,t.height),this._renderScene(this._gfx.stereoCam.cameraR,"DISTORTED"===n),i.setScissorTest(!1);break;case"ANAGLYPH":this._renderScene(this._gfx.stereoCam.cameraL,!1,r.stereoBufL),this._renderScene(this._gfx.stereoCam.cameraR,!1,r.stereoBufR),i.setRenderTarget(null),e.uniforms.srcL.value=r.stereoBufL.texture,e.uniforms.srcR.value=r.stereoBufR.texture,r.renderer.renderScreenQuad(e)}r.renderer2d.render(r.scene,r.camera),re.now.axes&&r.axes&&!r.renderer.xr.enabled&&r.axes.render(i)}}(),Ic.prototype._onBgColorChanged=function(){var e=this._gfx,t=Oc();e&&(e.scene.fog&&e.scene.fog.color.set(t),e.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent))),this._needRender=!0},Ic.prototype._onFogColorChanged=function(){var e=this._gfx,t=Oc();e&&e.scene.fog&&e.scene.fog.color.set(t),this._needRender=!0},Ic.prototype._setUberMaterialValues=function(e){this._gfx.root.traverse((function(t){(t instanceof o.Mesh||t instanceof o.LineSegments||t instanceof o.Line)&&t.material instanceof bn&&(t.material.setValues(e),t.material.needsUpdate=!0)}))},Ic.prototype._enableMRT=function(e,t,n){var r=this._gfx,i=r.renderer.getContext(),o=i.getExtension("WEBGL_draw_buffers"),a=r.renderer.properties;if(e){r.renderer.setRenderTarget(n);var s=a.get(n.texture).__webglTexture;i.bindTexture(i.TEXTURE_2D,s),r.renderer.setRenderTarget(t);var u=a.get(t).__webglFramebuffer,c=a.get(t.texture).__webglTexture;i.bindFramebuffer(i.FRAMEBUFFER,u),u.width=t.width,u.height=t.height,i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,c,0),i.framebufferTexture2D(i.FRAMEBUFFER,o.COLOR_ATTACHMENT1_WEBGL,i.TEXTURE_2D,s,0),o.drawBuffersWEBGL([i.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1_WEBGL])}else o.drawBuffersWEBGL([i.COLOR_ATTACHMENT0,null])},Ic.prototype._renderScene=function(e,t,n){t=t||!1,n=n||null;var r=this._gfx;if(r.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent)),r.renderer.setRenderTarget(n),r.renderer.clear(),r.renderer.xr.enabled)r.renderer.render(r.scene,e);else{r.renderer.setClearColor(0,0),r.renderer.setRenderTarget(r.offscreenBuf4),r.renderer.clearColor(),r.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent)),r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.clear();var i=null!==this._getComplexVisual(),o=this._getVolumeVisual(),a=i&&re.now.ao;a&&this._enableMRT(!0,r.offscreenBuf,r.offscreenBuf4),"prepass"===re.now.transparency?this._renderWithPrepassTransparency(e,r.offscreenBuf):"standard"===re.now.transparency&&(r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.render(r.scene,e)),a&&this._enableMRT(!1,null,null);var s=i&&re.now.outline.on,u=i&&re.now.fxaa,c=null!==o&&null!=o.getMesh().material,l=a||s||c||u||t?r.offscreenBuf2:n,f=r.offscreenBuf;a?(this._performAO(f,r.offscreenBuf4,r.offscreenBuf.depthTexture,l,r.offscreenBuf3,r.offscreenBuf2),u||t||c||s||(f=l,l=n,r.renderer.setRenderTarget(l),r.renderer.renderScreenQuadFromTex(f.texture,1))):(r.renderer.setRenderTarget(l),r.renderer.renderScreenQuadFromTex(f.texture,1)),s&&(f=l,l=c||u||t?r.offscreenBuf3:n,null!=f&&this._renderOutline(e,r.offscreenBuf,f,l)),this._renderSelection(e,r.offscreenBuf,l),c&&(r.renderer.setRenderTarget(r.offscreenBuf),r.renderer.renderScreenQuadFromTex(l.texture,1),l=r.offscreenBuf,this._renderVolume(o,e,l,r.volBFTex,r.volFFTex,r.volWFFTex),u||t||(r.renderer.setRenderTarget(n),r.renderer.renderScreenQuadFromTex(l.texture,1))),f=l,u&&(l=t?r.offscreenBuf4:n,this._performFXAA(f,l),f=l),t&&(l=n,this._performDistortion(f,l,!0))}},Ic.prototype._performDistortion=function(){var e=new o.Scene,t=new o.OrthographicCamera(-1,1,1,-1,-500,1e3),n=new o.RawShaderMaterial({uniforms:{srcTex:{type:"t",value:null},aberration:{type:"fv3",value:new o.Vector3(1)}},vertexShader:sn,fragmentShader:"precision highp float;\r\n\r\nvarying vec2 vUv;\r\nuniform sampler2D srcTex;\r\nuniform vec3 aberration;\r\n\r\nvoid main() {\r\n  vec2 uv = vUv * 2.0 - 1.0;\r\n  \r\n  gl_FragColor.r = texture2D(srcTex, 0.5 * (uv * aberration[0] + 1.0)).r;\r\n  gl_FragColor.g = texture2D(srcTex, 0.5 * (uv * aberration[1] + 1.0)).g;\r\n  gl_FragColor.b = texture2D(srcTex, 0.5 * (uv * aberration[2] + 1.0)).b;\r\n  gl_FragColor.a = 1.0;\r\n}",transparent:!1,depthTest:!1,depthWrite:!1}),r=Cn.buildDistorionMesh(10,10,re.now.debug.stereoBarrel);return e.add(new ci.Mesh(r,n)),function(r,i,o){this._gfx.renderer.setRenderTarget(i),this._gfx.renderer.clear(),o?(n.uniforms.srcTex.value=r.texture,n.uniforms.aberration.value.set(.995,1,1.01),this._gfx.renderer.render(e,t)):this._gfx.renderer.renderScreenQuadFromTexWithDistortion(r,re.now.debug.stereoBarrel)}}(),Ic.prototype._renderOutline=function(){var e=new sc({depth:!0});return function(t,n,r,i){var a=this._gfx;e.uniforms.srcTex.value=r.texture,e.uniforms.srcDepthTex.value=n.depthTexture,e.uniforms.srcTexSize.value.set(n.width,n.height),e.uniforms.color.value=new o.Color(re.now.outline.color),e.uniforms.threshold.value=re.now.outline.threshold,e.uniforms.thickness.value=new o.Vector2(re.now.outline.thickness,re.now.outline.thickness),a.renderer.setRenderTarget(i),a.renderer.renderScreenQuad(e)}}(),Ic.prototype._renderShadowMap=function(){var e={minFilter:o.NearestFilter,magFilter:o.NearestFilter,format:o.RGBAFormat};return function(){if(re.now.shadow.on){var t=this._gfx,n=t.renderer.getRenderTarget(),r=t.renderer.getActiveCubeFace(),i=t.renderer.getActiveMipmapLevel(),a=t.renderer.state;a.setBlending(o.NoBlending),a.buffers.color.setClear(1,1,1,1),a.buffers.depth.setTest(!0),a.setScissorTest(!1);for(var s=0;s<t.scene.children.length;s++)if("DirectionalLight"===t.scene.children[s].type){var u=t.scene.children[s];null==u.shadow.map&&(u.shadow.map=new o.WebGLRenderTarget(u.shadow.mapSize.width,u.shadow.mapSize.height,e),u.shadow.camera.updateProjectionMatrix()),u.shadow.updateMatrices(u),t.renderer.setRenderTarget(u.shadow.map),t.renderer.clear(),t.renderer.render(t.scene,u.shadow.camera)}t.renderer.setRenderTarget(n,r,i)}}}(),Ic.prototype._hasSelectionToRender=function(){for(var e=this._gfx.selectionPivot,t=0;t<e.children.length;t++){if(e.children[t].children.length>0)return!0}return!1},Ic.prototype._renderSelection=function(){var e=new sc;return function(t,n,r){var i=this._gfx;i.renderer.setClearColor("black",0),i.renderer.setRenderTarget(n),i.renderer.clear(!0,!1,!1),this._hasSelectionToRender()?(i.selectionRoot.matrix=i.root.matrix,i.selectionPivot.matrix=i.pivot.matrix,i.renderer.render(i.selectionScene,t)):i.renderer.renderDummyQuad(),i.renderer.setRenderTarget(r),i.renderer.renderScreenQuadFromTex(n.texture,.6),e.uniforms.srcTex.value=n.texture,e.uniforms.srcTexSize.value.set(n.width,n.height),i.renderer.renderScreenQuad(e)}}(),Ic.prototype._checkVolumeRenderingSupport=function(e){if(!e)return!1;var t=this._gfx,n=t.renderer.getRenderTarget();t.renderer.setRenderTarget(e);var r=t.renderer.getContext(),i=r.checkFramebufferStatus(r.FRAMEBUFFER);return t.renderer.setRenderTarget(n),i===r.FRAMEBUFFER_COMPLETE||(this.logger.warn("Device doesn't support electron density rendering"),!1)},Ic.prototype._renderVolume=function(){var e,t=new ma.BackFacePosMaterial,n=new ma.FrontFacePosMaterial,r=(new o.Matrix4).makeTranslation(.5,.5,.5),i=new o.Matrix4;return function(o,a,s,u,c,l){var f=this._gfx;if("undefined"===typeof e&&(e=this._checkVolumeRenderingSupport(u)),e){var h=o.getMesh();h.rebuild(f.camera),f.renderer.setClearColor("black",0),f.renderer.setRenderTarget(u),f.renderer.clear(),f.renderer.setRenderTarget(c),f.renderer.clear(),f.renderer.setRenderTarget(l),f.renderer.clear(),f.renderer.setRenderTarget(u),a.layers.set(Cn.LAYERS.VOLUME_BFPLANE),f.renderer.render(f.scene,a),a.layers.set(Cn.LAYERS.VOLUME),f.scene.overrideMaterial=t,f.renderer.render(f.scene,a),f.renderer.setRenderTarget(c),a.layers.set(Cn.LAYERS.VOLUME),f.scene.overrideMaterial=n,f.renderer.render(f.scene,a),f.scene.overrideMaterial=null,a.layers.set(Cn.LAYERS.DEFAULT),i.getInverse(h.matrixWorld),bn.prototype.uberOptions.world2colorMatrix.multiplyMatrices(r,i),a.layers.set(Cn.LAYERS.COLOR_FROM_POSITION),f.renderer.setRenderTarget(l),f.renderer.render(f.scene,a);var p=h.material;p.uniforms._BFRight.value=u.texture,p.uniforms._FFRight.value=c.texture,p.uniforms._WFFRight.value=l.texture,a.layers.set(Cn.LAYERS.VOLUME),f.renderer.setRenderTarget(s),f.renderer.render(f.scene,a),a.layers.set(Cn.LAYERS.DEFAULT)}}}(),Ic.prototype._renderWithPrepassTransparency=function(e,t){var n=this._gfx;n.renderer.setRenderTarget(t),e.layers.set(Cn.LAYERS.DEFAULT),n.renderer.render(n.scene,e),e.layers.set(Cn.LAYERS.PREPASS_TRANSPARENT),n.renderer.getContext().colorMask(!1,!1,!1,!1),n.renderer.render(n.scene,e),n.renderer.getContext().colorMask(!0,!0,!0,!0),e.layers.set(Cn.LAYERS.TRANSPARENT),n.renderer.render(n.scene,e),e.layers.set(Cn.LAYERS.DEFAULT)},Ic.prototype._performFXAA=function(){var e=new uc;return function(t,n){if("undefined"!==typeof t&&"undefined"!==typeof n){var r=this._gfx;r.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent)),r.renderer.setRenderTarget(n),r.renderer.clear(),e.uniforms.srcTex.value=t.texture,e.uniforms.srcTexelSize.value.set(1/t.width,1/t.height),e.uniforms.bgColor.value.set(re.now.bg.color),e.bgTransparent!==re.now.bg.transparent&&(e.setValues({bgTransparent:re.now.bg.transparent}),e.needsUpdate=!0),r.renderer.renderScreenQuad(e)}}}(),Ic.prototype._performAO=function(){var e=new lc,t=new hc,n=new dc,r=new o.Vector3;return function(i,a,s,u,c,l){if(i&&a&&s&&u&&c&&l){var f=this._gfx,h=Math.tan(.5*o.Math.DEG2RAD*f.camera.fov);e.uniforms.diffuseTexture.value=i.texture,e.uniforms.depthTexture.value=s,e.uniforms.normalTexture.value=a.texture,e.uniforms.srcTexelSize.value.set(1/i.width,1/i.height),e.uniforms.camNearFar.value.set(f.camera.near,f.camera.far),e.uniforms.projMatrix.value=f.camera.projectionMatrix,e.uniforms.aspectRatio.value=f.camera.aspect,e.uniforms.tanHalfFOV.value=h,f.root.matrix.extractScale(r),e.uniforms.kernelRadius.value=re.now.debug.ssaoKernelRadius*r.x,e.uniforms.depthThreshold.value=2*this._getBSphereRadius(),e.uniforms.factor.value=re.now.debug.ssaoFactor,f.renderer.setRenderTarget(l),f.renderer.renderScreenQuad(e),t.uniforms.aoMap.value=l.texture,t.uniforms.srcTexelSize.value.set(1/l.width,1/l.height),t.uniforms.depthTexture.value=s,f.renderer.setRenderTarget(c),f.renderer.renderScreenQuad(t),n.uniforms.aoMap.value=c.texture,n.uniforms.diffuseTexture.value=i.texture,n.uniforms.srcTexelSize.value.set(1/c.width,1/c.height),n.uniforms.depthTexture.value=s,n.uniforms.projMatrix.value=f.camera.projectionMatrix,n.uniforms.aspectRatio.value=f.camera.aspect,n.uniforms.tanHalfFOV.value=h;var p=f.scene.fog;p&&(n.uniforms.fogNearFar.value.set(p.near,p.far),n.uniforms.fogColor.value.set(p.color.r,p.color.g,p.color.b,re.now.fogAlpha)),n.useFog===re.now.fog&&n.fogTransparent===re.now.bg.transparent||(n.setValues({useFog:re.now.fog,fogTransparent:re.now.bg.transparent}),n.needsUpdate=!0),f.renderer.setRenderTarget(u),f.renderer.renderScreenQuad(n)}}}(),Ic.prototype.reset=function(){this._picker&&this._picker.reset(),this._lastPick=null,this._releaseAllVisuals(),this._setEditMode(Ac),this._resetObjects(),this._gfx&&(Cn.clearTree(this._gfx.pivot),this._gfx.renderer2d.reset()),this.setNeedRender()},Ic.prototype._resetScene=function(){this._objectControls.reset(),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this.resetReps(),this.resetPivot(),this.rebuildAll()},Ic.prototype.resetView=function(){this._picker&&this._picker.reset(),this._setEditMode(Ac),this._resetScene(),this._forEachComplexVisual((function(e){e.updateSelectionMask({}),e.rebuildSelectionGeometry()}))},Ic.prototype._export=function(e){var t=i.a.head(ju.exporters.find({format:e}));if(!t)return this.logger.error("Could not find suitable exporter for this source"),Promise.reject(new Error("Could not find suitable exporter for this source"));if(this.dispatchEvent({type:"exporting"}),this._visuals[this._curVisualName]instanceof ca){var n=null;return t.SourceClass===ca?n=this._visuals[this._curVisualName]:t.SourceClass===en&&(n=this._visuals[this._curVisualName]._complex),new t(n,{miewVersion:Ic.VERSION}).export().then((function(e){return e}))}return this._visuals[this._curVisualName]instanceof _a?Promise.reject(new Error("Sorry, exporter for volume data not implemented yet")):Promise.reject(new Error("Unexpected format of data"))};var zc=/^(?:(pdb|cif|mmtf|ccp4|dsn6):\s*)?(\d[a-z\d]{3})$/i,Bc=/^(?:pc|pubchem):\s*([a-z]+)$/i,jc=/^([a-z][a-z\d\-+.]*):/i;function Vc(e,t,n){return new Promise((function(r){if(n.shouldCancel())throw new Error("Operation cancelled");n.notify({type:"fetching"}),e=function(e,t){if(!i.a.isString(e))return e;var n=zc.exec(e);if(n){var r=c(n,3),o=r[1],a=void 0===o?"pdb":o,s=r[2];switch(a=a.toLowerCase(),s=s.toUpperCase(),a){case"pdb":e="https://files.rcsb.org/download/".concat(s,".pdb");break;case"cif":e="https://files.rcsb.org/download/".concat(s,".cif");break;case"mmtf":e="https://mmtf.rcsb.org/v1.0/full/".concat(s);break;case"ccp4":e="https://www.ebi.ac.uk/pdbe/coordinates/files/".concat(s.toLowerCase(),".ccp4");break;case"dsn6":e="https://edmaps.rcsb.org/maps/".concat(s.toLowerCase(),"_2fofc.dsn6");break;default:throw new Error("Unexpected data format shortcut")}return t.fileType=a,t.fileName="".concat(s,".").concat(a),t.sourceType="url",e}var u=Bc.exec(e);if(u){var l=u[1].toLowerCase();return e="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/".concat(l,"/JSON?record_type=3d"),t.fileType="pubchem",t.fileName="".concat(l,".json"),t.sourceType="url",e}return"url"!==t.sourceType&&void 0!==t.sourceType||(t.sourceType="url",jc.test(e)||(e=Q.resolveURL(e))),e}(e,t);var o=i.a.head(ju.loaders.find({type:t.sourceType,source:e}));if(!o)throw new Error(kc);var a=t.fileName||o.extractName(e);if(a){var s=Q.splitFileName(a),u=c(s,2),l=u[0],f=u[1];i.a.defaults(t,{name:l,fileExt:f,fileName:a})}!function(e){var t=e.binary;if(void 0!==e.fileType){var n=i.a.head(ju.parsers.find({format:e.fileType}));if(!n)throw new Error("Could not find suitable parser for this format");t=n.binary||!1}if(void 0===t&&void 0!==e.fileExt){var r=i.a.head(ju.parsers.find({ext:e.fileExt}));r&&(t=r.binary||!1)}void 0!==e.fileExt&&".man"===e.fileExt.toLowerCase()&&(e.binary=!0,e.animation=!0),void 0!==t&&void 0!==e.binary&&e.binary!==t&&e.context.logger.warn("Overriding incorrect binary mode"),e.binary=t||!1}(t);var h=i.a.get(t,"preset.expression");if(!i.a.isUndefined(h)&&(h=JSON.parse(h))&&h.settings)for(var p=["singleUnit"],d=0,m=p.length;d<m;++d){var v=p[d],g=i.a.get(h.settings,v);i.a.isUndefined(g)||re.set(v,g)}var y=new o(e,t);y.context=t.context,n.addEventListener("cancel",(function(){return y.abort()})),y.addEventListener("progress",(function(e){e.lengthComputable&&e.total>0?Lc(y.logger,"Fetching",e.loaded/e.total):Lc(y.logger,"Fetching")})),console.time("fetch"),r(y.load().then((function(e){return console.timeEnd("fetch"),t.context.logger.info("Fetching finished"),n.notify({type:"fetchingDone",data:e}),e})).catch((function(e){throw console.timeEnd("fetch"),t.context.logger.debug(e.message),e.stack&&t.context.logger.debug(e.stack),t.context.logger.error("Fetching failed"),n.notify({type:"fetchingDone",error:e}),e})))}))}Ic.prototype.load=function(e,t){var n=this;t=i.a.merge({},t,{context:this}),this.settings.now.use.multiFile||(this._loading.length&&(this._loading.forEach((function(e){e.cancel()})),this._loading.length=0),t.animation||this.reset(!0)),this._interpolator.reset(),this.dispatchEvent({type:"loading",options:t,source:e});var r=new ee;this._loading.push(r),r.addEventListener("notification",(function(e){n.dispatchEvent(e.slaveEvent)})),this._spinner.spin(this._container);var o=function(e){var t=n._loading.indexOf(r);return-1!==t&&n._loading.splice(t,1),n._spinner.stop(),n._refreshTitle(),r.notify({type:"loadingDone",anything:e}),e};return Vc(e,t,r).then((function(e){return function(e,t,n){if(n.shouldCancel())return Promise.reject(new Error("Operation cancelled"));n.notify({type:"parsing"});var r=i.a.head(ju.parsers.find({format:t.fileType,ext:t.fileExt,data:e}));if(!r)return Promise.reject(new Error("Could not find suitable parser"));var o=new r(e,t);return o.context=t.context,n.addEventListener("cancel",(function(){return o.abort()})),console.time("parse"),o.parse().then((function(e){return console.timeEnd("parse"),n.notify({type:"parsingDone",data:e}),e})).catch((function(e){throw console.timeEnd("parse"),t.error=e,t.context.logger.debug(e.message),e.stack&&t.context.logger.debug(e.stack),t.context.logger.error("Parsing failed"),n.notify({type:"parsingDone",error:e}),e}))}(e,t,r)})).then((function(e){var r=n._onLoad(e,t);return o(r)})).catch((function(e){throw n.logger.error("Could not load data"),n.logger.debug(e),o(e)}))},Ic.prototype.unload=function(e){this._removeVisual(e||this.getCurrentVisual()),this.resetPivot(),re.now.shadow.on&&this._updateShadowCamera()},Ic.prototype._startAnimation=function(e){this._stopAnimation();var t=this,n=this._getComplexVisual();if(null!==n){try{this._frameInfo=new ic(n.getComplex(),e,{onLoadStatusChanged:function(){t.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:t._isAnimating,isLoading:!t._frameInfo||t._frameInfo.isLoading}})},onError:function(e){t._stopAnimation(),t.logger.error(e)}})}catch(r){return void this.logger.error("Animation file does not fit to current complex!")}this._continueAnimation()}else this.logger.error("Unable to start animation - no molecule is loaded.")},Ic.prototype._pauseAnimation=function(){null!==this._animInterval&&(this._isAnimating=!1,clearInterval(this._animInterval),this._animInterval=null,this._frameInfo&&this.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:this._isAnimating,isLoading:this._frameInfo.isLoading}}))},Ic.prototype._continueAnimation=function(){this._isAnimating=!0;var e=1e3/re.now.maxfps;e=Number.isNaN(e)?0:e;var t=this,n=t._gfx.pivot,r=this._getComplexVisual();r&&(r.resetSelectionMask(),r.rebuildSelectionGeometry(),this._msgAtomInfo.style.opacity=0),this._animInterval=setInterval((function(){if(t.dispatchEvent({type:"mdPlayerStateChanged",state:{isPlaying:t._isAnimating,isLoading:t._frameInfo.isLoading}}),t._frameInfo.frameIsReady){n.updateToFrame(t._frameInfo),t._updateObjsToFrame(t._frameInfo),t._refreshTitle(" Frame ".concat(t._frameInfo._currFrame," of ").concat(t._frameInfo._framesCount," time interval - ").concat(t._frameInfo._timeStep));try{t._frameInfo.nextFrame()}catch(e){return t.logger.error("Error during animation"),void t._stopAnimation()}t._needRender=!0}}),e)},Ic.prototype._stopAnimation=function(){null!==this._animInterval&&(clearInterval(this._animInterval),this._frameInfo.disableEvents(),this._frameInfo=null,this._animInterval=null,this.dispatchEvent({type:"mdPlayerStateChanged",state:null}))},Ic.prototype._onLoad=function(e,t){var n=this._gfx,r=null;if(t.animation)return this._refreshTitle(),this._startAnimation(e),null;if(this._stopAnimation(),t&&t.keepRepsInfo||(this._opts.reps=null,this._opts._objects=null),"Complex"===e.id){var o=e;t.fileName?o.name=o.name||Pc(t.fileName).toUpperCase():t.amberFileName?o.name=o.name||Pc(t.amberFileName).toUpperCase():o.name="Dynamic ".concat(t.fileType," molecule"),r=this._addVisual(new ca(o.name,o)),this._curVisualName=r;var a=this.info();if(this.logger.info("Parsed ".concat(t.fileName," (").concat(a.atoms," atoms, ").concat(a.bonds," bonds, ").concat(a.residues," residues, ").concat(a.chains," chains).")),i.a.isNumber(this._opts.unit)&&o.setCurrentUnit(this._opts.unit),t.preset);else if(re.now.autoPreset)switch(t.fileType){case"cml":this.resetReps("small");break;case"pdb":case"mmtf":case"cif":!function(e){var t=!1;return e.forEachComponent((function(e){e.forEachResidue((function(e){e._isValid&&(t=!0)}))})),t}(o)?this.resetReps("small"):this.resetReps("macro");break;default:this.resetReps("default")}else this.resetReps("default")}else"Volume"===e.id&&(this.resetEd(),r=this._onLoadEd(e));return n.camera.updateProjectionMatrix(),this._updateFog(),n.root.resetTransform(),this.resetPivot(),this._objectControls.setScale(re.now.radiusToFit/this._getBSphereRadius()),this._resetObjects(),re.now.autoResolution&&this._tweakResolution(),re.now.shadow.on&&this._updateShadowCamera(),this._opts.view&&(this.view(this._opts.view),delete this._opts.view),this._refreshTitle(),r},Ic.prototype.resetEd=function(){this._edLoader&&(this._edLoader.abort(),this._edLoader=null),this._removeVisual(this._getVolumeVisual()),this._needRender=!0},Ic.prototype.loadEd=function(e){var t=this;this.resetEd();var n=i.a.head(ju.loaders.find({source:e}));if(!n)return this.logger.error(kc),Promise.reject(new Error(kc));var r=this._edLoader=new n(e,{binary:!0});return r.context=this,r.load().then((function(e){var n=i.a.head(ju.parsers.find({format:"ccp4"}));if(!n)throw new Error("Could not find suitable parser for this source");var r=new n(e);return r.context=t,r.parse().then((function(e){t._onLoadEd(e)}))})).catch((function(e){t.logger.error("Could not load ED data"),t.logger.debug(e)}))},Ic.prototype._onLoadEd=function(e){e.normalize();var t=new _a("volume",e);t.getMesh().layers.set(Cn.LAYERS.VOLUME);var n=this._addVisual(t);return this._needRender=!0,n},Ic.prototype._needRebuild=function(){var e=!1;return this._forEachComplexVisual((function(t){e=e||t.needsRebuild()})),e},Ic.prototype._rebuildObjects=function(){var e,t,n=this,r=this._gfx,i=[];for(e=0;e<r.pivot.children.length;++e){var o=r.pivot.children[e];o instanceof Rn||i.push(o)}for(e=0;e<i.length;++e)i[e].parent.remove(i[e]);setTimeout((function(){var i=n._objects;for(e=0,t=i.length;e<t;++e){var o=i[e];o.needsRebuild&&o.build(),o.getGeometry()&&r.pivot.add(o.getGeometry())}}),10)},Ic.prototype.changeUnit=function(e,t){var n=this._getComplexVisual(t);if(!n)throw new Error("There is no complex to change!");function r(){var e=n?n.getComplex().getCurrentUnit():0,t=e>0?"Bio molecule ".concat(e):"Asymmetric unit";return"Current unit: ".concat(e," (").concat(t,")")}return void 0===e||(i.a.isString(e)&&(e=Math.max(parseInt(e,10),0)),n.getComplex().setCurrentUnit(e)&&(this._resetScene(),this._updateInfoPanel())),r()},Ic.prototype.rebuild=function(){var e=this;if(this._building)this.logger.warn("Miew.rebuild(): already building!");else{this._building=!0,this.dispatchEvent({type:"rebuilding"}),this._rebuildObjects(),this._gfx.renderer2d.reset();var t=[];this._forEachComplexVisual((function(e){e.needsRebuild()&&t.push(e.rebuild().then((function(){return new Promise((function(t){e.rebuildSelectionGeometry(),t()}))})))}));var n=this;this._spinner.spin(this._container),Promise.all(t).then((function(){n._spinner.stop(),n._needRender=!0,n._refreshTitle(),e.dispatchEvent({type:"buildingDone"}),n._building=!1}))}},Ic.prototype.rebuildAll=function(){this._forEachComplexVisual((function(e){e.setNeedsRebuild()}))},Ic.prototype._refreshTitle=function(e){var t;e=void 0===e?"":e;var n=this._getComplexVisual();if(n){t=n.getComplex().name;var r=n.repGet(n.repCurrent());t+=r?" \u2013 ".concat(r.mode.name," Mode"):""}else t=Object.keys(this._visuals).length>0?"Unknown":"No Data";t+=e,this.dispatchEvent({type:"titleChanged",data:t})},Ic.prototype.setNeedRender=function(){this._needRender=!0},Ic.prototype._extractRepresentation=function(){var e=this,t=[];this._forEachComplexVisual((function(n){if(0!==n.getSelectionCount()){var r=n.buildSelectorFromMask(1<<n.getSelectionBit()),i=re.now.presets.default,o=n.repAdd({selector:r,mode:i[0].mode.id,colorer:i[0].colorer.id,material:i[0].material.id});o?(e.dispatchEvent({type:"repAdded",index:o.index,name:n.name}),n.repCurrent(o.index),t.push(n.name)):n.repCount()===ca.NUM_REPRESENTATION_BITS&&e.logger.warn("Number of representations is limited to ".concat(ca.NUM_REPRESENTATION_BITS))}})),t.length>0&&this.logger.report("New representation from selection for complexes: ".concat(t.join(", ")))},Ic.prototype._setReps=function(e){e=e||this._opts&&this._opts.reps||[],this._forEachComplexVisual((function(t){return t.resetReps(e)}))},Ic.prototype.applyPreset=function(e){for(var t=re.now.presets,n=[e||re.defaults.preset,re.defaults.preset,Object.keys(t)[0]],r=null,i=0;!r&&i<n.length;++i)re.set("preset",n[i]),(r=t[re.now.preset])||this.logger.warn('Unknown preset "'.concat(re.now.preset,'"'));this._setReps(r)},Ic.prototype.resetReps=function(e){var t=this._opts&&this._opts.reps;t?this._setReps(t):this.applyPreset(e)},Ic.prototype.repCount=function(e){var t=this._getComplexVisual(e);return t?t.repCount():0},Ic.prototype.repCurrent=function(e,t){var n=this._getComplexVisual(t),r=n?n.repCurrent(e):-1;return e&&r!==e&&this.logger.warn("Representation ".concat(e," was not found. Current rep remains unchanged.")),r},Ic.prototype.rep=function(e,t){var n=this._getComplexVisual("");if(!n)return null;var r=n.rep(e,t);return"created"===r.status?this.dispatchEvent({type:"repAdded",index:r.index,name:n.name}):"changed"===r.status&&this.dispatchEvent({type:"repChanged",index:r.index,name:n.name}),r.desc},Ic.prototype.repGet=function(e,t){var n=this._getComplexVisual(t);return n?n.repGet(e):null},Ic.prototype.repAdd=function(e,t){var n=this._getComplexVisual(t);if(!n)return-1;var r=n.repAdd(e);return r?(this.dispatchEvent({type:"repAdded",index:r.index,name:t}),r.index):-1},Ic.prototype.repRemove=function(e,t){var n=this._getComplexVisual(t);n&&(n.repRemove(e),this.dispatchEvent({type:"repRemoved",index:e,name:t}))},Ic.prototype.repHide=function(e,t,n){this._needRender=!0;var r=this._getComplexVisual(n);return r?r.repHide(e,t):null},Ic.prototype._setEditMode=function(e){this._editMode=e;var t=this._msgMode;t&&(t.style.opacity=e===Ac?0:1,e!==Ac&&(t.getElementsByTagName("p")[0].innerHTML=e===Mc?"COMPONENT EDIT MODE":"FRAGMENT EDIT MODE"));this.dispatchEvent({type:"editModeChanged",data:e===Ac})},Ic.prototype._enterComponentEditMode=function(){if(this._editMode===Ac){var e=[];this._forEachComplexVisual((function(t){var n=t.beginComponentEdit();n&&e.push(n)})),e!==[]&&(this._editors=e,this.logger.info("COMPONENT EDIT MODE -- ON"),this._setEditMode(Mc),this._objectControls.keysTranslateObj(!0))}},Ic.prototype._applyComponentEdit=function(){if(this._editMode===Mc){this._objectControls.stop(),this._objectControls.keysTranslateObj(!1);for(var e=0;e<this._editors.length;++e)this._editors[e].apply();this._editors=[],this.logger.info("COMPONENT EDIT MODE -- OFF (applied)"),this._setEditMode(Ac),this.rebuildAll()}},Ic.prototype._discardComponentEdit=function(){if(this._editMode===Mc){this._objectControls.stop(),this._objectControls.keysTranslateObj(!1);for(var e=0;e<this._editors.length;++e)this._editors[e].discard();this._editors=[],this.logger.info("COMPONENT EDIT MODE -- OFF (discarded)"),this._setEditMode(Ac),this._needRender=!0,this.rebuildAll()}},Ic.prototype._enterFragmentEditMode=function(){if(this._editMode===Ac){var e=[];if(this._forEachComplexVisual((function(t){t instanceof ca&&t.getSelectionCount()>0&&e.push(t)})),1===e.length){var t=e[0].beginFragmentEdit();t&&(this._editors=[t],this.logger.info("FRAGMENT EDIT MODE -- ON (single bond)"),this._setEditMode(Cc),this._objectControls.allowTranslation(!1),this._objectControls.allowAltObjFreeRotation(t.isFreeRotationAllowed()),this._needRender=!0)}}},Ic.prototype._applyFragmentEdit=function(){if(this._editMode===Cc){this._objectControls.stop();for(var e=0;e<this._editors.length;++e)this._editors[e].apply();this._editors=[],this.logger.info("FRAGMENT EDIT MODE -- OFF (applied)"),this._setEditMode(Ac),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this.rebuildAll()}},Ic.prototype._discardFragmentEdit=function(){if(this._editMode===Cc){this._objectControls.stop();for(var e=0;e<this._editors.length;++e)this._editors[e].discard();this._editors=[],this.logger.info("FRAGMENT EDIT MODE -- OFF (discarded)"),this._setEditMode(Ac),this._objectControls.allowTranslation(!0),this._objectControls.allowAltObjFreeRotation(!0),this._needRender=!0}},Ic.prototype._onPick=function(e){if(re.now.picking&&null===this._animInterval&&this._editMode!==Cc&&!this._objectControls.isEditingAltObj()){var t=null;if(e.obj.atom?(t=e.obj.atom.residue.getChain().getComplex(),this._lastPick=e.obj.atom):e.obj.residue?(t=e.obj.residue.getChain().getComplex(),this._lastPick=e.obj.residue):e.obj.chain?(t=e.obj.chain.getComplex(),this._lastPick=e.obj.chain):e.obj.molecule?(t=e.obj.molecule.complex,this._lastPick=e.obj.molecule):this._lastPick=null,t){var n=this._getVisualForComplex(t);n&&(r(n),this._needRender=!0)}else this._forEachComplexVisual(r),this._needRender=!0;this._updateInfoPanel(),this.dispatchEvent(e)}function r(t){t.updateSelectionMask(e.obj),t.rebuildSelectionGeometry()}},Ic.prototype._onKeyDown=function(e){if(this._running&&this._hotKeysEnabled)switch(e.keyCode){case"C".charCodeAt(0):re.now.editing&&this._enterComponentEditMode();break;case"F".charCodeAt(0):re.now.editing&&this._enterFragmentEditMode();break;case"A".charCodeAt(0):switch(this._editMode){case Mc:this._applyComponentEdit();break;case Cc:this._applyFragmentEdit()}break;case"D".charCodeAt(0):switch(this._editMode){case Mc:this._discardComponentEdit();break;case Cc:this._discardFragmentEdit()}break;case"S".charCodeAt(0):e.preventDefault(),e.stopPropagation(),re.set("ao",!re.now.ao),this._needRender=!0;break;case 107:e.preventDefault(),e.stopPropagation(),this._forEachComplexVisual((function(e){e.expandSelection(),e.rebuildSelectionGeometry()})),this._updateInfoPanel(),this._needRender=!0;break;case 109:e.preventDefault(),e.stopPropagation(),this._forEachComplexVisual((function(e){e.shrinkSelection(),e.rebuildSelectionGeometry()})),this._updateInfoPanel(),this._needRender=!0}},Ic.prototype._onKeyUp=function(e){this._running&&this._hotKeysEnabled&&e.keyCode==="X".charCodeAt(0)&&this._extractRepresentation()},Ic.prototype._updateInfoPanel=function(){var e,t,n=this._msgAtomInfo.getElementsByTagName("p")[0],r=0;for(this._forEachComplexVisual((function(e){r+=e.getSelectionCount()}));n.firstChild;)n.removeChild(n.firstChild);if(0!==r){var i="".concat(String(r)," atom").concat(1!==r?"s":""," selected");null!==this._lastPick&&(i+=", the last pick:");var o="",a="",s="";if(this._lastPick instanceof wc){t=(e=this._lastPick).residue,a=e.name;var u=32!==e.location?String.fromCharCode(e.location):"";o="".concat(e.element.fullName," #").concat(e.serial).concat(u,":       ").concat(t._chain._name,".").concat(t._type._name).concat(t._sequence).concat(t._icode.trim(),"."),o+=a,s="Coord: (".concat(e.position.x.toFixed(2).toString(),",     ").concat(e.position.y.toFixed(2).toString(),",     ").concat(e.position.z.toFixed(2).toString(),")")}else this._lastPick instanceof Sc?(t=this._lastPick,o="".concat(t._type._fullName,":       ").concat(t._chain._name,".").concat(t._type._name).concat(t._sequence).concat(t._icode.trim())):this._lastPick instanceof Ec?o="chain ".concat(this._lastPick._name):this._lastPick instanceof Tc&&(o="molecule ".concat(this._lastPick._name));n.appendChild(document.createTextNode(i)),""!==o&&(n.appendChild(document.createElement("br")),n.appendChild(document.createTextNode(o))),""!==s&&(n.appendChild(document.createElement("br")),n.appendChild(document.createTextNode(s))),this._msgAtomInfo.style.opacity=1}else this._msgAtomInfo.style.opacity=0},Ic.prototype._getAltObj=function(){if(this._editors){for(var e=null,t=0;t<this._editors.length;++t){var n=this._editors[t].getAltObj();if(n.objects.length>0){if(e){e=null;break}e=n}}if(e)return e}return{objects:[],pivot:new o.Vector3(0,0,0)}},Ic.prototype.resetPivot=function(){var e=new o.Box3,t=new o.Vector3;return function(){e.makeEmpty(),this._forEachVisual((function(t){e.union(t.getBoundaries().boundingBox)})),e.getCenter(t),this._objectControls.setPivot(t.negate()),this.dispatchEvent({type:"transform"})}}(),Ic.prototype.setPivotResidue=function(){var e=new o.Vector3;return function(t){var n=this._getVisualForComplex(t.getChain().getComplex());if(n){if(t._controlPoint)e.copy(t._controlPoint);else{for(var r=0,i=0,o=0,a=t._atoms.length,s=0;s<a;++s){var u=t._atoms[s].position;r+=u.x/a,i+=u.y/a,o+=u.z/a}e.set(r,i,o)}e.applyMatrix4(n.matrix).negate(),this._objectControls.setPivot(e),this.dispatchEvent({type:"transform"})}}}(),Ic.prototype.setPivotAtom=function(){var e=new o.Vector3;return function(t){var n=this._getVisualForComplex(t.residue.getChain().getComplex());n&&(e.copy(t.position),e.applyMatrix4(n.matrix).negate(),this._objectControls.setPivot(e),this.dispatchEvent({type:"transform"}))}}(),Ic.prototype.getSelectionCenter=function(){var e=new o.Vector3(0,0,0);return function(t,n,r){t.set(0,0,0);var i=0;return this._forEachComplexVisual((function(o){o.getSelectionCenter(e,n,r||o.getSelectionBit())&&(t.add(e),i++)})),0!==i&&(t.divideScalar(i),t.negate(),!0)}}(),Ic.prototype.setPivotSubset=function(){var e=new o.Vector3(0,0,0);function t(e,t){return e.mask&1<<t}function n(e,t){return t.selector.includesAtom(e)}return function(r){var i=r?n:t;this.getSelectionCenter(e,i,r)?(this._objectControls.setPivot(e),this.dispatchEvent({type:"transform"})):this.logger.warn("selection is empty. Center operation not performed")}}(),Ic.prototype.screenshot=function(e,t){var n,r,i,a=this._gfx,s=a.renderer.domElement.width,u=a.renderer.domElement.height;function c(){var n;if(Q.getBrowser()===Q.browserType.SAFARI){var r=document.createElement("canvas"),i=r.getContext("2d");r.width=void 0===e?s:e,r.height=void 0===t?u:t,i.drawImage(a.renderer.domElement,0,0,r.width,r.height),n=r.toDataURL("image/png")}else n=a.renderer.domElement.toDataURL("image/png");return n}if(t=t||e,void 0===e&&void 0===t||e===s&&t===u)n=c();else{var l=a.camera.aspect,f=a.camera.fov,h=(i=a.camera.fov,Math.tan(o.Math.degToRad(.5*i)))*Math.min(a.width,a.height)/a.height,p=e/t;a.renderer.setPixelRatio(1),a.camera.aspect=p,a.camera.fov=(r=h/Math.min(p,1),2*o.Math.radToDeg(Math.atan(r))),a.camera.updateProjectionMatrix(),a.renderer.setDrawingBufferSize(e,t,1),this._renderFrame(re.now.stereo),n=c(),a.renderer.setPixelRatio(window.devicePixelRatio),a.camera.aspect=l,a.camera.fov=f,a.camera.updateProjectionMatrix(),a.renderer.setDrawingBufferSize(a.width,a.height,window.devicePixelRatio),this._needRender=!0}return n},Ic.prototype.screenshotSave=function(e,t,n){var r=this.screenshot(t,n);Q.shotDownload(r,e)},Ic.prototype.save=function(e){var t=this;this._export(e.fileType).then((function(n){var r=t._visuals[t._curVisualName]._complex.name;Q.download(n,r,e.fileType),t._refreshTitle(),t.dispatchEvent({type:"exportingDone"})})).catch((function(e){t.logger.error("Could not export data"),t.logger.debug(e),t._refreshTitle(),t.dispatchEvent({type:"exportingDone",error:e})}))},Ic.prototype._tweakResolution=function(){var e=[["poor",100],["low",500],["medium",1e3],["high",5e3],["ultra",Number.MAX_VALUE]],t=0;if(this._forEachComplexVisual((function(e){t+=e.getComplex().getAtomCount()})),t>0)for(var n=1e6*this._gfxScore/t,r=0;r<e.length;++r)if(n<e[r][1]){this._autoChangeResolution(e[r][0]);break}},Ic.prototype._autoChangeResolution=function(e){e!==re.now.resolution&&this.logger.report('Your rendering resolution was changed to "'.concat(e,'" for best performance.')),re.now.resolution=e},Ic.prototype.saveSettings=function(){this._cookies.setCookie(this._opts.settingsCookie,JSON.stringify(this.settings.getDiffs(!0)))},Ic.prototype.restoreSettings=function(){try{var e=this._cookies.getCookie(this._opts.settingsCookie),t=e?JSON.parse(e):{};this.settings.applyDiffs(t,!0)}catch(n){this.logger.error("Cookies parse error: ".concat(n.message))}},Ic.prototype.resetSettings=function(){this.settings.reset()},Ic.prototype.setOptions=function(e){"string"===typeof e&&(e=Ic.options.fromAttr(e)),e.reps&&(this._opts.reps=null),i.a.merge(this._opts,e),e.settings&&this.set(e.settings),this._opts._objects=e._objects,this._resetObjects(),e.load&&this.load(e.load,{fileType:e.type}),e.preset&&(re.now.preset=e.preset),e.reps&&this.resetReps(e.preset),this._opts.view&&(this.view(this._opts.view),delete this._opts.view);var t=this._getComplexVisual();t&&(t.getComplex().resetCurrentUnit(),i.a.isNumber(e.unit)&&t.getComplex().setCurrentUnit(e.unit),this.resetView(),this.rebuildAll())},Ic.prototype.info=function(e){var t=this._getComplexVisual(e);if(!t)return{};var n=t.getComplex(),r=n.metadata;return{id:r.id||n.name||"UNKNOWN",title:r.title&&r.title.join(" ")||"UNKNOWN DATA",atoms:n.getAtomCount(),bonds:n.getBondCount(),residues:n.getResidueCount(),chains:n.getChainCount()}},Ic.prototype.addObject=function(e,t){var n=null;if(e.type===ac.prototype.type&&(n=ac),null===n)throw new Error("Unknown scene object type - ".concat(e.type));try{var r=new n(e.params,e.opts);this._addSceneObject(r)}catch(i){if(t)throw i;this.logger.debug("Error during scene object creation: ".concat(i.message))}this._needRender=!0},Ic.prototype._addSceneObject=function(e){var t=this._getComplexVisual();e.build&&t&&(e.build(t.getComplex()),this._gfx.pivot.add(e.getGeometry()));var n=this._objects;n[n.length]=e},Ic.prototype._updateObjsToFrame=function(e){for(var t=this._objects,n=0,r=t.length;n<r;++n)t[n].updateToFrame&&t[n].updateToFrame(e)},Ic.prototype._resetObjects=function(){var e=this._opts._objects;if(this._objects=[],e)for(var t=0,n=e.length;t<n;++t)this.addObject(e[t],!1)},Ic.prototype.removeObject=function(e){var t=this._objects[e];if(!t)throw new Error("Scene object with index ".concat(e," does not exist"));t.destroy(),this._objects.splice(e,1),this._needRender=!0},Ic.prototype.getURL=function(e){return Se.toURL(this.getState(i.a.defaults(e,{compact:!0,settings:!1,view:!1})))},Ic.prototype.getScript=function(e){return Se.toScript(this.getState(i.a.defaults(e,{compact:!0,settings:!0,view:!0})))},Ic.prototype._compareReps=function(e,t){var n={},r=0;e&&(r=e.repCount());var o=re.defaults.presets[re.now.preset],a=t;void 0===o||o.length>r?(a=!1,n.preset="empty"):re.now.preset!==re.defaults.preset&&(n.preset=re.now.preset);for(var s=[],u=!0,c=0,l=r;c<l;++c)s[c]=e.repGet(c).compare(a?o[c]:null),i.a.isEmpty(s[c])||(u=!1);return u||(n.reps=s),n},Ic.prototype.getState=function(e){var t={};e=i.a.defaults(e,{compact:!0,settings:!1,view:!1});var n=this._getComplexVisual();if(null!==n){var r=n.getComplex(),o=r.metadata;if(o.id){var a=o.format?"".concat(o.format,":"):"";t.load=a+o.id}var s=r.getCurrentUnit();1!==s&&(t.unit=s)}var u=this._compareReps(n,e.compact);u.preset&&(t.preset=u.preset),u.reps&&(t.reps=u.reps);for(var c=this._objects,l=[],f=0,h=c.length;f<h;++f)l[f]=c[f].identify();if(c.length>0&&(t._objects=l),e.view&&(t.view=this.view()),e.settings){var p=this.settings.getDiffs(!1);i.a.isEmpty(p)||(t.settings=p)}return t},Ic.prototype.get=function(e,t){return re.get(e,t)},Ic.prototype._clipPlaneUpdateValue=function(e){var t=Math.max(this._gfx.camera.position.z-e*re.now.draft.clipPlaneFactor,re.now.camNear),n={clipPlaneValue:t};this._forEachComplexVisual((function(e){e.setUberOptions(n)}));for(var r=0,i=this._objects.length;r<i;++r){var o=this._objects[r];o._line&&o._line.material.setUberOptions(n)}null!==this._picker&&(this._picker.clipPlaneValue=t)},Ic.prototype._fogFarUpdateValue=function(){null!==this._picker&&(this._gfx.scene.fog?this._picker.fogFarValue=this._gfx.scene.fog.far:this._picker.fogFarValue=void 0)},Ic.prototype._updateShadowmapMeshes=function(e){this._forEachComplexVisual((function(t){for(var n=t._reprList,r=0,i=n.length;r<i;++r){var o=n[r];e(o.geo,o.material)}}))},Ic.prototype._updateMaterials=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this._forEachComplexVisual((function(r){return r.setMaterialValues(e,t,n)}));for(var r=0,i=this._objects.length;r<i;++r){var o=this._objects[r];o._line&&(o._line.material.setValues(e),o._line.material.needsUpdate=!0)}},Ic.prototype._fogAlphaChanged=function(){this._forEachComplexVisual((function(e){e.setUberOptions({fogAlpha:re.now.fogAlpha})}))},Ic.prototype._embedWebXR=function(){var e=this;if("WEBVR"!==re.now.stereo)return this.webVR&&this.webVR.disable(),void(this.webVR=null);this.webVR||(this.webVR=new xc((function(){e._requestAnimationFrame((function(){return e._onTick()})),e._needRender=!0,e._onResize()}))),this.webVR.enable(this._gfx)},Ic.prototype._initOnSettingsChanged=function(){var e=this,t=function(t,n){(t=i.a.isArray(t)?t:[t]).forEach((function(t){e.settings.addEventListener("change:".concat(t),n)}))};t("modes.VD.frame",(function(){var t=e._getVolumeVisual();null!==t&&(t.showFrame(re.now.modes.VD.frame),e._needRender=!0)})),t("modes.VD.isoMode",(function(){var t=e._getVolumeVisual();null!==t&&(t.getMesh().material.updateDefines(),e._needRender=!0)})),t("bg.color",(function(){e._onBgColorChanged()})),t("ao",(function(){if(re.now.ao&&!Fc(e._gfx.renderer.getContext()))e.logger.warn("Your device or browser does not support ao"),re.set("ao",!1);else{var t={normalsToGBuffer:re.now.ao};e._setUberMaterialValues(t)}})),t("zSprites",(function(){re.now.zSprites&&!Dc(e._gfx.renderer.getContext())&&(e.logger.warn("Your device or browser does not support zSprites"),re.set("zSprites",!1))})),t("fogColor",(function(){e._onFogColorChanged()})),t("fogColorEnable",(function(){e._onFogColorChanged()})),t("bg.transparent",(function(t){var n=e._gfx;n&&n.renderer.setClearColor(re.now.bg.color,Number(!re.now.bg.transparent)),e._updateMaterials({fogTransparent:t.value}),e.rebuildAll()})),t("draft.clipPlane",(function(t){e._updateMaterials({clipPlane:t.value}),e.rebuildAll()})),t("shadow.on",(function(t){var n={shadowmap:t.value,shadowmapType:re.now.shadow.type},r=e._gfx;r&&(r.renderer.shadowMap.enabled=Boolean(n.shadowmap)),e._updateMaterials(n,!0),n.shadowmap?(e._updateShadowCamera(),e._updateShadowmapMeshes(Cn.createShadowmapMaterial)):e._updateShadowmapMeshes(Cn.removeShadowmapMaterial),e._needRender=!0})),t("shadow.type",(function(t){re.now.shadow.on&&(e._updateMaterials({shadowmapType:t.value},!0),e._needRender=!0)})),t("shadow.radius",(function(t){for(var n=0;n<e._gfx.scene.children.length;n++){if(void 0!==e._gfx.scene.children[n].shadow)e._gfx.scene.children[n].shadow.radius=t.value,e._needRender=!0}})),t("fps",(function(){e._fps.show(re.now.fps)})),t(["fog","fogNearFactor","fogFarFactor"],(function(){e._updateFog(),e._needRender=!0})),t("fogAlpha",(function(){var t=re.now.fogAlpha;(t<0||t>1)&&e.logger.warn("fogAlpha must belong range [0,1]"),e._fogAlphaChanged(),e._needRender=!0})),t("autoResolution",(function(t){t.value&&!e._gfxScore&&e.logger.warn("Benchmarks are missed, autoresolution will not work! Autoresolution should be set during miew startup.")})),t("stereo",(function(){e._embedWebXR("WEBVR"===re.now.stereo),e._needRender=!0})),t(["transparency","palette"],(function(){e.rebuildAll()})),t("resolution",(function(){e.rebuildAll();var t=e._getVolumeVisual();t&&(t.getMesh().material.updateDefines(),e._needRender=!0)})),t(["axes","fxaa","ao","outline.on","outline.color","outline.threshold","outline.thickness"],(function(){e._needRender=!0}))},Ic.prototype.set=function(e,t){re.set(e,t)},Ic.prototype.select=function(e,t){var n=this._getComplexVisual();if(n){var r=e;i.a.isString(e)&&(r=bc.parse(e).selector),n.select(r,t),this._lastPick=null,this._updateInfoPanel(),this._needRender=!0}};Ic.prototype.view=function(e){var t=this,n=this._gfx.pivot,r=[];return"undefined"===typeof e?function(){var e=n.position,i=t._objectControls.getScale()/re.now.radiusToFit,a=new o.Euler;return a.setFromQuaternion(t._objectControls.getOrientation(),"ZXY"),r=[e.x,e.y,e.z,i,a.x,a.y,a.z],"1"+Q.arrayToBase64(r,Float32Array)}():(function(){40===e.length&&(e="0".concat(e));var i=e[0];if(r=Q.arrayFromBase64(e.substr(1),Float32Array),"1"!==i){if("0"!==i)return void t.logger.warn("Encoded view version mismatch, stored as ".concat(i," vs ").concat("1"," expected"));r[3]/=8}var a=t._interpolator,s=a.createView();s.position.copy(n.position),s.scale=t._objectControls.getScale(),s.orientation.copy(t._objectControls.getOrientation());var u=a.createView();u.position.set(r[0],r[1],r[2]),t._getComplexVisual()&&u.position.sub(t._getComplexVisual().position),u.scale=r[3],u.orientation.setFromEuler(new o.Euler(r[4],r[5],r[6],"ZXY")),a.setup(s,u)}(),e)},Ic.prototype._updateView=function(){var e=this._gfx.pivot,t=this._interpolator;if(t.wasStarted()||t.start(),t.isMoving()){var n=t.getCurrentView();if(n.success){var r=n.view;e.position.copy(r.position),this._objectControls.setScale(r.scale*re.now.radiusToFit),this._objectControls.setOrientation(r.orientation),this.dispatchEvent({type:"transform"}),this._needRender=!0}}},Ic.prototype.translate=function(e,t,n){this._objectControls.translatePivot(e,t,n),this.dispatchEvent({type:"transform"}),this._needRender=!0},Ic.prototype.rotate=function(e,t,n){this._objectControls.rotate((new o.Quaternion).setFromEuler(new o.Euler(e,t,n,"XYZ"))),this.dispatchEvent({type:"transform"}),this._needRender=!0},Ic.prototype.scale=function(e){if(e<=0)throw new RangeError("Scale should be greater than zero");this._objectControls.scale(e),this.dispatchEvent({type:"transform"}),this._needRender=!0},Ic.prototype.center=function(e){if(void 0===e)return this.setPivotSubset(),void(this._needRender=!0);if(void 0!==e.obj&&("atom"in e.obj||"residue"in e.obj))return"atom"in e.obj?this.setPivotAtom(e.obj.atom):this.setPivotResidue(e.obj.residue),void(this._needRender=!0);if(void 0===e.obj&&""!==e){var t=bc.parse(e);if(void 0===t.error)return this.setPivotSubset(t),void(this._needRender=!0)}this.resetPivot(),this._needRender=!0},Ic.prototype.within=function(e,t){var n=this._getComplexVisual();if(!n)return bc.None();e instanceof String&&(e=bc.parse(e));var r=n.within(e,t);return r&&(n.rebuildSelectionGeometry(),this._needRender=!0),r},Ic.prototype.projected=function(e,t){var n=this._getComplexVisual(t);if(!n)return!1;var r=n.getComplex().getAtomByFullname(e);if(null===r)return!1;var i=r.position.clone();return this._gfx.pivot.updateMatrixWorldRecursive(),this._gfx.camera.updateMatrixWorldRecursive(),this._gfx.pivot.localToWorld(i),i.project(this._gfx.camera),{x:.5*(i.x+1)*this._gfx.width,y:.5*(1-i.y)*this._gfx.height}},Ic.prototype.dssp=function(e){var t=this._getComplexVisual(e);t&&(t.getComplex().dssp(),t._reprList.forEach((function(e){"CA"!==e.mode.id&&"SS"!==e.colorer.id||(e.needsRebuild=!0)})))},Ic.prototype.exportCML=function(){var e=this;var t=e._getComplexVisual(),n=t?t.getComplex():null;return n&&n.originalCML?(function(t){var n=function(e){var t=new o.Vector3,n=new o.Vector3,r=new o.Vector3;e.extractBasis(t,n,r),t.normalize(),n.normalize(),r.normalize();var i=new o.Matrix4;return i.identity(),i.makeBasis(t,n,r),i}(e._gfx.root.matrixWorld),r=new o.Vector4(0,0,0,0),i=new o.Vector4(0,0,0,0),a=null,s=null;t.forEachAtom((function(e){e.xmlNodeRef&&e.xmlNodeRef.xmlNode&&(a=e.xmlNodeRef.xmlNode,s=e.position,r.set(s.x,s.y,s.z,1),r.applyMatrix4(n),a.setAttribute("x3",r.x.toString()),a.setAttribute("y3",r.y.toString()),a.setAttribute("z3",r.z.toString()),a.removeAttribute("x2"),a.removeAttribute("y2"))})),t.forEachSGroup((function(e){if(e.xmlNodeRef&&e.xmlNodeRef.xmlNode){a=e.xmlNodeRef.xmlNode,s=e.getPosition(),r.set(s.x,s.y,s.z,1);var t=e.getCentralPoint();null===t?r.applyMatrix4(n):(i.set(t.x,t.y,t.z,0),r.add(i),r.applyMatrix4(n),i.set(t.x,t.y,t.z,1),i.applyMatrix4(n),r.sub(i)),a.setAttribute("x",r.x.toString()),a.setAttribute("y",r.y.toString()),a.setAttribute("z",r.z.toString())}}))}(n),(new XMLSerializer).serializeToString(n.originalCML)):null},Ic.prototype.motm=function(){re.set({fogColorEnable:!0,fogColor:0,outline:{on:!0,threshold:.01},bg:{color:16777215}}),this._forEachComplexVisual((function(e){for(var t=[],n=e.getComplex(),r=Bo.get(re.now.palette),i=0;i<n.getChainCount();i++){var o=n._chains[i]._name,a=r.getChainColor(o);t[i]={selector:"chain ".concat(o),mode:"VW",colorer:["CB",{color:a,factor:.9}],material:"FL"}}e.resetReps(t)}))},Ic.prototype.VERSION="0.9.0",i.a.assign(Ic,{VERSION:Ic.prototype.VERSION,registeredPlugins:[],chem:rn,io:ju,modes:bo,colorers:ea,materials:na,palettes:Bo,options:Se,settings:re,utils:Q,gfx:{Representation:ia},thirdParty:{lodash:i.a,three:o}});var Uc={parser:function(){var e=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},t=[1,60],n=[1,62],r=[1,63],i=[1,65],o=[1,66],a=[1,67],s=[1,68],u=[1,69],c=[1,80],l=[1,72],f=[1,73],h=[1,74],p=[1,75],d=[1,99],m=[1,76],v=[1,100],g=[1,79],y=[1,51],_=[1,81],x=[1,82],b=[1,84],w=[1,83],S=[1,85],E=[1,96],T=[1,97],A=[1,98],M=[1,86],C=[1,87],k=[1,64],R=[1,70],P=[1,71],L=[1,77],O=[1,78],I=[1,53],N=[1,54],D=[1,55],F=[1,61],z=[1,88],B=[1,89],j=[1,90],V=[1,91],U=[1,92],G=[1,93],H=[1,94],W=[1,95],q=[1,101],Y=[1,102],X=[1,103],$=[1,104],Z=[1,105],K=[1,56],J=[1,57],Q=[1,58],ee=[1,59],te=[1,115],ne=[1,111],re=[1,114],ie=[1,112],oe=[1,113],ae=[1,118],se=[1,117],ue=[1,134],ce=[1,149],le=[1,150],fe=[1,157],he=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],pe=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,71,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],de=[5,6,7,9,13,15,17,18,19,20,23,25,26,27,30,33,34,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,82,83,84,85,86,87,88,89,90,91,92,93,94,95],me=[5,70,72],ve=[5,74],ge=[71,101],ye={trace:function(){},yy:{},symbols_:{error:2,Program:3,Command:4,EOF:5,RESET:6,BUILD:7,ALL:8,HELP:9,Path:10,MOTM:11,OneArgCommand:12,GET:13,STRING:14,SET:15,Value:16,SET_SAVE:17,SET_RESTORE:18,SET_RESET:19,PRESET:20,AddRepresentation:21,EditRepresentation:22,REMOVE:23,RepresentationReference:24,HIDE:25,SHOW:26,LIST:27,EXPAND_KEY:28,SELECTOR_KEY:29,SELECT:30,AS:31,WordAll:32,SELECTOR:33,WITHIN:34,NUMBER:35,OF:36,MATERIAL:37,IDENTIFIER:38,ModeCMD:39,ColorCMD:40,VIEW:41,BASE_64:42,UNIT:43,DSSP:44,SCALE:45,ROTATE:46,AxesList:47,TRANSLATE:48,CENTER:49,GetURLBranch:50,Screenshot:51,LINE:52,ArgList:53,LISTOBJ:54,REMOVEOBJ:55,URL:56,VIEW_KEY:57,SCREENSHOT:58,LOAD:59,Url:60,FILE_KEY:61,ADD:62,Description:63,REP:64,MODE:65,COLOR:66,Descriptor:67,RepresentationOwnProperty:68,RepresentationOwnPropertyOpts:69,DESC_KEY:70,"=":71,DESC_KEY_OPTS:72,AxesArg:73,DESC_KEY_AXES:74,Arg:75,PathWoDescKey:76,HEX:77,BOOL:78,Word:79,CommandSetWoDESC_KEY:80,DescKeys:81,CLEAR:82,FILE_LIST:83,FILE_REGISTER:84,FILE_DELETE:85,PRESET_ADD:86,PRESET_DELETE:87,PRESET_UPDATE:88,PRESET_RENAME:89,PRESET_OPEN:90,CREATE_SCENARIO:91,RESET_SCENARIO:92,DELETE_SCENARIO:93,ADD_SCENARIO_ITEM:94,LIST_SCENARIO:95,PDB_KEY:96,DELAY_KEY:97,PRST_KEY:98,DESCRIPTION_KEY:99,CommandSet:100,".":101,PresetPath:102,"/":103,HexOrNumber:104,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"RESET",7:"BUILD",8:"ALL",9:"HELP",11:"MOTM",13:"GET",14:"STRING",15:"SET",17:"SET_SAVE",18:"SET_RESTORE",19:"SET_RESET",20:"PRESET",23:"REMOVE",25:"HIDE",26:"SHOW",27:"LIST",28:"EXPAND_KEY",29:"SELECTOR_KEY",30:"SELECT",31:"AS",33:"SELECTOR",34:"WITHIN",35:"NUMBER",36:"OF",37:"MATERIAL",38:"IDENTIFIER",41:"VIEW",42:"BASE_64",43:"UNIT",44:"DSSP",45:"SCALE",46:"ROTATE",48:"TRANSLATE",49:"CENTER",52:"LINE",54:"LISTOBJ",55:"REMOVEOBJ",56:"URL",57:"VIEW_KEY",58:"SCREENSHOT",59:"LOAD",61:"FILE_KEY",62:"ADD",64:"REP",65:"MODE",66:"COLOR",70:"DESC_KEY",71:"=",72:"DESC_KEY_OPTS",74:"DESC_KEY_AXES",77:"HEX",78:"BOOL",82:"CLEAR",83:"FILE_LIST",84:"FILE_REGISTER",85:"FILE_DELETE",86:"PRESET_ADD",87:"PRESET_DELETE",88:"PRESET_UPDATE",89:"PRESET_RENAME",90:"PRESET_OPEN",91:"CREATE_SCENARIO",92:"RESET_SCENARIO",93:"DELETE_SCENARIO",94:"ADD_SCENARIO_ITEM",95:"LIST_SCENARIO",96:"PDB_KEY",97:"DELAY_KEY",98:"PRST_KEY",99:"DESCRIPTION_KEY",101:".",103:"/"},productions_:[0,[3,2],[3,1],[4,1],[4,1],[4,2],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,3],[4,3],[4,1],[4,1],[4,1],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,2],[4,2],[4,1],[4,2],[4,2],[4,2],[4,4],[4,2],[4,6],[4,2],[4,1],[4,1],[4,1],[4,2],[4,2],[4,1],[4,2],[4,1],[4,2],[4,2],[4,2],[4,1],[4,2],[4,1],[4,1],[4,3],[4,3],[4,4],[4,4],[4,1],[4,2],[50,1],[50,2],[50,2],[50,3],[50,3],[51,1],[51,2],[51,3],[12,2],[12,2],[12,2],[21,1],[21,2],[21,2],[21,3],[22,2],[22,3],[39,2],[39,3],[40,2],[40,3],[24,1],[24,1],[63,1],[63,2],[63,3],[63,4],[67,1],[67,1],[67,2],[68,3],[69,3],[47,1],[47,2],[73,2],[53,1],[53,2],[75,3],[16,1],[16,1],[16,1],[16,1],[16,1],[79,1],[79,1],[32,1],[32,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[100,1],[100,1],[76,1],[76,3],[76,3],[10,1],[10,1],[10,3],[10,3],[10,3],[60,1],[102,1],[102,3],[104,1],[104,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 3:this.$=r.miew.reset(!1),r.ClearContext(),r.miew.resetReps("empty");break;case 4:this.$=r.miew.rebuild();break;case 5:this.$=r.miew.rebuildAll(),r.miew.rebuild();break;case 6:this.$=r.echo(r.utils.help().toString());break;case 7:this.$=r.echo(r.utils.help(o[s]).toString());break;case 8:this.$=r.miew.motm();break;case 10:case 11:this.$=r.utils.propagateProp(o[s]),r.echo(r.miew.get(o[s]).toString());break;case 12:case 13:this.$=r.miew.set(o[s-1],r.utils.propagateProp(o[s-1],o[s]));break;case 14:this.$=r.miew.saveSettings();break;case 15:this.$=r.miew.restoreSettings();break;case 16:this.$=r.miew.resetSettings();break;case 17:this.$=r.miew.resetReps();break;case 18:this.$=r.miew.applyPreset(o[s]);break;case 21:this.$=r.miew.repRemove(o[s]),r.representations.remove(o[s]);break;case 22:this.$=r.miew.repHide(o[s]);break;case 23:this.$=r.miew.repHide(o[s],!1);break;case 24:this.$=r.echo(r.utils.listRep(r.miew,r.representations,o[s],"-e"));break;case 25:this.$=r.echo(r.utils.list(r.miew,r.representations));break;case 26:this.$=r.echo(r.utils.list(r.miew,r.representations,o[s]));break;case 27:this.$=r.echo(r.utils.listSelector(r.miew,r.Context));break;case 28:this.$=r.miew.select(r.utils.checkArg(o[s-1].toLowerCase(),o[s],!0));break;case 29:this.$=r.Context[o[s].toLowerCase()]=r.utils.checkArg(o[s-3].toLowerCase(),o[s-2],!0),r.miew.select(r.Context[o[s].toLowerCase()]);break;case 30:this.$=r.miew.rep(r.miew.repCurrent(),{selector:r.utils.checkArg(o[s-1].toLowerCase(),o[s])});break;case 31:this.$=r.Context[o[s].toLowerCase()]=r.miew.within(r.utils.checkArg("select",o[s-2],!0),Number(o[s-4]));break;case 32:this.$=r.miew.rep(r.miew.repCurrent(),{material:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 35:this.$=r.echo(r.miew.view());break;case 36:case 37:this.$=r.miew.view(o[s]);break;case 38:this.$=r.echo(r.miew.changeUnit());break;case 39:this.$=r.echo(r.miew.changeUnit(o[s]));break;case 40:this.$=r.miew.dssp();break;case 41:this.$=r.miew.scale(o[s]);break;case 42:for(var u=0,c=o[s].length;u<c;u++)r.miew.rotate(o[s][u].x*Math.PI/180,o[s][u].y*Math.PI/180,o[s][u].z*Math.PI/180);break;case 43:for(u=0,c=o[s].length;u<c;u++)r.miew.translate(o[s][u].x||0,o[s][u].y||0,o[s][u].z||0);break;case 44:this.$=r.miew.center();break;case 45:this.$=r.miew.center(o[s]);break;case 48:case 49:this.$=r.miew.addObject({type:"line",params:[o[s-1],o[s]]},!0);break;case 50:case 51:this.$=r.miew.addObject({type:"line",params:[o[s-2],o[s-1]],opts:o[s].toJSO(r.utils,"objects","line")},!0);break;case 52:this.$=r.echo(r.utils.listObjs(r.miew));break;case 53:this.$=r.miew.removeObject(o[s]);break;case 54:this.$=r.echo(r.miew.getURL({view:!1,settings:!1}));break;case 55:this.$=r.echo(r.miew.getURL({view:!1,settings:!0}));break;case 56:this.$=r.echo(r.miew.getURL({view:!0,settings:!1}));break;case 57:case 58:this.$=r.echo(r.miew.getURL({view:!0,settings:!0}));break;case 59:this.$=r.miew.screenshotSave();break;case 60:this.$=r.miew.screenshotSave("",Number(o[s]));break;case 61:this.$=r.miew.screenshotSave("",Number(o[s-1]),Number(o[s]));break;case 62:case 63:case 64:this.$=r.utils.load(r.miew,o[s]),r.representations.clear();break;case 65:this.$=r.echo(r.representations.add(r.miew.repAdd()));break;case 66:this.$=r.echo(r.representations.add(o[s],r.miew.repAdd()));break;case 67:this.$=r.echo(r.representations.add(r.miew.repAdd(o[s])));break;case 68:this.$=r.echo(r.representations.add(o[s-1],r.miew.repAdd(o[s])));break;case 69:this.$=r.miew.rep(o[s]),r.miew.repCurrent(o[s]);break;case 70:this.$=r.miew.rep(o[s-1],o[s]),r.miew.repCurrent(o[s-1]);break;case 71:this.$=r.miew.rep(r.miew.repCurrent(),{mode:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 72:this.$=r.miew.rep(r.miew.repCurrent(),{mode:new Array(r.utils.checkArg(o[s-2].toLowerCase(),o[s-1].toUpperCase()),o[s].toJSO(r.utils,o[s-2],o[s-1].toUpperCase()))});break;case 73:this.$=r.miew.rep(r.miew.repCurrent(),{colorer:r.utils.checkArg(o[s-1].toLowerCase(),o[s].toUpperCase())});break;case 74:this.$=r.miew.rep(r.miew.repCurrent(),{colorer:new Array(r.utils.checkArg(o[s-2].toLowerCase(),o[s-1].toUpperCase()),o[s].toJSO(r.utils,o[s-2],o[s-1].toUpperCase()))});break;case 75:this.$=Number(r.representations.get(o[s]));break;case 76:case 92:this.$=Number(o[s]);break;case 77:this.$=o[s];break;case 78:this.$=r._.assign(o[s-1],o[s]);break;case 79:this.$=r._.assign(o[s-2],o[s-1],o[s]);break;case 80:this.$=r._.assign(o[s-3],o[s-2],o[s-1],o[s]);break;case 81:case 82:this.$=r.CreateObjectPair(o[s].key,o[s].val);break;case 83:this.$=r.CreateObjectPair(o[s-1].key,new Array(o[s-1].val,o[s].toJSO(r.utils,o[s-1].key,o[s-1].val)));break;case 84:case 85:this.$=Object.create({key:r.keyRemap(o[s-2]),val:r.utils.checkArg(o[s-2],o[s])});break;case 86:this.$=[o[s]];break;case 87:this.$=o[s-1].concat(o[s]);break;case 88:this.$=r.CreateObjectPair(o[s-1].toLowerCase(),Number(o[s]));break;case 89:this.$=new r.ArgList(o[s]);break;case 90:this.$=o[s-1].append(o[s]);break;case 91:this.$=new r.Arg(o[s-2],o[s]);break;case 93:this.$=parseInt(o[s]);break;case 94:this.$=JSON.parse(o[s]);break;case 95:case 96:this.$=String(o[s]);break;case 157:case 158:case 161:case 162:case 163:this.$=o[s-2]+o[s-1]+o[s];break;case 166:this.$=o[s-2]=o[s-2]+o[s-1]+o[s]}},table:[{3:1,4:2,5:[1,3],6:[1,4],7:[1,5],9:[1,6],11:[1,7],12:8,13:[1,9],15:[1,10],17:[1,11],18:[1,12],19:[1,13],20:[1,14],21:15,22:16,23:[1,17],25:[1,18],26:[1,19],27:[1,20],30:[1,21],33:[1,22],34:[1,23],37:[1,24],39:25,40:26,41:[1,27],43:[1,28],44:[1,29],45:[1,30],46:[1,31],48:[1,32],49:[1,33],50:34,51:35,52:[1,36],54:[1,37],55:[1,38],56:[1,44],58:[1,45],59:[1,39],62:[1,40],64:[1,41],65:[1,42],66:[1,43]},{1:[3]},{5:[1,46]},{1:[2,2]},{5:[2,3]},{5:[2,4],8:[1,47]},{5:[2,6],6:t,7:n,9:r,10:48,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:49,80:52,81:50,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{5:[2,8]},{5:[2,9]},{6:t,7:n,9:r,10:106,13:i,14:[1,107],15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:49,80:52,81:50,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{6:t,7:n,9:r,10:108,13:i,14:[1,109],15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:49,80:52,81:50,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{5:[2,14]},{5:[2,15]},{5:[2,16]},{5:[2,17],14:te,16:110,35:ne,38:re,77:ie,78:oe},{5:[2,19]},{5:[2,20]},{24:116,35:ae,38:se},{24:119,35:ae,38:se},{24:120,35:ae,38:se},{5:[2,25],24:121,28:[1,122],29:[1,123],35:ae,38:se},{14:[1,124]},{14:[1,125]},{35:[1,126]},{38:[1,127]},{5:[2,33]},{5:[2,34]},{5:[2,35],14:[1,128],42:[1,129]},{5:[2,38],35:[1,130]},{5:[2,40]},{35:[1,131]},{47:132,73:133,74:ue},{47:135,73:133,74:ue},{5:[2,44],14:[1,136]},{5:[2,46]},{5:[2,47]},{6:t,7:n,9:r,10:138,13:i,14:[1,137],15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:49,80:52,81:50,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{5:[2,52]},{35:[1,139]},{14:[1,143],38:[1,141],60:140,61:[1,142]},{5:[2,65],38:[1,144],63:145,67:146,68:147,69:148,70:ce,72:le},{24:151,35:ae,38:se},{38:[1,152]},{38:[1,153]},{5:[2,54],29:[1,154],57:[1,155]},{5:[2,59],35:[1,156]},{1:[2,1]},{5:[2,5]},{5:[2,7],101:fe},e(he,[2,159]),e(he,[2,160]),e(pe,[2,97]),e(pe,[2,98]),e(he,[2,147]),e(he,[2,148]),e(he,[2,149]),e(he,[2,150]),e(he,[2,151]),e(he,[2,152]),e(he,[2,153]),e(pe,[2,101]),e(pe,[2,102]),e(pe,[2,103]),e(pe,[2,104]),e(pe,[2,105]),e(pe,[2,106]),e(pe,[2,107]),e(pe,[2,108]),e(pe,[2,109]),e(pe,[2,110]),e(pe,[2,111]),e(pe,[2,112]),e(pe,[2,113]),e(pe,[2,114]),e(pe,[2,115]),e(pe,[2,116]),e(pe,[2,117]),e(pe,[2,118]),e(pe,[2,119]),e(pe,[2,120]),e(pe,[2,121]),e(pe,[2,122]),e(pe,[2,123]),e(pe,[2,124]),e(pe,[2,125]),e(pe,[2,126]),e(pe,[2,127]),e(pe,[2,128]),e(pe,[2,129]),e(pe,[2,130]),e(pe,[2,131]),e(pe,[2,132]),e(pe,[2,133]),e(pe,[2,134]),e(pe,[2,135]),e(pe,[2,136]),e(pe,[2,137]),e(pe,[2,138]),e(pe,[2,139]),e(pe,[2,140]),e(pe,[2,141]),e(pe,[2,142]),e(pe,[2,143]),e(pe,[2,144]),e(pe,[2,145]),e(pe,[2,146]),{5:[2,10],101:fe},{5:[2,11]},{14:te,16:158,35:ne,38:re,77:ie,78:oe,101:fe},{14:te,16:159,35:ne,38:re,77:ie,78:oe},{5:[2,18]},e(de,[2,92]),e(de,[2,93]),e(de,[2,94]),e(de,[2,95]),e(de,[2,96]),{5:[2,21]},e(me,[2,75]),e(me,[2,76]),{5:[2,22]},{5:[2,23]},{5:[2,24]},{5:[2,26]},{5:[2,27]},{5:[2,28],31:[1,160]},{5:[2,30]},{36:[1,161]},{5:[2,32]},{5:[2,36]},{5:[2,37]},{5:[2,39]},{5:[2,41]},{5:[2,42],73:162,74:ue},e(ve,[2,86]),{35:[1,163]},{5:[2,43],73:162,74:ue},{5:[2,45]},{14:[1,164]},{6:t,7:n,9:r,10:165,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:49,80:52,81:50,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee,101:fe},{5:[2,53]},{5:[2,62]},{5:[2,63]},{5:[2,64]},{5:[2,164]},{5:[2,66],63:166,67:146,68:147,69:148,70:ce,72:le},{5:[2,67]},{5:[2,77],67:167,68:147,69:148,70:ce,72:le},e(me,[2,81]),e(me,[2,82],{80:52,53:168,75:169,76:170,79:171,6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z}),{71:[1,172]},{71:[1,173]},{5:[2,69],63:174,67:146,68:147,69:148,70:ce,72:le},{5:[2,71],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,53:175,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:169,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,73],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,53:176,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:169,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,55],57:[1,177]},{5:[2,56],29:[1,178]},{5:[2,60],35:[1,179]},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,35:[1,181],37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:180,80:52,81:182,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{5:[2,12]},{5:[2,13]},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,32:183,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:184,80:52,81:185,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{14:[1,186]},e(ve,[2,87]),e(ve,[2,88]),{5:[2,48],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,53:187,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:169,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,49],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,53:188,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:169,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,101:fe},{5:[2,68]},{5:[2,78],67:189,68:147,69:148,70:ce,72:le},e(me,[2,83],{80:52,76:170,79:171,75:190,6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z}),e(de,[2,89]),{71:[1,191],101:[1,192]},e(ge,[2,156]),{14:te,16:193,35:ne,38:re,77:ie,78:oe},{14:te,16:194,35:ne,38:re,77:ie,78:oe},{5:[2,70]},{5:[2,72],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:190,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,74],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:190,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,57]},{5:[2,58]},{5:[2,61]},e(he,[2,161]),e(he,[2,162]),e(he,[2,163]),{5:[2,29]},{5:[2,99]},{5:[2,100]},{31:[1,195]},{5:[2,50],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:190,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,51],6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,75:190,76:170,79:171,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},{5:[2,79],67:196,68:147,69:148,70:ce,72:le},e(de,[2,90]),{14:te,16:197,35:ne,38:re,77:ie,78:oe},{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,33:m,34:v,35:[1,199],37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,79:198,80:52,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z},e(me,[2,84]),e(de,[2,85]),{6:t,7:n,9:r,13:i,15:o,17:a,18:s,19:u,20:c,23:l,25:f,26:h,27:p,30:d,32:200,33:m,34:v,37:g,38:y,41:_,43:x,45:b,46:w,49:S,52:E,54:T,55:A,56:M,58:C,59:k,62:R,64:P,65:L,66:O,70:I,72:N,74:D,79:184,80:52,81:185,82:F,83:z,84:B,85:j,86:V,87:U,88:G,89:H,90:W,91:q,92:Y,93:X,94:$,95:Z,96:K,97:J,98:Q,99:ee},{5:[2,80]},e(de,[2,91]),e(ge,[2,157]),e(ge,[2,158]),{5:[2,31]}],defaultActions:{3:[2,2],4:[2,3],7:[2,8],8:[2,9],11:[2,14],12:[2,15],13:[2,16],15:[2,19],16:[2,20],25:[2,33],26:[2,34],29:[2,40],34:[2,46],35:[2,47],37:[2,52],46:[2,1],47:[2,5],107:[2,11],110:[2,18],116:[2,21],119:[2,22],120:[2,23],121:[2,24],122:[2,26],123:[2,27],125:[2,30],127:[2,32],128:[2,36],129:[2,37],130:[2,39],131:[2,41],136:[2,45],139:[2,53],140:[2,62],141:[2,63],142:[2,64],143:[2,164],145:[2,67],158:[2,12],159:[2,13],166:[2,68],174:[2,70],177:[2,57],178:[2,58],179:[2,61],183:[2,29],184:[2,99],185:[2,100],196:[2,80],200:[2,31]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[],i=[null],o=[],a=this.table,s="",u=0,c=0,l=2,f=1,h=o.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(d.yy[m]=this.yy[m]);p.setInput(e,d.yy),d.yy.lexer=p,d.yy.parser=this,"undefined"==typeof p.yylloc&&(p.yylloc={});var v=p.yylloc;o.push(v);var g=p.options&&p.options.ranges;function y(){var e;return"number"!==typeof(e=r.pop()||p.lex()||f)&&(e instanceof Array&&(e=(r=e).pop()),e=t.symbols_[e]||e),e}"function"===typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,x,b,w,S,E,T,A,M={};;){if(x=n[n.length-1],this.defaultActions[x]?b=this.defaultActions[x]:(null!==_&&"undefined"!=typeof _||(_=y()),b=a[x]&&a[x][_]),"undefined"===typeof b||!b.length||!b[0]){var C="";for(S in A=[],a[x])this.terminals_[S]&&S>l&&A.push("'"+this.terminals_[S]+"'");C=p.showPosition?"Parse error on line "+(u+1)+":\n"+p.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(u+1)+": Unexpected "+(_==f?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(C,{text:p.match,token:this.terminals_[_]||_,line:p.yylineno,loc:v,expected:A})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+_);switch(b[0]){case 1:n.push(_),i.push(p.yytext),o.push(p.yylloc),n.push(b[1]),_=null,c=p.yyleng,s=p.yytext,u=p.yylineno,v=p.yylloc;break;case 2:if(E=this.productions_[b[1]][1],M.$=i[i.length-E],M._$={first_line:o[o.length-(E||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(E||1)].first_column,last_column:o[o.length-1].last_column},g&&(M._$.range=[o[o.length-(E||1)].range[0],o[o.length-1].range[1]]),"undefined"!==typeof(w=this.performAction.apply(M,[s,c,u,d.yy,b[1],i,o].concat(h))))return w;E&&(n=n.slice(0,-1*E*2),i=i.slice(0,-1*E),o=o.slice(0,-1*E)),n.push(this.productions_[b[1]][0]),i.push(M.$),o.push(M._$),T=a[n[n.length-2]][n[n.length-1]],n.push(T);break;case 3:return!0}}return!0}},_e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:case 2:return"";case 3:return 42;case 4:return 35;case 5:return 77;case 6:case 7:return 78;case 8:return 8;case 9:return 6;case 10:return 82;case 11:return 7;case 12:return 9;case 13:return 59;case 14:return 13;case 15:return 15;case 16:return 17;case 17:return 18;case 18:return 19;case 19:return 20;case 20:return 11;case 21:return 62;case 22:return 64;case 23:return 23;case 24:return 25;case 25:return 26;case 26:return 27;case 27:return 30;case 28:return 34;case 29:return 33;case 30:return 65;case 31:return 66;case 32:return 37;case 33:return 41;case 34:return 43;case 35:return 52;case 36:return 54;case 37:return 55;case 38:return 46;case 39:return 48;case 40:return 45;case 41:return 49;case 42:return 56;case 43:return 58;case 44:return 44;case 45:return 83;case 46:return 84;case 47:return 85;case 48:return 86;case 49:return 87;case 50:return 88;case 51:return 89;case 52:return 90;case 53:return 91;case 54:return 92;case 55:return 93;case 56:return 94;case 57:return 95;case 58:case 59:return 70;case 60:case 61:return 72;case 62:case 63:case 64:return 74;case 65:return 31;case 66:return 36;case 67:return 96;case 68:return 97;case 69:return 98;case 70:return 99;case 71:return t.yytext=e.utils.unquoteString(t.yytext),14;case 72:return 38;case 73:return 5;case 74:return 101;case 75:return 103;case 76:return"\\";case 77:return 28;case 78:return 61;case 79:return 29;case 80:return 57;case 81:return 71}},rules:[/^(?:\s+)/i,/^(?:[#].*)/i,/^(?:\/\/.*)/i,/^(?:([_A-Z0-9\/\+]+==))/i,/^(?:-?[0-9]+(\.[0-9]+)?\b)/i,/^(?:0[xX][0-9A-F]+\b)/i,/^(?:false\b)/i,/^(?:true\b)/i,/^(?:all\b)/i,/^(?:reset\b)/i,/^(?:clear\b)/i,/^(?:build\b)/i,/^(?:help\b)/i,/^(?:load\b)/i,/^(?:get\b)/i,/^(?:set\b)/i,/^(?:set_save\b)/i,/^(?:set_restore\b)/i,/^(?:set_reset\b)/i,/^(?:preset\b)/i,/^(?:motm\b)/i,/^(?:add\b)/i,/^(?:rep\b)/i,/^(?:remove\b)/i,/^(?:hide\b)/i,/^(?:show\b)/i,/^(?:list\b)/i,/^(?:select\b)/i,/^(?:within\b)/i,/^(?:selector\b)/i,/^(?:mode\b)/i,/^(?:color\b)/i,/^(?:material\b)/i,/^(?:view\b)/i,/^(?:unit\b)/i,/^(?:line\b)/i,/^(?:listobj\b)/i,/^(?:removeobj\b)/i,/^(?:rotate\b)/i,/^(?:translate\b)/i,/^(?:scale\b)/i,/^(?:center\b)/i,/^(?:url\b)/i,/^(?:screenshot\b)/i,/^(?:dssp\b)/i,/^(?:file_list\b)/i,/^(?:file_register\b)/i,/^(?:file_delete\b)/i,/^(?:preset_add\b)/i,/^(?:preset_delete\b)/i,/^(?:preset_update\b)/i,/^(?:preset_rename\b)/i,/^(?:preset_open\b)/i,/^(?:create_scenario\b)/i,/^(?:reset_scenario\b)/i,/^(?:delete_scenario\b)/i,/^(?:add_scenario_item\b)/i,/^(?:list_scenario\b)/i,/^(?:s\b)/i,/^(?:mt\b)/i,/^(?:m\b)/i,/^(?:c\b)/i,/^(?:x\b)/i,/^(?:y\b)/i,/^(?:z\b)/i,/^(?:as\b)/i,/^(?:of\b)/i,/^(?:pdb\b)/i,/^(?:delay\b)/i,/^(?:prst\b)/i,/^(?:desc\b)/i,/^(?:((?:"(?:\\.|[^\\"])*"|'(?:\\.|[^\\'])*')))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:\.)/i,/^(?:\/)/i,/^(?:\\)/i,/^(?:-e\b)/i,/^(?:-f\b)/i,/^(?:-s\b)/i,/^(?:-v\b)/i,/^(?:=)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],inclusive:!0}}};function xe(){this.yy={}}return ye.lexer=_e,xe.prototype=ye,ye.Parser=xe,new xe}()}.parser,Gc={$help:["Rendering mode shortcut","    BS - balls and sticks mode","    LN - lines mode","    LC - licorice mode","    VW - van der waals mode","    TR - trace mode","    TU - tube mode","    CA - cartoon mode","    SA - isosurface mode","    QS - quick surface mode","    SE - solvent excluded mode","    TX - text mode"],BS:{$help:["   Balls and sticks","      aromrad = <number> #aromatic radius","      atom = <number>    #atom radius","      bond = <number>    #bond radius","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      space = <number>   #space value\n"]},CA:{$help:["   Cartoon","      arrow = <number>   #arrow size","      depth = <number>   #depth of surface","      heightSegmentsRatio = <number>","      radius = <number>  #tube radius","      tension = <number> #","      width = <number>  #secondary width\n"]},LN:{$help:["   Lines","      atom = <number>    #atom radius","      chunkarom = <number>","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      offsarom = <number>\n"]},LC:{$help:["   Licorice","      aromrad = <number> #aromatic radius","      bond = <number>    #bond radius","      multibond = <bool> #use multibond","      showarom = <bool>  #show aromatic","      space = <number>   #space value\n"]},VW:{$help:["   Van der Waals","      nothing\n"]},TR:{$help:["   Trace","      radius = <number>  #tube radius\n"]},TU:{$help:["   Tube","      heightSegmentsRatio = <number>","      radius = <number>  #tube radius","      tension = <number> \n"]},SA:{$help:["   Surface","      zClip = <bool> #clip z plane\n"]},QS:{$help:["   Quick surface","      isoValue = <number>","      scale = <number>","      wireframe = <bool>","      zClip = <bool> #clip z plane\n"]},SE:{$help:["   Solvent excluded surface","      zClip = <bool> #clip z plane\n"]},TX:{$help:["   Text mode",'      template = <format string> string that can include "{{ id }}"',"          it will be replaced by value, id can be one of next:","          serial, name, type, sequence, residue, chain, hetatm, water\n",'      horizontalAlign = <string> {"left", "right", "center"}','      verticalAlign = <string> {"top", "bottom", "middle"}',"      dx = <number> #offset along x","      dy = <number> #offset along y","      dz = <number> #offset along z","      fg = <string> #text color modificator","           could be keyword, named color or hex","      fg = <string> #back color modificator","           could be keyword, named color or hex","      showBg = <bool> #if set show background","           plate under text"]}},Hc={$help:["Coloring mode shortcut","    EL - color by element","    CH - color by chain","    SQ - color by sequence","    RT - color by residue type","    SS - color by secondary structure","    UN - uniform"],UN:{$help:["Parameters of coloring modes customization","   Uniform","      color = <number|color> #RGB->HEX->dec\n"],color:{$help:Object.keys(Bo.get(re.now.palette).namedColors).sort().join("\n")}}},Wc={$help:["Material shortcut","    DF - diffuse","    TR - transparent","    SF - soft plastic","    PL - glossy plastic","    ME - metal","    GL - glass"]},qc={$help:["Short (packed) representation description as a set of variables","    s=<EXPRESSION>","        selector property","    m=<MODE_ID>[!<PARAMETER>:<VALUE>[,...]]","        render mode property","    c=<COLORER_ID>[!<PARAMETER>:<VALUE>[,...]]","        color mode property","    mt=<MATERIAL_ID>","        material property"],s:{$help:"Selection expression string as it is in menu->representations->selection"},m:Gc,c:Hc,mt:Wc},Yc={$help:["Parameters of rendering modes customization: modes","Parameters of colorer customization: colorers","Autobuild: autobuild = (<number>|<bool>)"],modes:Gc,colorers:Hc},Xc={$help:["help (<cmd name>| <path to property>)","You can get detailed information about command options",'   using "help cmd.opt.opt.[...]"\n',"   you can use one line comments","   everything started from (#|//) will be skipped","   Example: >build //some comment\n","List of available commands:"],reset:{$help:["Reload current object, delete all representations","    Nothing will work until load new object"]},load:{$help:["load (<PDBID>|<URL>|-f [<*.NC FILE URL STRING>])","    Load new pdb object from selected source"],PDBID:{$help:"pdb id in remote molecule database"},URL:{$help:"url to source file"},f:{$help:["open file system dialog to fetch local file","optionally you can determine trajectory file","via URL for *.top model"]}},clear:{$help:"No args. Clear terminal"},add:{$help:["add [<REP_NAME>] [<DESCRIPTION>]","    Add new item to representation set with","    default or <DESCRIPTION> params"],REP_NAME:{$help:"Identifier string [_,a-z,A-Z,0-9] can not start from digit"},DESCRIPTION:qc},rep:{$help:["rep [<REP_NAME>|<REP_INDEX>] [<DESCRIPTION>]","    set current representation by name or index","    edit current representation by <DESCRIPTION>"],REP_NAME:{$help:["Identifier string [_,a-z,A-Z,0-9] can not start from digit","Must be declared before"]},REP_INDEX:{$help:"Index of available representation"},DESCRIPTION:qc},remove:{$help:["remove (<REP_NAME>|<REP_INDEX>)","Remove representation by name or index"],REP_NAME:{$help:["Identifier string [_,a-z,A-Z,0-9] can not start from digit","Must be declared before"]},REP_INDEX:{$help:"Index of available representation"}},selector:{$help:["selector <EXPRESSION>","   set selector from EXPRESSION to current representation"],EXPRESSION:{$help:"Selection expression string as it is in menu->representations->selection"}},mode:{$help:["mode <MODE_ID> [<PARAMETER>=<VALUE>...]","   set rendering mode and apply parameters to current representation"],MODE_ID:Gc},color:{$help:["color <COLORER_ID> [<PARAMETER>=<VALUE>...]","   set colorer and apply parameters to current representation"],COLORER_ID:Hc},material:{$help:["material <MATERIAL_ID>","   set material to current representation"],MATERIAL_ID:Wc},build:{$help:"build help str",add:{$help:"build.add",new:{$help:["add.new","add.new new line 1","add.new new line 2","add.new new line 3"]}},del:{$help:"build.del"}},list:{$help:["list [-e|-s|<REP_NAME>|<REP_INDEX>]","Print representations if no args print list of representations","    -e expand list and show all representations","    -s show all user-registered selectors","    <REP_NAME>|<REP_INDEX> show only current representation"]},hide:{$help:["hide (<REP_NAME>|<REP_INDEX>)","Hide representation referenced in args"]},show:{$help:["show (<REP_NAME>|<REP_INDEX>)","Show representation referenced in args"]},get:{$help:["get <PARAMETER>","Print <PARAMETER> value","    <PARAMETER> - path to option use get.PARAMETER to get more info"],PARAMETER:Yc},set:{$help:["set <PARAMETER> <VALUE>","Set <PARAMETER> with <VALUE>","    <PARAMETER> - path to option use set.PARAMETER to get more info"],PARAMETER:Yc},set_save:{$help:["set_save","Save current settings to cookie"]},set_restore:{$help:["set_restore","Load and apply settings from cookie"]},set_reset:{$help:["set_reset","Reset current settings to the defaults"]},preset:{$help:["preset [<PRESET>]","Reset current representation or set preset to <PRESET>"],PRESET:{$help:["default","wire","small","macro"]}},unit:{$help:["unit [<unit_id>]","Change current biological structure view. Zero <unit_id> value means asymmetric unit,","positive values set an assembly with corresponding number.","Being called with no parameters command prints current unit information."]},view:{$help:["view [<ENCODED_VIEW>]","Get current encoded view or set if ENCODED_VIEW placed as argument"],ENCODED_VIEW:{$help:["encoded view matrix string (binary code)"]}},rotate:{$help:["rotate (x|y|z) [<DEGREES>] [(x|y|z) [<DEGREES>]]...","Rotate scene"]},scale:{$help:["scale <SCALE>","Scale scene"]},select:{$help:["select <SELECTOR_STRING> [as <SELECTOR_NAME>]","Select atoms using selector defined in SELECTOR_STRING","    and if SELECTOR_NAME is defined register it in viewer","    you can use it later as a complex selector"]},within:{$help:["within <DISTANCE> of <SELECTOR_STRING> as <SELECTOR_NAME>","Build within named selector","    DISTANCE        <number>","    SELECTOR_STRING <string(selection language)>","    SELECTOR_NAME   <identifier>"]},url:{$help:["url [-s] [-v]","Report URL encoded scene","    if -s set that include settings in the URL","    if -v set that include view in the URL"]},screenshot:{$help:["screenshot [<WIDTH> [<HEIGHT>]]","Make a screenshot of the scene","    WIDTH  <number> in pixels","    HEIGHT <number> in pixels, equal to WIDTH by default"]},line:{$help:["line <first_atom_path> <second_atom_path> [<PARAMETER>=<VALUE>]","Draw dashed line between two specified atoms"]},removeobj:{$help:["removeobj <id>","Remove scene object by its index. Indices could be obtained by <listobj> command"]},listobj:{$help:["listobj","Display the list of all existing scene objects"]}},$c=Ic.chem.selectors,Zc=Ic.modes,Kc=Ic.colorers,Jc=Ic.materials,Qc=Ic.palettes,el=Ic.options,tl=Ic.settings;function nl(){}var rl=function(){var e=new nl;return function(){return e}}(),il=new(function(){function e(){g(this,e),this.representationMap={},this.representationID={}}return _(e,[{key:"get",value:function(e){return this.representationMap[e]||this.representationID[e]||"<no name>"}},{key:"add",value:function(e,t){if(-1===e)return"Can not create representation: there is no data";if(void 0!==t){if(this.representationMap.hasOwnProperty(e))return"This name has already existed, registered without name";this.representationMap[e.toString()]=t,this.representationID[t]=e.toString()}return"Representation ".concat(e," successfully added")}},{key:"remove",value:function(e){e&&this.representationID.hasOwnProperty(e)&&(delete this.representationMap[this.representationID[e]],delete this.representationID[e]);var t=Object.keys(this.representationID).sort();for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r>e&&(this.representationID[r-1]=this.representationID[r],this.representationMap[this.representationID[r]]-=1,delete this.representationID[r])}}},{key:"clear",value:function(){this.representationMap={},this.representationID={}}}]),e}());function ol(e){var t={s:"selector",m:"mode",c:"colorer",mt:"material",mode:"modes",color:"colorers",colorer:"colorers",select:"selector",material:"materials",selector:"selector"}[e];return void 0===t?e:t}var al=new(function(){function e(){g(this,e)}return _(e,[{key:"list",value:function(e,t,n){var r="";if(e&&void 0!==t&&(void 0===n||"-e"===n))for(var i=e.repCount(),o=0;o<i;o++)r+=this.listRep(e,t,o,n);return r}},{key:"listRep",value:function(e,t,n,r){var i="",o=e.repGet(n);if(!o)return j.warn("Rep ".concat(n," does not exist!")),i;var a=n,s=t.get(a),u=o.mode,c=o.colorer,l=o.selectorString,f=o.materialPreset;return i+="#".concat(a," : ").concat(u.name).concat("<no name>"===s?"":", ".concat(s),"\n"),void 0!==r&&(i+='    selection : "'.concat(l,'"\n'),i+="    mode      : (".concat(u.id,"), ").concat(u.name,"\n"),i+="    colorer   : (".concat(c.id,"), ").concat(c.name,"\n"),i+="    material  : (".concat(f.id,"), ").concat(f.name,"\n")),i}},{key:"listSelector",value:function(e,t){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+="".concat(r,' : "').concat(t[r],'"\n'));return n}},{key:"listObjs",value:function(e){var t=e._objects;if(!t||!Array.isArray(t)||0===t.length)return"There are no objects on the scene";for(var n=[],r=0,i=t.length;r<i;++r)n[r]="".concat(r,": ").concat(t[r].toString());return n.join("\n")}},{key:"joinHelpStr",value:function(e){return e instanceof Array?e.join("\n"):e}},{key:"help",value:function(e){if(i.a.isUndefined(e))return"".concat(this.joinHelpStr(Xc.$help),"\n").concat(i.a.slice(i.a.sortBy(i.a.keys(Xc)),1).join(", "),"\n");var t=i.a.get(Xc,e);return i.a.isUndefined(t)?this.help():"".concat(this.joinHelpStr(t.$help),"\n")}},{key:"load",value:function(e,t){if(void 0!==e&&void 0!==t&&"-f"!==t){e.awaitWhileCMDisInProcess();var n=function(){return e.finishAwaitingCMDInProcess()};e.load(t).then(n,n)}}},{key:"checkArg",value:function(e,t,n){if(void 0!==e&&void 0!==t){if("selector"===ol(e)){var r=$c.parse(t);if(void 0!==r.error)throw{message:r.error};return void 0!==n&&n?r.selector:t}for(var i,o={colorers:Kc,modes:Zc,materials:Jc},a=e;a!==i;)a=ol(i=a);if(void 0===o[a].get(t))throw{message:"".concat(t," is not existed in ").concat(a)};return t}return rl}},{key:"propagateProp",value:function(e,t){if(void 0!==e){var n=el.adapters[A(i.a.get(tl.defaults,e))];if(void 0===n)throw{message:"".concat(e," is not existed")};if((e.endsWith(".color")||e.endsWith(".baseColor")||e.endsWith(".EL.carbon"))&&"number"!==typeof t&&(t=Qc.get(tl.now.palette).getNamedColor(t)),e.endsWith(".fg")||e.endsWith(".bg"))if("number"!==typeof t){var r=Qc.get(tl.now.palette).getNamedColor(t,!0);void 0!==r&&(t="0x".concat(r.toString(16)))}else t="0x".concat(t.toString(16));if(e.endsWith(".template")&&(t=t.replace(/\\n/g,"\n")),void 0!==t&&n(t)!==t&&n(t)!==t>0)throw{message:"".concat(e,' must be a "').concat(A(i.a.get(tl.defaults,e)),'"')}}return t}},{key:"unquoteString",value:function(e){return Q.unquoteString(e)}}]),e}());function sl(e){if(e instanceof this.constructor)return e;this._values=e instanceof Array?e.slice(0):e?[e]:[]}sl.prototype.append=function(e){var t=this._values;return t[t.length]=e,this},sl.prototype.remove=function(e){var t=this._values,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},sl.prototype.toJSO=function(e,t,n){for(var r={},o=this._values,a=0,s=o.length;a<s;++a)i.a.set(r,o[a].id,e.propagateProp("".concat(ol(t),".").concat(n,".").concat(o[a].id),o[a].val));return r};var ul=Object.create({});ul.Arg=function(e,t){this.id=e,this.val=t},ul.ArgList=sl,ul.miew=null,ul.echo=null,ul.representations=il,ul.utils=al,ul._=i.a,ul.CreateObjectPair=function(e,t){var n={};return n[e]=t,n},ul.keyRemap=ol,ul.Context=$c.Context,ul.ClearContext=$c.ClearContext,ul.NULL=rl,ul.notimplemented=function(){return this.NULL},Ic.prototype.script=function(e,t,n){Uc.yy.miew=this,Uc.yy.echo=t,Uc.yy.error=n,void 0===this.cmdQueue&&(this.cmdQueue=[]),void 0===this.commandInAction&&(this.commandInAction=!1),this.cmdQueue=this.cmdQueue.concat(e.split("\n"))},Ic.prototype.awaitWhileCMDisInProcess=function(){this.commandInAction=!0},Ic.prototype.finishAwaitingCMDInProcess=function(){this.commandInAction=!1},Ic.prototype.isScriptingCommandAvailable=function(){return void 0!==this.commandInAction&&!this.commandInAction&&void 0!==this.cmdQueue&&this.cmdQueue.length>0},Ic.prototype.callNextCmd=function(){if(this.isScriptingCommandAvailable()){var e=this.cmdQueue.shift(),t={success:!1};try{Uc.parse(e),t.success=!0}catch(n){t.error=n.message,Uc.yy.error(t.error),this.finishAwaitingCMDInProcess()}return t}return""},Uc.yy=ul,Uc.yy.parseError=Uc.parseError,t.a=Ic}).call(this,n(29))},,function(e,t,n){var r=n(555);function i(t,n,o){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t,n){"use strict";e.exports=n(566)},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(578)("isEqual",n(698));r.placeholder=n(277),e.exports=r},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var i=r();i.withExtraArgument=r,t.a=i},function(e,t,n){"use strict";var r=n(198),i=n(700),o=n(713),a=n(275),s=n(756),u=n(758),c=n(762),l=n(763),f=n(766),h=n(767),p=n(768),d=n(769),m=n(770),v=Object.keys(d),g=function(e){var t=e.source||e.children||"";if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var n=r(d,e.renderers),a=i().use(o).use(e.plugins||[]),p=a.runSync(a.parse(t)),g=r(e,{renderers:n,definitions:h(p)});return function(e){var t=[f,s()],n=e.disallowedTypes;e.allowedTypes&&(n=v.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(c.ofType(n,r));e.allowNode&&t.push(c.ifNotMatch(e.allowNode,r));var i=(e.allowDangerousHtml||!1===e.escapeHtml)&&!e.skipHtml,o=(e.astPlugins||[]).some((function(e){return e.identity===m.HtmlParser}));i&&!o&&t.push(u);e.astPlugins&&(t=t.concat(e.astPlugins));return t.push(l),t}(e).forEach((function(e){p=e(p,g)})),p};g.defaultProps={transformLinkUri:p},g.propTypes={className:a.string,source:a.string,children:a.string,sourcePos:a.bool,rawSourcePos:a.bool,escapeHtml:a.bool,allowDangerousHtml:a.bool,skipHtml:a.bool,allowNode:a.func,allowedTypes:a.arrayOf(a.oneOf(v)),disallowedTypes:a.arrayOf(a.oneOf(v)),transformLinkUri:a.oneOfType([a.func,a.bool]),linkTarget:a.oneOfType([a.func,a.string]),transformImageUri:a.func,astPlugins:a.arrayOf(a.func),unwrapDisallowed:a.bool,renderers:a.object,plugins:a.array},g.types=v,g.renderers=d,g.uriTransformer=p,e.exports=g},function(e,t,n){"use strict";var r,i=n(771),o=n(780),a=n(785);e.exports=function(e){var t=this.data();!r&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(r=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin"));function n(e,n){t[e]?t[e].push(n):t[e]=[n]}n("micromarkExtensions",i(e)),n("fromMarkdownExtensions",o),n("toMarkdownExtensions",a(e))}},function(e,t,n){var r=n(797),i=n(334),o=n(803),a=function(e,t){t=t||{weight:"normal"},this.family=e,this.style=t.style||"normal",this.variant=t.variant||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"stretch",this.featureSettings=t.featureSettings||"normal"};e.exports=a,a.HAS_WEBKIT_FALLBACK_BUG=null,a.DEFAULT_TIMEOUT=3e3,a.getUserAgent=function(){return window.navigator.userAgent},a.hasWebKitFallbackBug=function(){if(null===a.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWeb[kK]it\/([0-9]+)(?:\.([0-9]+))/.exec(a.getUserAgent());a.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return a.HAS_WEBKIT_FALLBACK_BUG},a.prototype.getStyle=function(){return"font-style:"+this.style+";font-variant:"+this.variant+";font-weight:"+this.weight+";font-stretch:"+this.stretch+";font-feature-settings:"+this.featureSettings+";-moz-font-feature-settings:"+this.featureSettings+";-webkit-font-feature-settings:"+this.featureSettings+";"},a.prototype.check=function(e,t){var n,s,u,c=e||"BESbswy",l=t||a.DEFAULT_TIMEOUT,f=this.getStyle(),h=i.createElement("div"),p=new o(c),d=new o(c),m=new o(c),v=-1,g=-1,y=-1,_=this;return p.setFont('"Times New Roman", sans-serif',f),d.setFont("serif",f),m.setFont("monospace",f),i.append(h,p.getElement()),i.append(h,d.getElement()),i.append(h,m.getElement()),i.append(document.body,h),n=p.getWidth(),s=d.getWidth(),u=m.getWidth(),new r((function(e,t){function r(){null!==h.parentNode&&i.remove(document.body,h)}function o(){-1!==v&&-1!==g&&-1!==y&&v===g&&g===y&&(a.hasWebKitFallbackBug()&&(v===n&&g===n&&y===n||v===s&&g===s&&y===s||v===u&&g===u&&y===u)||(r(),e(_)))}setTimeout((function(){r(),t(_)}),l),p.onResize((function(e){v=e,o()})),p.setFont(_.family+",sans-serif",f),d.onResize((function(e){g=e,o()})),d.setFont(_.family+",serif",f),m.onResize((function(e){y=e,o()})),m.setFont(_.family+",monospace",f)}))}},,,function(e,t,n){"use strict";n(209),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(238),n(239),n(240),n(154),n(350),n(351),n(352),"undefined"===typeof Promise&&(n(353).enable(),self.Promise=n(355)),"undefined"!==typeof window&&n(356),Object.assign=n(357)},function(e,t,n){"use strict";var r=n(153),i=n(97);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){n(31)("dispose")},function(e,t,n){n(31)("observable")},function(e,t,n){n(31)("patternMatch")},function(e,t,n){"use strict";var r=n(244),i=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,r._Y=null,r._Z=null}function s(e,t){return t.some((function(t){return e instanceof t}))}t.disable=a,t.enable=function(e){e=e||{},o&&a();o=!0;var t=0,n=0,u={};function c(t){(e.allRejections||s(u[t].error,e.whitelist||i))&&(u[t].displayId=n++,e.onUnhandled?(u[t].logged=!0,e.onUnhandled(u[t].displayId,u[t].error)):(u[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(u[t].displayId,u[t].error)))}r._Y=function(t){2===t._V&&u[t._1]&&(u[t._1].logged?function(t){u[t].logged&&(e.onHandled?e.onHandled(u[t].displayId,u[t].error):u[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[t].displayId+".")))}(t._1):clearTimeout(u[t._1].timeout),delete u[t._1])},r._Z=function(e,n){0===e._U&&(e._1=t++,u[e._1]={displayId:null,error:n,timeout:setTimeout(c.bind(null,e._1),s(n,i)?100:2e3),logged:!1})}}},function(e,t,n){"use strict";(function(t){function n(e){i.length||(r(),!0),i[i.length]=e}e.exports=n;var r,i=[],o=0;function a(){for(;o<i.length;){var e=o;if(o+=1,i[e].call(),o>1024){for(var t=0,n=i.length-o;t<n;t++)i[t]=i[t+o];i.length-=o,o=0}}i.length=0,o=0,!1}var s="undefined"!==typeof t?t:self,u=s.MutationObserver||s.WebKitMutationObserver;function c(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}r="function"===typeof u?function(e){var t=1,n=new u(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(a):c(a),n.requestFlush=r,n.makeRequestCallFromTimer=c}).call(this,n(29))},function(e,t,n){"use strict";var r=n(244);e.exports=r;var i=l(!0),o=l(!1),a=l(null),s=l(void 0),u=l(0),c=l("");function l(e){var t=new r(r._0);return t._V=1,t._W=e,t}r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return s;if(!0===e)return i;if(!1===e)return o;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r((function(e,t){t(n)}))}return l(e)};var f=function(e){return"function"===typeof Array.from?(f=Array.from,Array.from(e)):(f=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};r.all=function(e){var t=f(e);return new r((function(e,n){if(0===t.length)return e([]);var i=t.length;function o(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._V;)s=s._W;return 1===s._V?o(a,s._W):(2===s._V&&n(s._W),void s.then((function(e){o(a,e)}),n))}var u=s.then;if("function"===typeof u)return void new r(u.bind(s)).then((function(e){o(a,e)}),n)}t[a]=s,0===--i&&e(t)}for(var a=0;a<t.length;a++)o(a,t[a])}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){f(e).forEach((function(e){r.resolve(e).then(t,n)}))}))},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Headers",(function(){return d})),n.d(t,"Request",(function(){return b})),n.d(t,"Response",(function(){return E})),n.d(t,"DOMException",(function(){return A})),n.d(t,"fetch",(function(){return M}));var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function f(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(g)}),this.text=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=v(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=f(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[f(e)]},d.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},d.prototype.set=function(e,t){this.map[f(e)]=h(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];E.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var A=r.DOMException;try{new A}catch(C){(A=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function M(e,t){return new Promise((function(n,i){var o=new b(e,t);if(o.signal&&o.signal.aborted)return i(new A("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:S(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout((function(){n(new E(t,e))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new A("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof d?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,h(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}M.polyfill=!0,r.fetch||(r.fetch=M,r.Headers=d,r.Request=b,r.Response=E)},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";n(209),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(235),n(368),n(369),n(112),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(386),n(387),n(388),n(390),n(391),n(238),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(239),n(410),n(411),n(412),n(413),n(415),n(416),n(417),n(418),n(419),n(420),n(422),n(424),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(240),n(445),n(446),n(449),n(450),n(451),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(262),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(154),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(541),n(270),n(542)},function(e,t,n){var r=n(3),i=n(245),o=n(62);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},function(e,t,n){"use strict";var r=n(3),i=n(28).every,o=n(54),a=n(36),s=o("every"),u=a("every");r({target:"Array",proto:!0,forced:!s||!u},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(3),i=n(157),o=n(62);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(e,t,n){"use strict";var r=n(3),i=n(28).filter,o=n(94),a=n(36),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(28).find,o=n(62),a=n(36),s=!0,u=a("find");"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(e,t,n){"use strict";var r=n(3),i=n(28).findIndex,o=n(62),a=n(36),s=!0,u=a("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(e,t,n){"use strict";var r=n(3),i=n(246),o=n(23),a=n(16),s=n(44),u=n(93);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},function(e,t,n){"use strict";var r=n(3),i=n(246),o=n(23),a=n(16),s=n(45),u=n(93);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=a(n.length);return s(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){"use strict";var r=n(3),i=n(247);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){"use strict";var r=n(3),i=n(90).includes,o=n(62);r({target:"Array",proto:!0,forced:!n(36)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,n){"use strict";var r=n(3),i=n(90).indexOf,o=n(54),a=n(36),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(e){return u?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(87),o=n(39),a=n(54),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},function(e,t,n){var r=n(3),i=n(248);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){"use strict";var r=n(3),i=n(28).map,o=n(94),a=n(36),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(71);r({target:"Array",stat:!0,forced:i((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(3),i=n(113).left,o=n(54),a=n(36),s=o("reduce"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(113).right,o=n(54),a=n(36),s=o("reduceRight"),u=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(79),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(79),a=n(59),s=n(16),u=n(39),c=n(71),l=n(13),f=n(94),h=n(36),p=f("slice"),d=h("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),v=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!p||!d},{slice:function(e,t){var n,r,l,f=u(this),h=s(f.length),p=a(e,h),d=a(void 0===t?h:t,h);if(o(f)&&("function"!=typeof(n=f.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return v.call(f,p,d);for(r=new(void 0===n?Array:n)(g(d-p,0)),l=0;p<d;p++,l++)p in f&&c(r,l,f[p]);return r.length=l,r}})},function(e,t,n){"use strict";var r=n(3),i=n(28).some,o=n(54),a=n(36),s=o("some"),u=a("some");r({target:"Array",proto:!0,forced:!s||!u},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(45),o=n(23),a=n(5),s=n(54),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),f=a((function(){u.sort(null)})),h=s("sort");r({target:"Array",proto:!0,forced:l||!f||!h},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),i(e))}})},function(e,t,n){n(81)("Array")},function(e,t,n){"use strict";var r=n(3),i=n(59),o=n(44),a=n(16),s=n(23),u=n(93),c=n(71),l=n(94),f=n(36),h=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!h||!p},{splice:function(e,t){var n,r,l,f,h,p,v=s(this),g=a(v.length),y=i(e,g),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=g-y):(n=_-2,r=m(d(o(t),0),g-y)),g+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(v,r),f=0;f<r;f++)(h=y+f)in v&&c(l,f,v[h]);if(l.length=r,n<r){for(f=y;f<g-r;f++)p=f+n,(h=f+r)in v?v[p]=v[h]:delete v[p];for(f=g;f>g-r+n;f--)delete v[f-1]}else if(n>r)for(f=g-r;f>y;f--)p=f+n-1,(h=f+r-1)in v?v[p]=v[h]:delete v[p];for(f=0;f<n;f++)v[f+y]=arguments[f+2];return v.length=g-r+n,l}})},function(e,t,n){n(62)("flat")},function(e,t,n){n(62)("flatMap")},function(e,t,n){"use strict";var r=n(3),i=n(9),o=n(158),a=n(81),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var u,c,l,f=new Array(s),h=8*s-t-1,p=(1<<h)-1,d=p>>1,m=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===1/0?(c=e!=e?1:0,u=p):(u=i(o(e)/a),e*(l=r(2,-u))<1&&(u--,l*=2),(e+=u+d>=1?m/l:m*r(2,1-d))*l>=2&&(u++,l/=2),u+d>=p?(c=0,u=p):u+d>=1?(c=(e*l-1)*r(2,t),u+=d):(c=e*r(2,d-1)*r(2,t),u=0));t>=8;f[g++]=255&c,c/=256,t-=8);for(u=u<<t|c,h+=t;h>0;f[g++]=255&u,u/=256,h-=8);return f[--g]|=128*v,f},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,u=o-7,c=i-1,l=e[c--],f=127&l;for(l>>=7;u>0;f=256*f+e[c],c--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=t;u>0;n=256*n+e[c],c--,u-=8);if(0===f)f=1-s;else{if(f===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),f-=s}return(l?-1:1)*n*r(2,f-t)}}},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(158),a=n(11),s=n(59),u=n(16),c=n(64),l=o.ArrayBuffer,f=o.DataView,h=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(c(this,l))(u(i-r)),p=new f(this),d=new f(o),m=0;r<i;)d.setUint8(m++,p.getUint8(r++));return o}})},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(23),a=n(48);r({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=o(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(35),i=n(389),o=n(13)("toPrimitive"),a=Date.prototype;o in a||r(a,o,i)},function(e,t,n){"use strict";var r=n(11),i=n(48);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!==e)}},function(e,t,n){"use strict";var r=n(10),i=n(22),o=n(50),a=n(13)("hasInstance"),s=Function.prototype;a in s||i.f(s,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(15),i=n(22).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(114),i=n(251);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,n){var r=n(3),i=n(252),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+u:i(e-1+s(e-1)*s(e+1))}})},function(e,t,n){var r=n(3),i=Math.asinh,o=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):o(t+a(t*t+1)):t}})},function(e,t,n){var r=n(3),i=Math.atanh,o=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:o((1+e)/(1-e))/2}})},function(e,t,n){var r=n(3),i=n(159),o=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return i(e=+e)*a(o(e),1/3)}})},function(e,t,n){var r=n(3),i=Math.floor,o=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-i(o(e+.5)*a):32}})},function(e,t,n){var r=n(3),i=n(116),o=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(e){var t=i(a(e)-1)+1;return(t+1/(t*s*s))*(s/2)}})},function(e,t,n){var r=n(3),i=n(116);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},function(e,t,n){n(3)({target:"Math",stat:!0},{fround:n(401)})},function(e,t,n){var r=n(159),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=i(e),l=r(e);return o<c?l*(o/c/s+1/a-1/a)*c*s:(n=(t=(1+s/a)*o)-(t-o))>u||n!=n?l*(1/0):l*n}},function(e,t,n){var r=n(3),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,u=arguments.length,c=0;s<u;)c<(n=o(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*a(i)}})},function(e,t,n){var r=n(3),i=n(5),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(3),i=Math.log,o=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(e){return i(e)*o}})},function(e,t,n){n(3)({target:"Math",stat:!0},{log1p:n(252)})},function(e,t,n){var r=n(3),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return i(e)/o}})},function(e,t,n){n(3)({target:"Math",stat:!0},{sign:n(159)})},function(e,t,n){var r=n(3),i=n(5),o=n(116),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(o(e)-o(-e))/2:(s(e-1)-s(-e-1))*(u/2)}})},function(e,t,n){var r=n(3),i=n(116),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(3),i=Math.ceil,o=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?o:i)(e)}})},function(e,t,n){"use strict";var r=n(15),i=n(9),o=n(91),a=n(32),s=n(24),u=n(47),c=n(115),l=n(48),f=n(5),h=n(60),p=n(70).f,d=n(30).f,m=n(22).f,v=n(83).trim,g=i.Number,y=g.prototype,_="Number"==u(h(y)),x=function(e){var t,n,r,i,o,a,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=v(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o("Number",!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var b,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(_?f((function(){y.valueOf.call(n)})):"Number"!=u(n))?c(new g(x(t)),n,w):x(t)},S=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;S.length>E;E++)s(g,b=S[E])&&!s(w,b)&&m(w,b,d(g,b));w.prototype=y,y.constructor=w,a(i,"Number",w)}},function(e,t,n){n(3)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(e,t,n){n(3)({target:"Number",stat:!0},{isFinite:n(414)})},function(e,t,n){var r=n(9).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},function(e,t,n){n(3)({target:"Number",stat:!0},{isInteger:n(253)})},function(e,t,n){n(3)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(3),i=n(253),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){n(3)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){n(3)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(3),i=n(421);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},function(e,t,n){var r=n(9),i=n(83).trim,o=n(117),a=r.parseFloat,s=1/a(o+"-0")!==-1/0;e.exports=s?function(e){var t=i(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},function(e,t,n){var r=n(3),i=n(423);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},function(e,t,n){var r=n(9),i=n(83).trim,o=n(117),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");e.exports=u?function(e,t){var n=i(String(e));return a(n,t>>>0||(s.test(n)?16:10))}:a},function(e,t,n){"use strict";var r=n(3),i=n(44),o=n(425),a=n(160),s=n(5),u=1..toFixed,c=Math.floor,l=function e(t,n,r){return 0===n?r:n%2===1?e(t,n-1,r*t):e(t*t,n/2,r)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(e){var t,n,r,s,u=o(this),f=i(e),h=[0,0,0,0,0,0],p="",d="0",m=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*h[n],h[n]=r%1e7,r=c(r/1e7)},v=function(e){for(var t=6,n=0;--t>=0;)n+=h[t],h[t]=c(n/e),n=n%e*1e7},g=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==h[e]){var n=String(h[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(p="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*l(2,69,1))-69)<0?u*l(2,-t,1):u/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(m(0,n),r=f;r>=7;)m(1e7,0),r-=7;for(m(l(10,r,1),0),r=t-1;r>=23;)v(1<<23),r-=23;v(1<<r),m(1,1),v(2),d=g()}else m(0,n),m(1<<-t,0),d=g()+a.call("0",f);return d=f>0?p+((s=d.length)<=f?"0."+a.call("0",f-s)+d:d.slice(0,s-f)+"."+d.slice(s-f)):p+d}})},function(e,t,n){var r=n(47);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){var r=n(3),i=n(254);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(118),a=n(23),s=n(45),u=n(22);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){u.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(118),a=n(23),s=n(45),u=n(22);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){u.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(3),i=n(255).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},function(e,t,n){var r=n(3),i=n(98),o=n(5),a=n(10),s=n(72).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!i},{freeze:function(e){return u&&a(e)?u(s(e)):e}})},function(e,t,n){var r=n(3),i=n(99),o=n(71);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),void 0,!0),t}})},function(e,t,n){var r=n(3),i=n(5),o=n(39),a=n(30).f,s=n(15),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},function(e,t,n){var r=n(3),i=n(15),o=n(146),a=n(39),s=n(30),u=n(71);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),i=s.f,c=o(r),l={},f=0;c.length>f;)void 0!==(n=i(r,t=c[f++]))&&u(l,t,n);return l}})},function(e,t,n){var r=n(3),i=n(5),o=n(219).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},function(e,t,n){var r=n(3),i=n(5),o=n(23),a=n(50),s=n(156);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},function(e,t,n){n(3)({target:"Object",stat:!0},{is:n(256)})},function(e,t,n){var r=n(3),i=n(5),o=n(10),a=Object.isExtensible;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isExtensible:function(e){return!!o(e)&&(!a||a(e))}})},function(e,t,n){var r=n(3),i=n(5),o=n(10),a=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isFrozen:function(e){return!o(e)||!!a&&a(e)}})},function(e,t,n){var r=n(3),i=n(5),o=n(10),a=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isSealed:function(e){return!o(e)||!!a&&a(e)}})},function(e,t,n){var r=n(3),i=n(23),o=n(92);r({target:"Object",stat:!0,forced:n(5)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(118),a=n(23),s=n(48),u=n(50),c=n(30).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=c(n,r))return t.get}while(n=u(n))}})},function(e,t,n){"use strict";var r=n(3),i=n(15),o=n(118),a=n(23),s=n(48),u=n(50),c=n(30).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=c(n,r))return t.set}while(n=u(n))}})},function(e,t,n){var r=n(3),i=n(10),o=n(72).onFreeze,a=n(98),s=n(5),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{preventExtensions:function(e){return u&&i(e)?u(o(e)):e}})},function(e,t,n){var r=n(3),i=n(10),o=n(72).onFreeze,a=n(98),s=n(5),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{seal:function(e){return u&&i(e)?u(o(e)):e}})},function(e,t,n){var r=n(3),i=n(255).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,n){"use strict";var r,i,o,a,s=n(3),u=n(52),c=n(9),l=n(49),f=n(257),h=n(32),p=n(82),d=n(53),m=n(81),v=n(10),g=n(45),y=n(63),_=n(47),x=n(144),b=n(99),w=n(110),S=n(64),E=n(161).set,T=n(259),A=n(260),M=n(447),C=n(261),k=n(448),R=n(40),P=n(91),L=n(13),O=n(150),I=L("species"),N="Promise",D=R.get,F=R.set,z=R.getterFor(N),B=f,j=c.TypeError,V=c.document,U=c.process,G=l("fetch"),H=C.f,W=H,q="process"==_(U),Y=!!(V&&V.createEvent&&c.dispatchEvent),X=P(N,(function(){if(!(x(B)!==String(B))){if(66===O)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!B.prototype.finally)return!0;if(O>=51&&/native code/.test(B))return!1;var e=B.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[I]=t,!(e.then((function(){}))instanceof t)})),$=X||!w((function(e){B.all(e).catch((function(){}))})),Z=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},K=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;T((function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,u,c,l=r[a++],f=o?l.ok:l.fail,h=l.resolve,p=l.reject,d=l.domain;try{f?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),c=!0)),s===l.promise?p(j("Promise-chain cycle")):(u=Z(s))?u.call(s,h,p):h(s)):p(i)}catch(m){d&&!c&&d.exit(),p(m)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Q(e,t)}))}},J=function(e,t,n){var r,i;Y?((r=V.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},(i=c["on"+e])?i(r):"unhandledrejection"===e&&M("Unhandled promise rejection",n)},Q=function(e,t){E.call(c,(function(){var n,r=t.value;if(ee(t)&&(n=k((function(){q?U.emit("unhandledRejection",r,e):J("unhandledrejection",e,r)})),t.rejection=q||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){E.call(c,(function(){q?U.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},ne=function(e,t,n,r){return function(i){e(t,n,i,r)}},re=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,K(e,t,!0))},ie=function e(t,n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(t===r)throw j("Promise can't be resolved itself");var o=Z(r);o?T((function(){var i={done:!1};try{o.call(r,ne(e,t,i,n),ne(re,t,i,n))}catch(a){re(t,i,a,n)}})):(n.value=r,n.state=1,K(t,n,!1))}catch(a){re(t,{done:!1},a,n)}}};X&&(B=function(e){y(this,B,N),g(e),r.call(this);var t=D(this);try{e(ne(ie,this,t),ne(re,this,t))}catch(n){re(this,t,n)}},(r=function(e){F(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(B.prototype,{then:function(e,t){var n=z(this),r=H(S(this,B));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=q?U.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&K(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=D(e);this.promise=e,this.resolve=ne(ie,e,t),this.reject=ne(re,e,t)},C.f=H=function(e){return e===B||e===o?new i(e):W(e)},u||"function"!=typeof f||(a=f.prototype.then,h(f.prototype,"then",(function(e,t){var n=this;return new B((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return A(B,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:X},{Promise:B}),d(B,N,!1,!0),m(N),o=l(N),s({target:N,stat:!0,forced:X},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:N,stat:!0,forced:u||X},{resolve:function(e){return A(u&&this===o?B:this,e)}}),s({target:N,stat:!0,forced:$},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,o=k((function(){var n=g(t.resolve),o=[],a=0,s=1;b(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=k((function(){var i=g(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t,n){var r=n(9);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){"use strict";var r=n(3),i=n(52),o=n(257),a=n(5),s=n(49),u=n(64),c=n(260),l=n(32);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){var r=n(3),i=n(49),o=n(45),a=n(11),s=n(5),u=i("Reflect","apply"),c=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){u((function(){}))}))},{apply:function(e,t,n){return o(e),a(n),u?u(e,t,n):c.call(e,t,n)}})},function(e,t,n){var r=n(3),i=n(49),o=n(45),a=n(11),s=n(10),u=n(60),c=n(452),l=n(5),f=i("Reflect","construct"),h=l((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),p=!l((function(){f((function(){}))})),d=h||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(p&&!h)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),d=Function.apply.call(e,l,t);return s(d)?d:l}})},function(e,t,n){"use strict";var r=n(45),i=n(10),o=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){var r=n(3),i=n(15),o=n(11),a=n(48),s=n(22);r({target:"Reflect",stat:!0,forced:n(5)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){o(e);var r=a(t,!0);o(n);try{return s.f(e,r,n),!0}catch(i){return!1}}})},function(e,t,n){var r=n(3),i=n(11),o=n(30).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(3),i=n(10),o=n(11),a=n(24),s=n(30),u=n(50);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c,l=arguments.length<3?t:arguments[2];return o(t)===l?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):i(c=u(t))?e(c,n,l):void 0}})},function(e,t,n){var r=n(3),i=n(15),o=n(11),a=n(30);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return a.f(o(e),t)}})},function(e,t,n){var r=n(3),i=n(11),o=n(50);r({target:"Reflect",stat:!0,sham:!n(156)},{getPrototypeOf:function(e){return o(i(e))}})},function(e,t,n){n(3)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(3),i=n(11),o=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){n(3)({target:"Reflect",stat:!0},{ownKeys:n(146)})},function(e,t,n){var r=n(3),i=n(49),o=n(11);r({target:"Reflect",stat:!0,sham:!n(98)},{preventExtensions:function(e){o(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},function(e,t,n){var r=n(3),i=n(11),o=n(10),a=n(24),s=n(5),u=n(22),c=n(30),l=n(50),f=n(58);r({target:"Reflect",stat:!0,forced:s((function(){var e=u.f({},"a",{configurable:!0});return!1!==Reflect.set(l(e),"a",1,e)}))},{set:function e(t,n,r){var s,h,p=arguments.length<4?t:arguments[3],d=c.f(i(t),n);if(!d){if(o(h=l(t)))return e(h,n,r,p);d=f(0)}if(a(d,"value")){if(!1===d.writable||!o(p))return!1;if(s=c.f(p,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,u.f(p,n,s)}else u.f(p,n,f(0,r));return!0}return void 0!==d.set&&(d.set.call(p,r),!0)}})},function(e,t,n){var r=n(3),i=n(11),o=n(243),a=n(80);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),o(t);try{return a(e,t),!0}catch(n){return!1}}})},function(e,t,n){var r=n(15),i=n(9),o=n(91),a=n(115),s=n(22).f,u=n(70).f,c=n(162),l=n(119),f=n(163),h=n(32),p=n(5),d=n(40).set,m=n(81),v=n(13)("match"),g=i.RegExp,y=g.prototype,_=/a/g,x=/a/g,b=new g(_)!==_,w=f.UNSUPPORTED_Y;if(r&&o("RegExp",!b||w||p((function(){return x[v]=!1,g(_)!=_||g(x)==x||"/a/i"!=g(_,"i")})))){for(var S=function(e,t){var n,r=this instanceof S,i=c(e),o=void 0===t;if(!r&&i&&e.constructor===S&&o)return e;b?i&&!o&&(e=e.source):e instanceof S&&(o&&(t=l.call(e)),e=e.source),w&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=a(b?new g(e,t):g(e,t),r?this:y,S);return w&&n&&d(s,{sticky:n}),s},E=function(e){e in S||s(S,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},T=u(g),A=0;T.length>A;)E(T[A++]);y.constructor=S,S.prototype=y,h(i,"RegExp",S)}m("RegExp")},function(e,t,n){var r=n(15),i=n(22),o=n(119),a=n(163).UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},function(e,t,n){"use strict";var r=n(32),i=n(11),o=n(5),a=n(119),s=RegExp.prototype,u=s.toString,c=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l="toString"!=u.name;(c||l)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(114),i=n(251);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,n){"use strict";var r=n(3),i=n(111).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(3),i=n(30).f,o=n(16),a=n(164),s=n(34),u=n(165),c=n(52),l="".endsWith,f=Math.min,h=u("endsWith");r({target:"String",proto:!0,forced:!(!c&&!h&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}())&&!h},{endsWith:function(e){var t=String(s(this));a(e);var n=arguments.length>1?arguments[1]:void 0,r=o(t.length),i=void 0===n?r:f(o(n),r),u=String(e);return l?l.call(t,u,i):t.slice(i-u.length,i)===u}})},function(e,t,n){var r=n(3),i=n(59),o=String.fromCharCode,a=String.fromCodePoint;r({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(3),i=n(164),o=n(34);r({target:"String",proto:!0,forced:!n(165)("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(121),i=n(11),o=n(16),a=n(34),s=n(166),u=n(122);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var f,h=[],p=0;null!==(f=u(a,c));){var d=String(f[0]);h[p]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),p++}return 0===p?null:h}]}))},function(e,t,n){"use strict";var r=n(3),i=n(263).end;r({target:"String",proto:!0,forced:n(264)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(263).start;r({target:"String",proto:!0,forced:n(264)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(3),i=n(39),o=n(16);r({target:"String",stat:!0},{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){n(3)({target:"String",proto:!0},{repeat:n(160)})},function(e,t,n){"use strict";var r=n(121),i=n(11),o=n(23),a=n(16),s=n(44),u=n(34),c=n(166),l=n(122),f=Math.max,h=Math.min,p=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,y=v?"$":"$0";return[function(n,r){var i=u(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!v&&g||"string"===typeof r&&-1===r.indexOf(y)){var o=n(t,e,this,r);if(o.done)return o.value}var u=i(e),p=String(this),d="function"===typeof r;d||(r=String(r));var m=u.global;if(m){var x=u.unicode;u.lastIndex=0}for(var b=[];;){var w=l(u,p);if(null===w)break;if(b.push(w),!m)break;""===String(w[0])&&(u.lastIndex=c(p,a(u.lastIndex),x))}for(var S,E="",T=0,A=0;A<b.length;A++){w=b[A];for(var M=String(w[0]),C=f(h(s(w.index),p.length),0),k=[],R=1;R<w.length;R++)k.push(void 0===(S=w[R])?S:String(S));var P=w.groups;if(d){var L=[M].concat(k,C,p);void 0!==P&&L.push(P);var O=String(r.apply(void 0,L))}else O=_(M,p,C,k,P,r);C>=T&&(E+=p.slice(T,C)+O,T=C+M.length)}return E+p.slice(T)}];function _(e,n,r,i,a,s){var u=r+e.length,c=i.length,l=m;return void 0!==a&&(a=o(a),l=d),t.call(s,l,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>c){var f=p(l/10);return 0===f?t:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):t}s=i[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(121),i=n(11),o=n(34),a=n(256),s=n(122);r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(121),i=n(162),o=n(11),a=n(34),s=n(64),u=n(166),c=n(16),l=n(122),f=n(120),h=n(5),p=[].push,d=Math.min,m=!h((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var s,u,c,l=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,m=new RegExp(e.source,h+"g");(s=f.call(m,r))&&!((u=m.lastIndex)>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&p.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return d===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=a(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var f=o(e),h=String(this),p=s(f,RegExp),v=f.unicode,g=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(m?"y":"g"),y=new p(m?f:"^(?:"+f.source+")",g),_=void 0===i?4294967295:i>>>0;if(0===_)return[];if(0===h.length)return null===l(y,h)?[h]:[];for(var x=0,b=0,w=[];b<h.length;){y.lastIndex=m?b:0;var S,E=l(y,m?h:h.slice(b));if(null===E||(S=d(c(y.lastIndex+(m?0:b)),h.length))===x)b=u(h,b,v);else{if(w.push(h.slice(x,b)),w.length===_)return w;for(var T=1;T<=E.length-1;T++)if(w.push(E[T]),w.length===_)return w;b=x=S}}return w.push(h.slice(x)),w}]}),!m)},function(e,t,n){"use strict";var r=n(3),i=n(30).f,o=n(16),a=n(164),s=n(34),u=n(165),c=n(52),l="".startsWith,f=Math.min,h=u("startsWith");r({target:"String",proto:!0,forced:!(!c&&!h&&!!function(){var e=i(String.prototype,"startsWith");return e&&!e.writable}())&&!h},{startsWith:function(e){var t=String(s(this));a(e);var n=o(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return l?l.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";var r=n(3),i=n(83).trim;r({target:"String",proto:!0,forced:n(167)("trim")},{trim:function(){return i(this)}})},function(e,t,n){"use strict";var r=n(3),i=n(83).end,o=n(167)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},function(e,t,n){"use strict";var r=n(3),i=n(83).start,o=n(167)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("anchor")},{anchor:function(e){return i(this,"a","name",e)}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("big")},{big:function(){return i(this,"big","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("blink")},{blink:function(){return i(this,"blink","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("bold")},{bold:function(){return i(this,"b","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("fixed")},{fixed:function(){return i(this,"tt","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("fontcolor")},{fontcolor:function(e){return i(this,"font","color",e)}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("fontsize")},{fontsize:function(e){return i(this,"font","size",e)}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("italics")},{italics:function(){return i(this,"i","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("link")},{link:function(e){return i(this,"a","href",e)}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("small")},{small:function(){return i(this,"small","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("strike")},{strike:function(){return i(this,"strike","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("sub")},{sub:function(){return i(this,"sub","","")}})},function(e,t,n){"use strict";var r=n(3),i=n(41);r({target:"String",proto:!0,forced:n(42)("sup")},{sup:function(){return i(this,"sup","","")}})},function(e,t,n){n(55)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(44);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){n(55)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(55)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(55)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(17),i=n(245),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(28).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(157),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},function(e,t,n){"use strict";var r=n(17),i=n(28).filter,o=n(64),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,u=t.length,c=new(s(n))(u);u>r;)c[r]=t[r++];return c}))},function(e,t,n){"use strict";var r=n(17),i=n(28).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(28).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(28).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(168);(0,n(17).exportTypedArrayStaticMethod)("from",n(266),r)},function(e,t,n){"use strict";var r=n(17),i=n(90).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(90).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(9),i=n(17),o=n(112),a=n(13)("iterator"),s=r.Uint8Array,u=o.values,c=o.keys,l=o.entries,f=i.aTypedArray,h=i.exportTypedArrayMethod,p=s&&s.prototype[a],d=!!p&&("values"==p.name||void 0==p.name),m=function(){return u.call(f(this))};h("entries",(function(){return l.call(f(this))})),h("keys",(function(){return c.call(f(this))})),h("values",m,!d),h(a,m,!d)},function(e,t,n){"use strict";var r=n(17),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(e){return a.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(17),i=n(248),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},function(e,t,n){"use strict";var r=n(17),i=n(28).map,o=n(64),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(17),i=n(168),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},function(e,t,n){"use strict";var r=n(17),i=n(113).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=n(113).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=i(this).length,n=a(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},function(e,t,n){"use strict";var r=n(17),i=n(16),o=n(265),a=n(23),s=n(5),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){u(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(e),s=i(r.length),c=0;if(s+t>n)throw RangeError("Wrong length");for(;c<s;)this[t+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var r=n(17),i=n(64),o=n(5),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice;u("slice",(function(e,t){for(var n=c.call(a(this),e,t),r=i(this,this.constructor),o=0,u=n.length,l=new(s(r))(u);u>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(17),i=n(28).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(17),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(17),i=n(16),o=n(59),a=n(64),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,u=o(e,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-u))}))},function(e,t,n){"use strict";var r=n(9),i=n(17),o=n(5),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,f=!!a&&o((function(){c.call(new a(1))}));u("toLocaleString",(function(){return c.apply(f?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(17).exportTypedArrayMethod,i=n(5),o=n(9).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=a.toString!=s;r("toString",s,c)},function(e,t,n){"use strict";var r,i=n(9),o=n(82),a=n(72),s=n(114),u=n(267),c=n(10),l=n(40).enforce,f=n(212),h=!i.ActiveXObject&&"ActiveXObject"in i,p=Object.isExtensible,d=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},m=e.exports=s("WeakMap",d,u);if(f&&h){r=u.getConstructor(d,"WeakMap",!0),a.REQUIRED=!0;var v=m.prototype,g=v.delete,y=v.has,_=v.get,x=v.set;o(v,{delete:function(e){if(c(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),g.call(this,e)||t.frozen.delete(e)}return g.call(this,e)},has:function(e){if(c(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)||t.frozen.has(e)}return y.call(this,e)},get:function(e){if(c(e)&&!p(e)){var t=l(this);return t.frozen||(t.frozen=new r),y.call(this,e)?_.call(this,e):t.frozen.get(e)}return _.call(this,e)},set:function(e,t){if(c(e)&&!p(e)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,e)?x.call(this,e,t):n.frozen.set(e,t)}else x.call(this,e,t);return this}})}},function(e,t,n){"use strict";n(114)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(267))},function(e,t,n){var r=n(9),i=n(268),o=n(247),a=n(35);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},function(e,t,n){var r=n(9),i=n(268),o=n(112),a=n(35),s=n(13),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var f in i){var h=r[f],p=h&&h.prototype;if(p){if(p[u]!==l)try{a(p,u,l)}catch(m){p[u]=l}if(p[c]||a(p,c,f),i[f])for(var d in o)if(p[d]!==o[d])try{a(p,d,o[d])}catch(m){p[d]=o[d]}}}},function(e,t,n){var r=n(3),i=n(9),o=n(161);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){var r=n(3),i=n(9),o=n(259),a=n(47),s=i.process,u="process"==a(s);r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=u&&s.domain;o(t?t.bind(e):e)}})},function(e,t,n){"use strict";n(154);var r,i=n(3),o=n(15),a=n(269),s=n(9),u=n(217),c=n(32),l=n(63),f=n(24),h=n(254),p=n(236),d=n(111).codeAt,m=n(539),v=n(53),g=n(270),y=n(40),_=s.URL,x=g.URLSearchParams,b=g.getState,w=y.set,S=y.getterFor("URL"),E=Math.floor,T=Math.pow,A=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,C=/\d/,k=/^(0x|0X)/,R=/^[0-7]+$/,P=/^\d+$/,L=/^[\dA-Fa-f]+$/,O=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,I=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,N=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,D=/[\u0009\u000A\u000D]/g,F=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=B(t.slice(1,-1))))return"Invalid host";e.host=n}else if(Y(e)){if(t=m(t),O.test(t))return"Invalid host";if(null===(n=z(t)))return"Invalid host";e.host=n}else{if(I.test(t))return"Invalid host";for(n="",r=p(t),i=0;i<r.length;i++)n+=W(r[i],V);e.host=n}},z=function(e){var t,n,r,i,o,a,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=k.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?P:8==o?R:L).test(i))return e;a=parseInt(i,o)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=T(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*T(256,3-r);return s},B=function(e){var t,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return e.charAt(f)};if(":"==h()){if(":"!=e.charAt(1))return;f+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=n=0;n<4&&L.test(h());)t=16*t+parseInt(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,c>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!C.test(h()))return;for(;C.test(h());){if(o=parseInt(h(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[c++]=t}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},j=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=E(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},V={},U=h({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),G=h({},U,{"#":1,"?":1,"{":1,"}":1}),H=h({},G,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(e,t){var n=d(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Y=function(e){return f(q,e.scheme)},X=function(e){return""!=e.username||""!=e.password},$=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Z=function(e,t){var n;return 2==e.length&&A.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},K=function(e){var t;return e.length>1&&Z(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},J=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Z(t[0],!0)||t.pop()},Q=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},ie={},oe={},ae={},se={},ue={},ce={},le={},fe={},he={},pe={},de={},me={},ve={},ge={},ye={},_e={},xe={},be=function(e,t,n,i){var o,a,s,u,c,l=n||ee,h=0,d="",m=!1,v=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(N,"")),t=t.replace(D,""),o=p(t);h<=o.length;){switch(a=o[h],l){case ee:if(!a||!A.test(a)){if(n)return"Invalid scheme";l=ne;continue}d+=a.toLowerCase(),l=te;break;case te:if(a&&(M.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";d="",l=ne,h=0;continue}if(n&&(Y(e)!=f(q,d)||"file"==d&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(Y(e)&&q[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=pe:Y(e)&&i&&i.scheme==e.scheme?l=re:Y(e)?l=se:"/"==o[h+1]?(l=ie,h++):(e.cannotBeABaseURL=!0,e.path.push(""),l=ye)}break;case ne:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=xe;break}l="file"==i.scheme?pe:oe;continue;case re:if("/"!=a||"/"!=o[h+1]){l=oe;continue}l=ue,h++;break;case ie:if("/"==a){l=ce;break}l=ge;continue;case oe:if(e.scheme=i.scheme,a==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&Y(e))l=ae;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=_e;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=ge;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}break;case ae:if(!Y(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=ge;continue}l=ce}else l=ue;break;case se:if(l=ue,"/"!=a||"/"!=d.charAt(h+1))continue;h++;break;case ue:if("/"!=a&&"\\"!=a){l=ce;continue}break;case ce:if("@"==a){m&&(d="%40"+d),m=!0,s=p(d);for(var y=0;y<s.length;y++){var _=s[y];if(":"!=_||g){var x=W(_,H);g?e.password+=x:e.username+=x}else g=!0}d=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(m&&""==d)return"Invalid authority";h-=p(d).length+1,d="",l=le}else d+=a;break;case le:case fe:if(n&&"file"==e.scheme){l=me;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(Y(e)&&""==d)return"Invalid host";if(n&&""==d&&(X(e)||null!==e.port))return;if(u=F(e,d))return u;if(d="",l=ve,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),d+=a}else{if(""==d)return"Invalid host";if(u=F(e,d))return u;if(d="",l=he,n==fe)return}break;case he:if(!C.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)||n){if(""!=d){var b=parseInt(d,10);if(b>65535)return"Invalid port";e.port=Y(e)&&b===q[e.scheme]?null:b,d=""}if(n)return;l=ve;continue}return"Invalid port"}d+=a;break;case pe:if(e.scheme="file","/"==a||"\\"==a)l=de;else{if(!i||"file"!=i.scheme){l=ge;continue}if(a==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",l=_e;else{if("#"!=a){K(o.slice(h).join(""))||(e.host=i.host,e.path=i.path.slice(),J(e)),l=ge;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=xe}}break;case de:if("/"==a||"\\"==a){l=me;break}i&&"file"==i.scheme&&!K(o.slice(h).join(""))&&(Z(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=ge;continue;case me:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&Z(d))l=ge;else if(""==d){if(e.host="",n)return;l=ve}else{if(u=F(e,d))return u;if("localhost"==e.host&&(e.host=""),n)return;d="",l=ve}continue}d+=a;break;case ve:if(Y(e)){if(l=ge,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=ge,"/"!=a))continue}else e.fragment="",l=xe;else e.query="",l=_e;break;case ge:if(a==r||"/"==a||"\\"==a&&Y(e)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(J(e),"/"==a||"\\"==a&&Y(e)||e.path.push("")):Q(d)?"/"==a||"\\"==a&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Z(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=_e):"#"==a&&(e.fragment="",l=xe)}else d+=W(a,G);break;case ye:"?"==a?(e.query="",l=_e):"#"==a?(e.fragment="",l=xe):a!=r&&(e.path[0]+=W(a,V));break;case _e:n||"#"!=a?a!=r&&("'"==a&&Y(e)?e.query+="%27":e.query+="#"==a?"%23":W(a,V)):(e.fragment="",l=xe);break;case xe:a!=r&&(e.fragment+=W(a,U))}h++}},we=function(e){var t,n,r=l(this,we,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof we)t=S(i);else if(n=be(t={},String(i)))throw TypeError(n);if(n=be(s,a,null,t))throw TypeError(n);var u=s.searchParams=new x,c=b(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Ee.call(r),r.origin=Te.call(r),r.protocol=Ae.call(r),r.username=Me.call(r),r.password=Ce.call(r),r.host=ke.call(r),r.hostname=Re.call(r),r.port=Pe.call(r),r.pathname=Le.call(r),r.search=Oe.call(r),r.searchParams=Ie.call(r),r.hash=Ne.call(r))},Se=we.prototype,Ee=function(){var e=S(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",X(e)&&(c+=n+(r?":"+r:"")+"@"),c+=j(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Te=function(){var e=S(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&Y(e)?t+"://"+j(e.host)+(null!==n?":"+n:""):"null"},Ae=function(){return S(this).scheme+":"},Me=function(){return S(this).username},Ce=function(){return S(this).password},ke=function(){var e=S(this),t=e.host,n=e.port;return null===t?"":null===n?j(t):j(t)+":"+n},Re=function(){var e=S(this).host;return null===e?"":j(e)},Pe=function(){var e=S(this).port;return null===e?"":String(e)},Le=function(){var e=S(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Oe=function(){var e=S(this).query;return e?"?"+e:""},Ie=function(){return S(this).searchParams},Ne=function(){var e=S(this).fragment;return e?"#"+e:""},De=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&u(Se,{href:De(Ee,(function(e){var t=S(this),n=String(e),r=be(t,n);if(r)throw TypeError(r);b(t.searchParams).updateSearchParams(t.query)})),origin:De(Te),protocol:De(Ae,(function(e){var t=S(this);be(t,String(e)+":",ee)})),username:De(Me,(function(e){var t=S(this),n=p(String(e));if(!$(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=W(n[r],H)}})),password:De(Ce,(function(e){var t=S(this),n=p(String(e));if(!$(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=W(n[r],H)}})),host:De(ke,(function(e){var t=S(this);t.cannotBeABaseURL||be(t,String(e),le)})),hostname:De(Re,(function(e){var t=S(this);t.cannotBeABaseURL||be(t,String(e),fe)})),port:De(Pe,(function(e){var t=S(this);$(t)||(""==(e=String(e))?t.port=null:be(t,e,he))})),pathname:De(Le,(function(e){var t=S(this);t.cannotBeABaseURL||(t.path=[],be(t,e+"",ve))})),search:De(Oe,(function(e){var t=S(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",be(t,e,_e)),b(t.searchParams).updateSearchParams(t.query)})),searchParams:De(Ie),hash:De(Ne,(function(e){var t=S(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",be(t,e,xe)):t.fragment=null}))}),c(Se,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),c(Se,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),_){var Fe=_.createObjectURL,ze=_.revokeObjectURL;Fe&&c(we,"createObjectURL",(function(e){return Fe.apply(_,arguments)})),ze&&c(we,"revokeObjectURL",(function(e){return ze.apply(_,arguments)}))}v(we,"URL"),i({global:!0,forced:!a,sham:!o},{URL:we})},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,u=function(e){return e+22+75*(e<26)},c=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,l=128,f=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(s(n));var p=r.length,d=p;for(p&&r.push("-");d<i;){var m=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<m&&(m=n);var v=d+1;if(m-l>a((2147483647-f)/v))throw RangeError(o);for(f+=(m-l)*v,l=m,t=0;t<e.length;t++){if((n=e[t])<l&&++f>2147483647)throw RangeError(o);if(n==l){for(var g=f,y=36;;y+=36){var _=y<=h?1:y>=h+26?26:y-h;if(g<_)break;var x=g-_,b=36-_;r.push(s(u(_+x%b))),g=a(x/b)}r.push(s(u(g))),h=c(f,v,d==p),f=0,++d}}++f,++l}return r.join("")};e.exports=function(e){var t,n,o=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)n=a[t],o.push(r.test(n)?"xn--"+l(n):n);return o.join(".")}},function(e,t,n){var r=n(11),i=n(96);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";n(3)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var l={};function f(){}function h(){}function p(){}var d={};d[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(E([])));v&&v!==t&&n.call(v,i)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=g.constructor=p,p.constructor=h,h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(_.prototype),_.prototype[o]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,function(e,t,n){"use strict";var r=n(271),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function x(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||y}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var S=w.prototype=new b;S.constructor=w,r(S,x.prototype),S.isPureReactComponent=!0;var E={current:null},T=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var k=/\/+/g,R=[];function P(e,t,n,r){if(R.length){var i=R.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function O(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+I(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+I(s=t[c],c);u+=e(s,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=v&&t[v]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+I(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),O(e,D,t=P(t,o,r,i)),L(t)}var z={current:null};function B(){var e=z.current;if(null===e)throw Error(g(321));return e}var j={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;O(e,N,t=P(null,null,t,n)),L(t)},count:function(e){return O(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(g(143));return e}},t.Component=x,t.Fragment=s,t.Profiler=c,t.PureComponent=w,t.StrictMode=u,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.14.0"},function(e,t,n){"use strict";var r=n(1),i=n(271),o=n(546);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,f=null,h={onError:function(e){u=!0,c=e}};function p(e,t,n,r,i,o,a,l,f){u=!1,c=null,s.apply(h,arguments)}var d=null,m=null,v=null;function g(e,t,n){var r=e.type||"unknown-event";e.currentTarget=v(n),function(e,t,n,r,i,o,s,h,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var m=c;u=!1,c=null,l||(l=!0,f=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,_={};function x(){if(y)for(var e in _){var t=_[e],n=y.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!w[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in w[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,u=r;if(S.hasOwnProperty(u))throw Error(a(99,u));S[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&b(c[i],s,u);i=!0}else o.registrationName?(b(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function b(e,t,n){if(E[e])throw Error(a(100,e));E[e]=t,T[e]=t.eventTypes[n].dependencies}var w=[],S={},E={},T={};function A(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!_.hasOwnProperty(t)||_[t]!==r){if(_[t])throw Error(a(102,t));_[t]=r,n=!0}}n&&x()}var M=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,k=null,R=null;function P(e){if(e=m(e)){if("function"!==typeof C)throw Error(a(280));var t=e.stateNode;t&&(t=d(t),C(e.stateNode,e.type,t))}}function L(e){k?R?R.push(e):R=[e]:k=e}function O(){if(k){var e=k,t=R;if(R=k=null,P(e),t)for(e=0;e<t.length;e++)P(t[e])}}function I(e,t){return e(t)}function N(e,t,n,r,i){return e(t,n,r,i)}function D(){}var F=I,z=!1,B=!1;function j(){null===k&&null===R||(D(),O())}function V(e,t,n){if(B)return e(t,n);B=!0;try{return F(e,t,n)}finally{B=!1,j()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G=Object.prototype.hasOwnProperty,H={},W={};function q(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Y[e]=new q(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Y[t]=new q(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Y[e]=new q(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Y[e]=new q(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Y[e]=new q(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Y[e]=new q(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Y[e]=new q(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Y[e]=new q(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Y[e]=new q(e,5,!1,e.toLowerCase(),null,!1)}));var X=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(X,$);Y[t]=new q(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(X,$);Y[t]=new q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(X,$);Y[t]=new q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Y[e]=new q(e,1,!1,e.toLowerCase(),null,!1)})),Y.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Y[e]=new q(e,1,!1,e.toLowerCase(),null,!0)}));var Z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(e,t,n,r){var i=Y.hasOwnProperty(t)?Y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!G.call(W,e)||!G.call(H,e)&&(U.test(e)?W[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,oe=Q?Symbol.for("react.provider"):60109,ae=Q?Symbol.for("react.context"):60110,se=Q?Symbol.for("react.concurrent_mode"):60111,ue=Q?Symbol.for("react.forward_ref"):60112,ce=Q?Symbol.for("react.suspense"):60113,le=Q?Symbol.for("react.suspense_list"):60120,fe=Q?Symbol.for("react.memo"):60115,he=Q?Symbol.for("react.lazy"):60116,pe=Q?Symbol.for("react.block"):60121,de="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=de&&e[de]||e["@@iterator"])?e:null}function ve(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ve(e.type);case pe:return ve(e.render);case he:if(e=1===e._status?e._result:null)return ve(e)}return null}function ge(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ve(e.type);n=null,r&&(n=ve(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function xe(e){e._valueTracker||(e._valueTracker=function(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_e(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function we(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&K(e,"checked",t,!1)}function Te(e,t){Ee(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Me(e,t.type,n):t.hasOwnProperty("defaultValue")&&Me(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Me(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ke(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Le(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ie="http://www.w3.org/1999/xhtml",Ne="http://www.w3.org/2000/svg";function De(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?De(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ze,Be=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ne||"innerHTML"in e)e.innerHTML=t;else{for((ze=ze||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ve(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ue={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Ge={},He={};function We(e){if(Ge[e])return Ge[e];if(!Ue[e])return e;var t,n=Ue[e];for(t in n)if(n.hasOwnProperty(t)&&t in He)return Ge[e]=n[t];return e}M&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete Ue.animationend.animation,delete Ue.animationiteration.animation,delete Ue.animationstart.animation),"TransitionEvent"in window||delete Ue.transitionend.transition);var qe=We("animationend"),Ye=We("animationiteration"),Xe=We("animationstart"),$e=We("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ke=new("function"===typeof WeakMap?WeakMap:Map);function Je(e){var t=Ke.get(e);return void 0===t&&(t=new Map,Ke.set(e,t)),t}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Qe(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)g(e,t[r],n[r]);else t&&g(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(l)throw e=f,l=!1,f=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!M)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function ht(e,t,n,r){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Mn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<w.length;u++){var c=w[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=rt(s,c))}st(s)}}function dt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Xt(t,"scroll",!0);break;case"focus":case"blur":Xt(t,"focus",!0),Xt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Xt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&Yt(e,t)}n.set(e,null)}}var mt,vt,gt,yt=!1,_t=[],xt=null,bt=null,wt=null,St=new Map,Et=new Map,Tt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Mt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ct(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function kt(e,t){switch(e){case"focus":case"blur":xt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Rt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ct(t,n,r,i,o),null!==t&&(null!==(t=Cn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Mn(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Cn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){Lt(e)&&n.delete(t)}function It(){for(yt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=Cn(e.blockedOn))&&mt(e);break}var t=Jt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==xt&&Lt(xt)&&(xt=null),null!==bt&&Lt(bt)&&(bt=null),null!==wt&&Lt(wt)&&(wt=null),St.forEach(Ot),Et.forEach(Ot)}function Nt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,It)))}function Dt(e){function t(t){return Nt(t,e)}if(0<_t.length){Nt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Nt(xt,e),null!==bt&&Nt(bt,e),null!==wt&&Nt(wt,e),St.forEach(t),Et.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Pt(n),null===n.blockedOn&&Tt.shift()}var Ft={},zt=new Map,Bt=new Map,jt=["abort","abort",qe,"animationEnd",Ye,"animationIteration",Xe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),zt.set(r,o),Ft[i]=o}}Vt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(jt,2);for(var Ut="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Gt=0;Gt<Ut.length;Gt++)Bt.set(Ut[Gt],0);var Ht=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,qt=!0;function Yt(e,t){Xt(t,e,!1)}function Xt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=$t.bind(null,t,1,e);break;case 1:r=Zt.bind(null,t,1,e);break;default:r=Kt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function $t(e,t,n,r){z||D();var i=Kt,o=z;z=!0;try{N(i,e,t,n,r)}finally{(z=o)||j()}}function Zt(e,t,n,r){Wt(Ht,Kt.bind(null,e,t,n,r))}function Kt(e,t,n,r){if(qt)if(0<_t.length&&-1<At.indexOf(e))e=Ct(null,e,t,n,r),_t.push(e);else{var i=Jt(e,t,n,r);if(null===i)kt(e,r);else if(-1<At.indexOf(e))e=Ct(i,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return xt=Rt(xt,e,t,n,r,i),!0;case"dragenter":return bt=Rt(bt,e,t,n,r,i),!0;case"mouseover":return wt=Rt(wt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return St.set(o,Rt(St.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Et.set(o,Rt(Et.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){kt(e,r),e=ht(e,r,null,t);try{V(pt,e)}finally{ft(e)}}}}function Jt(e,t,n,r){if(null!==(n=Mn(n=ut(r)))){var i=Qe(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=et(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ht(e,r,n,t);try{V(pt,e)}finally{ft(e)}return null}var Qt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Qt.hasOwnProperty(e)&&Qt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Qt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qt[t]=Qt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Ie;function un(e,t){var n=Je(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++)dt(t[r],e,n)}function cn(){}function ln(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function pn(){for(var e=window,t=ln();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ln((e=t.contentWindow).document)}return t}function dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn=null,vn=null;function gn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,xn="function"===typeof clearTimeout?clearTimeout:void 0;function bn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function wn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),En="__reactInternalInstance$"+Sn,Tn="__reactEventHandlers$"+Sn,An="__reactContainere$"+Sn;function Mn(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[En]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wn(e);null!==e;){if(n=e[En])return n;e=wn(e)}return t}n=(e=n).parentNode}return null}function Cn(e){return!(e=e[En]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function kn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Rn(e){return e[Tn]||null}function Pn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ln(e,t){var n=e.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}function On(e,t,n){(t=Ln(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function In(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Pn(t);for(t=n.length;0<t--;)On(n[t],"captured",e);for(t=0;t<n.length;t++)On(n[t],"bubbled",e)}}function Nn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Ln(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Dn(e){e&&e.dispatchConfig.registrationName&&Nn(e._targetInst,null,e)}function Fn(e){it(e,In)}var zn=null,Bn=null,jn=null;function Vn(){if(jn)return jn;var e,t,n=Bn,r=n.length,i="value"in zn?zn.value:zn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return jn=i.slice(e,1<t?1-t:void 0)}function Un(){return!0}function Gn(){return!1}function Hn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Un:Gn,this.isPropagationStopped=Gn,this}function Wn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function qn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Yn(e){e.eventPool=[],e.getPooled=Wn,e.release=qn}i(Hn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){this.isPersistent=Un},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Hn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Yn(n),n},Yn(Hn);var Xn=Hn.extend({data:null}),$n=Hn.extend({data:null}),Zn=[9,13,27,32],Kn=M&&"CompositionEvent"in window,Jn=null;M&&"documentMode"in document&&(Jn=document.documentMode);var Qn=M&&"TextEvent"in window&&!Jn,er=M&&(!Kn||Jn&&8<Jn&&11>=Jn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==Zn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Kn)e:{switch(e){case"compositionstart":var o=nr.compositionStart;break e;case"compositionend":o=nr.compositionEnd;break e;case"compositionupdate":o=nr.compositionUpdate;break e}o=void 0}else ar?ir(e,n)&&(o=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=nr.compositionStart);return o?(er&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Vn()):(Bn="value"in(zn=r)?zn.value:zn.textContent,ar=!0)),o=Xn.getPooled(o,t,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(e=Qn?function(e,t){switch(e){case"compositionend":return or(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(ar)return"compositionend"===e||!Kn&&ir(e,t)?(e=Vn(),jn=Bn=zn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=$n.getPooled(nr.beforeInput,t,n,r)).data=e,Fn(t)):t=null,null===i?t:null===t?i:[i,t]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ur[e.type]:"textarea"===t}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(e,t,n){return(e=Hn.getPooled(lr.change,e,t,n)).type="change",L(n),Fn(e),e}var hr=null,pr=null;function dr(e){st(e)}function mr(e){if(be(kn(e)))return e}function vr(e,t){if("change"===e)return t}var gr=!1;function yr(){hr&&(hr.detachEvent("onpropertychange",_r),pr=hr=null)}function _r(e){if("value"===e.propertyName&&mr(pr))if(e=fr(pr,e,ut(e)),z)st(e);else{z=!0;try{I(dr,e)}finally{z=!1,j()}}}function xr(e,t,n){"focus"===e?(yr(),pr=n,(hr=t).attachEvent("onpropertychange",_r)):"blur"===e&&yr()}function br(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mr(pr)}function wr(e,t){if("click"===e)return mr(t)}function Sr(e,t){if("input"===e||"change"===e)return mr(t)}M&&(gr=ct("input")&&(!document.documentMode||9<document.documentMode));var Er={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(e,t,n,r){var i=t?kn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(cr(i))if(gr)a=Sr;else{a=br;var s=xr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=wr);if(a&&(a=a(e,t)))return fr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Me(i,"number",i.value)}},Tr=Hn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Cr(){return Mr}var kr=0,Rr=0,Pr=!1,Lr=!1,Or=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Cr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=kr;return kr=e.screenX,Pr?"mousemove"===e.type?e.screenX-t:0:(Pr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rr;return Rr=e.screenY,Lr?"mousemove"===e.type?e.screenY-t:0:(Lr=!0,0)}}),Ir=Or.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Nr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Dr={eventTypes:Nr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Mn(t):null)&&(t!==Qe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Or,u=Nr.mouseLeave,c=Nr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Ir,u=Nr.pointerLeave,c=Nr.pointerEnter,l="pointer");if(e=null==a?o:kn(a),o=null==t?o:kn(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=a)&&l)e:{for(c=l,a=0,e=s=r;e;e=Pn(e))a++;for(e=0,t=c;t;t=Pn(t))e++;for(;0<a-e;)s=Pn(s),a--;for(;0<e-a;)c=Pn(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Pn(s),c=Pn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Pn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Pn(l);for(l=0;l<s.length;l++)Nn(s[l],"bubbled",u);for(l=r.length;0<l--;)Nn(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},zr=Object.prototype.hasOwnProperty;function Br(e,t){if(Fr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(t,n[r])||!Fr(e[n[r]],t[n[r]]))return!1;return!0}var jr=M&&"documentMode"in document&&11>=document.documentMode,Vr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ur=null,Gr=null,Hr=null,Wr=!1;function qr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wr||null==Ur||Ur!==ln(n)?null:("selectionStart"in(n=Ur)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hr&&Br(Hr,n)?null:(Hr=n,(e=Hn.getPooled(Vr.select,Gr,e,t)).type="select",e.target=Ur,Fn(e),e))}var Yr={eventTypes:Vr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Je(i),o=T.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?kn(t):window,e){case"focus":(cr(i)||"true"===i.contentEditable)&&(Ur=i,Gr=t,Hr=null);break;case"blur":Hr=Gr=Ur=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wr=!1,qr(n,r);case"selectionchange":if(jr)break;case"keydown":case"keyup":return qr(n,r)}return null}},Xr=Hn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$r=Hn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zr=Tr.extend({relatedTarget:null});function Kr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=Tr.extend({key:function(e){if(e.key){var t=Jr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Qr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?Kr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Or.extend({dataTransfer:null}),ni=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Cr}),ri=Hn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Or.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=zt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Kr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Zr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case qe:case Ye:case Xe:e=Xr;break;case $e:e=ri;break;case"scroll":e=Tr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ir;break;default:e=Hn}return Fn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x(),d=Rn,m=Cn,v=kn,A({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Dr,ChangeEventPlugin:Er,SelectEventPlugin:Yr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function ci(e,t){si++,ai[si]=e.current,e.current=t}var li={},fi={current:li},hi={current:!1},pi=li;function di(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){ui(hi),ui(fi)}function gi(e,t,n){if(fi.current!==li)throw Error(a(168));ci(fi,t),ci(hi,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,ve(t)||"Unknown",o));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,pi=fi.current,ci(fi,e),ci(hi,hi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=yi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(hi),ui(fi),ci(fi,e)):ui(hi),ci(hi,n)}var bi=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Si=o.unstable_cancelCallback,Ei=o.unstable_requestPaint,Ti=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,ki=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Li={},Oi=o.unstable_shouldYield,Ii=void 0!==Ei?Ei:function(){},Ni=null,Di=null,Fi=!1,zi=Ti(),Bi=1e4>zi?Ti:function(){return Ti()-zi};function ji(){switch(Ai()){case Mi:return 99;case Ci:return 98;case ki:return 97;case Ri:return 96;case Pi:return 95;default:throw Error(a(332))}}function Vi(e){switch(e){case 99:return Mi;case 98:return Ci;case 97:return ki;case 96:return Ri;case 95:return Pi;default:throw Error(a(332))}}function Ui(e,t){return e=Vi(e),bi(e,t)}function Gi(e,t,n){return e=Vi(e),wi(e,t,n)}function Hi(e){return null===Ni?(Ni=[e],Di=wi(Mi,qi)):Ni.push(e),Li}function Wi(){if(null!==Di){var e=Di;Di=null,Si(e)}qi()}function qi(){if(!Fi&&null!==Ni){Fi=!0;var e=0;try{var t=Ni;Ui(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ni=null}catch(n){throw null!==Ni&&(Ni=Ni.slice(e+1)),wi(Mi,Wi),n}finally{Fi=!1}}}function Yi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var $i={current:null},Zi=null,Ki=null,Ji=null;function Qi(){Ji=Ki=Zi=null}function eo(e){var t=$i.current;ui($i),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Zi=e,Ji=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ra=!0),e.firstContext=null)}function ro(e,t){if(Ji!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ji=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ki){if(null===Zi)throw Error(a(308));Ki=t,Zi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ki=Ki.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function co(e,t){var n=e.alternate;null!==n&&ao(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function lo(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,f=null,h=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var m={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(h=p=m,f=c):p=p.next=m,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(s,d.suspenseConfig);e:{var v=e,g=d;switch(s=t,m=n,g.tag){case 1:if("function"===typeof(v=g.payload)){c=v.call(m,c,s);break e}c=v;break e;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null===(s="function"===typeof(v=g.payload)?v.call(m,c,s):v)||void 0===s)break e;c=i({},c,s);break e;case 2:io=!0}}null!==d.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?f=c:p.next=h,o.baseState=f,o.baseQueue=p,au(l),e.expirationTime=l,e.memoizedState=c}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var ho=Z.ReactCurrentBatchConfig,po=(new r.Component).refs;function mo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=qs(),i=ho.suspense;(i=so(r=Ys(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Xs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=qs(),i=ho.suspense;(i=so(r=Ys(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),uo(e,i),Xs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=qs(),r=ho.suspense;(r=so(n=Ys(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),uo(e,r),Xs(e,n)}};function go(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Br(n,r)||!Br(i,o))}function yo(e,t,n){var r=!1,i=li,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=mi(t)?pi:fi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?di(e,i):li),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function xo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=mi(t)?pi:fi.current,i.context=di(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var bo=Array.isArray;function wo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===po&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function So(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Au(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=ku(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wo(e,t,n),r.return=e,r):((r=Mu(n.type,n.key,n.props,null,e.mode,r)).ref=wo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ru(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Cu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=ku(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Mu(t.type,t.key,t.props,null,e.mode,n)).ref=wo(e,null,t),n.return=e,n;case te:return(t=Ru(t,e.mode,n)).return=e,t}if(bo(t)||me(t))return(t=Cu(t,e.mode,n,null)).return=e,t;So(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(bo(n)||me(n))return null!==i?null:f(e,t,n,r,null);So(e,n)}return null}function d(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||me(r))return f(t,e=e.get(n)||null,r,i,null);So(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,f=a,m=a=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(i,f,s[m],u);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,f=v}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)null!==(f=h(i,s[m],u))&&(a=o(f,a,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);m<s.length;m++)null!==(v=d(f,i,m,s[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=o(v,a,m),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach((function(e){return t(i,e)})),c}function v(i,s,u,c){var l=me(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var _=p(i,m,y.value,c);if(null===_){null===m&&(m=g);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,v),null===f?l=_:f.sibling=_,f=_,m=g}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=h(i,y.value,c))&&(s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return l}for(m=r(i,m);!y.done;v++,y=u.next())null!==(y=d(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===f?l=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case ee:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===ne){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=wo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===ne?((r=Cu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Mu(o.type,o.key,o.props,null,e.mode,u)).ref=wo(e,r,o),u.return=e,e=u)}return s(e);case te:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ru(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=ku(o,e.mode,u)).return=e,e=r),s(e);if(bo(o))return m(e,r,o,u);if(me(o))return v(e,r,o,u);if(l&&So(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var To=Eo(!0),Ao=Eo(!1),Mo={},Co={current:Mo},ko={current:Mo},Ro={current:Mo};function Po(e){if(e===Mo)throw Error(a(174));return e}function Lo(e,t){switch(ci(Ro,t),ci(ko,e),ci(Co,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Co),ci(Co,t)}function Oo(){ui(Co),ui(ko),ui(Ro)}function Io(e){Po(Ro.current);var t=Po(Co.current),n=Fe(t,e.type);t!==n&&(ci(ko,e),ci(Co,n))}function No(e){ko.current===e&&(ui(Co),ui(ko))}var Do={current:0};function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zo(e,t){return{responder:e,props:t}}var Bo=Z.ReactCurrentDispatcher,jo=Z.ReactCurrentBatchConfig,Vo=0,Uo=null,Go=null,Ho=null,Wo=!1;function qo(){throw Error(a(321))}function Yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function Xo(e,t,n,r,i,o){if(Vo=o,Uo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Bo.current=null===e||null===e.memoizedState?ga:ya,e=n(r,i),t.expirationTime===Vo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Ho=Go=null,t.updateQueue=null,Bo.current=_a,e=n(r,i)}while(t.expirationTime===Vo)}if(Bo.current=va,t=null!==Go&&null!==Go.next,Vo=0,Ho=Go=Uo=null,Wo=!1,t)throw Error(a(300));return e}function $o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ho?Uo.memoizedState=Ho=e:Ho=Ho.next=e,Ho}function Zo(){if(null===Go){var e=Uo.alternate;e=null!==e?e.memoizedState:null}else e=Go.next;var t=null===Ho?Uo.memoizedState:Ho.next;if(null!==t)Ho=t,Go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Go=e).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===Ho?Uo.memoizedState=Ho=e:Ho=Ho.next=e}return Ho}function Ko(e,t){return"function"===typeof t?t(e):t}function Jo(e){var t=Zo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<Vo){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,l>Uo.expirationTime&&(Uo.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,Fr(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Qo(e){var t=Zo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Fr(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ea(e){var t=$o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e}).dispatch=ma.bind(null,Uo,e),[t.memoizedState,e]}function ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Uo.updateQueue)?(t={lastEffect:null},Uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function na(){return Zo().memoizedState}function ra(e,t,n,r){var i=$o();Uo.effectTag|=e,i.memoizedState=ta(1|t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Zo();r=void 0===r?null:r;var o=void 0;if(null!==Go){var a=Go.memoizedState;if(o=a.destroy,null!==r&&Yo(r,a.deps))return void ta(t,n,o,r)}Uo.effectTag|=e,i.memoizedState=ta(1|t,n,o,r)}function oa(e,t){return ra(516,4,e,t)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return ia(4,2,e,t)}function ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ca(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ia(4,2,ua.bind(null,t,e),n)}function la(){}function fa(e,t){return $o().memoizedState=[e,void 0===t?null:t],e}function ha(e,t){var n=Zo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pa(e,t){var n=Zo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function da(e,t,n){var r=ji();Ui(98>r?98:r,(function(){e(!0)})),Ui(97<r?97:r,(function(){var r=jo.suspense;jo.suspense=void 0===t?null:t;try{e(!1),n()}finally{jo.suspense=r}}))}function ma(e,t,n){var r=qs(),i=ho.suspense;i={expirationTime:r=Ys(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Uo||null!==o&&o===Uo)Wo=!0,i.expirationTime=Vo,Uo.expirationTime=Vo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(u){}Xs(e,r)}}var va={readContext:ro,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useResponder:qo,useDeferredValue:qo,useTransition:qo},ga={readContext:ro,useCallback:fa,useContext:ro,useEffect:oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ra(4,2,ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=$o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ma.bind(null,Uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},$o().memoizedState=e},useState:ea,useDebugValue:la,useResponder:zo,useDeferredValue:function(e,t){var n=ea(e),r=n[0],i=n[1];return oa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(!1),n=t[0];return t=t[1],[fa(da.bind(null,t,e),[t,e]),n]}},ya={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Jo,useRef:na,useState:function(){return Jo(Ko)},useDebugValue:la,useResponder:zo,useDeferredValue:function(e,t){var n=Jo(Ko),r=n[0],i=n[1];return aa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Jo(Ko),n=t[0];return t=t[1],[ha(da.bind(null,t,e),[t,e]),n]}},_a={readContext:ro,useCallback:ha,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Qo,useRef:na,useState:function(){return Qo(Ko)},useDebugValue:la,useResponder:zo,useDeferredValue:function(e,t){var n=Qo(Ko),r=n[0],i=n[1];return aa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Qo(Ko),n=t[0];return t=t[1],[ha(da.bind(null,t,e),[t,e]),n]}},xa=null,ba=null,wa=!1;function Sa(e,t){var n=Eu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ea(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ta(e){if(wa){var t=ba;if(t){var n=t;if(!Ea(e,t)){if(!(t=bn(n.nextSibling))||!Ea(e,t))return e.effectTag=-1025&e.effectTag|2,wa=!1,void(xa=e);Sa(xa,n)}xa=e,ba=bn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,wa=!1,xa=e}}function Aa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xa=e}function Ma(e){if(e!==xa)return!1;if(!wa)return Aa(e),wa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yn(t,e.memoizedProps))for(t=ba;t;)Sa(e,t),t=bn(t.nextSibling);if(Aa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ba=bn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ba=null}}else ba=xa?bn(e.stateNode.nextSibling):null;return!0}function Ca(){ba=xa=null,wa=!1}var ka=Z.ReactCurrentOwner,Ra=!1;function Pa(e,t,n,r){t.child=null===e?Ao(t,null,n,r):To(t,e.child,n,r)}function La(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=Xo(e,t,n,r,o,i),null===e||Ra?(t.effectTag|=1,Pa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xa(e,t,i))}function Oa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Tu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ia(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Br)(i,r)&&e.ref===t.ref)?Xa(e,t,o):(t.effectTag|=1,(e=Au(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ia(e,t,n,r,i,o){return null!==e&&Br(e.memoizedProps,r)&&e.ref===t.ref&&(Ra=!1,i<o)?(t.expirationTime=e.expirationTime,Xa(e,t,o)):Da(e,t,n,r,o)}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Da(e,t,n,r,i){var o=mi(n)?pi:fi.current;return o=di(t,o),no(t,i),n=Xo(e,t,n,r,o,i),null===e||Ra?(t.effectTag|=1,Pa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xa(e,t,i))}function Fa(e,t,n,r,i){if(mi(n)){var o=!0;_i(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),yo(t,n,r),xo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=di(t,c=mi(n)?pi:fi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),io=!1;var h=t.memoizedState;a.state=h,lo(t,r,a,i),u=t.memoizedState,s!==r||h!==u||hi.current||io?("function"===typeof l&&(mo(t,n,l,r),u=t.memoizedState),(s=io||go(t,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Xi(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(t,c=mi(n)?pi:fi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),io=!1,u=t.memoizedState,a.state=u,lo(t,r,a,i),h=t.memoizedState,s!==r||u!==h||hi.current||io?("function"===typeof l&&(mo(t,n,l,r),h=t.memoizedState),(l=io||go(t,n,s,r,u,h,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return za(e,t,n,r,o,i)}function za(e,t,n,r,i,o){Na(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),Xa(e,t,o);r=t.stateNode,ka.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=To(t,e.child,null,o),t.child=To(t,null,s,o)):Pa(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ba(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Lo(e,t.containerInfo)}var ja,Va,Ua,Ga={dehydrated:null,retryTime:0};function Ha(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Do.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Do,1&a),null===e){if(void 0!==o.fallback&&Ta(t),s){if(s=o.fallback,(o=Cu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Cu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ga,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Ao(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Au(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Au(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ga,t.child=n,i}return n=To(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Cu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Cu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ga,t.child=o,n}return t.memoizedState=null,t.child=To(t,e,o.children,n)}function Wa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),to(e.return,t)}function qa(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Pa(e,t,r.children,n),0!==(2&(r=Do.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n);else if(19===e.tag)Wa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Do,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qa(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qa(t,!0,n,null,o,t.lastEffect);break;case"together":qa(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xa(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&au(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Au(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Au(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Za(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&vi(),null;case 3:return Oo(),ui(hi),ui(fi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ma(t)||(t.effectTag|=4),null;case 5:No(t),n=Po(Ro.current);var o=t.type;if(null!==e&&null!=t.stateNode)Va(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Po(Co.current),Ma(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[En]=t,r[Tn]=s,o){case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(e=0;e<Ze.length;e++)Yt(Ze[e],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"form":Yt("reset",r),Yt("submit",r);break;case"details":Yt("toggle",r);break;case"input":Se(r,s),Yt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yt("invalid",r),un(n,"onChange");break;case"textarea":Pe(r,s),Yt("invalid",r),un(n,"onChange")}for(var u in on(o,s),e=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):E.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":xe(r),Ae(r,s,!0);break;case"textarea":xe(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=De(o)),e===sn?"script"===o?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),"select"===o&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[En]=t,e[Tn]=r,ja(e,t),t.stateNode=e,u=an(o,r),o){case"iframe":case"object":case"embed":Yt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ze.length;c++)Yt(Ze[c],e);c=r;break;case"source":Yt("error",e),c=r;break;case"img":case"image":case"link":Yt("error",e),Yt("load",e),c=r;break;case"form":Yt("reset",e),Yt("submit",e),c=r;break;case"details":Yt("toggle",e),c=r;break;case"input":Se(e,r),c=we(e,r),Yt("invalid",e),un(n,"onChange");break;case"option":c=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Yt("invalid",e),un(n,"onChange");break;case"textarea":Pe(e,r),c=Re(e,r),Yt("invalid",e),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?nn(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&Be(e,f):"children"===s?"string"===typeof f?("textarea"!==o||""!==f)&&je(e,f):"number"===typeof f&&je(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(E.hasOwnProperty(s)?null!=f&&un(n,s):null!=f&&K(e,s,f,u))}switch(o){case"input":xe(e),Ae(e,r,!1);break;case"textarea":xe(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?ke(e,!!r.multiple,n,!1):null!=r.defaultValue&&ke(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=cn)}gn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ua(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Po(Ro.current),Po(Co.current),Ma(t)?(n=t.stateNode,r=t.memoizedProps,n[En]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[En]=t,t.stateNode=n)}return null;case 13:return ui(Do),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ma(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?Ms===xs&&(Ms=bs):(Ms!==xs&&Ms!==bs||(Ms=ws),0!==Ls&&null!==Es&&(Ou(Es,As),Iu(Es,Ls)))),(n||r)&&(t.effectTag|=4),null);case 4:return Oo(),null;case 10:return eo(t),null;case 17:return mi(t.type)&&vi(),null;case 19:if(ui(Do),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(s=r.rendering)){if(o)$a(r,!1);else if(Ms!==xs||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Fo(s))){for(t.effectTag|=64,$a(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ci(Do,1&Do.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Fo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),$a(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,$a(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Bi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Do.current,ci(Do,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Ka(e){switch(e.tag){case 1:mi(e.type)&&vi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Oo(),ui(hi),ui(fi),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return No(e),null;case 13:return ui(Do),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ui(Do),null;case 4:return Oo(),null;case 10:return eo(e),null;default:return null}}function Ja(e,t){return{value:e,source:t,stack:ge(t)}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Va=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(Po(Co.current),e=null,n){case"input":a=we(c,a),r=we(c,r),e=[];break;case"option":a=Ce(c,a),r=Ce(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Re(c,a),r=Re(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(E.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(E.hasOwnProperty(s)?(null!=l&&un(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ua=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Qa="function"===typeof WeakSet?WeakSet:Set;function es(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ge(n)),null!==n&&ve(n.type),t=t.value,null!==e&&1===e.tag&&ve(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ts(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){yu(e,n)}else t.current=null}function ns(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function os(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Dt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,n){switch("function"===typeof wu&&wu(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ui(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){yu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:ts(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){yu(e,n)}}(t,n);break;case 5:ts(t);break;case 4:ls(e,t,n)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function cs(e){e:{for(var t=e.return;null!==t;){if(us(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(je(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ls(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,f=c;;)if(as(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function fs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Tn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Be(n,u):"children"===s?je(n,u):K(n,s,u,t)}switch(e){case"input":Te(n,r);break;case"textarea":Le(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?ke(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?ke(n,!!r.multiple,r.defaultValue,!0):ke(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Dt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Is=Bi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void hs(t);case 19:return void hs(t);case 17:return}throw Error(a(163))}function hs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ds||(Ds=!0,Fs=r),es(e,t)},n}function ms(e,t,n){(n=so(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return es(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this),es(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var vs,gs=Math.ceil,ys=Z.ReactCurrentDispatcher,_s=Z.ReactCurrentOwner,xs=0,bs=3,ws=4,Ss=0,Es=null,Ts=null,As=0,Ms=xs,Cs=null,ks=1073741823,Rs=1073741823,Ps=null,Ls=0,Os=!1,Is=0,Ns=null,Ds=!1,Fs=null,zs=null,Bs=!1,js=null,Vs=90,Us=null,Gs=0,Hs=null,Ws=0;function qs(){return 0!==(48&Ss)?1073741821-(Bi()/10|0):0!==Ws?Ws:Ws=1073741821-(Bi()/10|0)}function Ys(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=ji();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&Ss))return As;if(null!==n)e=Yi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Yi(e,150,100);break;case 97:case 96:e=Yi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Es&&e===As&&--e,e}function Xs(e,t){if(50<Gs)throw Gs=0,Hs=null,Error(a(185));if(null!==(e=$s(e,t))){var n=ji();1073741823===t?0!==(8&Ss)&&0===(48&Ss)?Qs(e):(Ks(e),0===Ss&&Wi()):Ks(e),0===(4&Ss)||98!==n&&99!==n||(null===Us?Us=new Map([[e,t]]):(void 0===(n=Us.get(e))||n>t)&&Us.set(e,t))}}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Es===i&&(au(t),Ms===ws&&Ou(i,As)),Iu(i,t)),i}function Zs(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Lu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Ks(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Hi(Qs.bind(null,e));else{var t=Zs(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=qs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Li&&Si(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Hi(Qs.bind(null,e)):Gi(r,Js.bind(null,e),{timeout:10*(1073741821-t)-Bi()}),e.callbackNode=t}}}function Js(e,t){if(Ws=0,t)return Nu(e,t=qs()),Ks(e),null;var n=Zs(e);if(0!==n){if(t=e.callbackNode,0!==(48&Ss))throw Error(a(327));if(mu(),e===Es&&n===As||nu(e,n),null!==Ts){var r=Ss;Ss|=16;for(var i=iu();;)try{uu();break}catch(u){ru(e,u)}if(Qi(),Ss=r,ys.current=i,1===Ms)throw t=Cs,nu(e,n),Ou(e,n),Ks(e),t;if(null===Ts)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ms,Es=null,r){case xs:case 1:throw Error(a(345));case 2:Nu(e,2<n?2:n);break;case bs:if(Ou(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fu(i)),1073741823===ks&&10<(i=Is+500-Bi())){if(Os){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,nu(e,n);break}}if(0!==(o=Zs(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=_n(hu.bind(null,e),i);break}hu(e);break;case ws:if(Ou(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fu(i)),Os&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,nu(e,n);break}if(0!==(i=Zs(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Rs?r=10*(1073741821-Rs)-Bi():1073741823===ks?r=0:(r=10*(1073741821-ks)-5e3,0>(r=(i=Bi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=_n(hu.bind(null,e),r);break}hu(e);break;case 5:if(1073741823!==ks&&null!==Ps){o=ks;var s=Ps;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Bi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Ou(e,n),e.timeoutHandle=_n(hu.bind(null,e),r);break}}hu(e);break;default:throw Error(a(329))}if(Ks(e),e.callbackNode===t)return Js.bind(null,e)}}return null}function Qs(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Ss))throw Error(a(327));if(mu(),e===Es&&t===As||nu(e,t),null!==Ts){var n=Ss;Ss|=16;for(var r=iu();;)try{su();break}catch(i){ru(e,i)}if(Qi(),Ss=n,ys.current=r,1===Ms)throw n=Cs,nu(e,t),Ou(e,t),Ks(e),n;if(null!==Ts)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Es=null,hu(e),Ks(e)}return null}function eu(e,t){var n=Ss;Ss|=1;try{return e(t)}finally{0===(Ss=n)&&Wi()}}function tu(e,t){var n=Ss;Ss&=-2,Ss|=8;try{return e(t)}finally{0===(Ss=n)&&Wi()}}function nu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xn(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Oo(),ui(hi),ui(fi);break;case 5:No(r);break;case 4:Oo();break;case 13:case 19:ui(Do);break;case 10:eo(r)}n=n.return}Es=e,Ts=Au(e.current,null),As=t,Ms=xs,Cs=null,Rs=ks=1073741823,Ps=null,Ls=0,Os=!1}function ru(e,t){for(;;){try{if(Qi(),Bo.current=va,Wo)for(var n=Uo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Vo=0,Ho=Go=Uo=null,Wo=!1,null===Ts||null===Ts.return)return Ms=1,Cs=t,Ts=null;e:{var i=e,o=Ts.return,a=Ts,s=t;if(t=As,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&Do.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var d=f.memoizedProps;h=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(h){var m=f.updateQueue;if(null===m){var v=new Set;v.add(u),f.updateQueue=v}else m.add(u);if(0===(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=so(1073741823,null);g.tag=2,uo(a,g)}a.expirationTime=1073741823;break e}s=void 0,a=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new ps,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var _=_u.bind(null,i,u,a);u.then(_,_)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);s=Error((ve(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ge(a))}5!==Ms&&(Ms=2),s=Ja(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=t,co(f,ds(f,u,t));break e;case 1:u=s;var x=f.type,b=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===zs||!zs.has(b)))){f.effectTag|=4096,f.expirationTime=t,co(f,ms(f,u,t));break e}}f=f.return}while(null!==f)}Ts=lu(Ts)}catch(w){t=w;continue}break}}function iu(){var e=ys.current;return ys.current=va,null===e?va:e}function ou(e,t){e<ks&&2<e&&(ks=e),null!==t&&e<Rs&&2<e&&(Rs=e,Ps=t)}function au(e){e>Ls&&(Ls=e)}function su(){for(;null!==Ts;)Ts=cu(Ts)}function uu(){for(;null!==Ts&&!Oi();)Ts=cu(Ts)}function cu(e){var t=vs(e.alternate,e,As);return e.memoizedProps=e.pendingProps,null===t&&(t=lu(e)),_s.current=null,t}function lu(e){Ts=e;do{var t=Ts.alternate;if(e=Ts.return,0===(2048&Ts.effectTag)){if(t=Za(t,Ts,As),1===As||1!==Ts.childExpirationTime){for(var n=0,r=Ts.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ts.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ts.firstEffect),null!==Ts.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ts.firstEffect),e.lastEffect=Ts.lastEffect),1<Ts.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ts:e.firstEffect=Ts,e.lastEffect=Ts))}else{if(null!==(t=Ka(Ts)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ts.sibling))return t;Ts=e}while(null!==Ts);return Ms===xs&&(Ms=5),null}function fu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function hu(e){var t=ji();return Ui(99,pu.bind(null,e,t)),null}function pu(e,t){do{mu()}while(null!==js);if(0!==(48&Ss))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=fu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Es&&(Ts=Es=null,As=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ss;Ss|=32,_s.current=null,mn=qt;var s=pn();if(dn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(A){u=null;break e}var h=0,p=-1,d=-1,m=0,v=0,g=s,y=null;t:for(;;){for(var _;g!==u||0!==l&&3!==g.nodeType||(p=h+l),g!==f||0!==c&&3!==g.nodeType||(d=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(_=g.firstChild);)y=g,g=_;for(;;){if(g===s)break t;if(y===u&&++m===l&&(p=h),y===f&&++v===c&&(d=h),null!==(_=g.nextSibling))break;y=(g=y).parentNode}g=_}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:u},qt=!1,Ns=i;do{try{du()}catch(A){if(null===Ns)throw Error(a(330));yu(Ns,A),Ns=Ns.nextEffect}}while(null!==Ns);Ns=i;do{try{for(s=e,u=t;null!==Ns;){var x=Ns.effectTag;if(16&x&&je(Ns.stateNode,""),128&x){var b=Ns.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&x){case 2:cs(Ns),Ns.effectTag&=-3;break;case 6:cs(Ns),Ns.effectTag&=-3,fs(Ns.alternate,Ns);break;case 1024:Ns.effectTag&=-1025;break;case 1028:Ns.effectTag&=-1025,fs(Ns.alternate,Ns);break;case 4:fs(Ns.alternate,Ns);break;case 8:ls(s,l=Ns,u),ss(l)}Ns=Ns.nextEffect}}catch(A){if(null===Ns)throw Error(a(330));yu(Ns,A),Ns=Ns.nextEffect}}while(null!==Ns);if(w=vn,b=pn(),x=w.focusedElem,u=w.selectionRange,b!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==u&&dn(x)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in x?(x.selectionStart=b,x.selectionEnd=Math.min(w,x.value.length)):(w=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=x.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!w.extend&&s>u&&(l=u,u=s,s=l),l=hn(x,s),f=hn(x,u),l&&f&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==f.node||w.focusOffset!==f.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),s>u?(w.addRange(b),w.extend(f.node,f.offset)):(b.setEnd(f.node,f.offset),w.addRange(b))))),b=[];for(w=x;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof x.focus&&x.focus(),x=0;x<b.length;x++)(w=b[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}qt=!!mn,vn=mn=null,e.current=n,Ns=i;do{try{for(x=e;null!==Ns;){var S=Ns.effectTag;if(36&S&&os(x,Ns.alternate,Ns),128&S){b=void 0;var E=Ns.ref;if(null!==E){var T=Ns.stateNode;switch(Ns.tag){case 5:b=T;break;default:b=T}"function"===typeof E?E(b):E.current=b}}Ns=Ns.nextEffect}}catch(A){if(null===Ns)throw Error(a(330));yu(Ns,A),Ns=Ns.nextEffect}}while(null!==Ns);Ns=null,Ii(),Ss=o}else e.current=n;if(Bs)Bs=!1,js=e,Vs=t;else for(Ns=i;null!==Ns;)t=Ns.nextEffect,Ns.nextEffect=null,Ns=t;if(0===(t=e.firstPendingTime)&&(zs=null),1073741823===t?e===Hs?Gs++:(Gs=0,Hs=e):Gs=0,"function"===typeof bu&&bu(n.stateNode,r),Ks(e),Ds)throw Ds=!1,e=Fs,Fs=null,e;return 0!==(8&Ss)||Wi(),null}function du(){for(;null!==Ns;){var e=Ns.effectTag;0!==(256&e)&&ns(Ns.alternate,Ns),0===(512&e)||Bs||(Bs=!0,Gi(97,(function(){return mu(),null}))),Ns=Ns.nextEffect}}function mu(){if(90!==Vs){var e=97<Vs?97:Vs;return Vs=90,Ui(e,vu)}}function vu(){if(null===js)return!1;var e=js;if(js=null,0!==(48&Ss))throw Error(a(331));var t=Ss;for(Ss|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===e)throw Error(a(330));yu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ss=t,Wi(),!0}function gu(e,t,n){uo(e,t=ds(e,t=Ja(n,t),1073741823)),null!==(e=$s(e,1073741823))&&Ks(e)}function yu(e,t){if(3===e.tag)gu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){gu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){uo(n,e=ms(n,e=Ja(t,e),1073741823)),null!==(n=$s(n,1073741823))&&Ks(n);break}}n=n.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Es===e&&As===n?Ms===ws||Ms===bs&&1073741823===ks&&Bi()-Is<500?nu(e,As):Os=!0:Lu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Ks(e)))}function xu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Ys(t=qs(),e,null)),null!==(e=$s(e,t))&&Ks(e)}vs=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||hi.current)Ra=!0;else{if(r<n){switch(Ra=!1,t.tag){case 3:Ba(t),Ca();break;case 5:if(Io(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mi(t.type)&&_i(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ci($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ha(e,t,n):(ci(Do,1&Do.current),null!==(t=Xa(e,t,n))?t.sibling:null);ci(Do,1&Do.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Ya(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(Do,Do.current),!r)return null}return Xa(e,t,n)}Ra=!1}}else Ra=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=di(t,fi.current),no(t,n),i=Xo(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mo(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternalFiber=t,xo(t,r,e,n),t=za(null,t,r,!0,o,n)}else t.tag=0,Pa(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Tu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===fe)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Da(null,t,i,e,n);break e;case 1:t=Fa(null,t,i,e,n);break e;case 11:t=La(null,t,i,e,n);break e;case 14:t=Oa(null,t,i,Xi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ba(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Ca(),t=Xa(e,t,n);else{if((i=t.stateNode.hydrate)&&(ba=bn(t.stateNode.containerInfo.firstChild),xa=t,i=wa=!0),i)for(n=Ao(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Pa(e,t,r,n),Ca();t=t.child}return t;case 5:return Io(t),null===e&&Ta(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,yn(r,i)?s=null:null!==o&&yn(r,o)&&(t.effectTag|=16),Na(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Pa(e,t,s,n),t=t.child),t;case 6:return null===e&&Ta(t),null;case 13:return Ha(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=To(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,La(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(ci($i,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Fr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){t=Xa(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),to(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,Pa(e,t,r,n),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),Oa(e,t,i,o=Xi(i.type,o),r,n);case 15:return Ia(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mi(r)?(e=!0,_i(t)):e=!1,no(t,n),yo(t,r,i),xo(t,r,i,n),za(null,t,r,!0,e,n);case 19:return Ya(e,t,n)}throw Error(a(156,t.tag))};var bu=null,wu=null;function Su(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Eu(e,t,n,r){return new Su(e,t,n,r)}function Tu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Au(e,t){var n=e.alternate;return null===n?((n=Eu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Tu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ne:return Cu(n.children,i,o,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=Eu(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ce:return(e=Eu(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=o,e;case le:return(e=Eu(19,n,t,i)).elementType=le,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case ue:s=11;break e;case fe:s=14;break e;case he:s=16,r=null;break e;case pe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Eu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Cu(e,t,n,r){return(e=Eu(7,e,r,t)).expirationTime=n,e}function ku(e,t,n){return(e=Eu(6,e,null,t)).expirationTime=n,e}function Ru(e,t,n){return(t=Eu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Lu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ou(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Iu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Nu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Du(e,t,n,r){var i=t.current,o=qs(),s=ho.suspense;o=Ys(o,i,s);e:if(n){t:{if(Qe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=yi(n,c,u);break e}}n=u}else n=li;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),Xs(i,o),o}function Fu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Bu(e,t){zu(e,t),(e=e.alternate)&&zu(e,t)}function ju(e,t,n){var r=new Pu(e,t,n=null!=n&&!0===n.hydrate),i=Eu(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,oo(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Je(t);At.forEach((function(e){dt(e,t,n)})),Mt.forEach((function(e){dt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Vu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Uu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Fu(a);s.call(e)}}Du(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ju(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Fu(a);u.call(e)}}tu((function(){Du(t,a,e,i)}))}return Fu(a)}function Gu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vu(t))throw Error(a(200));return Gu(e,t,null,n)}ju.prototype.render=function(e){Du(e,this._internalRoot,null,null)},ju.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Du(null,e,null,(function(){t[An]=null}))},mt=function(e){if(13===e.tag){var t=Yi(qs(),150,100);Xs(e,t),Bu(e,t)}},vt=function(e){13===e.tag&&(Xs(e,3),Bu(e,3))},gt=function(e){if(13===e.tag){var t=qs();Xs(e,t=Ys(t,e,null)),Bu(e,t)}},C=function(e,t,n){switch(t){case"input":if(Te(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rn(r);if(!i)throw Error(a(90));be(r),Te(r,i)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&ke(e,!!n.multiple,t,!1)}},I=eu,N=function(e,t,n,r,i){var o=Ss;Ss|=4;try{return Ui(98,e.bind(null,t,n,r,i))}finally{0===(Ss=o)&&Wi()}},D=function(){0===(49&Ss)&&(function(){if(null!==Us){var e=Us;Us=null,e.forEach((function(e,t){Nu(t,e),Ks(t)})),Wi()}}(),mu())},F=function(e,t){var n=Ss;Ss|=2;try{return e(t)}finally{0===(Ss=n)&&Wi()}};var Wu={Events:[Cn,kn,Rn,A,S,Fn,function(e){it(e,Dn)},L,O,Kt,st,mu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);bu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Mn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wu,t.createPortal=Hu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Ss))throw Error(a(187));var n=Ss;Ss|=1;try{return Ui(99,e.bind(null,t))}finally{Ss=n,Wi()}},t.hydrate=function(e,t,n){if(!Vu(t))throw Error(a(200));return Uu(null,e,t,!0,n)},t.render=function(e,t,n){if(!Vu(t))throw Error(a(200));return Uu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Vu(e))throw Error(a(40));return!!e._reactRootContainer&&(tu((function(){Uu(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=eu,t.unstable_createPortal=function(e,t){return Hu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Vu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Uu(e,t,n,!1,r)},t.version="16.14.0"},function(e,t,n){"use strict";e.exports=n(547)},function(e,t,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},f=Date.now();t.unstable_now=function(){return Date.now()-f},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,p=window.Date,d=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var y=!1,_=null,x=-1,b=5,w=0;a=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,E=S.port2;S.port1.onmessage=function(){if(null!==_){var e=t.unstable_now();w=e+b;try{_(!0,e)?E.postMessage(null):(y=!1,_=null)}catch(n){throw E.postMessage(null),n}}else y=!1},r=function(e){_=e,y||(y=!0,E.postMessage(null))},i=function(e,n){x=d((function(){e(t.unstable_now())}),n)},o=function(){m(x),x=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function A(e){return void 0===(e=e[0])?null:e}function M(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>C(a,n))void 0!==u&&0>C(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>C(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],R=[],P=1,L=null,O=3,I=!1,N=!1,D=!1;function F(e){for(var t=A(R);null!==t;){if(null===t.callback)M(R);else{if(!(t.startTime<=e))break;M(R),t.sortIndex=t.expirationTime,T(k,t)}t=A(R)}}function z(e){if(D=!1,F(e),!N)if(null!==A(k))N=!0,r(B);else{var t=A(R);null!==t&&i(z,t.startTime-e)}}function B(e,n){N=!1,D&&(D=!1,o()),I=!0;var r=O;try{for(F(n),L=A(k);null!==L&&(!(L.expirationTime>n)||e&&!a());){var s=L.callback;if(null!==s){L.callback=null,O=L.priorityLevel;var u=s(L.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?L.callback=u:L===A(k)&&M(k),F(n)}else M(k);L=A(k)}if(null!==L)var c=!0;else{var l=A(R);null!==l&&i(z,l.startTime-n),c=!1}return c}finally{L=null,O=r,I=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||I||(N=!0,r(B))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return A(k)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:j(e)}else a=j(e),u=s;return e={id:P++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,T(R,e),null===A(k)&&e===A(R)&&(D?o():D=!0,i(z,u-s))):(e.sortIndex=a,T(k,e),N||I||(N=!0,r(B))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=A(k);return n!==L&&null!==L&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<L.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},function(e,t,n){},function(e,t,n){"use strict";var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function f(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(g)}),this.text=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=v(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=f(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[f(e)]},d.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},d.prototype.set=function(e,t){this.map[f(e)]=h(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];E.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var A=r.DOMException;try{new A}catch(C){(A=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function M(e,t){return new Promise((function(n,i){var o=new b(e,t);if(o.signal&&o.signal.aborted)return i(new A("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:S(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;setTimeout((function(){n(new E(t,e))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){i(new A("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":u&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!==typeof t.headers||t.headers instanceof d?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,h(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}M.polyfill=!0,r.fetch||(r.fetch=M,r.Headers=d,r.Request=b,r.Response=E)},function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},function(e,t,n){(function(e){!function(e){"use strict";var t=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(t){}return null}(),n=t&&"a=1"===new t({a:1}).toString(),r=t&&"+"===new t("s=%2B").get("s"),i=!t||function(){var e=new t;return e.append("s"," &"),"s=+%26"===e.toString()}(),o=c.prototype,a=!(!e.Symbol||!e.Symbol.iterator);if(!(t&&n&&r&&i)){o.append=function(e,t){d(this.__URLSearchParams__,e,t)},o.delete=function(e){delete this.__URLSearchParams__[e]},o.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},o.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},o.has=function(e){return v(this.__URLSearchParams__,e)},o.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},o.toString=function(){var e,t,n,r,i=this.__URLSearchParams__,o=[];for(t in i)for(n=l(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+l(r[e]));return o.join("&")};var s=!!r&&t&&!n&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:s?new Proxy(t,{construct:function(e,t){return new e(new c(t[0]).toString())}}):c});var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var n=p(this.toString());Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},u.sort=u.sort||function(){var e,t,n,r=p(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var o=i[t],a=r[o];for(n=0;n<a.length;n++)this.append(o,a[n])}},u.keys=u.keys||function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},u.values=u.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},u.entries=u.entries||function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},a&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function c(e){((e=e||"")instanceof URLSearchParams||e instanceof c)&&(e=e.toString()),this.__URLSearchParams__=p(e)}function l(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function f(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function h(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(n[e.Symbol.iterator]=function(){return n}),n}function p(e){var t={};if("object"===typeof e)if(m(e))for(var n=0;n<e.length;n++){var r=e[n];if(!m(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");d(t,r[0],r[1])}else for(var i in e)e.hasOwnProperty(i)&&d(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var o=e.split("&"),a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");-1<u?d(t,f(s.slice(0,u)),f(s.slice(u+1))):s&&d(t,f(s),"")}}return t}function d(e,t,n){var r="string"===typeof n?n:null!==n&&void 0!==n&&"function"===typeof n.toString?n.toString():JSON.stringify(n);v(e,t)?e[t].push(r):e[t]=[r]}function m(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function v(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}("undefined"!==typeof e?e:"undefined"!==typeof window?window:this)}).call(this,n(29))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(6);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(169),i=n(558);function o(t,n,a){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(274);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(563);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(565)},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case v:case c:return e;default:return t}}case o:return t}}}function S(e){return w(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return S(e)||w(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===s||e===d||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===_||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case v:case c:return e;default:return t}}case o:return t}}}function S(e){return w(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return S(e)||w(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===s||e===d||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===_||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){(function(e,r){var i;(function(){function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function f(e,t){return!(null==e||!e.length)&&b(e,t,0)>-1}function h(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function m(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function v(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.match($e)||[]}function _(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function x(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function b(e,t,n){return t===t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):x(e,S,n)}function w(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function S(e){return e!==e}function E(e,t){var n=null==e?0:e.length;return n?C(e,t)/n:J}function T(e){return function(t){return null==t?q:t[e]}}function A(e){return function(t){return null==e?q:e[t]}}function M(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function C(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==q&&(n=n===q?o:n+o)}return n}function k(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function R(e){return function(t){return e(t)}}function P(e,t){return p(t,(function(t){return e[t]}))}function L(e,t){return e.has(t)}function O(e,t){for(var n=-1,r=e.length;++n<r&&b(t,e[n],0)>-1;);return n}function I(e,t){for(var n=e.length;n--&&b(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function D(e){return"\\"+qt[e]}function F(e){return jt.test(e)}function z(e){return Vt.test(e)}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function j(e,t){return function(n){return e(t(n))}}function V(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==$||(e[n]=$,o[i++]=n)}return o}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function G(e){return F(e)?function(e){for(var t=zt.lastIndex=0;zt.test(e);)++t;return t}(e):ln(e)}function H(e){return F(e)?function(e){return e.match(zt)||[]}(e):function(e){return e.split("")}(e)}function W(e){return e.match(Bt)||[]}var q,Y="Expected a function",X="__lodash_hash_undefined__",$="__lodash_placeholder__",Z=128,K=9007199254740991,J=NaN,Q=4294967295,ee=[["ary",Z],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],te="[object Arguments]",ne="[object Array]",re="[object Boolean]",ie="[object Date]",oe="[object Error]",ae="[object Function]",se="[object GeneratorFunction]",ue="[object Map]",ce="[object Number]",le="[object Object]",fe="[object Promise]",he="[object RegExp]",pe="[object Set]",de="[object String]",me="[object Symbol]",ve="[object WeakMap]",ge="[object ArrayBuffer]",ye="[object DataView]",_e="[object Float32Array]",xe="[object Float64Array]",be="[object Int8Array]",we="[object Int16Array]",Se="[object Int32Array]",Ee="[object Uint8Array]",Te="[object Uint8ClampedArray]",Ae="[object Uint16Array]",Me="[object Uint32Array]",Ce=/\b__p \+= '';/g,ke=/\b(__p \+=) '' \+/g,Re=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pe=/&(?:amp|lt|gt|quot|#39);/g,Le=/[&<>"']/g,Oe=RegExp(Pe.source),Ie=RegExp(Le.source),Ne=/<%-([\s\S]+?)%>/g,De=/<%([\s\S]+?)%>/g,Fe=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Be=/^\w*$/,je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,Ue=RegExp(Ve.source),Ge=/^\s+|\s+$/g,He=/^\s+/,We=/\s+$/,qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,$e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ze=/\\(\\)?/g,Ke=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Je=/\w*$/,Qe=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,tt=/^\[object .+?Constructor\]$/,nt=/^0o[0-7]+$/i,rt=/^(?:0|[1-9]\d*)$/,it=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,at=/['\n\r\u2028\u2029\\]/g,st="\\ud800-\\udfff",ut="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ct="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",ft="A-Z\\xc0-\\xd6\\xd8-\\xde",ht="\\ufe0e\\ufe0f",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="['\u2019]",mt="["+st+"]",vt="["+pt+"]",gt="["+ut+"]",yt="\\d+",_t="["+ct+"]",xt="["+lt+"]",bt="[^"+st+pt+yt+ct+lt+ft+"]",wt="\\ud83c[\\udffb-\\udfff]",St="[^"+st+"]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",Tt="[\\ud800-\\udbff][\\udc00-\\udfff]",At="["+ft+"]",Mt="(?:"+xt+"|"+bt+")",Ct="(?:"+At+"|"+bt+")",kt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Rt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Pt="(?:"+gt+"|"+wt+")"+"?",Lt="["+ht+"]?",Ot=Lt+Pt+("(?:\\u200d(?:"+[St,Et,Tt].join("|")+")"+Lt+Pt+")*"),It="(?:"+[_t,Et,Tt].join("|")+")"+Ot,Nt="(?:"+[St+gt+"?",gt,Et,Tt,mt].join("|")+")",Dt=RegExp(dt,"g"),Ft=RegExp(gt,"g"),zt=RegExp(wt+"(?="+wt+")|"+Nt+Ot,"g"),Bt=RegExp([At+"?"+xt+"+"+kt+"(?="+[vt,At,"$"].join("|")+")",Ct+"+"+Rt+"(?="+[vt,At+Mt,"$"].join("|")+")",At+"?"+Mt+"+"+kt,At+"+"+Rt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt,It].join("|"),"g"),jt=RegExp("[\\u200d"+st+ut+ht+"]"),Vt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ut=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gt=-1,Ht={};Ht[_e]=Ht[xe]=Ht[be]=Ht[we]=Ht[Se]=Ht[Ee]=Ht[Te]=Ht[Ae]=Ht[Me]=!0,Ht[te]=Ht[ne]=Ht[ge]=Ht[re]=Ht[ye]=Ht[ie]=Ht[oe]=Ht[ae]=Ht[ue]=Ht[ce]=Ht[le]=Ht[he]=Ht[pe]=Ht[de]=Ht[ve]=!1;var Wt={};Wt[te]=Wt[ne]=Wt[ge]=Wt[ye]=Wt[re]=Wt[ie]=Wt[_e]=Wt[xe]=Wt[be]=Wt[we]=Wt[Se]=Wt[ue]=Wt[ce]=Wt[le]=Wt[he]=Wt[pe]=Wt[de]=Wt[me]=Wt[Ee]=Wt[Te]=Wt[Ae]=Wt[Me]=!0,Wt[oe]=Wt[ae]=Wt[ve]=!1;var qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=parseFloat,Xt=parseInt,$t="object"==typeof e&&e&&e.Object===Object&&e,Zt="object"==typeof self&&self&&self.Object===Object&&self,Kt=$t||Zt||Function("return this")(),Jt=t&&!t.nodeType&&t,Qt=Jt&&"object"==typeof r&&r&&!r.nodeType&&r,en=Qt&&Qt.exports===Jt,tn=en&&$t.process,nn=function(){try{var e=Qt&&Qt.require&&Qt.require("util").types;return e||tn&&tn.binding&&tn.binding("util")}catch(e){}}(),rn=nn&&nn.isArrayBuffer,on=nn&&nn.isDate,an=nn&&nn.isMap,sn=nn&&nn.isRegExp,un=nn&&nn.isSet,cn=nn&&nn.isTypedArray,ln=T("length"),fn=A({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),hn=A({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),pn=A({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dn=function e(t){function n(e){if(Ii(e)&&!Es(e)&&!(e instanceof A)){if(e instanceof i)return e;if(Eo.call(e,"__wrapped__"))return ai(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=q}function A(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function $e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function st(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ct(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ut;++t<n;)this.add(e[t])}function lt(e){this.size=(this.__data__=new st(e)).size}function ft(e,t){var n=Es(e),r=!n&&Ss(e),i=!n&&!r&&As(e),o=!n&&!r&&!i&&Ps(e),a=n||r||i||o,s=a?k(e.length,go):[],u=s.length;for(var c in e)!t&&!Eo.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gr(c,u))||s.push(c);return s}function ht(e){var t=e.length;return t?e[An(0,t-1)]:q}function pt(e,t){return ni(rr(e),wt(t,0,e.length))}function dt(e){return ni(rr(e))}function mt(e,t,n){(n===q||Ai(e[t],n))&&(n!==q||t in e)||xt(e,t,n)}function vt(e,t,n){var r=e[t];Eo.call(e,t)&&Ai(r,n)&&(n!==q||t in e)||xt(e,t,n)}function gt(e,t){for(var n=e.length;n--;)if(Ai(e[n][0],t))return n;return-1}function yt(e,t,n,r){return wa(e,(function(e,i,o){t(r,e,n(e),o)})),r}function _t(e,t){return e&&ir(t,Xi(t),e)}function xt(e,t,n){"__proto__"==t&&Uo?Uo(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function bt(e,t){for(var n=-1,r=t.length,i=co(r),o=null==e;++n<r;)i[n]=o?q:qi(e,t[n]);return i}function wt(e,t,n){return e===e&&(n!==q&&(e=e<=n?e:n),t!==q&&(e=e>=t?e:t)),e}function St(e,t,n,r,i,o){var a,u=1&t,c=2&t,l=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),a!==q)return a;if(!Oi(e))return e;var f=Es(e);if(f){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Eo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return rr(e,a)}else{var h=Ia(e),p=h==ae||h==se;if(As(e))return Kn(e,u);if(h==le||h==te||p&&!i){if(a=c||p?{}:Vr(e),!u)return c?function(e,t){return ir(e,Oa(e),t)}(e,function(e,t){return e&&ir(t,$i(t),e)}(a,e)):function(e,t){return ir(e,La(e),t)}(e,_t(a,e))}else{if(!Wt[h])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case ge:return Jn(e);case re:case ie:return new r(+e);case ye:return function(e,t){return new e.constructor(t?Jn(e.buffer):e.buffer,e.byteOffset,e.byteLength)}(e,n);case _e:case xe:case be:case we:case Se:case Ee:case Te:case Ae:case Me:return Qn(e,n);case ue:return new r;case ce:case de:return new r(e);case he:return function(e){var t=new e.constructor(e.source,Je.exec(e));return t.lastIndex=e.lastIndex,t}(e);case pe:return new r;case me:return function(e){return _a?mo(_a.call(e)):{}}(e)}}(e,h,u)}}o||(o=new lt);var d=o.get(e);if(d)return d;o.set(e,a),Rs(e)?e.forEach((function(r){a.add(St(r,t,n,r,e,o))})):Cs(e)&&e.forEach((function(r,i){a.set(i,St(r,t,n,i,e,o))}));var m=f?q:(l?c?Or:Lr:c?$i:Xi)(e);return s(m||e,(function(r,i){m&&(r=e[i=r]),vt(a,i,St(r,t,n,i,e,o))})),a}function Et(e,t,n){var r=n.length;if(null==e)return!r;for(e=mo(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===q&&!(i in e)||!o(a))return!1}return!0}function Tt(e,t,n){if("function"!=typeof e)throw new yo(Y);return Fa((function(){e.apply(q,n)}),t)}function At(e,t,n,r){var i=-1,o=f,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=p(t,R(n))),r?(o=h,a=!1):t.length>=200&&(o=L,a=!1,t=new ct(t));e:for(;++i<s;){var l=e[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d===d){for(var m=c;m--;)if(t[m]===d)continue e;u.push(l)}else o(t,d,r)||u.push(l)}return u}function Mt(e,t){var n=!0;return wa(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function Ct(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===q?a===a&&!zi(a):n(a,s)))var s=a,u=o}return u}function kt(e,t){var n=[];return wa(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Rt(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Ur),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Rt(s,t-1,n,r,i):d(i,s):r||(i[i.length]=s)}return i}function Pt(e,t){return e&&Ea(e,t,Xi)}function Lt(e,t){return e&&Ta(e,t,Xi)}function Ot(e,t){return l(t,(function(t){return Ri(e[t])}))}function It(e,t){for(var n=0,r=(t=$n(t,e)).length;null!=e&&n<r;)e=e[ri(t[n++])];return n&&n==r?e:q}function Nt(e,t,n){var r=t(e);return Es(e)?r:d(r,n(e))}function zt(e){return null==e?e===q?"[object Undefined]":"[object Null]":Vo&&Vo in mo(e)?function(e){var t=Eo.call(e,Vo),n=e[Vo];try{e[Vo]=q;var r=!0}catch(e){}var i=Mo.call(e);return r&&(t?e[Vo]=n:delete e[Vo]),i}(e):function(e){return Mo.call(e)}(e)}function Bt(e,t){return e>t}function jt(e,t){return null!=e&&Eo.call(e,t)}function Vt(e,t){return null!=e&&t in mo(e)}function qt(e,t,n){for(var r=n?h:f,i=e[0].length,o=e.length,a=o,s=co(o),u=1/0,c=[];a--;){var l=e[a];a&&t&&(l=p(l,R(t))),u=ea(l.length,u),s[a]=!n&&(t||i>=120&&l.length>=120)?new ct(a&&l):q}l=e[0];var d=-1,m=s[0];e:for(;++d<i&&c.length<u;){var v=l[d],g=t?t(v):v;if(v=n||0!==v?v:0,!(m?L(m,g):r(c,g,n))){for(a=o;--a;){var y=s[a];if(!(y?L(y,g):r(e[a],g,n)))continue e}m&&m.push(g),c.push(v)}}return c}function $t(e,t,n){var r=null==(e=Kr(e,t=$n(t,e)))?e:e[ri(fi(t))];return null==r?q:o(r,e,n)}function Zt(e){return Ii(e)&&zt(e)==te}function Jt(e,t,n,r,i){return e===t||(null==e||null==t||!Ii(e)&&!Ii(t)?e!==e&&t!==t:function(e,t,n,r,i,o){var a=Es(e),s=Es(t),u=a?ne:Ia(e),c=s?ne:Ia(t),l=(u=u==te?le:u)==le,f=(c=c==te?le:c)==le,h=u==c;if(h&&As(e)){if(!As(t))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new lt),a||Ps(e)?Rr(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case ye:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ge:return!(e.byteLength!=t.byteLength||!o(new Oo(e),new Oo(t)));case re:case ie:case ce:return Ai(+e,+t);case oe:return e.name==t.name&&e.message==t.message;case he:case de:return e==t+"";case ue:var s=B;case pe:var u=1&r;if(s||(s=U),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=Rr(s(e),s(t),r,i,o,a);return a.delete(e),l;case me:if(_a)return _a.call(e)==_a.call(t)}return!1}(e,t,u,n,r,i,o);if(!(1&n)){var p=l&&Eo.call(e,"__wrapped__"),d=f&&Eo.call(t,"__wrapped__");if(p||d){var m=p?e.value():e,v=d?t.value():t;return o||(o=new lt),i(m,v,n,r,o)}}return!!h&&(o||(o=new lt),function(e,t,n,r,i,o){var a=1&n,s=Lr(e),u=s.length;if(u!=Lr(t).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in t:Eo.call(t,l)))return!1}var f=o.get(e),h=o.get(t);if(f&&h)return f==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var d=a;++c<u;){l=s[c];var m=e[l],v=t[l];if(r)var g=a?r(v,m,l,t,e,o):r(m,v,l,e,t,o);if(!(g===q?m===v||i(m,v,n,r,o):g)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var y=e.constructor,_=t.constructor;y!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o))}(e,t,n,r,Jt,i))}function Qt(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=mo(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(c===q&&!(u in e))return!1}else{var f=new lt;if(r)var h=r(c,l,u,e,t,f);if(!(h===q?Jt(l,c,3,r,f):h))return!1}}return!0}function tn(e){return!(!Oi(e)||function(e){return!!Ao&&Ao in e}(e))&&(Ri(e)?Ro:tt).test(ii(e))}function nn(e){return"function"==typeof e?e:null==e?no:"object"==typeof e?Es(e)?_n(e[0],e[1]):yn(e):ao(e)}function ln(e){if(!Yr(e))return Jo(e);var t=[];for(var n in mo(e))Eo.call(e,n)&&"constructor"!=n&&t.push(n);return t}function mn(e){if(!Oi(e))return function(e){var t=[];if(null!=e)for(var n in mo(e))t.push(n);return t}(e);var t=Yr(e),n=[];for(var r in e)("constructor"!=r||!t&&Eo.call(e,r))&&n.push(r);return n}function vn(e,t){return e<t}function gn(e,t){var n=-1,r=Mi(e)?co(e.length):[];return wa(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function yn(e){var t=zr(e);return 1==t.length&&t[0][2]?$r(t[0][0],t[0][1]):function(n){return n===e||Qt(n,e,t)}}function _n(e,t){return Wr(e)&&Xr(t)?$r(ri(e),t):function(n){var r=qi(n,e);return r===q&&r===t?Yi(n,e):Jt(t,r,3)}}function xn(e,t,n,r,i){e!==t&&Ea(t,(function(o,a){if(i||(i=new lt),Oi(o))!function(e,t,n,r,i,o,a){var s=Qr(e,n),u=Qr(t,n),c=a.get(u);if(c)return mt(e,n,c),q;var l=o?o(s,u,n+"",e,t,a):q,f=l===q;if(f){var h=Es(u),p=!h&&As(u),d=!h&&!p&&Ps(u);l=u,h||p||d?Es(s)?l=s:Ci(s)?l=rr(s):p?(f=!1,l=Kn(u,!0)):d?(f=!1,l=Qn(u,!0)):l=[]:Di(u)||Ss(u)?(l=s,Ss(s)?l=Hi(s):Oi(s)&&!Ri(s)||(l=Vr(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),mt(e,n,l)}(e,t,a,n,xn,r,i);else{var s=r?r(Qr(e,a),o,a+"",e,t,i):q;s===q&&(s=o),mt(e,a,s)}}),$i)}function bn(e,t){var n=e.length;if(n)return Gr(t+=t<0?n:0,n)?e[t]:q}function wn(e,t,n){t=t.length?p(t,(function(e){return Es(e)?function(t){return It(t,1===e.length?e[0]:e)}:e})):[no];var r=-1;return t=p(t,R(Dr())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(gn(e,(function(e,n,i){return{criteria:p(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=er(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Sn(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=It(e,a);n(s,a)&&Pn(o,$n(a,e),s)}return o}function En(e,t,n,r){var i=r?w:b,o=-1,a=t.length,s=e;for(e===t&&(t=rr(t)),n&&(s=p(e,R(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&zo.call(s,u,1),zo.call(e,u,1);return e}function Tn(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Gr(i)?zo.call(e,i,1):Vn(e,i)}}return e}function An(e,t){return e+Yo(ra()*(t-e+1))}function Mn(e,t){var n="";if(!e||t<1||t>K)return n;do{t%2&&(n+=e),(t=Yo(t/2))&&(e+=e)}while(t);return n}function Cn(e,t){return za(Zr(e,t,no),e+"")}function kn(e){return ht(Ki(e))}function Rn(e,t){var n=Ki(e);return ni(n,wt(t,0,n.length))}function Pn(e,t,n,r){if(!Oi(e))return e;for(var i=-1,o=(t=$n(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=ri(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];(c=r?r(l,u,s):q)===q&&(c=Oi(l)?l:Gr(t[i+1])?[]:{})}vt(s,u,c),s=s[u]}return e}function Ln(e){return ni(Ki(e))}function On(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=co(i);++r<i;)o[r]=e[r+t];return o}function In(e,t){var n;return wa(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Nn(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!zi(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Dn(e,t,no,n)}function Dn(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,s=null===t,u=zi(t),c=t===q;i<o;){var l=Yo((i+o)/2),f=n(e[l]),h=f!==q,p=null===f,d=f===f,m=zi(f);if(a)var v=r||d;else v=c?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!m):!p&&!m&&(r?f<=t:f<t);v?i=l+1:o=l}return ea(o,4294967294)}function Fn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ai(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function zn(e){return"number"==typeof e?e:zi(e)?J:+e}function Bn(e){if("string"==typeof e)return e;if(Es(e))return p(e,Bn)+"";if(zi(e))return xa?xa.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jn(e,t,n){var r=-1,i=f,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=h;else if(o>=200){var c=t?null:Ra(e);if(c)return U(c);a=!1,i=L,u=new ct}else u=t?[]:s;e:for(;++r<o;){var l=e[r],p=t?t(l):l;if(l=n||0!==l?l:0,a&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue e;t&&u.push(p),s.push(l)}else i(u,p,n)||(u!==s&&u.push(p),s.push(l))}return s}function Vn(e,t){return null==(e=Kr(e,t=$n(t,e)))||delete e[ri(fi(t))]}function Un(e,t,n,r){return Pn(e,t,n(It(e,t)),r)}function Gn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?On(e,r?0:o,r?o+1:i):On(e,r?o+1:0,r?i:o)}function Hn(e,t){var n=e;return n instanceof A&&(n=n.value()),m(t,(function(e,t){return t.func.apply(t.thisArg,d([e],t.args))}),n)}function Wn(e,t,n){var r=e.length;if(r<2)return r?jn(e[0]):[];for(var i=-1,o=co(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=At(o[i]||a,e[s],t,n));return jn(Rt(o,1),t,n)}function qn(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;)n(a,e[r],r<o?t[r]:q);return a}function Yn(e){return Ci(e)?e:[]}function Xn(e){return"function"==typeof e?e:no}function $n(e,t){return Es(e)?e:Wr(e,t)?[e]:Ba(Wi(e))}function Zn(e,t,n){var r=e.length;return n=n===q?r:n,!t&&n>=r?e:On(e,t,n)}function Kn(e,t){if(t)return e.slice();var n=e.length,r=Io?Io(n):new e.constructor(n);return e.copy(r),r}function Jn(e){var t=new e.constructor(e.byteLength);return new Oo(t).set(new Oo(e)),t}function Qn(e,t){return new e.constructor(t?Jn(e.buffer):e.buffer,e.byteOffset,e.length)}function er(e,t){if(e!==t){var n=e!==q,r=null===e,i=e===e,o=zi(e),a=t!==q,s=null===t,u=t===t,c=zi(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function tr(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=Qo(o-a,0),l=co(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function nr(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=Qo(o-s,0),f=co(l+c),h=!r;++i<l;)f[i]=e[i];for(var p=i;++u<c;)f[p+u]=t[u];for(;++a<s;)(h||i<o)&&(f[p+n[a]]=e[i++]);return f}function rr(e,t){var n=-1,r=e.length;for(t||(t=co(r));++n<r;)t[n]=e[n];return t}function ir(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):q;u===q&&(u=e[s]),i?xt(n,s,u):vt(n,s,u)}return n}function or(e,t){return function(n,r){var i=Es(n)?a:yt,o=t?t():{};return i(n,e,Dr(r,2),o)}}function ar(e){return Cn((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:q,a=i>2?n[2]:q;for(o=e.length>3&&"function"==typeof o?(i--,o):q,a&&Hr(n[0],n[1],a)&&(o=i<3?q:o,i=1),t=mo(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function sr(e,t){return function(n,r){if(null==n)return n;if(!Mi(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=mo(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ur(e){return function(t,n,r){for(var i=-1,o=mo(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function cr(e){return function(t){var n=F(t=Wi(t))?H(t):q,r=n?n[0]:t.charAt(0),i=n?Zn(n,1).join(""):t.slice(1);return r[e]()+i}}function lr(e){return function(t){return m(eo(Qi(t).replace(Dt,"")),e,"")}}function fr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ba(e.prototype),r=e.apply(n,t);return Oi(r)?r:n}}function hr(e,t,n){var r=fr(e);return function i(){for(var a=arguments.length,s=co(a),u=a,c=Nr(i);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:V(s,c);return(a-=l.length)<n?Sr(e,t,mr,i.placeholder,q,s,l,q,q,n-a):o(this&&this!==Kt&&this instanceof i?r:e,this,s)}}function pr(e){return function(t,n,r){var i=mo(t);if(!Mi(t)){var o=Dr(n,3);t=Xi(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:q}}function dr(e){return Pr((function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new yo(Y);if(o&&!s&&"wrapper"==Ir(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){var u=Ir(a=t[r]),c="wrapper"==u?Pa(a):q;s=c&&qr(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Ir(c[0])].apply(s,c[3]):1==a.length&&qr(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Es(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function mr(e,t,n,r,i,o,a,s,u,c){var l=t&Z,f=1&t,h=2&t,p=24&t,d=512&t,m=h?q:fr(e);return function v(){for(var g=arguments.length,y=co(g),_=g;_--;)y[_]=arguments[_];if(p)var x=Nr(v),b=N(y,x);if(r&&(y=tr(y,r,i,p)),o&&(y=nr(y,o,a,p)),g-=b,p&&g<c)return Sr(e,t,mr,v.placeholder,n,y,V(y,x),s,u,c-g);var w=f?n:this,S=h?w[e]:e;return g=y.length,s?y=Jr(y,s):d&&g>1&&y.reverse(),l&&u<g&&(y.length=u),this&&this!==Kt&&this instanceof v&&(S=m||fr(S)),S.apply(w,y)}}function vr(e,t){return function(n,r){return function(e,t,n,r){return Pt(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function gr(e,t){return function(n,r){var i;if(n===q&&r===q)return t;if(n!==q&&(i=n),r!==q){if(i===q)return r;"string"==typeof n||"string"==typeof r?(n=Bn(n),r=Bn(r)):(n=zn(n),r=zn(r)),i=e(n,r)}return i}}function yr(e){return Pr((function(t){return t=p(t,R(Dr())),Cn((function(n){var r=this;return e(t,(function(e){return o(e,r,n)}))}))}))}function _r(e,t){var n=(t=t===q?" ":Bn(t)).length;if(n<2)return n?Mn(t,e):t;var r=Mn(t,qo(e/G(t)));return F(t)?Zn(H(r),0,e).join(""):r.slice(0,e)}function xr(e,t,n,r){var i=1&t,a=fr(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=r.length,f=co(l+u),h=this&&this!==Kt&&this instanceof t?a:e;++c<l;)f[c]=r[c];for(;u--;)f[c++]=arguments[++s];return o(h,i?n:this,f)}}function br(e){return function(t,n,r){return r&&"number"!=typeof r&&Hr(t,n,r)&&(n=r=q),t=ji(t),n===q?(n=t,t=0):n=ji(n),function(e,t,n,r){for(var i=-1,o=Qo(qo((t-e)/(n||1)),0),a=co(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=r===q?t<n?1:-1:ji(r),e)}}function wr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Gi(t),n=Gi(n)),e(t,n)}}function Sr(e,t,n,r,i,o,a,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:q,l?a:q,l?q:o,l?q:a,s,u,c],h=n.apply(q,f);return qr(e)&&Da(h,f),h.placeholder=r,ei(h,e,t)}function Er(e){var t=po[e];return function(e,n){if(e=Gi(e),(n=null==n?0:ea(Vi(n),292))&&Zo(e)){var r=(Wi(e)+"e").split("e");return+((r=(Wi(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Tr(e){return function(t){var n=Ia(t);return n==ue?B(t):n==pe?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return p(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ar(e,t,n,r,i,o,a,s){var u=2&t;if(!u&&"function"!=typeof e)throw new yo(Y);var c=r?r.length:0;if(c||(t&=-97,r=i=q),a=a===q?a:Qo(Vi(a),0),s=s===q?s:Vi(s),c-=i?i.length:0,64&t){var l=r,f=i;r=i=q}var h=u?q:Pa(e),p=[e,t,n,r,i,l,f,o,a,s];if(h&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==Z&&8==n||r==Z&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?tr(u,s,t[4]):s,e[4]=u?V(e[3],$):t[4]}(s=t[5])&&(u=e[5],e[5]=u?nr(u,s,t[6]):s,e[6]=u?V(e[5],$):t[6]),(s=t[7])&&(e[7]=s),r&Z&&(e[8]=null==e[8]?t[8]:ea(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(p,h),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=p[9]===q?u?0:e.length:Qo(p[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)d=8==t||16==t?hr(e,t,s):32!=t&&33!=t||i.length?mr.apply(q,p):xr(e,t,n,r);else var d=function(e,t,n){var r=1&t,i=fr(e);return function t(){return(this&&this!==Kt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ei((h?Aa:Da)(d,p),e,t)}function Mr(e,t,n,r){return e===q||Ai(e,bo[n])&&!Eo.call(r,n)?t:e}function Cr(e,t,n,r,i,o){return Oi(e)&&Oi(t)&&(o.set(t,e),xn(e,t,q,Cr,o),o.delete(t)),e}function kr(e){return Di(e)?q:e}function Rr(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e),l=o.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,p=2&n?new ct:q;for(o.set(e,t),o.set(t,e);++f<s;){var d=e[f],m=t[f];if(r)var v=a?r(m,d,f,t,e,o):r(d,m,f,e,t,o);if(v!==q){if(v)continue;h=!1;break}if(p){if(!g(t,(function(e,t){if(!L(p,t)&&(d===e||i(d,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(d!==m&&!i(d,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Pr(e){return za(Zr(e,q,ci),e+"")}function Lr(e){return Nt(e,Xi,La)}function Or(e){return Nt(e,$i,Oa)}function Ir(e){for(var t=e.name+"",n=ha[t],r=Eo.call(ha,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Nr(e){return(Eo.call(n,"placeholder")?n:e).placeholder}function Dr(){var e=n.iteratee||ro;return e=e===ro?nn:e,arguments.length?e(arguments[0],arguments[1]):e}function Fr(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function zr(e){for(var t=Xi(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Xr(i)]}return t}function Br(e,t){var n=function(e,t){return null==e?q:e[t]}(e,t);return tn(n)?n:q}function jr(e,t,n){for(var r=-1,i=(t=$n(t,e)).length,o=!1;++r<i;){var a=ri(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Li(i)&&Gr(a,i)&&(Es(e)||Ss(e))}function Vr(e){return"function"!=typeof e.constructor||Yr(e)?{}:ba(No(e))}function Ur(e){return Es(e)||Ss(e)||!!(Bo&&e&&e[Bo])}function Gr(e,t){var n=typeof e;return!!(t=null==t?K:t)&&("number"==n||"symbol"!=n&&rt.test(e))&&e>-1&&e%1==0&&e<t}function Hr(e,t,n){if(!Oi(n))return!1;var r=typeof t;return!!("number"==r?Mi(n)&&Gr(t,n.length):"string"==r&&t in n)&&Ai(n[t],e)}function Wr(e,t){if(Es(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!zi(e))||Be.test(e)||!ze.test(e)||null!=t&&e in mo(t)}function qr(e){var t=Ir(e),r=n[t];if("function"!=typeof r||!(t in A.prototype))return!1;if(e===r)return!0;var i=Pa(r);return!!i&&e===i[0]}function Yr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||bo)}function Xr(e){return e===e&&!Oi(e)}function $r(e,t){return function(n){return null!=n&&n[e]===t&&(t!==q||e in mo(n))}}function Zr(e,t,n){return t=Qo(t===q?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Qo(r.length-t,0),s=co(a);++i<a;)s[i]=r[t+i];i=-1;for(var u=co(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),o(e,this,u)}}function Kr(e,t){return t.length<2?e:It(e,On(t,0,-1))}function Jr(e,t){for(var n=e.length,r=ea(t.length,n),i=rr(e);r--;){var o=t[r];e[r]=Gr(o,n)?i[o]:q}return e}function Qr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function ei(e,t,n){var r=t+"";return za(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(qe,"{\n/* [wrapped with "+t+"] */\n")}(r,oi(function(e){var t=e.match(Ye);return t?t[1].split(Xe):[]}(r),n)))}function ti(e){var t=0,n=0;return function(){var r=ta(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(q,arguments)}}function ni(e,t){var n=-1,r=e.length,i=r-1;for(t=t===q?r:t;++n<t;){var o=An(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function ri(e){if("string"==typeof e||zi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ii(e){if(null!=e){try{return So.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function oi(e,t){return s(ee,(function(n){var r="_."+n[0];t&n[1]&&!f(e,r)&&e.push(r)})),e.sort()}function ai(e){if(e instanceof A)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=rr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function si(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Vi(n);return i<0&&(i=Qo(r+i,0)),x(e,Dr(t,3),i)}function ui(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==q&&(i=Vi(n),i=n<0?Qo(r+i,0):ea(i,r-1)),x(e,Dr(t,3),i,!0)}function ci(e){return null!=e&&e.length?Rt(e,1):[]}function li(e){return e&&e.length?e[0]:q}function fi(e){var t=null==e?0:e.length;return t?e[t-1]:q}function hi(e,t){return e&&e.length&&t&&t.length?En(e,t):e}function pi(e){return null==e?e:ia.call(e)}function di(e){if(!e||!e.length)return[];var t=0;return e=l(e,(function(e){if(Ci(e))return t=Qo(e.length,t),!0})),k(t,(function(t){return p(e,T(t))}))}function mi(e,t){if(!e||!e.length)return[];var n=di(e);return null==t?n:p(n,(function(e){return o(t,q,e)}))}function vi(e){var t=n(e);return t.__chain__=!0,t}function gi(e,t){return t(e)}function yi(e,t){return(Es(e)?s:wa)(e,Dr(t,3))}function _i(e,t){return(Es(e)?u:Sa)(e,Dr(t,3))}function xi(e,t){return(Es(e)?p:gn)(e,Dr(t,3))}function bi(e,t,n){return t=n?q:t,t=e&&null==t?e.length:t,Ar(e,Z,q,q,q,q,t)}function wi(e,t){var n;if("function"!=typeof t)throw new yo(Y);return e=Vi(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=q),n}}function Si(e,t,n){function r(t){var n=c,r=l;return c=l=q,m=t,h=e.apply(r,n)}function i(e){return m=e,p=Fa(a,t),v?r(e):h}function o(e){var n=e-d;return d===q||n>=t||n<0||g&&e-m>=f}function a(){var e=hs();return o(e)?s(e):(p=Fa(a,function(e){var n=t-(e-d);return g?ea(n,f-(e-m)):n}(e)),q)}function s(e){return p=q,y&&c?r(e):(c=l=q,h)}function u(){var e=hs(),n=o(e);if(c=arguments,l=this,d=e,n){if(p===q)return i(d);if(g)return ka(p),p=Fa(a,t),r(d)}return p===q&&(p=Fa(a,t)),h}var c,l,f,h,p,d,m=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new yo(Y);return t=Gi(t)||0,Oi(n)&&(v=!!n.leading,f=(g="maxWait"in n)?Qo(Gi(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),u.cancel=function(){p!==q&&ka(p),m=0,c=d=l=p=q},u.flush=function(){return p===q?h:s(hs())},u}function Ei(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new yo(Y);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ei.Cache||ut),n}function Ti(e){if("function"!=typeof e)throw new yo(Y);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ai(e,t){return e===t||e!==e&&t!==t}function Mi(e){return null!=e&&Li(e.length)&&!Ri(e)}function Ci(e){return Ii(e)&&Mi(e)}function ki(e){if(!Ii(e))return!1;var t=zt(e);return t==oe||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Di(e)}function Ri(e){if(!Oi(e))return!1;var t=zt(e);return t==ae||t==se||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Pi(e){return"number"==typeof e&&e==Vi(e)}function Li(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=K}function Oi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ii(e){return null!=e&&"object"==typeof e}function Ni(e){return"number"==typeof e||Ii(e)&&zt(e)==ce}function Di(e){if(!Ii(e)||zt(e)!=le)return!1;var t=No(e);if(null===t)return!0;var n=Eo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&So.call(n)==Co}function Fi(e){return"string"==typeof e||!Es(e)&&Ii(e)&&zt(e)==de}function zi(e){return"symbol"==typeof e||Ii(e)&&zt(e)==me}function Bi(e){if(!e)return[];if(Mi(e))return Fi(e)?H(e):rr(e);if(jo&&e[jo])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[jo]());var t=Ia(e);return(t==ue?B:t==pe?U:Ki)(e)}function ji(e){return e?(e=Gi(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function Vi(e){var t=ji(e),n=t%1;return t===t?n?t-n:t:0}function Ui(e){return e?wt(Vi(e),0,Q):0}function Gi(e){if("number"==typeof e)return e;if(zi(e))return J;if(Oi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Oi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ge,"");var n=et.test(e);return n||nt.test(e)?Xt(e.slice(2),n?2:8):Qe.test(e)?J:+e}function Hi(e){return ir(e,$i(e))}function Wi(e){return null==e?"":Bn(e)}function qi(e,t,n){var r=null==e?q:It(e,t);return r===q?n:r}function Yi(e,t){return null!=e&&jr(e,t,Vt)}function Xi(e){return Mi(e)?ft(e):ln(e)}function $i(e){return Mi(e)?ft(e,!0):mn(e)}function Zi(e,t){if(null==e)return{};var n=p(Or(e),(function(e){return[e]}));return t=Dr(t),Sn(e,n,(function(e,n){return t(e,n[0])}))}function Ki(e){return null==e?[]:P(e,Xi(e))}function Ji(e){return ru(Wi(e).toLowerCase())}function Qi(e){return(e=Wi(e))&&e.replace(it,fn).replace(Ft,"")}function eo(e,t,n){return e=Wi(e),(t=n?q:t)===q?z(e)?W(e):y(e):e.match(t)||[]}function to(e){return function(){return e}}function no(e){return e}function ro(e){return nn("function"==typeof e?e:St(e,1))}function io(e,t,n){var r=Xi(t),i=Ot(t,r);null!=n||Oi(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ot(t,Xi(t)));var o=!(Oi(n)&&"chain"in n&&!n.chain),a=Ri(e);return s(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=rr(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})})),e}function oo(){}function ao(e){return Wr(e)?T(ri(e)):function(e){return function(t){return It(t,e)}}(e)}function so(){return[]}function uo(){return!1}var co=(t=null==t?Kt:dn.defaults(Kt.Object(),t,dn.pick(Kt,Ut))).Array,lo=t.Date,fo=t.Error,ho=t.Function,po=t.Math,mo=t.Object,vo=t.RegExp,go=t.String,yo=t.TypeError,_o=co.prototype,xo=ho.prototype,bo=mo.prototype,wo=t["__core-js_shared__"],So=xo.toString,Eo=bo.hasOwnProperty,To=0,Ao=function(){var e=/[^.]+$/.exec(wo&&wo.keys&&wo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Mo=bo.toString,Co=So.call(mo),ko=Kt._,Ro=vo("^"+So.call(Eo).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Po=en?t.Buffer:q,Lo=t.Symbol,Oo=t.Uint8Array,Io=Po?Po.allocUnsafe:q,No=j(mo.getPrototypeOf,mo),Do=mo.create,Fo=bo.propertyIsEnumerable,zo=_o.splice,Bo=Lo?Lo.isConcatSpreadable:q,jo=Lo?Lo.iterator:q,Vo=Lo?Lo.toStringTag:q,Uo=function(){try{var e=Br(mo,"defineProperty");return e({},"",{}),e}catch(e){}}(),Go=t.clearTimeout!==Kt.clearTimeout&&t.clearTimeout,Ho=lo&&lo.now!==Kt.Date.now&&lo.now,Wo=t.setTimeout!==Kt.setTimeout&&t.setTimeout,qo=po.ceil,Yo=po.floor,Xo=mo.getOwnPropertySymbols,$o=Po?Po.isBuffer:q,Zo=t.isFinite,Ko=_o.join,Jo=j(mo.keys,mo),Qo=po.max,ea=po.min,ta=lo.now,na=t.parseInt,ra=po.random,ia=_o.reverse,oa=Br(t,"DataView"),aa=Br(t,"Map"),sa=Br(t,"Promise"),ua=Br(t,"Set"),ca=Br(t,"WeakMap"),la=Br(mo,"create"),fa=ca&&new ca,ha={},pa=ii(oa),da=ii(aa),ma=ii(sa),va=ii(ua),ga=ii(ca),ya=Lo?Lo.prototype:q,_a=ya?ya.valueOf:q,xa=ya?ya.toString:q,ba=function(){function e(){}return function(t){if(!Oi(t))return{};if(Do)return Do(t);e.prototype=t;var n=new e;return e.prototype=q,n}}();n.templateSettings={escape:Ne,evaluate:De,interpolate:Fe,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=ba(r.prototype),i.prototype.constructor=i,A.prototype=ba(r.prototype),A.prototype.constructor=A,$e.prototype.clear=function(){this.__data__=la?la(null):{},this.size=0},$e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$e.prototype.get=function(e){var t=this.__data__;if(la){var n=t[e];return n===X?q:n}return Eo.call(t,e)?t[e]:q},$e.prototype.has=function(e){var t=this.__data__;return la?t[e]!==q:Eo.call(t,e)},$e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=la&&t===q?X:t,this},st.prototype.clear=function(){this.__data__=[],this.size=0},st.prototype.delete=function(e){var t=this.__data__,n=gt(t,e);return!(n<0)&&(n==t.length-1?t.pop():zo.call(t,n,1),--this.size,!0)},st.prototype.get=function(e){var t=this.__data__,n=gt(t,e);return n<0?q:t[n][1]},st.prototype.has=function(e){return gt(this.__data__,e)>-1},st.prototype.set=function(e,t){var n=this.__data__,r=gt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ut.prototype.clear=function(){this.size=0,this.__data__={hash:new $e,map:new(aa||st),string:new $e}},ut.prototype.delete=function(e){var t=Fr(this,e).delete(e);return this.size-=t?1:0,t},ut.prototype.get=function(e){return Fr(this,e).get(e)},ut.prototype.has=function(e){return Fr(this,e).has(e)},ut.prototype.set=function(e,t){var n=Fr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ct.prototype.add=ct.prototype.push=function(e){return this.__data__.set(e,X),this},ct.prototype.has=function(e){return this.__data__.has(e)},lt.prototype.clear=function(){this.__data__=new st,this.size=0},lt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},lt.prototype.get=function(e){return this.__data__.get(e)},lt.prototype.has=function(e){return this.__data__.has(e)},lt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof st){var r=n.__data__;if(!aa||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ut(r)}return n.set(e,t),this.size=n.size,this};var wa=sr(Pt),Sa=sr(Lt,!0),Ea=ur(),Ta=ur(!0),Aa=fa?function(e,t){return fa.set(e,t),e}:no,Ma=Uo?function(e,t){return Uo(e,"toString",{configurable:!0,enumerable:!1,value:to(t),writable:!0})}:no,Ca=Cn,ka=Go||function(e){return Kt.clearTimeout(e)},Ra=ua&&1/U(new ua([,-0]))[1]==1/0?function(e){return new ua(e)}:oo,Pa=fa?function(e){return fa.get(e)}:oo,La=Xo?function(e){return null==e?[]:(e=mo(e),l(Xo(e),(function(t){return Fo.call(e,t)})))}:so,Oa=Xo?function(e){for(var t=[];e;)d(t,La(e)),e=No(e);return t}:so,Ia=zt;(oa&&Ia(new oa(new ArrayBuffer(1)))!=ye||aa&&Ia(new aa)!=ue||sa&&Ia(sa.resolve())!=fe||ua&&Ia(new ua)!=pe||ca&&Ia(new ca)!=ve)&&(Ia=function(e){var t=zt(e),n=t==le?e.constructor:q,r=n?ii(n):"";if(r)switch(r){case pa:return ye;case da:return ue;case ma:return fe;case va:return pe;case ga:return ve}return t});var Na=wo?Ri:uo,Da=ti(Aa),Fa=Wo||function(e,t){return Kt.setTimeout(e,t)},za=ti(Ma),Ba=function(e){var t=Ei(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(je,(function(e,n,r,i){t.push(r?i.replace(Ze,"$1"):n||e)})),t})),ja=Cn((function(e,t){return Ci(e)?At(e,Rt(t,1,Ci,!0)):[]})),Va=Cn((function(e,t){var n=fi(t);return Ci(n)&&(n=q),Ci(e)?At(e,Rt(t,1,Ci,!0),Dr(n,2)):[]})),Ua=Cn((function(e,t){var n=fi(t);return Ci(n)&&(n=q),Ci(e)?At(e,Rt(t,1,Ci,!0),q,n):[]})),Ga=Cn((function(e){var t=p(e,Yn);return t.length&&t[0]===e[0]?qt(t):[]})),Ha=Cn((function(e){var t=fi(e),n=p(e,Yn);return t===fi(n)?t=q:n.pop(),n.length&&n[0]===e[0]?qt(n,Dr(t,2)):[]})),Wa=Cn((function(e){var t=fi(e),n=p(e,Yn);return(t="function"==typeof t?t:q)&&n.pop(),n.length&&n[0]===e[0]?qt(n,q,t):[]})),qa=Cn(hi),Ya=Pr((function(e,t){var n=null==e?0:e.length,r=bt(e,t);return Tn(e,p(t,(function(e){return Gr(e,n)?+e:e})).sort(er)),r})),Xa=Cn((function(e){return jn(Rt(e,1,Ci,!0))})),$a=Cn((function(e){var t=fi(e);return Ci(t)&&(t=q),jn(Rt(e,1,Ci,!0),Dr(t,2))})),Za=Cn((function(e){var t=fi(e);return t="function"==typeof t?t:q,jn(Rt(e,1,Ci,!0),q,t)})),Ka=Cn((function(e,t){return Ci(e)?At(e,t):[]})),Ja=Cn((function(e){return Wn(l(e,Ci))})),Qa=Cn((function(e){var t=fi(e);return Ci(t)&&(t=q),Wn(l(e,Ci),Dr(t,2))})),es=Cn((function(e){var t=fi(e);return t="function"==typeof t?t:q,Wn(l(e,Ci),q,t)})),ts=Cn(di),ns=Cn((function(e){var t=e.length,n=t>1?e[t-1]:q;return n="function"==typeof n?(e.pop(),n):q,mi(e,n)})),rs=Pr((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return bt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof A&&Gr(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:gi,args:[o],thisArg:q}),new i(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(q),e}))):this.thru(o)})),is=or((function(e,t,n){Eo.call(e,n)?++e[n]:xt(e,n,1)})),os=pr(si),as=pr(ui),ss=or((function(e,t,n){Eo.call(e,n)?e[n].push(t):xt(e,n,[t])})),us=Cn((function(e,t,n){var r=-1,i="function"==typeof t,a=Mi(e)?co(e.length):[];return wa(e,(function(e){a[++r]=i?o(t,e,n):$t(e,t,n)})),a})),cs=or((function(e,t,n){xt(e,n,t)})),ls=or((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),fs=Cn((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Hr(e,t[0],t[1])?t=[]:n>2&&Hr(t[0],t[1],t[2])&&(t=[t[0]]),wn(e,Rt(t,1),[])})),hs=Ho||function(){return Kt.Date.now()},ps=Cn((function(e,t,n){var r=1;if(n.length){var i=V(n,Nr(ps));r|=32}return Ar(e,r,t,n,i)})),ds=Cn((function(e,t,n){var r=3;if(n.length){var i=V(n,Nr(ds));r|=32}return Ar(t,r,e,n,i)})),ms=Cn((function(e,t){return Tt(e,1,t)})),vs=Cn((function(e,t,n){return Tt(e,Gi(t)||0,n)}));Ei.Cache=ut;var gs=Ca((function(e,t){var n=(t=1==t.length&&Es(t[0])?p(t[0],R(Dr())):p(Rt(t,1),R(Dr()))).length;return Cn((function(r){for(var i=-1,a=ea(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)}))})),ys=Cn((function(e,t){return Ar(e,32,q,t,V(t,Nr(ys)))})),_s=Cn((function(e,t){return Ar(e,64,q,t,V(t,Nr(_s)))})),xs=Pr((function(e,t){return Ar(e,256,q,q,q,t)})),bs=wr(Bt),ws=wr((function(e,t){return e>=t})),Ss=Zt(function(){return arguments}())?Zt:function(e){return Ii(e)&&Eo.call(e,"callee")&&!Fo.call(e,"callee")},Es=co.isArray,Ts=rn?R(rn):function(e){return Ii(e)&&zt(e)==ge},As=$o||uo,Ms=on?R(on):function(e){return Ii(e)&&zt(e)==ie},Cs=an?R(an):function(e){return Ii(e)&&Ia(e)==ue},ks=sn?R(sn):function(e){return Ii(e)&&zt(e)==he},Rs=un?R(un):function(e){return Ii(e)&&Ia(e)==pe},Ps=cn?R(cn):function(e){return Ii(e)&&Li(e.length)&&!!Ht[zt(e)]},Ls=wr(vn),Os=wr((function(e,t){return e<=t})),Is=ar((function(e,t){if(Yr(t)||Mi(t))return ir(t,Xi(t),e),q;for(var n in t)Eo.call(t,n)&&vt(e,n,t[n])})),Ns=ar((function(e,t){ir(t,$i(t),e)})),Ds=ar((function(e,t,n,r){ir(t,$i(t),e,r)})),Fs=ar((function(e,t,n,r){ir(t,Xi(t),e,r)})),zs=Pr(bt),Bs=Cn((function(e,t){e=mo(e);var n=-1,r=t.length,i=r>2?t[2]:q;for(i&&Hr(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=$i(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(l===q||Ai(l,bo[c])&&!Eo.call(e,c))&&(e[c]=o[c])}return e})),js=Cn((function(e){return e.push(q,Cr),o(Ws,q,e)})),Vs=vr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Mo.call(t)),e[t]=n}),to(no)),Us=vr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Mo.call(t)),Eo.call(e,t)?e[t].push(n):e[t]=[n]}),Dr),Gs=Cn($t),Hs=ar((function(e,t,n){xn(e,t,n)})),Ws=ar((function(e,t,n,r){xn(e,t,n,r)})),qs=Pr((function(e,t){var n={};if(null==e)return n;var r=!1;t=p(t,(function(t){return t=$n(t,e),r||(r=t.length>1),t})),ir(e,Or(e),n),r&&(n=St(n,7,kr));for(var i=t.length;i--;)Vn(n,t[i]);return n})),Ys=Pr((function(e,t){return null==e?{}:function(e,t){return Sn(e,t,(function(t,n){return Yi(e,n)}))}(e,t)})),Xs=Tr(Xi),$s=Tr($i),Zs=lr((function(e,t,n){return t=t.toLowerCase(),e+(n?Ji(t):t)})),Ks=lr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Js=lr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Qs=cr("toLowerCase"),eu=lr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),tu=lr((function(e,t,n){return e+(n?" ":"")+ru(t)})),nu=lr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ru=cr("toUpperCase"),iu=Cn((function(e,t){try{return o(e,q,t)}catch(o){return ki(o)?o:new fo(o)}})),ou=Pr((function(e,t){return s(t,(function(t){t=ri(t),xt(e,t,ps(e[t],e))})),e})),au=dr(),su=dr(!0),uu=Cn((function(e,t){return function(n){return $t(n,e,t)}})),cu=Cn((function(e,t){return function(n){return $t(e,n,t)}})),lu=yr(p),fu=yr(c),hu=yr(g),pu=br(),du=br(!0),mu=gr((function(e,t){return e+t}),0),vu=Er("ceil"),gu=gr((function(e,t){return e/t}),1),yu=Er("floor"),_u=gr((function(e,t){return e*t}),1),xu=Er("round"),bu=gr((function(e,t){return e-t}),0);return n.after=function(e,t){if("function"!=typeof t)throw new yo(Y);return e=Vi(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=bi,n.assign=Is,n.assignIn=Ns,n.assignInWith=Ds,n.assignWith=Fs,n.at=zs,n.before=wi,n.bind=ps,n.bindAll=ou,n.bindKey=ds,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Es(e)?e:[e]},n.chain=vi,n.chunk=function(e,t,n){t=(n?Hr(e,t,n):t===q)?1:Qo(Vi(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=co(qo(r/t));i<r;)a[o++]=On(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=co(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return d(Es(n)?rr(n):[n],Rt(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=Dr();return e=t?p(e,(function(e){if("function"!=typeof e[1])throw new yo(Y);return[n(e[0]),e[1]]})):[],Cn((function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}}))},n.conforms=function(e){return function(e){var t=Xi(e);return function(n){return Et(n,e,t)}}(St(e,1))},n.constant=to,n.countBy=is,n.create=function(e,t){var n=ba(e);return null==t?n:_t(n,t)},n.curry=function e(t,n,r){var i=Ar(t,8,q,q,q,q,q,n=r?q:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,r){var i=Ar(t,16,q,q,q,q,q,n=r?q:n);return i.placeholder=e.placeholder,i},n.debounce=Si,n.defaults=Bs,n.defaultsDeep=js,n.defer=ms,n.delay=vs,n.difference=ja,n.differenceBy=Va,n.differenceWith=Ua,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?On(e,(t=n||t===q?1:Vi(t))<0?0:t,r):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?On(e,0,(t=r-(t=n||t===q?1:Vi(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?Gn(e,Dr(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?Gn(e,Dr(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Hr(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Vi(n))<0&&(n=-n>i?0:i+n),(r=r===q||r>i?i:Vi(r))<0&&(r+=i),r=n>r?0:Ui(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},n.filter=function(e,t){return(Es(e)?l:kt)(e,Dr(t,3))},n.flatMap=function(e,t){return Rt(xi(e,t),1)},n.flatMapDeep=function(e,t){return Rt(xi(e,t),1/0)},n.flatMapDepth=function(e,t,n){return n=n===q?1:Vi(n),Rt(xi(e,t),n)},n.flatten=ci,n.flattenDeep=function(e){return null!=e&&e.length?Rt(e,1/0):[]},n.flattenDepth=function(e,t){return null!=e&&e.length?Rt(e,t=t===q?1:Vi(t)):[]},n.flip=function(e){return Ar(e,512)},n.flow=au,n.flowRight=su,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:Ot(e,Xi(e))},n.functionsIn=function(e){return null==e?[]:Ot(e,$i(e))},n.groupBy=ss,n.initial=function(e){return null!=e&&e.length?On(e,0,-1):[]},n.intersection=Ga,n.intersectionBy=Ha,n.intersectionWith=Wa,n.invert=Vs,n.invertBy=Us,n.invokeMap=us,n.iteratee=ro,n.keyBy=cs,n.keys=Xi,n.keysIn=$i,n.map=xi,n.mapKeys=function(e,t){var n={};return t=Dr(t,3),Pt(e,(function(e,r,i){xt(n,t(e,r,i),e)})),n},n.mapValues=function(e,t){var n={};return t=Dr(t,3),Pt(e,(function(e,r,i){xt(n,r,t(e,r,i))})),n},n.matches=function(e){return yn(St(e,1))},n.matchesProperty=function(e,t){return _n(e,St(t,1))},n.memoize=Ei,n.merge=Hs,n.mergeWith=Ws,n.method=uu,n.methodOf=cu,n.mixin=io,n.negate=Ti,n.nthArg=function(e){return e=Vi(e),Cn((function(t){return bn(t,e)}))},n.omit=qs,n.omitBy=function(e,t){return Zi(e,Ti(Dr(t)))},n.once=function(e){return wi(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(Es(t)||(t=null==t?[]:[t]),Es(n=r?q:n)||(n=null==n?[]:[n]),wn(e,t,n))},n.over=lu,n.overArgs=gs,n.overEvery=fu,n.overSome=hu,n.partial=ys,n.partialRight=_s,n.partition=ls,n.pick=Ys,n.pickBy=Zi,n.property=ao,n.propertyOf=function(e){return function(t){return null==e?q:It(e,t)}},n.pull=qa,n.pullAll=hi,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?En(e,t,Dr(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?En(e,t,q,n):e},n.pullAt=Ya,n.range=pu,n.rangeRight=du,n.rearg=xs,n.reject=function(e,t){return(Es(e)?l:kt)(e,Ti(Dr(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Dr(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Tn(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new yo(Y);return Cn(e,t=t===q?t:Vi(t))},n.reverse=pi,n.sampleSize=function(e,t,n){return t=(n?Hr(e,t,n):t===q)?1:Vi(t),(Es(e)?pt:Rn)(e,t)},n.set=function(e,t,n){return null==e?e:Pn(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:q,null==e?e:Pn(e,t,n,r)},n.shuffle=function(e){return(Es(e)?dt:Ln)(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Hr(e,t,n)?(t=0,n=r):(t=null==t?0:Vi(t),n=n===q?r:Vi(n)),On(e,t,n)):[]},n.sortBy=fs,n.sortedUniq=function(e){return e&&e.length?Fn(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?Fn(e,Dr(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&Hr(e,t,n)&&(t=n=q),(n=n===q?Q:n>>>0)?(e=Wi(e))&&("string"==typeof t||null!=t&&!ks(t))&&(!(t=Bn(t))&&F(e))?Zn(H(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new yo(Y);return t=null==t?0:Qo(Vi(t),0),Cn((function(n){var r=n[t],i=Zn(n,0,t);return r&&d(i,r),o(e,this,i)}))},n.tail=function(e){var t=null==e?0:e.length;return t?On(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?On(e,0,(t=n||t===q?1:Vi(t))<0?0:t):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?On(e,(t=r-(t=n||t===q?1:Vi(t)))<0?0:t,r):[]},n.takeRightWhile=function(e,t){return e&&e.length?Gn(e,Dr(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?Gn(e,Dr(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new yo(Y);return Oi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Si(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=gi,n.toArray=Bi,n.toPairs=Xs,n.toPairsIn=$s,n.toPath=function(e){return Es(e)?p(e,ri):zi(e)?[e]:rr(Ba(Wi(e)))},n.toPlainObject=Hi,n.transform=function(e,t,n){var r=Es(e),i=r||As(e)||Ps(e);if(t=Dr(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Oi(e)&&Ri(o)?ba(No(e)):{}}return(i?s:Pt)(e,(function(e,r,i){return t(n,e,r,i)})),n},n.unary=function(e){return bi(e,1)},n.union=Xa,n.unionBy=$a,n.unionWith=Za,n.uniq=function(e){return e&&e.length?jn(e):[]},n.uniqBy=function(e,t){return e&&e.length?jn(e,Dr(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:q,e&&e.length?jn(e,q,t):[]},n.unset=function(e,t){return null==e||Vn(e,t)},n.unzip=di,n.unzipWith=mi,n.update=function(e,t,n){return null==e?e:Un(e,t,Xn(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:q,null==e?e:Un(e,t,Xn(n),r)},n.values=Ki,n.valuesIn=function(e){return null==e?[]:P(e,$i(e))},n.without=Ka,n.words=eo,n.wrap=function(e,t){return ys(Xn(t),e)},n.xor=Ja,n.xorBy=Qa,n.xorWith=es,n.zip=ts,n.zipObject=function(e,t){return qn(e||[],t||[],vt)},n.zipObjectDeep=function(e,t){return qn(e||[],t||[],Pn)},n.zipWith=ns,n.entries=Xs,n.entriesIn=$s,n.extend=Ns,n.extendWith=Ds,io(n,n),n.add=mu,n.attempt=iu,n.camelCase=Zs,n.capitalize=Ji,n.ceil=vu,n.clamp=function(e,t,n){return n===q&&(n=t,t=q),n!==q&&(n=(n=Gi(n))===n?n:0),t!==q&&(t=(t=Gi(t))===t?t:0),wt(Gi(e),t,n)},n.clone=function(e){return St(e,4)},n.cloneDeep=function(e){return St(e,5)},n.cloneDeepWith=function(e,t){return St(e,5,t="function"==typeof t?t:q)},n.cloneWith=function(e,t){return St(e,4,t="function"==typeof t?t:q)},n.conformsTo=function(e,t){return null==t||Et(e,t,Xi(t))},n.deburr=Qi,n.defaultTo=function(e,t){return null==e||e!==e?t:e},n.divide=gu,n.endsWith=function(e,t,n){e=Wi(e),t=Bn(t);var r=e.length,i=n=n===q?r:wt(Vi(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=Ai,n.escape=function(e){return(e=Wi(e))&&Ie.test(e)?e.replace(Le,hn):e},n.escapeRegExp=function(e){return(e=Wi(e))&&Ue.test(e)?e.replace(Ve,"\\$&"):e},n.every=function(e,t,n){var r=Es(e)?c:Mt;return n&&Hr(e,t,n)&&(t=q),r(e,Dr(t,3))},n.find=os,n.findIndex=si,n.findKey=function(e,t){return _(e,Dr(t,3),Pt)},n.findLast=as,n.findLastIndex=ui,n.findLastKey=function(e,t){return _(e,Dr(t,3),Lt)},n.floor=yu,n.forEach=yi,n.forEachRight=_i,n.forIn=function(e,t){return null==e?e:Ea(e,Dr(t,3),$i)},n.forInRight=function(e,t){return null==e?e:Ta(e,Dr(t,3),$i)},n.forOwn=function(e,t){return e&&Pt(e,Dr(t,3))},n.forOwnRight=function(e,t){return e&&Lt(e,Dr(t,3))},n.get=qi,n.gt=bs,n.gte=ws,n.has=function(e,t){return null!=e&&jr(e,t,jt)},n.hasIn=Yi,n.head=li,n.identity=no,n.includes=function(e,t,n,r){e=Mi(e)?e:Ki(e),n=n&&!r?Vi(n):0;var i=e.length;return n<0&&(n=Qo(i+n,0)),Fi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&b(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Vi(n);return i<0&&(i=Qo(r+i,0)),b(e,t,i)},n.inRange=function(e,t,n){return t=ji(t),n===q?(n=t,t=0):n=ji(n),function(e,t,n){return e>=ea(t,n)&&e<Qo(t,n)}(e=Gi(e),t,n)},n.invoke=Gs,n.isArguments=Ss,n.isArray=Es,n.isArrayBuffer=Ts,n.isArrayLike=Mi,n.isArrayLikeObject=Ci,n.isBoolean=function(e){return!0===e||!1===e||Ii(e)&&zt(e)==re},n.isBuffer=As,n.isDate=Ms,n.isElement=function(e){return Ii(e)&&1===e.nodeType&&!Di(e)},n.isEmpty=function(e){if(null==e)return!0;if(Mi(e)&&(Es(e)||"string"==typeof e||"function"==typeof e.splice||As(e)||Ps(e)||Ss(e)))return!e.length;var t=Ia(e);if(t==ue||t==pe)return!e.size;if(Yr(e))return!ln(e).length;for(var n in e)if(Eo.call(e,n))return!1;return!0},n.isEqual=function(e,t){return Jt(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:q)?n(e,t):q;return r===q?Jt(e,t,q,n):!!r},n.isError=ki,n.isFinite=function(e){return"number"==typeof e&&Zo(e)},n.isFunction=Ri,n.isInteger=Pi,n.isLength=Li,n.isMap=Cs,n.isMatch=function(e,t){return e===t||Qt(e,t,zr(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:q,Qt(e,t,zr(t),n)},n.isNaN=function(e){return Ni(e)&&e!=+e},n.isNative=function(e){if(Na(e))throw new fo("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return tn(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=Ni,n.isObject=Oi,n.isObjectLike=Ii,n.isPlainObject=Di,n.isRegExp=ks,n.isSafeInteger=function(e){return Pi(e)&&e>=-K&&e<=K},n.isSet=Rs,n.isString=Fi,n.isSymbol=zi,n.isTypedArray=Ps,n.isUndefined=function(e){return e===q},n.isWeakMap=function(e){return Ii(e)&&Ia(e)==ve},n.isWeakSet=function(e){return Ii(e)&&"[object WeakSet]"==zt(e)},n.join=function(e,t){return null==e?"":Ko.call(e,t)},n.kebabCase=Ks,n.last=fi,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==q&&(i=(i=Vi(n))<0?Qo(r+i,0):ea(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):x(e,S,i,!0)},n.lowerCase=Js,n.lowerFirst=Qs,n.lt=Ls,n.lte=Os,n.max=function(e){return e&&e.length?Ct(e,no,Bt):q},n.maxBy=function(e,t){return e&&e.length?Ct(e,Dr(t,2),Bt):q},n.mean=function(e){return E(e,no)},n.meanBy=function(e,t){return E(e,Dr(t,2))},n.min=function(e){return e&&e.length?Ct(e,no,vn):q},n.minBy=function(e,t){return e&&e.length?Ct(e,Dr(t,2),vn):q},n.stubArray=so,n.stubFalse=uo,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=_u,n.nth=function(e,t){return e&&e.length?bn(e,Vi(t)):q},n.noConflict=function(){return Kt._===this&&(Kt._=ko),this},n.noop=oo,n.now=hs,n.pad=function(e,t,n){e=Wi(e);var r=(t=Vi(t))?G(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return _r(Yo(i),n)+e+_r(qo(i),n)},n.padEnd=function(e,t,n){e=Wi(e);var r=(t=Vi(t))?G(e):0;return t&&r<t?e+_r(t-r,n):e},n.padStart=function(e,t,n){e=Wi(e);var r=(t=Vi(t))?G(e):0;return t&&r<t?_r(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),na(Wi(e).replace(He,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Hr(e,t,n)&&(t=n=q),n===q&&("boolean"==typeof t?(n=t,t=q):"boolean"==typeof e&&(n=e,e=q)),e===q&&t===q?(e=0,t=1):(e=ji(e),t===q?(t=e,e=0):t=ji(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=ra();return ea(e+i*(t-e+Yt("1e-"+((i+"").length-1))),t)}return An(e,t)},n.reduce=function(e,t,n){var r=Es(e)?m:M,i=arguments.length<3;return r(e,Dr(t,4),n,i,wa)},n.reduceRight=function(e,t,n){var r=Es(e)?v:M,i=arguments.length<3;return r(e,Dr(t,4),n,i,Sa)},n.repeat=function(e,t,n){return t=(n?Hr(e,t,n):t===q)?1:Vi(t),Mn(Wi(e),t)},n.replace=function(){var e=arguments,t=Wi(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=$n(t,e)).length;for(i||(i=1,e=q);++r<i;){var o=null==e?q:e[ri(t[r])];o===q&&(r=i,o=n),e=Ri(o)?o.call(e):o}return e},n.round=xu,n.runInContext=e,n.sample=function(e){return(Es(e)?ht:kn)(e)},n.size=function(e){if(null==e)return 0;if(Mi(e))return Fi(e)?G(e):e.length;var t=Ia(e);return t==ue||t==pe?e.size:ln(e).length},n.snakeCase=eu,n.some=function(e,t,n){var r=Es(e)?g:In;return n&&Hr(e,t,n)&&(t=q),r(e,Dr(t,3))},n.sortedIndex=function(e,t){return Nn(e,t)},n.sortedIndexBy=function(e,t,n){return Dn(e,t,Dr(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Nn(e,t);if(r<n&&Ai(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return Nn(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return Dn(e,t,Dr(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Nn(e,t,!0)-1;if(Ai(e[n],t))return n}return-1},n.startCase=tu,n.startsWith=function(e,t,n){return e=Wi(e),n=null==n?0:wt(Vi(n),0,e.length),t=Bn(t),e.slice(n,n+t.length)==t},n.subtract=bu,n.sum=function(e){return e&&e.length?C(e,no):0},n.sumBy=function(e,t){return e&&e.length?C(e,Dr(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&Hr(e,t,r)&&(t=q),e=Wi(e),t=Ds({},t,i,Mr);var o,a,s=Ds({},t.imports,i.imports,Mr),u=Xi(s),c=P(s,u),l=0,f=t.interpolate||ot,h="__p += '",p=vo((t.escape||ot).source+"|"+f.source+"|"+(f===Fe?Ke:ot).source+"|"+(t.evaluate||ot).source+"|$","g"),d="//# sourceURL="+(Eo.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gt+"]")+"\n";e.replace(p,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(at,D),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var m=Eo.call(t,"variable")&&t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(Ce,""):h).replace(ke,"$1").replace(Re,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=iu((function(){return ho(u,d+"return "+h).apply(q,c)}));if(v.source=h,ki(v))throw v;return v},n.times=function(e,t){if((e=Vi(e))<1||e>K)return[];var n=Q,r=ea(e,Q);t=Dr(t),e-=Q;for(var i=k(r,t);++n<e;)t(n);return i},n.toFinite=ji,n.toInteger=Vi,n.toLength=Ui,n.toLower=function(e){return Wi(e).toLowerCase()},n.toNumber=Gi,n.toSafeInteger=function(e){return e?wt(Vi(e),-K,K):0===e?e:0},n.toString=Wi,n.toUpper=function(e){return Wi(e).toUpperCase()},n.trim=function(e,t,n){if((e=Wi(e))&&(n||t===q))return e.replace(Ge,"");if(!e||!(t=Bn(t)))return e;var r=H(e),i=H(t);return Zn(r,O(r,i),I(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=Wi(e))&&(n||t===q))return e.replace(We,"");if(!e||!(t=Bn(t)))return e;var r=H(e);return Zn(r,0,I(r,H(t))+1).join("")},n.trimStart=function(e,t,n){if((e=Wi(e))&&(n||t===q))return e.replace(He,"");if(!e||!(t=Bn(t)))return e;var r=H(e);return Zn(r,O(r,H(t))).join("")},n.truncate=function(e,t){var n=30,r="...";if(Oi(t)){var i="separator"in t?t.separator:i;n="length"in t?Vi(t.length):n,r="omission"in t?Bn(t.omission):r}var o=(e=Wi(e)).length;if(F(e)){var a=H(e);o=a.length}if(n>=o)return e;var s=n-G(r);if(s<1)return r;var u=a?Zn(a,0,s).join(""):e.slice(0,s);if(i===q)return u+r;if(a&&(s+=u.length-s),ks(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=vo(i.source,Wi(Je.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===q?s:f)}}else if(e.indexOf(Bn(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},n.unescape=function(e){return(e=Wi(e))&&Oe.test(e)?e.replace(Pe,pn):e},n.uniqueId=function(e){var t=++To;return Wi(e)+t},n.upperCase=nu,n.upperFirst=ru,n.each=yi,n.eachRight=_i,n.first=li,io(n,function(){var e={};return Pt(n,(function(t,r){Eo.call(n.prototype,r)||(e[r]=t)})),e}(),{chain:!1}),n.VERSION="4.17.20",s(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){n[e].placeholder=n})),s(["drop","take"],(function(e,t){A.prototype[e]=function(n){n=n===q?1:Qo(Vi(n),0);var r=this.__filtered__&&!t?new A(this):this.clone();return r.__filtered__?r.__takeCount__=ea(n,r.__takeCount__):r.__views__.push({size:ea(n,Q),type:e+(r.__dir__<0?"Right":"")}),r},A.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),s(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;A.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Dr(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),s(["head","last"],(function(e,t){var n="take"+(t?"Right":"");A.prototype[e]=function(){return this[n](1).value()[0]}})),s(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");A.prototype[e]=function(){return this.__filtered__?new A(this):this[n](1)}})),A.prototype.compact=function(){return this.filter(no)},A.prototype.find=function(e){return this.filter(e).head()},A.prototype.findLast=function(e){return this.reverse().find(e)},A.prototype.invokeMap=Cn((function(e,t){return"function"==typeof e?new A(this):this.map((function(n){return $t(n,e,t)}))})),A.prototype.reject=function(e){return this.filter(Ti(Dr(e)))},A.prototype.slice=function(e,t){e=Vi(e);var n=this;return n.__filtered__&&(e>0||t<0)?new A(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==q&&(n=(t=Vi(t))<0?n.dropRight(-t):n.take(t-e)),n)},A.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},A.prototype.toArray=function(){return this.take(Q)},Pt(A.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,u=o?[1]:arguments,c=t instanceof A,l=u[0],f=c||Es(t),h=function(e){var t=a.apply(n,d([e],u));return o&&p?t[0]:t};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var p=this.__chain__,m=!!this.__actions__.length,v=s&&!p,g=c&&!m;if(!s&&f){t=g?t:new A(this);var y=e.apply(t,u);return y.__actions__.push({func:gi,args:[h],thisArg:q}),new i(y,p)}return v&&g?e.apply(this,u):(y=this.thru(h),v?o?y.value()[0]:y.value():y)})})),s(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_o[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Es(n)?n:[],e)}return this[r]((function(n){return t.apply(Es(n)?n:[],e)}))}})),Pt(A.prototype,(function(e,t){var r=n[t];if(r){var i=r.name+"";Eo.call(ha,i)||(ha[i]=[]),ha[i].push({name:t,func:r})}})),ha[mr(q,2).name]=[{name:"wrapper",func:q}],A.prototype.clone=function(){var e=new A(this.__wrapped__);return e.__actions__=rr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rr(this.__views__),e},A.prototype.reverse=function(){if(this.__filtered__){var e=new A(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},A.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Es(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=ea(t,e+a);break;case"takeRight":e=Qo(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=ea(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return Hn(e,this.__actions__);var d=[];e:for(;u--&&h<p;){for(var m=-1,v=e[c+=t];++m<f;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(2==_)v=x;else if(!x){if(1==_)continue e;break e}}d[h++]=v}return d},n.prototype.at=rs,n.prototype.chain=function(){return vi(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===q&&(this.__values__=Bi(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?q:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof r;){var i=ai(n);i.__index__=0,i.__values__=q,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof A){var t=e;return this.__actions__.length&&(t=new A(this)),(t=t.reverse()).__actions__.push({func:gi,args:[pi],thisArg:q}),new i(t,this.__chain__)}return this.thru(pi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return Hn(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,jo&&(n.prototype[jo]=function(){return this}),n}();Kt._=dn,void 0===(i=function(){return dn}.call(t,n,t,r))||(r.exports=i)}).call(this)}).call(this,n(29),n(73)(e))},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t,n){"use strict";var r=n(170),i=n(577),o=n(74),a=n(171).scan,s=o.ValidatorResult,u=o.ValidatorResultError,c=o.SchemaError,l=o.SchemaContext,f=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(p),this.attributes=Object.create(i.validators)};function h(e){var t="string"===typeof e?e:e.$ref;return"string"==typeof t&&t}f.prototype.customFormats={},f.prototype.schemas=null,f.prototype.types=null,f.prototype.attributes=null,f.prototype.unresolvedRefs=null,f.prototype.addSchema=function(e,t){var n=this;if(!e)return null;var r=a(t||"/",e),i=t||e.$id||e.id;for(var o in r.id)this.schemas[o]=r.id[o];for(var o in r.ref)this.unresolvedRefs.push(o);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return"undefined"===typeof n.schemas[e]})),this.schemas[i]},f.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])},f.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var n in t)this.addSubSchema(e,t[n])},f.prototype.setSchemas=function(e){this.schemas=e},f.prototype.getSchema=function(e){return this.schemas[e]},f.prototype.validate=function(e,t,n,i){if("boolean"!==typeof t&&"object"!==typeof t||null===t)throw new c("Expected `schema` to be an object or boolean");n||(n={});var o,f=t.$id||t.id,h=r.resolve(n.base||"/",f||"");if(!i){(i=new l(t,n,[],h,Object.create(this.schemas))).schemas[h]||(i.schemas[h]=t);var p=a(h,t);for(var d in p.id){var m=p.id[d];i.schemas[d]=m}}if(n.required&&void 0===e)return(o=new s(e,t,n,i)).addError("is required, but is undefined"),o;if(!(o=this.validateSchema(e,t,n,i)))throw new Error("Result undefined");if(n.throwAll&&o.errors.length)throw new u(o);return o},f.prototype.validateSchema=function(e,t,n,r){var a=new s(e,t,n,r);if("boolean"===typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var u={schema:t,ctx:r};t.extends.forEach(this.schemaTraverser.bind(this,u)),t=u.schema,u.schema=null,u.ctx=null,u=null}else t=o.deepMerge(t,this.superResolve(t.extends,r));var f=h(t);if(f){var p=this.resolve(t,f,r),d=new l(p.subschema,n,r.path,p.switchSchema,r.schemas);return this.validateSchema(e,p.subschema,n,d)}var m=n&&n.skipAttributes||[];for(var v in t)if(!i.ignoreProperties[v]&&m.indexOf(v)<0){var g=null,y=this.attributes[v];if(y)g=y.call(this,e,t,n,r);else if(!1===n.allowUnknownAttributes)throw new c("Unsupported attribute: "+v,t);g&&a.importErrors(g)}if("function"==typeof n.rewrite){var _=n.rewrite.call(this,e,t,n,r);a.instance=_}return a},f.prototype.schemaTraverser=function(e,t){e.schema=o.deepMerge(e.schema,this.superResolve(t,e.ctx))},f.prototype.superResolve=function(e,t){var n=h(e);return n?this.resolve(e,n,t).subschema:e},f.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var i=r.parse(t),a=i&&i.hash,s=a&&a.length&&t.substr(0,t.length-a.length);if(!s||!n.schemas[s])throw new c("no such schema <"+t+">",e);var u=o.objectGetPath(n.schemas[s],a.substr(1));if(void 0===u)throw new c("no such schema "+a+" located in <"+s+">",e);return{subschema:u,switchSchema:t}},f.prototype.testType=function(e,t,n,r,i){if(void 0!==i){if(null===i)throw new c('Unexpected null in "type" keyword');if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==typeof i){var o=this.validateSchema(e,i,n,r);return void 0===o||!(o&&o.errors.length)}return!0}};var p=f.prototype.types={};p.string=function(e){return"string"==typeof e},p.number=function(e){return"number"==typeof e&&isFinite(e)},p.integer=function(e){return"number"==typeof e&&e%1===0},p.boolean=function(e){return"boolean"==typeof e},p.array=function(e){return Array.isArray(e)},p.null=function(e){return null===e},p.date=function(e){return e instanceof Date},p.any=function(e){return!0},p.object=function(e){return e&&"object"===typeof e&&!Array.isArray(e)&&!(e instanceof Date)},e.exports=f},function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function m(e){throw new RangeError(h[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function g(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return v(e,(function(e){var t="";return e>65535&&(t+=d((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=d(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function b(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))}function w(e){var t,n,r,i,o,a,s,c,l,f,h,d=[],v=e.length,g=0,y=128,x=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),d.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,a=1,s=36;i>=v&&m("invalid-input"),((c=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((u-g)/a))&&m("overflow"),g+=c*a,!(c<(l=s<=x?1:s>=x+26?26:s-x));s+=36)a>p(u/(f=36-l))&&m("overflow"),a*=f;x=b(g-o,t=d.length+1,0==o),p(g/t)>u-y&&m("overflow"),y+=p(g/t),g%=t,d.splice(g++,0,y)}return _(d)}function S(e){var t,n,r,i,o,a,s,c,l,f,h,v,g,_,w,S=[];for(v=(e=y(e)).length,t=128,n=0,o=72,a=0;a<v;++a)(h=e[a])<128&&S.push(d(h));for(r=i=S.length,i&&S.push("-");r<v;){for(s=u,a=0;a<v;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>p((u-n)/(g=r+1))&&m("overflow"),n+=(s-t)*g,t=s,a=0;a<v;++a)if((h=e[a])<t&&++n>u&&m("overflow"),h==t){for(c=n,l=36;!(c<(f=l<=o?1:l>=o+26?26:l-o));l+=36)w=c-f,_=36-f,S.push(d(x(f+w%_,0))),c=p(w/_);S.push(d(x(c,0))),o=b(n,g,r==i),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:_},decode:w,encode:S,toASCII:function(e){return g(e,(function(e){return l.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return g(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(73)(e),n(29))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(575),t.encode=t.stringify=n(576)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,m=e[l].replace(s,"%20"),v=m.indexOf(n);v>=0?(f=m.substr(0,v),h=m.substr(v+1)):(f=m,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";var r=n(74),i=r.ValidatorResult,o=r.SchemaError,a={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},s=a.validators={};function u(e,t,n,r,i){var o=t.throwError,a=t.throwAll;t.throwError=!1,t.throwAll=!1;var s=this.validateSchema(e,i,t,n);return t.throwError=o,t.throwAll=a,!s.valid&&r instanceof Function&&r(s),s.valid}function c(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function l(e,t,n,r,i,o){if(this.types.object(e)&&(!t.properties||void 0===t.properties[i]))if(!1===t.additionalProperties)o.addError({name:"additionalProperties",argument:i,message:"is not allowed to have the additional property "+JSON.stringify(i)});else{var a=t.additionalProperties||{};"function"==typeof n.preValidateProperty&&n.preValidateProperty(e,i,a,n,r);var s=this.validateSchema(e[i],a,n,r.makeChild(a,i));s.instance!==o.instance[i]&&(o.instance[i]=s.instance),o.importErrors(s)}}s.type=function(e,t,n,r){if(void 0===e)return null;var o=new i(e,t,n,r),a=Array.isArray(t.type)?t.type:[t.type];if(!a.some(this.testType.bind(this,e,t,n,r))){var s=a.map((function(e){if(e){var t=e.$id||e.id;return t?"<"+t+">":e+""}}));o.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return o},s.anyOf=function(e,t,n,r){if(void 0===e)return null;var a=new i(e,t,n,r),s=new i(e,t,n,r);if(!Array.isArray(t.anyOf))throw new o("anyOf must be an array");if(!t.anyOf.some(u.bind(this,e,n,r,(function(e){s.importErrors(e)})))){var c=t.anyOf.map((function(e,t){var n=e.$id||e.id;return n?"<"+n+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));n.nestedErrors&&a.importErrors(s),a.addError({name:"anyOf",argument:c,message:"is not any of "+c.join(",")})}return a},s.allOf=function(e,t,n,r){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new o("allOf must be an array");var a=new i(e,t,n,r),s=this;return t.allOf.forEach((function(t,i){var o=s.validateSchema(e,t,n,r);if(!o.valid){var u=t.$id||t.id||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+i+"]";a.addError({name:"allOf",argument:{id:u,length:o.errors.length,valid:o},message:"does not match allOf schema "+u+" with "+o.errors.length+" error[s]:"}),a.importErrors(o)}})),a},s.oneOf=function(e,t,n,r){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new o("oneOf must be an array");var a=new i(e,t,n,r),s=new i(e,t,n,r),c=t.oneOf.filter(u.bind(this,e,n,r,(function(e){s.importErrors(e)}))).length,l=t.oneOf.map((function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==c&&(n.nestedErrors&&a.importErrors(s),a.addError({name:"oneOf",argument:l,message:"is not exactly one from "+l.join(",")})),a},s.if=function(e,t,n,o){if(void 0===e)return null;if(!r.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var a,s=u.call(this,e,n,o,null,t.if),c=new i(e,t,n,o);if(s){if(void 0===t.then)return;if(!r.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,n,o.makeChild(t.then)),c.importErrors(a)}else{if(void 0===t.else)return;if(!r.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,n,o.makeChild(t.else)),c.importErrors(a)}return c},s.propertyNames=function(e,t,n,a){if(this.types.object(e)){var s=new i(e,t,n,a),u=void 0!==t.propertyNames?t.propertyNames:{};if(!r.isSchema(u))throw new o('Expected "propertyNames" to be a schema (object or boolean)');for(var l in e)if(void 0!==c(e,l)){var f=this.validateSchema(l,u,n,a.makeChild(u));s.importErrors(f)}return s}},s.properties=function(e,t,n,r){if(this.types.object(e)){var a=new i(e,t,n,r),s=t.properties||{};for(var u in s){var l=s[u];if(void 0!==l){if(null===l)throw new o('Unexpected null, expected schema in "properties"');"function"==typeof n.preValidateProperty&&n.preValidateProperty(e,u,l,n,r);var f=c(e,u),h=this.validateSchema(f,l,n,r.makeChild(l,u));h.instance!==a.instance[u]&&(a.instance[u]=h.instance),a.importErrors(h)}}return a}},s.patternProperties=function(e,t,n,r){if(this.types.object(e)){var a=new i(e,t,n,r),s=t.patternProperties||{};for(var u in e){var c=!0;for(var f in s){var h=s[f];if(void 0!==h){if(null===h)throw new o('Unexpected null, expected schema in "patternProperties"');try{var p=new RegExp(f,"u")}catch(m){p=new RegExp(f)}if(p.test(u)){c=!1,"function"==typeof n.preValidateProperty&&n.preValidateProperty(e,u,h,n,r);var d=this.validateSchema(e[u],h,n,r.makeChild(h,u));d.instance!==a.instance[u]&&(a.instance[u]=d.instance),a.importErrors(d)}}}c&&l.call(this,e,t,n,r,u,a)}return a}},s.additionalProperties=function(e,t,n,r){if(this.types.object(e)){if(t.patternProperties)return null;var o=new i(e,t,n,r);for(var a in e)l.call(this,e,t,n,r,a,o);return o}},s.minProperties=function(e,t,n,r){if(this.types.object(e)){var o=new i(e,t,n,r);return Object.keys(e).length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o}},s.maxProperties=function(e,t,n,r){if(this.types.object(e)){var o=new i(e,t,n,r);return Object.keys(e).length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o}},s.items=function(e,t,n,r){var o=this;if(this.types.array(e)&&t.items){var a=new i(e,t,n,r);return e.every((function(e,i){var s=Array.isArray(t.items)?t.items[i]||t.additionalItems:t.items;if(void 0===s)return!0;if(!1===s)return a.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=o.validateSchema(e,s,n,r.makeChild(s,i));return u.instance!==a.instance[i]&&(a.instance[i]=u.instance),a.importErrors(u),!0})),a}},s.minimum=function(e,t,n,r){if(this.types.number(e)){var o=new i(e,t,n,r);return t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),o}},s.maximum=function(e,t,n,r){if(this.types.number(e)){var o=new i(e,t,n,r);return t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),o}},s.exclusiveMinimum=function(e,t,n,r){if("boolean"!==typeof t.exclusiveMaximum&&this.types.number(e)){var o=new i(e,t,n,r);return e>t.exclusiveMinimum||o.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),o}},s.exclusiveMaximum=function(e,t,n,r){if("boolean"!==typeof t.exclusiveMaximum&&this.types.number(e)){var o=new i(e,t,n,r);return e<t.exclusiveMaximum||o.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),o}};var f=function(e,t,n,a,s,u){if(this.types.number(e)){var c=t[s];if(0==c)throw new o(s+" cannot be zero");var l=new i(e,t,n,a),f=r.getDecimalPlaces(e),h=r.getDecimalPlaces(c),p=Math.max(f,h),d=Math.pow(10,p);return Math.round(e*d)%Math.round(c*d)!==0&&l.addError({name:s,argument:c,message:u+JSON.stringify(c)}),l}};function h(e,t,n){var i,o=n.length;for(i=t+1;i<o;i++)if(r.deepCompareStrict(e,n[i]))return!1;return!0}s.multipleOf=function(e,t,n,r){return f.call(this,e,t,n,r,"multipleOf","is not a multiple of (divisible by) ")},s.divisibleBy=function(e,t,n,r){return f.call(this,e,t,n,r,"divisibleBy","is not divisible by (multiple of) ")},s.required=function(e,t,n,r){var o=new i(e,t,n,r);return void 0===e&&!0===t.required?o.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){void 0===c(e,t)&&o.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),o},s.pattern=function(e,t,n,r){if(this.types.string(e)){var o=new i(e,t,n,r),a=t.pattern;try{var s=new RegExp(a,"u")}catch(u){s=new RegExp(a)}return e.match(s)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),o}},s.format=function(e,t,n,o){if(void 0!==e){var a=new i(e,t,n,o);return a.disableFormat||r.isFormat(e,t.format,this)||a.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),a}},s.minLength=function(e,t,n,r){if(this.types.string(e)){var o=new i(e,t,n,r),a=e.match(/[\uDC00-\uDFFF]/g);return e.length-(a?a.length:0)>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o}},s.maxLength=function(e,t,n,r){if(this.types.string(e)){var o=new i(e,t,n,r),a=e.match(/[\uDC00-\uDFFF]/g);return e.length-(a?a.length:0)<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o}},s.minItems=function(e,t,n,r){if(this.types.array(e)){var o=new i(e,t,n,r);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o}},s.maxItems=function(e,t,n,r){if(this.types.array(e)){var o=new i(e,t,n,r);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o}},s.uniqueItems=function(e,t,n,r){if(!0===t.uniqueItems&&this.types.array(e)){var o=new i(e,t,n,r);return e.every(h)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}},s.dependencies=function(e,t,n,r){if(this.types.object(e)){var o=new i(e,t,n,r);for(var a in t.dependencies)if(void 0!==e[a]){var s=t.dependencies[a],u=r.makeChild(s,a);if("string"==typeof s&&(s=[s]),Array.isArray(s))s.forEach((function(t){void 0===e[t]&&o.addError({name:"dependencies",argument:u.propertyPath,message:"property "+t+" not found, required by "+u.propertyPath})}));else{var c=this.validateSchema(e,s,n,u);o.instance!==c.instance&&(o.instance=c.instance),c&&c.errors.length&&(o.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),o.importErrors(c))}}return o}},s.enum=function(e,t,n,a){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new o("enum expects an array",t);var s=new i(e,t,n,a);return t.enum.some(r.deepCompareStrict.bind(null,e))||s.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),s},s.const=function(e,t,n,o){if(void 0===e)return null;var a=new i(e,t,n,o);return r.deepCompareStrict(t.const,e)||a.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),a},s.not=s.disallow=function(e,t,n,r){var o=this;if(void 0===e)return null;var a=new i(e,t,n,r),s=t.not||t.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach((function(i){if(o.testType(e,t,n,r,i)){var s=i&&(i.$id||i.id)||i;a.addError({name:"not",argument:s,message:"is of prohibited type "+s})}})),a):null},e.exports=a},function(e,t,n){var r=n(276),i=n(579);e.exports=function(e,t,n){return r(i,e,t,n)}},function(e,t,n){e.exports={ary:n(580),assign:n(296),clone:n(616),curry:n(661),forEach:n(178),isArray:n(43),isError:n(662),isFunction:n(174),isWeakMap:n(664),iteratee:n(665),keys:n(301),rearg:n(691),toInteger:n(295),toPath:n(697)}},function(e,t,n){var r=n(172);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},function(e,t,n){var r=n(174),i=n(584),o=n(65),a=n(282),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},function(e,t,n){var r=n(84),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(585),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(37)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(123),i=n(37);e.exports=function(e,t,n){var o=1&t,a=r(e);return function t(){var r=this&&this!==i&&this instanceof t?a:e;return r.apply(o?n:this,arguments)}}},function(e,t,n){var r=n(175),i=n(123),o=n(283),a=n(286),s=n(294),u=n(180),c=n(37);e.exports=function(e,t,n){var l=i(e);return function i(){for(var f=arguments.length,h=Array(f),p=f,d=s(i);p--;)h[p]=arguments[p];var m=f<3&&h[0]!==d&&h[f-1]!==d?[]:u(h,d);if((f-=m.length)<n)return a(e,t,o,i.placeholder,void 0,h,m,void 0,void 0,n-f);var v=this&&this!==c&&this instanceof i?l:e;return r(v,this,h)}}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},function(e,t,n){var r=n(176),i=n(287),o=n(592),a=n(594);e.exports=function(e){var t=o(e),n=a[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=i(n);return!!s&&e===s[0]}},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(593),i=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=i.call(r,t)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==e)return a.name}return t}},function(e,t){e.exports={}},function(e,t,n){var r=n(176),i=n(288),o=n(177),a=n(43),s=n(51),u=n(595),c=Object.prototype.hasOwnProperty;function l(e){if(s(e)&&!a(e)&&!(e instanceof r)){if(e instanceof i)return e;if(c.call(e,"__wrapped__"))return u(e)}return new i(e)}l.prototype=o.prototype,l.prototype.constructor=l,e.exports=l},function(e,t,n){var r=n(176),i=n(288),o=n(125);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},function(e,t,n){var r=n(599),i=n(293),o=n(173),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(178),i=n(601),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(o,(function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)})),e.sort()}},function(e,t,n){var r=n(602);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(603),i=n(604),o=n(605);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!==e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(125),i=n(179),o=Math.min;e.exports=function(e,t){for(var n=e.length,a=o(t.length,n),s=r(e);a--;){var u=t[a];e[a]=i(u,n)?s[u]:void 0}return e}},function(e,t,n){var r=n(175),i=n(123),o=n(37);e.exports=function(e,t,n,a){var s=1&t,u=i(e);return function t(){for(var i=-1,c=arguments.length,l=-1,f=a.length,h=Array(f+c),p=this&&this!==o&&this instanceof t?u:e;++l<f;)h[l]=a[l];for(;c--;)h[l++]=arguments[++i];return r(p,s?n:this,h)}}},function(e,t,n){var r=n(284),i=n(285),o=n(180),a=Math.min;e.exports=function(e,t){var n=e[1],s=t[1],u=n|s,c=u<131,l=128==s&&8==n||128==s&&256==n&&e[7].length<=t[8]||384==s&&t[7].length<=t[8]&&8==n;if(!c&&!l)return e;1&s&&(e[2]=t[2],u|=1&n?0:4);var f=t[3];if(f){var h=e[3];e[3]=h?r(h,f,t[4]):f,e[4]=h?o(e[3],"__lodash_placeholder__"):t[4]}return(f=t[5])&&(h=e[5],e[5]=h?i(h,f,t[6]):f,e[6]=h?o(e[5],"__lodash_placeholder__"):t[6]),(f=t[7])&&(e[7]=f),128&s&&(e[8]=null==e[8]?t[8]:a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}},function(e,t,n){var r=n(610);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},function(e,t,n){var r=n(65),i=n(100),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(76),i=n(51);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(76),i=n(184),o=n(51),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(302)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(304);e.exports=function(e){return r(e,4)}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(129),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(129);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(129);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(129);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(128);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(128),i=n(189),o=n(190);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(628),i=n(128),o=n(189);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(629),i=n(630),o=n(631),a=n(632),s=n(633);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(130);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(130),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(130),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(130);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(131);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(131);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(131);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(131);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(126),i=n(191);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(65),i=n(187),o=n(641),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(37),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(73)(e))},function(e,t,n){var r=n(126),i=n(192);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t,n){var r=n(126),i=n(306);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(308),i=n(306),o=n(191);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(75)(n(37),"DataView");e.exports=r},function(e,t,n){var r=n(75)(n(37),"Promise");e.exports=r},function(e,t,n){var r=n(75)(n(37),"Set");e.exports=r},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(195),i=n(652),o=n(653),a=n(654),s=n(655);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return o(e);case"[object Set]":return new u;case"[object Symbol]":return a(e)}}},function(e,t,n){var r=n(195);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(84),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(195);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(124),i=n(194),o=n(187);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(658),i=n(185),o=n(186),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(101),i=n(51);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(660),i=n(185),o=n(186),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(101),i=n(51);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(e,t,n){var r=n(172);function i(e,t,n){var o=r(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return o.placeholder=i.placeholder,o}i.placeholder={},e.exports=i},function(e,t,n){var r=n(76),i=n(51),o=n(663);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},function(e,t,n){var r=n(76),i=n(194),o=n(51),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(e,t,n){var r=n(101),i=n(51);e.exports=function(e){return i(e)&&"[object WeakMap]"==r(e)}},function(e,t,n){var r=n(304),i=n(666);e.exports=function(e){return i("function"==typeof e?e:r(e,1))}},function(e,t,n){var r=n(667),i=n(680),o=n(173),a=n(43),s=n(688);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(668),i=n(679),o=n(312);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(188),i=n(196);e.exports=function(e,t,n,o){var a=n.length,s=a,u=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var l=(c=n[a])[0],f=e[l],h=c[1];if(u&&c[2]){if(void 0===f&&!(l in e))return!1}else{var p=new r;if(o)var d=o(f,h,l,e,t,p);if(!(void 0===d?i(h,f,3,o,p):d))return!1}}return!0}},function(e,t,n){var r=n(188),i=n(310),o=n(675),a=n(678),s=n(101),u=n(43),c=n(183),l=n(300),f="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,d,m){var v=u(e),g=u(t),y=v?"[object Array]":s(e),_=g?"[object Array]":s(t),x=(y="[object Arguments]"==y?f:y)==f,b=(_="[object Arguments]"==_?f:_)==f,w=y==_;if(w&&c(e)){if(!c(t))return!1;v=!0,x=!1}if(w&&!x)return m||(m=new r),v||l(e)?i(e,t,n,p,d,m):o(e,t,y,n,p,d,m);if(!(1&n)){var S=x&&h.call(e,"__wrapped__"),E=b&&h.call(t,"__wrapped__");if(S||E){var T=S?e.value():e,A=E?t.value():t;return m||(m=new r),d(T,A,n,p,m)}}return!!w&&(m||(m=new r),a(e,t,n,p,d,m))}},function(e,t,n){var r=n(190),i=n(671),o=n(672);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(84),i=n(309),o=n(181),a=n(310),s=n(676),u=n(677),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),e.size!=t.size&&!d)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var v=a(p(e),p(t),r,c,f,h);return h.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(307),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var f=l;f--;){var h=c[f];if(!(u?h in t:i.call(t,h)))return!1}var p=s.get(e),d=s.get(t);if(p&&d)return p==t&&d==e;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++f<l;){var g=e[h=c[f]],y=t[h];if(o)var _=u?o(y,g,h,t,e,s):o(g,y,h,e,t,s);if(!(void 0===_?g===y||a(g,y,n,o,s):_)){m=!1;break}v||(v="constructor"==h)}if(m&&!v){var x=e.constructor,b=t.constructor;x==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(m=!1)}return s.delete(e),s.delete(t),m}},function(e,t,n){var r=n(311),i=n(127);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(196),i=n(681),o=n(685),a=n(197),s=n(311),u=n(312),c=n(102);e.exports=function(e,t){return a(e)&&s(t)?u(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},function(e,t,n){var r=n(313);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(683);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(190);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(84),i=n(317),o=n(43),a=n(100),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t,n){var r=n(686),i=n(687);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(314),i=n(182),o=n(43),a=n(179),s=n(184),u=n(102);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var h=u(t[c]);if(!(f=null!=e&&n(e,h)))break;e=e[h]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&s(l)&&a(h,l)&&(o(e)||i(e))}},function(e,t,n){var r=n(689),i=n(690),o=n(197),a=n(102);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(313);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(172),i=n(692),o=i((function(e,t){return r(e,256,void 0,void 0,void 0,t)}));e.exports=o},function(e,t,n){var r=n(693),i=n(696),o=n(292);e.exports=function(e){return o(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(694);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(193),i=n(695);e.exports=function e(t,n,o,a,s){var u=-1,c=t.length;for(o||(o=i),s||(s=[]);++u<c;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(e,t,n){var r=n(84),i=n(182),o=n(43),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(175),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);++a<s;)u[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(u),r(e,this,c)}}},function(e,t,n){var r=n(317),i=n(125),o=n(43),a=n(100),s=n(315),u=n(102),c=n(316);e.exports=function(e){return o(e)?r(e,u):a(e)?[e]:i(s(c(e)))}},function(e,t,n){var r=n(196);e.exports=function(e,t){return r(e,t)}},function(e,t,n){(function(e){!function(t){"use strict";function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":S(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,p){p=p||[];var d=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(d,h))return;if("object"===("undefined"==typeof r?"undefined":S(r))){if(r.prefilter&&r.prefilter(d,h))return;if(r.normalize){var m=r.normalize(d,h,e,t);m&&(e=m[0],t=m[1])}}}d.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var v="undefined"==typeof e?"undefined":S(e),g="undefined"==typeof t?"undefined":S(t),y="undefined"!==v||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(h),_="undefined"!==g||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(h);if(!y&&_)n(new o(d,t));else if(!_&&y)n(new a(d,e));else if(c(e)!==c(t))n(new i(d,e,t));else if("date"===c(e)&&e-t!==0)n(new i(d,e,t));else if("object"===v&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(d,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var x;for(e.length,x=0;x<e.length;x++)x>=t.length?n(new s(d,x,new a(void 0,e[x]))):l(e[x],t[x],n,r,d,x,p);for(;x<t.length;)n(new s(d,x,new o(void 0,t[x++])))}else{var b=Object.keys(e),w=Object.keys(t);b.forEach((function(i,o){var a=w.indexOf(i);a>=0?(l(e[i],t[i],n,r,d,i,p),w=u(w,a)):l(e[i],void 0,n,r,d,i,p)})),w.forEach((function(e){l(void 0,t[e],n,r,d,e,p)}))}p.length=p.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||n(new i(d,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=u(t,n);break;case"E":case"N":t[n]=r.rhs}return t}(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e){return"color: "+A[e].color+"; font-weight: bold"}function d(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}(e);n.log.apply(n,["%c "+A[t].text,p(t)].concat(E(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function m(e,t,n,r){switch("undefined"==typeof e?"undefined":S(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,E(n)):e[r];case"function":return e(t);default:return e}}function v(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,o=void 0===i?function(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}(t):i,a=t.collapsed,s=t.colors,u=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,p=i.startedTime,v=i.action,g=i.prevState,y=i.error,_=i.took,x=i.nextState,w=e[f+1];w&&(x=w.prevState,_=w.started-h);var S=r(v),E="function"==typeof a?a((function(){return x}),v,i):a,T=b(p),A=s.title?"color: "+s.title(S)+";":"",M=["color: gray; font-weight: lighter;"];M.push(A),t.timestamp&&M.push("color: gray; font-weight: lighter;"),t.duration&&M.push("color: gray; font-weight: lighter;");var C=o(S,T,_);try{E?s.title&&l?n.groupCollapsed.apply(n,["%c "+C].concat(M)):n.groupCollapsed(C):s.title&&l?n.group.apply(n,["%c "+C].concat(M)):n.group(C)}catch(e){n.log(C)}var k=m(u,S,[g],"prevState"),R=m(u,S,[S],"action"),P=m(u,S,[y,g],"error"),L=m(u,S,[x],"nextState");if(k)if(s.prevState){var O="color: "+s.prevState(g)+"; font-weight: bold";n[k]("%c prev state",O,g)}else n[k]("prev state",g);if(R)if(s.action){var I="color: "+s.action(S)+"; font-weight: bold";n[R]("%c action    ",I,S)}else n[R]("action    ",S);if(y&&P)if(s.error){var N="color: "+s.error(y,g)+"; font-weight: bold;";n[P]("%c error     ",N,y)}else n[P]("error     ",y);if(L)if(s.nextState){var D="color: "+s.nextState(x)+"; font-weight: bold";n[L]("%c next state",D,x)}else n[L]("next state",x);c&&d(g,x,n,E);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},M,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof o&&!o(n,c))return e(c);var l={};u.push(l),l.started=w.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(a)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=w.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof s?s(n,c):t.diff;if(v(u,Object.assign({},t,{diff:h})),u.length=0,l.error)throw l.error;return f}}}}var y,_,x=function(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e},b=function(e){return x(e.getHours(),2)+":"+x(e.getMinutes(),2)+":"+x(e.getSeconds(),2)+"."+x(e.getMilliseconds(),3)},w="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},T=[];y="object"===("undefined"==typeof e?"undefined":S(e))&&e?e:"undefined"!=typeof window?window:{},(_=y.DeepDiff)&&T.push((function(){"undefined"!=typeof _&&y.DeepDiff===f&&(y.DeepDiff=_,_=void 0)})),n(i,r),n(o,r),n(a,r),n(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||h(e,t,r)}))},enumerable:!0},applyChange:{value:h,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var i,o=t[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":e(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":t[n]=r.lhs;break;case"N":t=u(t,n)}return t}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof _},enumerable:!0},noConflict:{value:function(){return T&&(T.forEach((function(e){e()})),T=null),f},enumerable:!0}});var A={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},M={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?g()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=M,t.createLogger=g,t.logger=C,t.default=C,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(29))},function(e,t,n){"use strict";var r=n(701),i=n(702),o=n(703),a=n(704),s=n(705),u=n(707);e.exports=function e(){var t=[],n=s(),i={},y=!1,_=-1;return x.data=function(e,t){if("string"===typeof e)return 2===arguments.length?(m("data",y),i[e]=t,x):l.call(i,e)&&i[e]||null;if(e)return m("data",y),i=e,x;return i},x.freeze=b,x.attachers=t,x.use=function(e){var n;if(m("use",y),null===e||void 0===e);else if("function"===typeof e)l.apply(null,arguments);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u(e):r(e)}n&&(i.settings=o(i.settings||{},n));return x;function r(e){u(e.plugins),e.settings&&(n=o(n||{},e.settings))}function s(e){if("function"===typeof e)l(e);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?l.apply(null,e):r(e)}}function u(e){var t,n;if(null===e||void 0===e);else{if("object"!==typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(t=e.length,n=-1;++n<t;)s(e[n])}}function l(e,n){var r=w(e);r?(a(r[1])&&a(n)&&(n=o(r[1],n)),r[1]=n):t.push(c.call(arguments))}},x.parse=function(e){var t,n=u(e);if(b(),p("parse",t=x.Parser),h(t,"parse"))return new t(String(n),n).parse();return t(String(n),n)},x.stringify=function(e,t){var n,r=u(t);if(b(),d("stringify",n=x.Compiler),v(e),h(n,"compile"))return new n(e,r).compile();return n(e,r)},x.run=S,x.runSync=function(e,t){var n,i=!1;return S(e,t,(function(e,t){i=!0,r(e),n=t})),g("runSync","run",i),n},x.process=E,x.processSync=function(e){var t,n=!1;return b(),p("processSync",x.Parser),d("processSync",x.Compiler),E(t=u(e),(function(e){n=!0,r(e)})),g("processSync","process",n),t},x;function x(){for(var n=e(),r=t.length,a=-1;++a<r;)n.use.apply(null,t[a]);return n.data(o(!0,{},i)),n}function b(){var e,r,i,o;if(y)return x;for(;++_<t.length;)r=(e=t[_])[0],null,!1!==(i=e[1])&&(!0===i&&(e[1]=void 0),"function"===typeof(o=r.apply(x,e.slice(1)))&&n.use(o));return y=!0,_=1/0,x}function w(e){for(var n,r=t.length,i=-1;++i<r;)if((n=t[i])[0]===e)return n}function S(e,t,r){if(v(e),b(),r||"function"!==typeof t||(r=t,t=null),!r)return new Promise(i);function i(i,o){n.run(e,u(t),(function(t,n,a){n=n||e,t?o(t):i?i(n):r(null,n,a)}))}i(null,r)}function E(e,t){if(b(),p("process",x.Parser),d("process",x.Compiler),!t)return new Promise(n);function n(n,r){var i=u(e);f.run(x,{file:i},(function(e){e?r(e):n?n(i):t(null,i)}))}n(null,t)}}().freeze();var c=[].slice,l={}.hasOwnProperty,f=s().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,i){e?n(e):(t.tree=r,t.file=i,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file),r=t.file;void 0===n||null===n||("string"===typeof n||i(n)?r.contents=n:r.result=n)}));function h(e,t){return"function"===typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function p(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function d(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function v(e){if(!e||"string"!==typeof e.type)throw new Error("Expected node, got `"+e+"`")}function g(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},function(e,t,n){"use strict";e.exports=function(e){if(e)throw e}},function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},u=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;for(t in e);return"undefined"===typeof t||r.call(e,t)},c=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,o,a,f=arguments[0],h=1,p=arguments.length,d=!1;for("boolean"===typeof f&&(d=f,f=arguments[1]||{},h=2),(null==f||"object"!==typeof f&&"function"!==typeof f)&&(f={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=l(f,n),f!==(i=l(t,n))&&(d&&i&&(u(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&u(r)?r:{},c(f,{name:n,newValue:e(d,a,i)})):"undefined"!==typeof i&&c(f,{name:n,newValue:i}));return f}},function(e,t,n){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},function(e,t,n){"use strict";var r=n(706);e.exports=o,o.wrap=r;var i=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=i.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!==typeof o)throw new Error("Expected function as last argument, not "+o);function a(s){var u=e[++t],c=i.call(arguments,0),l=c.slice(1),f=n.length,h=-1;if(s)o(s);else{for(;++h<f;)null!==l[h]&&void 0!==l[h]||(l[h]=n[h]);n=l,u?r(u,a).apply(null,n):o.apply(null,[null].concat(n))}}a.apply(null,[null].concat(n))},use:function(n){if("function"!==typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},function(e,t,n){"use strict";var r=[].slice;e.exports=function(e,t){var n;return function(){var t,a=r.call(arguments,0),s=e.length>a.length;s&&a.push(i);try{t=e.apply(null,a)}catch(u){if(s&&n)throw u;return i(u)}s||(t&&"function"===typeof t.then?t.then(o,i):t instanceof Error?i(t):o(t))};function i(){n||(n=!0,t.apply(null,arguments))}function o(e){i(null,e)}}},function(e,t,n){"use strict";var r=n(708),i=n(710);e.exports=i;var o=i.prototype;o.message=function(e,t,n){var i=this.path,o=new r(e,t,n);i&&(o.name=i+":"+o.name,o.file=i);return o.fatal=!1,this.messages.push(o),o},o.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},o.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},function(e,t,n){"use strict";var r=n(709);function i(){}e.exports=a,i.prototype=Error.prototype,a.prototype=new i;var o=a.prototype;function a(e,t,n){var i,o,a;"string"===typeof t&&(n=t,t=null),i=function(e){var t,n=[null,null];"string"===typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=r(t)||"1:1",a={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(a=t,t=t.start):a.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=a,this.source=i[0],this.ruleId=i[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},function(e,t,n){"use strict";var r={}.hasOwnProperty;function i(e){return e&&"object"===typeof e||(e={}),a(e.line)+":"+a(e.column)}function o(e){return e&&"object"===typeof e||(e={}),i(e.start)+"-"+i(e.end)}function a(e){return e&&"number"===typeof e?e:1}e.exports=function(e){if(!e||"object"!==typeof e)return"";if(r.call(e,"position")||r.call(e,"type"))return o(e.position);if(r.call(e,"start")||r.call(e,"end"))return o(e);if(r.call(e,"line")||r.call(e,"column"))return i(e);return""}},function(e,t,n){"use strict";(function(t){var r=n(318),i=n(711),o=n(712);e.exports=c;var a={}.hasOwnProperty,s=c.prototype,u=["history","path","basename","stem","extname","dirname"];function c(e){var n,r,i;if(e){if("string"===typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof c))return new c(e);for(this.data={},this.messages=[],this.history=[],this.cwd=t.cwd(),r=-1,i=u.length;++r<i;)n=u[r],a.call(e,n)&&(this[n]=e[n]);for(n in e)-1===u.indexOf(n)&&(this[n]=e[n])}function l(e,t){if(-1!==e.indexOf(r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+r.sep+"`")}function f(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function h(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}s.toString=function(e){var t=this.contents||"";return o(t)?t.toString(e):String(t)},Object.defineProperty(s,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){f(e,"path"),e!==this.path&&this.history.push(e)}}),Object.defineProperty(s,"dirname",{get:function(){return"string"===typeof this.path?r.dirname(this.path):void 0},set:function(e){h(this.path,"dirname"),this.path=r.join(e||"",this.basename)}}),Object.defineProperty(s,"basename",{get:function(){return"string"===typeof this.path?r.basename(this.path):void 0},set:function(e){f(e,"basename"),l(e,"basename"),this.path=r.join(this.dirname||"",e)}}),Object.defineProperty(s,"extname",{get:function(){return"string"===typeof this.path?r.extname(this.path):void 0},set:function(e){var t=e||"";if(l(t,"extname"),h(this.path,"extname"),t){if("."!==t.charAt(0))throw new Error("`extname` must start with `.`");if(-1!==t.indexOf(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=i(this.path,t)}}),Object.defineProperty(s,"stem",{get:function(){return"string"===typeof this.path?r.basename(this.path,this.extname):void 0},set:function(e){f(e,"stem"),l(e,"stem"),this.path=r.join(this.dirname||"",e+(this.extname||""))}})}).call(this,n(132))},function(e,t,n){"use strict";var r=n(318);e.exports=function(e,t){if("string"!==typeof e)return e;if(0===e.length)return e;var n=r.basename(e,r.extname(e))+t;return r.join(r.dirname(e),n)}},function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";e.exports=function(e){var t=this;this.Parser=function(n){return r(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}};var r=n(714)},function(e,t,n){"use strict";e.exports=n(715)},function(e,t,n){"use strict";e.exports=function(e,t,n){"string"!==typeof t&&(n=t,t=void 0);return function(e){var t=e||{},n=function(e,t){var n=t.length,r=-1;for(;++r<n;)f(e,t[r]);return e}({canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:d(C),autolinkProtocol:x,autolinkEmail:x,atxHeading:d(T),blockQuote:d((function(){return{type:"blockquote",children:[]}})),characterEscape:x,characterReference:x,codeFenced:d(E),codeFencedFenceInfo:m,codeFencedFenceMeta:m,codeIndented:d(E,m),codeText:d((function(){return{type:"inlineCode",value:""}}),m),codeTextData:x,data:x,codeFlowValue:x,definition:d((function(){return{type:"definition",identifier:"",label:null,title:null,url:""}})),definitionDestinationString:m,definitionLabelString:m,definitionTitleString:m,emphasis:d((function(){return{type:"emphasis",children:[]}})),hardBreakEscape:d(A),hardBreakTrailing:d(A),htmlFlow:d(M,m),htmlFlowData:x,htmlText:d(M,m),htmlTextData:x,image:d((function(){return{type:"image",title:null,url:"",alt:null}})),label:m,link:d(C),listItem:d((function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}})),listItemValue:function(e){h("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),l("expectingFirstListItemValue"))},listOrdered:d(k,(function(){l("expectingFirstListItemValue",!0)})),listUnordered:d(k),paragraph:d((function(){return{type:"paragraph",children:[]}})),reference:function(){l("referenceType","collapsed")},referenceString:m,resourceDestinationString:m,resourceTitleString:m,setextHeading:d(T),strong:d((function(){return{type:"strong",children:[]}})),thematicBreak:d((function(){return{type:"thematicBreak"}}))},exit:{atxHeading:g(),atxHeadingSequence:function(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)},autolink:g(),autolinkEmail:function(e){b.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){b.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:g(),characterEscapeValue:b,characterReferenceMarkerHexadecimal:S,characterReferenceMarkerNumeric:S,characterReferenceValue:g((function(e){var t,n=this.sliceSerialize(e),i=h("characterReferenceType");i?(t=s(n,"characterReferenceMarkerNumeric"===i?10:16),l("characterReferenceType")):t=r(n);this.stack[this.stack.length-1].value+=t})),codeFenced:g((function(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l("flowCodeInside")})),codeFencedFence:function(){if(h("flowCodeInside"))return;this.buffer(),l("flowCodeInside",!0)},codeFencedFenceInfo:function(){var e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){var e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:b,codeIndented:g((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeText:g((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeTextData:b,data:b,definition:g(),definitionDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=a(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:g(),hardBreakEscape:g(w),hardBreakTrailing:g(w),htmlFlow:g((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlFlowData:b,htmlText:g((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlTextData:b,image:g((function(){var e=this.stack[this.stack.length-1];h("inReference")?(e.type+="Reference",e.referenceType=h("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType);l("referenceType")})),label:function(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,l("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t},labelText:function(e){this.stack[this.stack.length-2].identifier=a(this.sliceSerialize(e)).toLowerCase()},lineEnding:function(e){var t=this.stack[this.stack.length-1];if(h("atHardBreak"))return t.children[t.children.length-1].position.end=p(e.end),void l("atHardBreak");if(h("setextHeadingSlurpLineEnding"))return;-1!==n.canContainEols.indexOf(t.type)&&(x.call(this,e),b.call(this,e))},link:g((function(){var e=this.stack[this.stack.length-1];h("inReference")?(e.type+="Reference",e.referenceType=h("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType);l("referenceType")})),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=a(this.sliceSerialize(e)).toLowerCase(),l("referenceType","full")},resourceDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){l("inReference")},setextHeading:g((function(){l("setextHeadingSlurpLineEnding")})),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2},setextHeadingText:function(){l("setextHeadingSlurpLineEnding",!0)},strong:g(),thematicBreak:g()}},t.mdastExtensions||[]),u={};return function(e){var t,r,i,a,s=[{type:"root",children:[]}],u=-1,f=[];for(;++u<e.length;)"listOrdered"!==(a=e[u])[1].type&&"listUnordered"!==a[1].type||("enter"===a[0]?f.push(u):(i=f.pop(u),u=c(e,i,u)));u=-1,t=e.length;for(;++u<t;)r=n[e[u][0]],o.call(r,e[u][1].type)&&r[e[u][1].type].call({stack:s,config:n,enter:v,exit:y,buffer:m,resume:_,sliceSerialize:e[u][2].sliceSerialize,setData:l,getData:h},e[u][1]);return s[0].position={start:p(t?e[0][1].start:{line:1,column:1,offset:0}),end:p(t?e[e.length-2][1].end:{line:1,column:1,offset:0})},s[0]};function c(e,t,n){for(var r,i,o,a,s,u,c,l=t-1,f=-1,h=!1;++l<=n;)if("listUnordered"===(s=e[l])[1].type||"listOrdered"===s[1].type||"blockQuote"===s[1].type?("enter"===s[0]?f++:f--,c=void 0):"lineEndingBlank"===s[1].type?"enter"===s[0]&&(!r||c||f||u||(u=l),c=void 0):"linePrefix"===s[1].type||"listItemValue"===s[1].type||"listItemMarker"===s[1].type||"listItemPrefix"===s[1].type||"listItemPrefixWhitespace"===s[1].type||(c=void 0),!f&&"enter"===s[0]&&"listItemPrefix"===s[1].type||-1===f&&"exit"===s[0]&&("listUnordered"===s[1].type||"listOrdered"===s[1].type)){if(r){for(i=l,o=void 0;i--;)if("lineEnding"===(a=e[i])[1].type||"lineEndingBlank"===a[1].type){if("exit"===a[0])continue;o&&(e[o][1].type="lineEndingBlank",h=!0),a[1].type="lineEnding",o=i}else if("linePrefix"!==a[1].type&&"blockQuotePrefix"!==a[1].type&&"blockQuotePrefixWhitespace"!==a[1].type&&"blockQuoteMarker"!==a[1].type&&"listItemIndent"!==a[1].type)break;u&&(!o||u<o)&&(r._spread=!0),r.end=p(o?e[o][1].start:s[1].end),e.splice(o||l,0,["exit",r,s[2]]),l++,n++}"listItemPrefix"===s[1].type&&(r={type:"listItem",_spread:!1,start:p(s[1].start)},e.splice(l,0,["enter",r,s[2]]),l++,n++,u=void 0,c=!0)}return e[t][1]._spread=h,n}function l(e,t){u[e]=t}function h(e){return u[e]}function p(e){return{line:e.line,column:e.column,offset:e.offset}}function d(e,t){return function(n){v.call(this,e(n),n),t&&t.call(this,n)}}function m(){this.stack.push({type:"fragment",children:[]})}function v(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),e.position={start:p(t.start)},e}function g(e){return function(t){e&&e.call(this,t);y.call(this,t)}}function y(e){var t=this.stack.pop();return t.position.end=p(e.end),t}function _(){return i(this.stack.pop())}function x(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:p(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function b(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=p(e.end)}function w(){l("atHardBreak",!0)}function S(e){l("characterReferenceType",e.type)}function E(){return{type:"code",lang:null,meta:null,value:""}}function T(){return{type:"heading",depth:void 0,children:[]}}function A(){return{type:"break"}}function M(){return{type:"html",value:""}}function C(){return{type:"link",title:null,url:"",children:[]}}function k(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(l(u(n).document().write(c()(e,t,!0))))};var r=n(319),i=n(716),o=n(320),a=n(199),s=n(717),u=n(718),c=n(754),l=n(755);function f(e,t){var n,r,i;for(n in t)r=o.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n?e[n]=[].concat(r,i):Object.assign(r,i)}},function(e,t,n){"use strict";function r(e){return e&&(e.value||e.alt||e.title||"children"in e&&i(e.children)||"length"in e&&i(e))||""}function i(e){for(var t=[],n=e.length,i=-1;++i<n;)t[i]=r(e[i]);return t.join("")}e.exports=r},function(e,t,n){e.exports=function(e,t){var n=parseInt(e,t);if(n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111)return"\ufffd";return r(n)};var r=n(133)},function(e,t,n){e.exports=function(e){var t={defined:[],constructs:c([s].concat(l((e||{}).extensions))),content:n(r),document:n(i),flow:n(o),string:n(a.string),text:n(a.text)};return t;function n(e){return function(n){return u(t,e,n)}}};var r=n(719),i=n(720),o=n(721),a=n(323),s=n(723),u=n(751),c=n(332),l=n(201)},function(e,t,n){t.tokenize=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),o(t)}));return n;function o(n){var r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,a(n)}function a(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):r(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),a)}};var r=n(26),i=n(27)},function(e,t,n){t.tokenize=function(e){var t,n,i,u=this,c=[],l=0;return f;function f(t){return l<c.length?(u.containerState=c[l][1],e.attempt(c[l][0].continuation,h,p)(t)):p(t)}function h(e){return l++,f(e)}function p(r){return t&&t.flowContinue?m(r):(u.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,u.containerState={},e.attempt(a,d,m)(r))}function d(e){return c.push([u.currentConstruct,u.containerState]),u.containerState=void 0,p(e)}function m(t){return null===t?(_(0,!0),void e.consume(t)):(n=n||u.parser.flow(u.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:n}),v(t))}function v(t){return null===t?(y(e.exit("chunkFlow")),m(t)):r(t)?(e.consume(t),y(e.exit("chunkFlow")),e.check({tokenize:x,partial:!0},g)):(e.consume(t),v)}function g(e){return _(t.continued,t&&t.flowEnd),l=0,f(e)}function y(e){i&&(i.next=e),i=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(u.sliceStream(e))}function _(t,r){var o=c.length;for(n&&r&&(n.write([null]),i=n=void 0);o-- >t;)u.containerState=c[o][1],c[o][0].exit.call(u,e);c.length=t}function x(e,r){var i=0;return t={},l;function l(r){return i<c.length?(u.containerState=c[i][1],e.attempt(c[i][0].continuation,f,h)(r)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,m(r)):(u.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,u.containerState={},e.attempt(a,d,m)(r))}function f(e){return i++,u.containerState._closeFlow?d(e):l(e)}function h(t){return n.currentConstruct&&n.currentConstruct.lazy?(u.containerState={},e.attempt(a,d,e.attempt(s,d,e.check(o,d,p)))(t)):d(t)}function p(e){return i=c.length,t.lazy=!0,t.flowContinue=!0,m(e)}function d(e){return t.flowEnd=!0,m(e)}function m(e){return t.continued=i,u.interrupt=u.containerState=void 0,r(e)}}};var r=n(26),i=n(27),o=n(134),a={tokenize:function(e,t,n){return i(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",4)}},s={tokenize:function(e,t,n){return i(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",4)}}},function(e,t,n){t.tokenize=function(e){var t=this,n=e.attempt(i,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,a,r(e,e.attempt(this.parser.constructs.flow,a,e.attempt(o,a)),"linePrefix")));return n;function a(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}};n(26);var r=n(27),i=n(134),o=n(722)},function(e,t,n){t.tokenize=function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)};function i(t){return null===t?o(t):r(t)?e.check(s,a,o)(t):(e.consume(t),i)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),i}},t.resolve=function(e){return i(e),e},t.interruptible=!0,t.lazy=!0;var r=n(26),i=n(321),o=n(103),a=n(27),s={tokenize:function(e,t,n){var i=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a(e,s,"linePrefix")};function s(a){return null===a||r(a)?n(a):o(i.events,"linePrefix")<4?e.interrupt(i.parser.constructs.flow,n,t)(a):t(a)}},partial:!0}},function(e,t,n){var r=n(724),i=n(729),o=n(730),a=n(732),s=n(733),u=n(734),c=n(736),l=n(738),f=n(739),h=n(740),p=n(741),d=n(742),m=n(743),v=n(746),g=n(200),y=n(747),_=n(748),x=n(749),b=n(327),w=n(750),S=n(323).resolver;t.document={42:a,43:a,45:a,48:a,49:a,50:a,51:a,52:a,53:a,54:a,55:a,56:a,57:a,62:s},t.contentInitial={91:p},t.flowInitial={"-2":f,"-1":f,32:f},t.flow={35:i,42:b,45:[x,b],60:m,61:x,95:b,96:l,126:l},t.string={38:c,92:u},t.text={"-5":w,"-4":w,"-3":w,33:y,38:c,42:r,60:[o,v],91:_,92:[d,u],93:g,95:r,96:h},t.insideSpan={null:[r,S]}},function(e,t,n){t.tokenize=function(e,t){var n,r=o(this.previous);return function(t){return e.enter("attentionSequence"),n=t,i(t)};function i(a){var s,u,c,l;return a===n?(e.consume(a),i):(s=e.exit("attentionSequence"),c=!(u=o(a))||2===u&&r,l=!r||2===r&&u,s._open=42===n?c:c&&(r||!l),s._close=42===n?l:l&&(u||!c),t(a))}},t.resolveAll=function(e,t){var n,o,u,c,l,f,h,p,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;f=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1,c={type:f>1?"strongSequence":"emphasisSequence",start:a(r(e[n][1].end),-f),end:r(e[n][1].end)},l={type:f>1?"strongSequence":"emphasisSequence",start:r(e[d][1].start),end:a(r(e[d][1].start),f)},u={type:f>1?"strongText":"emphasisText",start:r(e[n][1].end),end:r(e[d][1].start)},o={type:f>1?"strong":"emphasis",start:r(c.start),end:r(l.end)},e[n][1].end=r(c.start),e[d][1].start=r(l.end),h=[],e[n][1].end.offset-e[n][1].start.offset&&i(h,h.length,0,[["enter",e[n][1],t],["exit",e[n][1],t]]),i(h,h.length,0,[["enter",o,t],["enter",c,t],["exit",c,t],["enter",u,t]]),i(h,h.length,0,s(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),i(h,h.length,0,[["exit",u,t],["enter",l,t],["exit",l,t],["exit",o,t]]),e[d][1].end.offset-e[d][1].start.offset?(p=2,i(h,h.length,0,[["enter",e[d][1],t],["exit",e[d][1],t]])):p=0,i(e,n-1,d-n+3,h),d=n+h.length-p-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e};var r=n(77),i=n(66),o=n(324),a=n(728),s=n(136)},function(e,t,n){var r=n(726),i=n(67);e.exports=i(r)},function(e,t){e.exports=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/},function(e,t,n){var r=n(67);e.exports=r(/\s/)},function(e,t){e.exports=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e}},function(e,t,n){t.tokenize=function(e,t,n){var a=this,u=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),c(t)};function c(r){return 35===r&&u++<6?(e.consume(r),c):null===r||i(r)?(e.exit("atxHeadingSequence"),a.interrupt?t(r):l(r)):n(r)}function l(n){return 35===n?(e.enter("atxHeadingSequence"),f(n)):null===n||r(n)?(e.exit("atxHeading"),t(n)):o(n)?s(e,l,"whitespace")(n):(e.enter("atxHeadingText"),h(n))}function f(t){return 35===t?(e.consume(t),f):(e.exit("atxHeadingSequence"),l(t))}function h(t){return null===t||35===t||i(t)?(e.exit("atxHeadingText"),l(t)):(e.consume(t),h)}},t.resolve=function(e,t){var n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},a(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e};var r=n(26),i=n(57),o=n(56),a=n(66),s=n(27)},function(e,t,n){t.tokenize=function(e,t,n){var s;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),u};function u(t){return r(t)?(e.consume(t),s=1,c):o(t)?h(t):n(t)}function c(e){return 43===e||45===e||46===e||i(e)?l(e):h(e)}function l(t){return 58===t?(e.consume(t),f):(43===t||45===t||46===t||i(t))&&s++<32?(e.consume(t),l):h(t)}function f(t){return 62===t?(e.exit("autolinkProtocol"),v(t)):32===t||60===t||a(t)?n(t):(e.consume(t),f)}function h(t){return 64===t?(e.consume(t),s=0,p):o(t)?(e.consume(t),h):n(t)}function p(e){return i(e)?d(e):n(e)}function d(t){return 46===t?(e.consume(t),s=0,p):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",v(t)):m(t)}function m(t){return(45===t||i(t))&&s++<63?(e.consume(t),45===t?m:d):n(t)}function v(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}};var r=n(137),i=n(104),o=n(731),a=n(325)},function(e,t,n){var r=n(67);e.exports=r(/[#-'*+\--9=?A-Z^-~]/)},function(e,t,n){t.tokenize=function(e,t,n){var u,l=this,h=o(l.events,"linePrefix");return function(t){if((42===t||43===t||45===t)&&(!l.containerState.marker||t===l.containerState.marker))return 42===t||45===t?e.check(s,n,p)(t):p(t);if(i(t)&&(!l.containerState.type||"listOrdered"===l.containerState.type))return function(t){if(l.containerState.type||!l.interrupt||49===t)return l.containerState.type||(l.containerState.type="listOrdered",e.enter(l.containerState.type,{_container:!0})),e.enter("listItemPrefix"),e.enter("listItemValue"),e.consume(t),u=1,l.interrupt?m:d;return n(t)}(t);return n(t)};function p(t){return l.containerState.type||(l.containerState.type="listUnordered",e.enter(l.containerState.type,{_container:!0})),e.enter("listItemPrefix"),v(t)}function d(t){return i(t)&&++u<10?(e.consume(t),d):m(t)}function m(t){return e.exit("listItemValue"),41===t||46===t?v(t):n(t)}function v(t){return l.containerState.marker=l.containerState.marker||t,t===l.containerState.marker?(e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),e.check(c,l.interrupt?n:g,e.attempt({tokenize:f,partial:!0},_,y))):n(t)}function g(e){return l.containerState.initialBlankLine=!0,h++,_(e)}function y(t){return r(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),_):n(t)}function _(n){return l.containerState.size=h+a(l.sliceStream(e.exit("listItemPrefix"))),t(n)}},t.continuation={tokenize:function(e,n,i){var o=this;return o.containerState._closeFlow=void 0,e.check(c,(function(e){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,n(e)}),(function(t){if(o.containerState.furtherBlankLines||!r(t))return o.containerState.furtherBlankLines=o.containerState.initialBlankLine=void 0,a(t);return o.containerState.furtherBlankLines=o.containerState.initialBlankLine=void 0,e.attempt({tokenize:l,partial:!0},n,a)(t)}));function a(r){return o.containerState._closeFlow=!0,o.interrupt=void 0,u(e,e.attempt(t,n,i),"linePrefix",4)(r)}}},t.exit=function(e){e.exit(this.containerState.type)};var r=n(56),i=n(326),o=n(103),a=n(322),s=n(327),u=n(27),c=n(134);function l(e,t,n){var r=this;return u(e,(function(e){return o(r.events,"listItemIndent")===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)}function f(e,t,n){var i=this;return u(e,(function(e){return r(e)||!o(i.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",5)}},function(e,t,n){t.tokenize=function(e,t,n){var i=this;return function(t){if(62===t)return i.containerState.open||(e.enter("blockQuote",{_container:!0}),i.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o;return n(t)};function o(n){return r(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},t.continuation={tokenize:function(e,n,r){return i(e,e.attempt(t,n,r),"linePrefix",4)}},t.exit=function(e){e.exit("blockQuote")};var r=n(56),i=n(27)},function(e,t,n){t.tokenize=function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i};function i(i){return r(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}};var r=n(735)},function(e,t,n){var r=n(67);e.exports=r(/[!-/:-@[-`{-~]/)},function(e,t,n){t.tokenize=function(e,t,n){var s,u,c=this,l=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),f};function f(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),s=31,u=i,p(t))}function h(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,u=a,p):(e.enter("characterReferenceValue"),s=7,u=o,p(t))}function p(o){var a;return 59===o&&l?(a=e.exit("characterReferenceValue"),u!==i||r(c.sliceSerialize(a))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)):u(o)&&l++<s?(e.consume(o),p):n(o)}};var r=n(319),i=n(104),o=n(326),a=n(737)},function(e,t,n){var r=n(67);e.exports=r(/[\dA-Fa-f]/)},function(e,t,n){t.tokenize=function(e,t,n){var s,u=this,c=o(this.events,"linePrefix"),l=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),s=t,f(t)};function f(t){return t===s?(e.consume(t),l++,f):(e.exit("codeFencedFenceSequence"),l<3?n(t):a(e,h,"whitespace")(t))}function h(t){return null===t||r(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||i(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),a(e,d,"whitespace")(t)):96===t&&t===s?n(t):(e.consume(t),p)}function d(t){return null===t||r(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(t))}function m(t){return null===t||r(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===s?n(t):(e.consume(t),m)}function v(n){return e.exit("codeFencedFence"),u.interrupt?t(n):g(n)}function g(t){return null===t?_(t):r(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt({tokenize:x,partial:!0},_,c?a(e,g,"linePrefix",c+1):g)):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||r(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function _(n){return e.exit("codeFenced"),t(n)}function x(e,t,n){var i=0;return a(e,(function(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),o(t)}),"linePrefix",4);function o(t){return t===s?(e.consume(t),i++,o):i<l?n(t):(e.exit("codeFencedFenceSequence"),a(e,u,"whitespace")(t))}function u(i){return null===i||r(i)?(e.exit("codeFencedFence"),t(i)):n(i)}}},t.concrete=!0;var r=n(26),i=n(57),o=n(103),a=n(27)},function(e,t,n){t.tokenize=function(e,t,n){var i=this;return a(e,(function(t){if(o(i.events,"linePrefix")<4)return n(t);return e.enter("codeFlowValue"),c(t)}),"linePrefix",5);function u(n){return null===n?t(n):r(n)?e.attempt(s,u,t)(n):(e.enter("codeFlowValue"),c(n))}function c(t){return null===t||r(t)?(e.exit("codeFlowValue"),u(t)):(e.consume(t),c)}},t.resolve=function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return i(e,0,0,[["enter",n,t]]),i(e,e.length,0,[["exit",n,t]]),e};var r=n(26),i=n(66),o=n(103),a=n(27),s={tokenize:function(e,t,n){var i=this;return a(e,(function s(u){if(r(u))return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a(e,s,"linePrefix",5);return o(i.events,"linePrefix")<4?n(u):t(u)}),"linePrefix",5)},partial:!0}},function(e,t,n){t.tokenize=function(e,t,n){var i,o,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)};function s(t){return 96===t?(e.consume(t),a++,s):(e.exit("codeTextSequence"),u(t))}function u(t){return null===t?n(t):96===t?(o=e.enter("codeTextSequence"),i=0,l(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),u):r(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||r(t)?(e.exit("codeTextData"),u(t)):(e.consume(t),c)}function l(n){return 96===n?(e.consume(n),i++,l):i===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",c(n))}},t.resolve=function(e){var t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[r][1].type=e[i][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},t.previous=function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type};var r=n(26)},function(e,t,n){t.tokenize=function(e,t,n){var i,l=this,h=e.attempt({tokenize:f,partial:!0},u(e,d,"whitespace"),u(e,d,"whitespace"));return function(t){return e.enter("definition"),s.call(l,e,p,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function p(t){return i=o(l.sliceSerialize(l.events[l.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),c(e,a(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function d(o){return null===o||r(o)?(e.exit("definition"),l.parser.defined.indexOf(i)<0&&l.parser.defined.push(i),t(o)):n(o)}};var r=n(26),i=n(57),o=n(199),a=n(328),s=n(329),u=n(27),c=n(330),l=n(331);function f(e,t,n){return function(t){return i(t)?c(e,o)(t):n(t)};function o(t){return 34===t||39===t||40===t?l(e,u(e,a,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function a(e){return null===e||r(e)?t(e):n(e)}}},function(e,t,n){t.tokenize=function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),i};function i(i){return r(i)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(i)):n(i)}};var r=n(26)},function(e,t,n){t.tokenize=function(e,t,n){var f,p,d,m,v,g=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),y};function y(i){return 33===i?(e.consume(i),_):47===i?(e.consume(i),w):63===i?(e.consume(i),f=3,g.interrupt?t:U):r(i)?(e.consume(i),d=u(i),p=!0,S):n(i)}function _(i){return 45===i?(e.consume(i),f=2,x):91===i?(e.consume(i),f=5,d="CDATA[",m=0,b):r(i)?(e.consume(i),f=4,g.interrupt?t:U):n(i)}function x(r){return 45===r?(e.consume(r),g.interrupt?t:U):n(r)}function b(r){return r===d.charCodeAt(m++)?(e.consume(r),m===d.length?g.interrupt?t:N:b):n(r)}function w(t){return r(t)?(e.consume(t),d=u(t),S):n(t)}function S(r){return null===r||47===r||62===r||a(r)?47!==r&&p&&l.indexOf(d.toLowerCase())>-1?(f=1,g.interrupt?t(r):N(r)):c.indexOf(d.toLowerCase())>-1?(f=6,47===r?(e.consume(r),E):g.interrupt?t(r):N(r)):(f=7,g.interrupt?n(r):p?A(r):T(r)):45===r||i(r)?(e.consume(r),d+=u(r),S):n(r)}function E(r){return 62===r?(e.consume(r),g.interrupt?t:N):n(r)}function T(t){return s(t)?(e.consume(t),T):O(t)}function A(t){return 47===t?(e.consume(t),O):58===t||95===t||r(t)?(e.consume(t),M):s(t)?(e.consume(t),A):O(t)}function M(t){return 45===t||46===t||58===t||95===t||i(t)?(e.consume(t),M):C(t)}function C(t){return 61===t?(e.consume(t),k):s(t)?(e.consume(t),C):A(t)}function k(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),v=t,R):s(t)?(e.consume(t),k):(v=void 0,P(t))}function R(t){return t===v?(e.consume(t),L):null===t||o(t)?n(t):(e.consume(t),R)}function P(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||a(t)?C(t):(e.consume(t),P)}function L(e){return 47===e||62===e||s(e)?A(e):n(e)}function O(t){return 62===t?(e.consume(t),I):n(t)}function I(t){return s(t)?(e.consume(t),I):null===t||o(t)?N(t):n(t)}function N(t){return 45===t&&2===f?(e.consume(t),z):60===t&&1===f?(e.consume(t),B):62===t&&4===f?(e.consume(t),G):63===t&&3===f?(e.consume(t),U):93===t&&5===f?(e.consume(t),V):!o(t)||6!==f&&7!==f?null===t||o(t)?D(t):(e.consume(t),N):e.check(h,G,D)(t)}function D(t){return e.exit("htmlFlowData"),F(t)}function F(t){return null===t?H(t):o(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),F):(e.enter("htmlFlowData"),N(t))}function z(t){return 45===t?(e.consume(t),U):N(t)}function B(t){return 47===t?(e.consume(t),d="",j):N(t)}function j(t){return 62===t&&l.indexOf(d.toLowerCase())>-1?(e.consume(t),G):r(t)&&d.length<6?(e.consume(t),d+=u(t),j):N(t)}function V(t){return 93===t?(e.consume(t),U):N(t)}function U(t){return 62===t?(e.consume(t),G):N(t)}function G(t){return null===t||o(t)?(e.exit("htmlFlowData"),H(t)):(e.consume(t),G)}function H(n){return e.exit("htmlFlow"),t(n)}},t.resolveTo=function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},t.concrete=!0;var r=n(137),i=n(104),o=n(26),a=n(57),s=n(56),u=n(133),c=n(744),l=n(745),f=n(134),h={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(f,t,n)}},partial:!0}},function(e,t){e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t){e.exports=["pre","script","style"]},function(e,t,n){t.tokenize=function(e,t,n){var c,l,f,h;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),p};function p(t){return 33===t?(e.consume(t),d):47===t?(e.consume(t),M):63===t?(e.consume(t),T):a(t)?(e.consume(t),R):n(t)}function d(t){return 45===t?(e.consume(t),m):91===t?(e.consume(t),l="CDATA[",f=0,x):a(t)?(e.consume(t),E):n(t)}function m(t){return 45===t?(e.consume(t),v):n(t)}function v(t){return null===t||62===t?n(t):45===t?(e.consume(t),g):y(t)}function g(e){return null===e||62===e?n(e):y(e)}function y(t){return null===t?n(t):45===t?(e.consume(t),_):r(t)?(h=y,z(t)):(e.consume(t),y)}function _(t){return 45===t?(e.consume(t),j):y(t)}function x(t){return t===l.charCodeAt(f++)?(e.consume(t),f===l.length?b:x):n(t)}function b(t){return null===t?n(t):93===t?(e.consume(t),w):(e.consume(t),b)}function w(t){return 93===t?(e.consume(t),S):b(t)}function S(t){return 62===t?j(t):93===t?(e.consume(t),S):b(t)}function E(t){return null===t||62===t?j(t):r(t)?(h=E,z(t)):(e.consume(t),E)}function T(t){return null===t?n(t):63===t?(e.consume(t),A):r(t)?(h=T,z(t)):(e.consume(t),T)}function A(e){return 62===e?j(e):T(e)}function M(t){return a(t)?(e.consume(t),C):n(t)}function C(t){return 45===t||s(t)?(e.consume(t),C):k(t)}function k(t){return r(t)?(h=k,z(t)):o(t)?(e.consume(t),k):j(t)}function R(t){return 45===t||s(t)?(e.consume(t),R):47===t||62===t||i(t)?P(t):n(t)}function P(t){return 47===t?(e.consume(t),j):58===t||95===t||a(t)?(e.consume(t),L):r(t)?(h=P,z(t)):o(t)?(e.consume(t),P):j(t)}function L(t){return 45===t||46===t||58===t||95===t||s(t)?(e.consume(t),L):O(t)}function O(t){return 61===t?(e.consume(t),I):r(t)?(h=O,z(t)):o(t)?(e.consume(t),O):P(t)}function I(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,N):r(t)?(h=I,z(t)):o(t)?(e.consume(t),I):(e.consume(t),c=void 0,F)}function N(t){return t===c?(e.consume(t),D):null===t?n(t):r(t)?(h=N,z(t)):(e.consume(t),N)}function D(e){return 62===e||47===e||i(e)?P(e):n(e)}function F(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||i(t)?P(t):(e.consume(t),F)}function z(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u(e,B,"linePrefix",4)}function B(t){return e.enter("htmlTextData"),h(t)}function j(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}};var r=n(26),i=n(57),o=n(56),a=n(137),s=n(104),u=n(27)},function(e,t,n){t.tokenize=function(e,t,n){var r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},t.resolveAll=n(200).resolveAll},function(e,t,n){t.tokenize=function(e,t,n){var r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},t.resolveAll=n(200).resolveAll},function(e,t,n){t.tokenize=function(e,t,n){var i,a,s=this,u=s.events.length;for(;u--;)if("lineEnding"!==s.events[u][1].type&&"linePrefix"!==s.events[u][1].type&&"content"!==s.events[u][1].type){a="paragraph"===s.events[u][1].type;break}return function(t){if(!s.lazy&&(s.interrupt||a))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,c(t);return n(t)};function c(t){return t===i?(e.consume(t),c):(e.exit("setextHeadingLineSequence"),o(e,l,"lineSuffix")(t))}function l(i){return null===i||r(i)?(e.exit("setextHeadingLine"),t(i)):n(i)}},t.resolveTo=function(e,t){var n,r,o,a,s=e.length;for(;s--;)if("enter"===e[s][0]){if("content"===e[s][1].type){n=s;break}"paragraph"===e[s][1].type&&(r=s)}else"content"===e[s][1].type&&e.splice(s,1),o||"definition"!==e[s][1].type||(o=s);a={type:"setextHeading",start:i(e[r][1].start),end:i(e[e.length-1][1].end)},e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=i(e[o][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e};var r=n(26),i=n(77),o=n(27)},function(e,t,n){t.tokenize=function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),r(e,t,"linePrefix")}};n(26);var r=n(27)},function(e,t,n){e.exports=function(e,t,n){var f=n?a(n):{line:1,column:1,offset:0},h={},p=[],d=[],m=[],v={consume:function(e){i(e)?(f.line++,f.column=1,f.offset+=-3===e?2:1,A()):-1!==e&&(f.column++,f.offset++);f._bufferIndex<0?f._index++:(f._bufferIndex++,f._bufferIndex===d[f._index].length&&(f._bufferIndex=-1,f._index++));g.previous=e,!0},enter:function(e,t){var n=t||{};return n.type=e,n.start=x(),g.events.push(["enter",n,g]),m.push(n),n},exit:function(e){var t=m.pop();return t.end=x(),g.events.push(["exit",t,g]),t},attempt:E((function(e,t){T(e,t.from)})),check:E(S),interrupt:E(S,{interrupt:!0}),lazy:E(S,{lazy:!0})},g={previous:null,events:[],parser:e,sliceStream:_,sliceSerialize:function(e){return s(_(e))},now:x,defineSkip:function(e){h[e.line]=e.column,A()},write:function(e){if(o(d,d.length,0,e),b(),null!==d[d.length-1])return[];return T(t,0),g.events=c(p,g.events,g),g.events}},y=t.tokenize.call(g,v);t.resolveAll&&p.push(t);return f._index=0,f._bufferIndex=-1,g;function _(e){return u(d,e)}function x(){return a(f)}function b(){for(var e,t;f._index<d.length;)if("string"===typeof(t=d[f._index]))for(e=f._index,f._bufferIndex<0&&(f._bufferIndex=0);f._index===e&&f._bufferIndex<t.length;)w(t.charCodeAt(f._bufferIndex));else w(t)}function w(e){void 0,e,y=y(e)}function S(e,t){t.restore()}function E(e,t){return function(n,i,o){var a,s,u,c;return n.tokenize||"length"in n?h(l(n)):function(e){if(e in n||null in n)return h(n.null?l(n[e]).concat(l(n.null)):n[e])(e);return o(e)};function h(e){return a=e,p(e[s=0])}function p(e){return function(n){c=function(){var e=x(),t=g.previous,n=g.currentConstruct,r=g.events.length,i=Array.from(m);return{restore:function(){f=e,g.previous=t,g.currentConstruct=n,g.events.length=r,m=i,A()},from:r}}(),u=e,e.partial||(g.currentConstruct=e);return e.tokenize.call(t?r({},g,t):g,v,d,y)(n)}}function d(t){return!0,e(u,c),i}function y(e){return!0,c.restore(),++s<a.length?p(a[s]):o}}}function T(e,t){e.resolveAll&&p.indexOf(e)<0&&p.push(e),e.resolve&&o(g.events,t,g.events.length-t,e.resolve(g.events.slice(t),g)),e.resolveTo&&(g.events=e.resolveTo(g.events,g))}function A(){f.line in h&&f.column<2&&(f.column=h[f.line],f.offset+=h[f.line]-1)}};var r=n(135),i=n(26),o=n(66),a=n(77),s=n(752),u=n(753),c=n(136),l=n(201)},function(e,t,n){e.exports=function(e){var t,n,i,o=-1,a=[];for(;++o<e.length;){if("string"===typeof(t=e[o]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(i)continue;n=" "}else n=r(t);i=-2===t,a.push(n)}return a.join("")};var r=n(133)},function(e,t){e.exports=function(e,t){var n,r=t.start._index,i=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;r===o?n=[e[r].slice(i,a)]:(n=e.slice(r,o),i>-1&&(n[0]=n[0].slice(i)),a>0&&n.push(e[o].slice(0,a)));return n}},function(e,t){e.exports=function(){var e,t=!0,r=1,i="";return function(o,a,s){var u,c,l,f,h,p=[];o=i+o.toString(a),l=0,i="",t&&(65279===o.charCodeAt(0)&&l++,t=void 0);for(;l<o.length;){if(n.lastIndex=l,u=n.exec(o),f=u?u.index:o.length,h=o.charCodeAt(f),!u){i=o.slice(l);break}if(10===h&&l===f&&e)p.push(-3),e=void 0;else if(e&&(p.push(-5),e=void 0),l<f&&(p.push(o.slice(l,f)),r+=f-l),0===h)p.push(65533),r++;else if(9===h)for(c=4*Math.ceil(r/4),p.push(-2);r++<c;)p.push(-1);else 10===h?(p.push(-4),r=1):(e=!0,r=1);l=f+1}s&&(e&&p.push(-5),i&&p.push(i),p.push(null));return p}};var n=/[\0\t\n\r]/g},function(e,t,n){e.exports=function(e){for(;!r(e););return e};var r=n(321)},function(e,t,n){var r=n(757);e.exports=function(){return function(e){return r(e,"list",(function(e,t){var n,r,i=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(i+=1);for(n=0,r=e.children.length;n<r;n++){var o=e.children[n];o.index=n,o.ordered=e.ordered}e.depth=i})),e}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=[];"function"===typeof t&&(n=t,t=null);function i(e){var o;return t&&e.type!==t||(o=n(e,r.concat())),e.children&&!1!==o?function(e,t){var n,o=e.length,a=-1;r.push(t);for(;++a<o;)if((n=e[a])&&!1===i(n))return!1;return r.pop(),!0}(e.children,e):o}i(e)}},function(e,t,n){"use strict";var r=n(138),i=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,o=/^<(\/?)([a-z]+)\s*>$/;e.exports=function(e){var t,n;return r(e,"html",(function(e,r,a){n!==a&&(t=[],n=a);var s=function(e){var t=e.value.match(i);return!!t&&t[1]}(e);if(s)return a.children.splice(r,1,{type:"virtualHtml",tag:s,position:e.position}),!0;var u=function(e,t){var n=e.value.match(o);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!u)return!0;var c=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,u.tag);return c?a.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),i=n.children.indexOf(t.node),o=n.children.splice(r,i-r+1).slice(1,-1);return{type:"virtualHtml",children:o,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(u,c,a)):u.opening||t.push(u),!0}),!0),e}},function(e,t,n){"use strict";e.exports=o;var r=n(760),i=n(761);function o(e,t,n,o){var a,s;"function"===typeof t&&"function"!==typeof n&&(o=n,n=t,t=null),s=r(t),a=o?-1:1,function e(r,u,c){var l,f="object"===typeof r&&null!==r?r:{};"string"===typeof f.type&&(l="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,h.displayName="node ("+i(f.type+(l?"<"+l+">":""))+")");return h;function h(){var i,l,f=c.concat(r),h=[];if((!t||s(r,u,c[c.length-1]||null))&&!1===(h=function(e){if(null!==e&&"object"===typeof e&&"length"in e)return e;if("number"===typeof e)return[!0,e];return[e]}(n(r,c)))[0])return h;if(r.children&&"skip"!==h[0])for(l=(o?r.children.length:-1)+a;l>-1&&l<r.children.length;){if(!1===(i=e(r.children[l],l,f)())[0])return i;l="number"===typeof i[1]?i[1]:l+a}return h}}(e,null,[])()}o.CONTINUE=!0,o.SKIP="skip",o.EXIT=!1},function(e,t,n){"use strict";function r(e){if(null==e)return i;if("string"===typeof e)return function(e){return function(t){return t&&t.type===e}}(e);if("object"===typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=r(e[n]);return function(){var e=-1;for(;++e<t.length;)if(t[e].apply(this,arguments))return!0}}(e):function(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function i(){return!0}e.exports=r},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";var r=n(138),i=[].splice;function o(e,t){return function(e){return r(e,n),e};function n(n,r,o){if(o&&!e(n,r,o)){var a=[r,1];return"unwrap"===t&&n.children&&(a=a.concat(n.children)),i.apply(o.children,a),r}}}t.ofType=function(e,t){return o((function(t,n,r){return!e.includes(t.type)}),t)},t.ifNotMatch=o},function(e,t,n){"use strict";var r=n(1),i=n(198),o=n(764);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=t.renderers[e.type];e.position||(e.position={start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}});var c=e.position.start,l=[e.type,c.line,c.column,i].join("-");if(!o.isValidElementType(u))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var f=s(e,l,t,u,n,i);return r.createElement(u,f,f.children||h()||void 0);function h(){return e.children&&e.children.map((function(n,r){return a(n,t,{node:e,props:f},r)}))}}function s(e,t,n,o,s,l){var f,h={key:t},p="string"===typeof o||o===r.Fragment;n.sourcePos&&e.position&&(h["data-sourcepos"]=[(f=e.position).start.line,":",f.start.column,"-",f.end.line,":",f.end.column].map(String).join("")),n.rawSourcePos&&!p&&(h.sourcePosition=e.position),n.includeNodeIndex&&s.node&&s.node.children&&!p&&(h.index=s.node.children.indexOf(e),h.parentChildCount=s.node.children.length);var d=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier.toUpperCase()]||{}:null;switch(e.type){case"root":u(h,{className:n.className});break;case"text":h.nodeKey=t,h.children=e.value;break;case"heading":h.level=e.depth;break;case"list":h.start=e.start,h.ordered=e.ordered,h.spread=e.spread,h.depth=e.depth;break;case"listItem":h.checked=e.checked,h.spread=e.spread,h.ordered=e.ordered,h.index=e.index,h.children=function(e,t){return(t&&t.node?function(e){var t=e.children,n=e.spread,r=-1;for(;!n&&++r<t.length;)n=c(t[r]);return n}(t.node):c(e))?e.children:function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children:[t])}),[])}(e)}(e,s).map((function(t,r){return a(t,n,{node:e,props:h},r)}));break;case"definition":u(h,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":u(h,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":h.children=e.value,h.inline=!0;break;case"link":u(h,{title:e.title||void 0,target:"function"===typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":u(h,{src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url,alt:e.alt||"",title:e.title||void 0});break;case"linkReference":u(h,i(d,{href:n.transformLinkUri?n.transformLinkUri(d.href):d.href}));break;case"imageReference":u(h,{src:n.transformImageUri&&d.href?n.transformImageUri(d.href,e.children,d.title,e.alt):d.href,alt:e.alt||"",title:d.title||void 0});break;case"table":case"tableHead":case"tableBody":h.columnAlignment=e.align;break;case"tableRow":h.isHeader="tableHead"===s.node.type,h.columnAlignment=s.props.columnAlignment;break;case"tableCell":u(h,{isHeader:s.props.isHeader,align:s.props.columnAlignment[l]});break;case"virtualHtml":h.tag=e.tag;break;case"html":h.isBlock=e.position.start.line!==e.position.end.line,h.allowDangerousHtml=n.allowDangerousHtml,h.escapeHtml=n.escapeHtml,h.skipHtml=n.skipHtml;break;case"parsedHtml":var m;e.children&&(m=e.children.map((function(t,r){return a(t,n,{node:e,props:h},r)}))),h.allowDangerousHtml=n.allowDangerousHtml,h.escapeHtml=n.escapeHtml,h.skipHtml=n.skipHtml,h.element=function(e,t){var n=e.element;if(Array.isArray(n)){var i=r.Fragment||"div";return r.createElement(i,null,n)}if(n.props.children||t){var o=r.Children.toArray(n.props.children).concat(t);return r.cloneElement(n,null,o)}return r.cloneElement(n,null)}(e,m);break;default:u(h,i(e,{type:void 0,position:void 0,children:void 0}))}return!p&&e.value&&(h.value=e.value),p||(h.node=e),h}function u(e,t){for(var n in t)"undefined"!==typeof t[n]&&(e[n]=t[n])}function c(e){var t=e.spread;return void 0===t||null===t?e.children.length>1:t}e.exports=a},function(e,t,n){"use strict";e.exports=n(765)},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case v:case c:return e;default:return t}}case o:return t}}}function S(e){return w(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return S(e)||w(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===s||e===d||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===_||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},function(e,t,n){"use strict";var r=n(138);function i(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}e.exports=function(e){return r(e,"table",i),e}},function(e,t,n){"use strict";var r=n(138);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,"definition",(function(e){var n=e.identifier.toUpperCase();n in t||(t[n]={href:e.url,title:e.title})})),t}},function(e,t,n){"use strict";var r=["http","https","mailto","tel"];e.exports=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var i=t.indexOf(":");if(-1===i)return t;for(var o=r.length,a=-1;++a<o;){var s=r[a];if(i===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return-1!==(a=t.indexOf("?"))&&i>a||-1!==(a=t.indexOf("#"))&&i>a?t:"javascript:void(0)"}},function(e,t,n){"use strict";var r=n(198),i=n(1),o=parseInt((i.version||"16").slice(0,2),10)>=16,a=i.createElement;function s(e,t){return a(e,u(t),t.children)}function u(e){var t=e["data-sourcepos"];return t?{"data-sourcepos":t}:{}}e.exports={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:s.bind(null,"table"),tableHead:s.bind(null,"thead"),tableBody:s.bind(null,"tbody"),tableRow:s.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=u(e);return a(e.isHeader?"th":"td",t?r({style:t},n):n,e.children)},root:function(e){var t=e.className,n=!t&&i.Fragment||"div";return a(n,t?{className:t}:null,e.children)},text:function(e){var t=e.children||"";return o?t:a("span",null,t)},list:function(e){var t=u(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return a(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=a("input",{type:"checkbox",checked:n,readOnly:!0})}return a("li",u(e),t,e.children)},definition:function(){return null},heading:function(e){return a("h".concat(e.level),u(e),e.children)},inlineCode:function(e){return a("code",u(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=a("code",t?{className:t}:null,e.value);return a("pre",u(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.allowDangerousHtml||!1===e.escapeHtml,n=e.isBlock?"div":"span";if(!t)return a(i.Fragment||n,null,e.value);var r={dangerouslySetInnerHTML:{__html:e.value}};return a(n,r)},virtualHtml:function(e){return a(e.tag,u(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?i.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}}},function(e,t,n){"use strict";t.HtmlParser="undefined"===typeof Symbol?"__RMD_HTML_PARSER__":Symbol("__RMD_HTML_PARSER__")},function(e,t,n){e.exports=n(772)},function(e,t,n){var r=n(332),i=n(773),o=n(775),a=n(776),s=n(778);e.exports=function(e){return r([i,o(e),a,s])}},function(e,t,n){e.exports=n(774)},function(e,t,n){var r=n(104),i=n(137),o={tokenize:function(e,t,n){var i,o,a;return function(t){return e.enter("literalAutolinkDomain"),u(t)};function u(t){return 45===t||95===t||r(t)?(95===t&&(i=!0),e.consume(t),u):46===t?e.check(s,l,c)(t):l(t)}function c(t){return e.consume(t),a=!0,o=i,i=void 0,u}function l(r){return!a||o||i?n(r):(e.exit("literalAutolinkDomain"),t(r))}}},a={tokenize:function(e,t){var n=0;return function(n){if(v(n))return t(n);if(m(n))return e.check(s,t,r)(n);return r(n)};function r(t){return e.enter("literalAutolinkWwwPath"),i(t)}function i(t){return 38===t?e.check(c,l,o)(t):(40===t&&n++,41===t?e.check(u,a,o)(t):v(t)?l(t):m(t)?e.check(s,l,o)(t):(e.consume(t),i))}function o(t){return e.consume(t),i}function a(e){return--n<0?l(e):o(e)}function l(n){return e.exit("literalAutolinkWwwPath"),t(n)}}},s={tokenize:function(e,t,n){return function(t){return e.enter("literalAutolinkPunctuation"),e.consume(t),r};function r(r){return e.exit("literalAutolinkPunctuation"),v(r)?t(r):n(r)}}},u={tokenize:function(e,t,n){return function(t){return e.enter("literalAutolinkParen"),e.consume(t),r};function r(r){return e.exit("literalAutolinkParen"),v(r)||41===r?t(r):n(r)}}},c={tokenize:function(e,t,n){return function(t){return e.enter("literalAutolinkCharacterReferenceNamed"),e.consume(t),r};function r(t){return i(t)?(e.consume(t),r):59===t?(e.consume(t),o):n(t)}function o(r){return e.exit("literalAutolinkCharacterReferenceNamed"),v(r)?t(r):n(r)}}},l={tokenize:function(e,t,n){var r=this;return function(t){if(87!==t&&t-32!==87||!y(r.previous))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.consume(t),i};function i(t){return 87===t||t-32===87?(e.consume(t),s):n(t)}function s(t){return 87===t||t-32===87?(e.consume(t),u):n(t)}function u(t){return 46===t?(e.consume(t),e.attempt(o,e.attempt(a,c),n)):n(t)}function c(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:y},f={tokenize:function(e,t,n){var r=this;return function(t){if(72!==t&&t-32!==72||!y(r.previous))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),i};function i(t){return 84===t||t-32===84?(e.consume(t),s):n(t)}function s(t){return 84===t||t-32===84?(e.consume(t),u):n(t)}function u(t){return 80===t||t-32===80?(e.consume(t),c):n(t)}function c(t){return 83===t||t-32===83?(e.consume(t),l):l(t)}function l(t){return 58===t?(e.consume(t),f):n(t)}function f(t){return 47===t?(e.consume(t),h):n(t)}function h(t){return 47===t?(e.consume(t),e.attempt(o,e.attempt(a,p),n)):n(t)}function p(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:y},h={tokenize:function(e,t,n){var i,o=this;return function(t){if(!g(t)||!y(o.previous))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return g(t)?(e.consume(t),a):64===t?(e.consume(t),u):n(t)}function u(t){return 46===t?e.check(s,h,c)(t):45===t||95===t?e.check(s,n,l)(t):r(t)?(e.consume(t),u):h(t)}function c(t){return e.consume(t),i=!0,u}function l(t){return e.consume(t),f}function f(t){return 46===t?e.check(s,n,c)(t):u(t)}function h(r){return i?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(r)):n(r)}},previous:y},p={};t.text=p;for(var d=48;d<123;)p[d]=h,58===++d?d=65:91===d&&(d=97);function m(e){return 33===e||42===e||44===e||46===e||58===e||63===e||95===e||126===e}function v(e){return null===e||e<0||32===e||60===e}function g(e){return 43===e||45===e||46===e||95===e||r(e)}function y(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}p[43]=h,p[45]=h,p[46]=h,p[95]=h,p[72]=[h,f],p[104]=[h,f],p[87]=[h,l],p[119]=[h,l]},function(e,t,n){e.exports=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,i){var o=this.previous,a=this.events,s=0;return function(t){if(126!==t||126===o&&"characterEscape"!==a[a.length-1][1].type)return i(t);return e.enter("strikethroughSequenceTemporary"),u(t)};function u(a){var c,l,f=r(o);return 126===a?s>1?i(a):(e.consume(a),s++,u):s<2&&!t?i(a):(c=e.exit("strikethroughSequenceTemporary"),l=r(a),c._open=!l||2===l&&f,c._close=!f||2===f&&l,n(a))}},resolveAll:function(e,t){var n,r,s,u,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"strikethroughSequenceTemporary"===e[c][1].type&&e[c][1]._close)for(s=c;s--;)if("exit"===e[s][0]&&"strikethroughSequenceTemporary"===e[s][1].type&&e[s][1]._open&&e[c][1].end.offset-e[c][1].start.offset===e[s][1].end.offset-e[s][1].start.offset){e[c][1].type="strikethroughSequence",e[s][1].type="strikethroughSequence",n={type:"strikethrough",start:a(e[s][1].start),end:a(e[c][1].end)},r={type:"strikethroughText",start:a(e[s][1].end),end:a(e[c][1].start)},u=[["enter",n,t],["enter",e[s][1],t],["exit",e[s][1],t],["enter",r,t]],i(u,u.length,0,o(t.parser.constructs.insideSpan.null,e.slice(s+1,c),t)),i(u,u.length,0,[["exit",r,t],["enter",e[c][1],t],["exit",e[c][1],t],["exit",n,t]]),i(e,s-1,c-s+3,u),c=s+u.length-2;break}return function(e){var t=-1,n=e.length;for(;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};null!==t&&void 0!==t||(t=!0);return{text:{126:n},insideSpan:{null:n}}};var r=n(324),i=n(66),o=n(136),a=n(77)},function(e,t,n){e.exports=n(777)},function(e,t,n){t.flow={null:{tokenize:function(e,t,n){var a,s,u=[],c=0;return function(t){if(null===t||-5===t||-4===t||-3===t)return n(t);if(e.enter("table")._align=u,e.enter("tableHead"),e.enter("tableRow"),124===t)return l(t);return c++,e.enter("temporaryTableCellContent"),p(t)};function l(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),a=!0,f}function f(t){return null===t||-5===t||-4===t||-3===t?function(t){if(null===t)return n(t);return e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(i,n,r(e,m,"linePrefix",4))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):(a&&(a=void 0,c++),124===t?l(t):(e.enter("temporaryTableCellContent"),p(t)))}function h(t){return-2===t||-1===t||32===t?(e.consume(t),h):(e.exit("whitespace"),f(t))}function p(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),f(t)):(e.consume(t),92===t?d:p)}function d(t){return 92===t||124===t?(e.consume(t),p):p(t)}function m(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),v(t))}function v(t){return null===t||-5===t||-4===t||-3===t?b(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),g):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,u.push(null),y):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),u.push("left"),_):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),v):n(t)}function g(t){return-2===t||-1===t||32===t?(e.consume(t),g):(e.exit("whitespace"),v(t))}function y(t){return 45===t?(e.consume(t),y):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),u[u.length-1]="left"===u[u.length-1]?"center":"right",x):v(t))}function _(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,y):n(t)}function x(t){return null===t||-5===t||-4===t||-3===t?b(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),g):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),v):n(t)}function b(t){return e.exit("tableDelimiterRow"),s&&c===u.length?null===t?w(t):e.check(o,w,S)(t):n(t)}function w(n){return e.exit("table"),t(n)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,E,"linePrefix",4)}function E(t){return e.enter("tableBody"),T(t)}function T(t){return e.enter("tableRow"),124===t?A(t):(e.enter("temporaryTableCellContent"),k(t))}function A(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),M}function M(t){return null===t||-5===t||-4===t||-3===t?function(t){if(e.exit("tableRow"),null===t)return P(t);return e.check(o,P,L)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),C):124===t?A(t):(e.enter("temporaryTableCellContent"),k(t))}function C(t){return-2===t||-1===t||32===t?(e.consume(t),C):(e.exit("whitespace"),M(t))}function k(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),M(t)):(e.consume(t),92===t?R:k)}function R(t){return 92===t||124===t?(e.consume(t),k):k(t)}function P(t){return e.exit("tableBody"),w(t)}function L(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,T,"linePrefix",4)}},resolve:function(e,t){var n,r,i,o,a,s,u,c,l,f,h=e.length,p=-1;for(;++p<h;)n=e[p][1],o&&("temporaryTableCellContent"===n.type&&(c=c||p,l=p),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!l||(s={type:"tableContent",start:e[c][1].start,end:e[l][1].end},u={type:"chunkText",start:s.start,end:s.end,contentType:"text"},e.splice(c,l-c+1,["enter",s,t],["enter",u,t],["exit",u,t],["exit",s,t]),p-=l-c-3,h=e.length,c=void 0,l=void 0)),"exit"===e[p][0]&&("tableCellDivider"===n.type||"tableRow"===n.type)&&f&&f+1<p&&(a={type:i?"tableDelimiter":r?"tableHeader":"tableData",start:e[f][1].start,end:e[p][1].end},e.splice(p+("tableCellDivider"===n.type?1:0),0,["exit",a,t]),e.splice(f,0,["enter",a,t]),p+=2,h=e.length,f=p+1),"tableRow"===n.type&&(o="enter"===e[p][0])&&(f=p+1),"tableDelimiterRow"===n.type&&(i="enter"===e[p][0])&&(f=p+1),"tableHead"===n.type&&(r="enter"===e[p][0]);return e},interruptible:!0}};var r=n(27),i={tokenize:function(e,t,n){return function(t){if(45!==t)return n(t);return e.enter("setextUnderline"),r(t)};function r(t){return 45===t?(e.consume(t),r):i(t)}function i(r){return-2===r||-1===r||32===r?(e.consume(r),i):null===r||-5===r||-4===r||-3===r?t(r):n(r)}},partial:!0},o={tokenize:function(e,t,n){var r=0;return function(t){return e.enter("check"),e.consume(t),i};function i(o){return-1===o||32===o?(e.consume(o),4===++r?t:i):null===o||o<0?t(o):n(o)}},partial:!0}},function(e,t,n){e.exports=n(779)},function(e,t,n){var r=n(57),i=n(27),o=n(103),a={tokenize:function(e,t,n){var r=this;return function(t){if(91!==t||null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(r){return 93===r?(e.enter("taskListCheckMarker"),e.consume(r),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:s},t,n)):n(r)}}};function s(e,t,n){var a=this;return i(e,(function(e){return o(a.events,"whitespace")&&null!==e&&!r(e)?t(e):n(e)}),"whitespace")}t.text={91:a}},function(e,t,n){var r=n(781),i=n(782),o=n(783),a=n(784),s={}.hasOwnProperty;function u(e,t){var n,r,i;for(n in t)r=s.call(e,n)?e[n]:e[n]={},i=t[n],"canContainEols"===n?e[n]=[].concat(r,i):Object.assign(r,i)}e.exports=function(e){var t={canContainEols:[]},n=e.length,r=-1;for(;++r<n;)u(t,e[r]);return t}([r,i,o,a])},function(e,t){function n(e){this.config.enter.autolinkProtocol.call(this,e)}t.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:n,literalAutolinkHttp:n,literalAutolinkWww:n},t.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}}},function(e,t){t.canContainEols=["delete"],t.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},t.exit={strikethrough:function(e){this.exit(e)}}},function(e,t){function n(e){this.exit(e)}function r(e){this.enter({type:"tableCell",children:[]},e)}function i(e,t){return"|"===t?t:e}t.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:r,tableHeader:r,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},t.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,i));this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:n,tableHeader:n,tableRow:n}},function(e,t){function n(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}t.exit={taskListCheckValueChecked:n,taskListCheckValueUnchecked:n,paragraph:function(e){var t,n=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],i=n.children,o=r.children[0],a=-1;if(n&&"listItem"===n.type&&"boolean"===typeof n.checked&&o&&"text"===o.type){for(;++a<i.length;)if("paragraph"===i[a].type){t=i[a];break}t===r&&(o.value=o.value.slice(1),0===o.value.length?r.children.shift():(o.position.start.column++,o.position.start.offset++,r.position.start=Object.assign({},o.position.start)))}this.exit(e)}}},function(e,t,n){var r=n(786),i=n(787),o=n(788),a=n(791);e.exports=function(e){var t,n=[r,i,o(e),a],s=n.length,u=-1,c=[],l={};for(;++u<s;)t=n[u],c=c.concat(t.unsafe||[]),l=Object.assign(l,t.handlers||{});return{unsafe:c,handlers:l}}},function(e,t){var n=["autolink","link","image"];t.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:n},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:"phrasing",notInConstruct:n},{character:":",before:"[ps]",after:"\\/",inConstruct:"phrasing",notInConstruct:n}]},function(e,t,n){var r=n(333);function i(e,t,n){var i=n.enter("emphasis"),o=r(e,n,{before:"~",after:"~"});return i(),"~~"+o+"~~"}t.unsafe=[{character:"~",inConstruct:"phrasing"}],t.handlers={delete:i},i.peek=function(){return"~"}},function(e,t,n){var r=n(333),i=n(789),o=n(790);e.exports=function(e){var t=e||{},n=t.tableCellPadding,a=t.tablePipeAlign,s=t.stringLength,u=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return l(function(e,t){var n=e.children,r=-1,i=n.length,o=[],a=t.enter("table");for(;++r<i;)o[r]=f(n[r],t);return a(),o}(e,n),e.align)},tableRow:function(e,t,n){var r=l([f(e,n)]);return r.slice(0,r.indexOf("\n"))},tableCell:c,inlineCode:function(e,t,n){var r=i(e,t,n);-1!==n.stack.indexOf("tableCell")&&(r=r.replace(/\|/,"\\$&"));return r}}};function c(e,t,n){var i=n.enter("tableCell"),o=r(e,n,{before:u,after:u});return i(),o}function l(e,t){return o(e,{align:t,alignDelimiters:a,padding:n,stringLength:s})}function f(e,t){for(var n=e.children,r=-1,i=n.length,o=[],a=t.enter("tableRow");++r<i;)o[r]=c(n[r],0,t);return a(),o}}},function(e,t){function n(e){for(var t=e.value||"",n="`",r="";new RegExp("(^|[^`])"+n+"([^`]|$)").test(t);)n+="`";return/[^ \r\n]/.test(t)&&(/[ \r\n`]/.test(t.charAt(0))||/[ \r\n`]/.test(t.charAt(t.length-1)))&&(r=" "),n+r+t+r+n}e.exports=n,n.peek=function(){return"`"}},function(e,t,n){"use strict";var r=n(202);e.exports=function(e,t){var n,u,c,l,f,h,p,d,m,v,g,y=t||{},_=!1!==y.padding,x=!1!==y.delimiterStart,b=!1!==y.delimiterEnd,w=(y.align||[]).concat(),S=!1!==y.alignDelimiters,E=[],T=y.stringLength||a,A=-1,M=e.length,C=[],k=[],R=[],P=[],L=[],O=0;for(;++A<M;){for(n=e[A],u=-1,c=n.length,R=[],P=[],c>O&&(O=c);++u<c;)I=n[u],h=null===I||void 0===I?"":String(I),!0===S&&(f=T(h),P[u]=f,(void 0===(l=L[u])||f>l)&&(L[u]=f)),R.push(h);C[A]=R,k[A]=P}var I;if(u=-1,c=O,"object"===typeof w&&"length"in w)for(;++u<c;)E[u]=s(w[u]);else for(g=s(w);++u<c;)E[u]=g;u=-1,c=O,R=[],P=[];for(;++u<c;)g=E[u],m="",v="",108===g?m=":":g===o?v=":":99===g&&(m=":",v=":"),f=S?Math.max(1,L[u]-m.length-v.length):1,h=m+r("-",f)+v,!0===S&&((f=m.length+f+v.length)>L[u]&&(L[u]=f),P[u]=f),R[u]=h;C.splice(1,0,R),k.splice(1,0,P),A=-1,M=C.length,p=[];for(;++A<M;){for(R=C[A],P=k[A],u=-1,c=O,d=[];++u<c;)h=R[u]||"",m="",v="",!0===S&&(f=L[u]-(P[u]||0),(g=E[u])===o?m=r(" ",f):99===g?f%2===0?(m=r(" ",f/2),v=m):(m=r(" ",f/2+.5),v=r(" ",f/2-.5)):v=r(" ",f)),!0===x&&0===u&&d.push("|"),!0!==_||!1===S&&""===h||!0!==x&&0===u||d.push(" "),!0===S&&d.push(m),d.push(h),!0===S&&d.push(v),!0===_&&d.push(" "),!0!==b&&u===c-1||d.push("|");d=d.join(""),!1===b&&(d=d.replace(i,"")),p.push(d)}return p.join("\n")};var i=/ +$/,o=114;function a(e){return e.length}function s(e){var t="string"===typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===o?o:67===t||99===t?99:0}},function(e,t,n){var r=n(792);t.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],t.handlers={listItem:function(e,t,n){var i=r(e,t,n),o=e.children[0];"boolean"===typeof e.checked&&o&&"paragraph"===o.type&&(i=i.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "})));return i}}},function(e,t,n){e.exports=function(e,t,n){var u,c,l,f=i(n),h=o(n);t&&t.ordered&&(f=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+".");u=f.length+1,("tab"===h||"mixed"===h&&(t&&t.spread||e.spread))&&(u=4*Math.ceil(u/4));return l=n.enter("listItem"),c=s(a(e,n),(function(e,t,n){if(t)return(n?"":r(" ",u))+e;return(n?f:f+r(" ",u-f.length))+e})),l(),c};var r=n(202),i=n(793),o=n(794),a=n(795),s=n(796)},function(e,t){e.exports=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}},function(e,t){e.exports=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}},function(e,t,n){e.exports=function(e,t){var n,i=e.children||[],o=[],a=-1;for(;++a<i.length;)n=i[a],o.push(t.handle(n,e,t,{before:"\n",after:"\n"})),a+1<i.length&&o.push(s(n,i[a+1]));return o.join("");function s(n,i){for(var o,a=-1;++a<t.join.length&&!0!==(o=t.join[a](n,i,e,t))&&1!==o;){if("number"===typeof o)return r("\n",1+Number(o));if(!1===o)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}};var r=n(202)},function(e,t){e.exports=function(e,t){var r,i=[],o=0,a=0;for(;r=n.exec(e);)s(e.slice(o,r.index)),i.push(r[0]),o=r.index+r[0].length,a++;return s(e.slice(o)),i.join("");function s(e){i.push(t(e,a,!e))}};var n=/\r?\n|\r/g},function(e,t,n){"use strict";e.exports=n(139),n(800),n(801),n(802)},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(799),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(29))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(29),n(132))},function(e,t,n){"use strict";var r=n(139),i=n(140);e.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(e){i((function(){throw e}))}))}},function(e,t,n){"use strict";var r=n(139),i=n(140);function o(e){this.then=function(t){return"function"!==typeof t?this:new r((function(n,r){i((function(){try{n(t(e))}catch(i){r(i)}}))}))}}e.exports=r,o.prototype=r.prototype;var a=new o(!0),s=new o(!1),u=new o(null),c=new o(void 0),l=new o(0),f=new o("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return u;if(void 0===e)return c;if(!0===e)return a;if(!1===e)return s;if(0===e)return l;if(""===e)return f;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new r(t.bind(e))}catch(n){return new r((function(e,t){t(n)}))}return new o(e)},r.all=function(e){var t=Array.prototype.slice.call(e);return new r((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(o,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,(function(e){i(o,e)}),n)}t[o]=a,0===--r&&e(t)}catch(u){n(u)}}for(var o=0;o<t.length;o++)i(o,t[o])}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){e.forEach((function(e){r.resolve(e).then(t,n)}))}))},r.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";var r=n(139),i=n(140);e.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,i=Array.prototype.slice.call(arguments);return new r((function(r,o){for(;i.length&&i.length>t;)i.pop();i.push((function(e,t){e?o(e):r(t)}));var a=e.apply(n,i);!a||"object"!==typeof a&&"function"!==typeof a||"function"!==typeof a.then||r(a)}))}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"===typeof t[t.length-1]?t.pop():null,o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(a){if(null===n||"undefined"==typeof n)return new r((function(e,t){t(a)}));i((function(){n.call(o,a)}))}}},r.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then((function(n){i((function(){e.call(t,null,n)}))}),(function(n){i((function(){e.call(t,n)}))}))}},function(e,t,n){var r=n(334),i=function(e){var t="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";this.element=r.createElement("div"),this.element.setAttribute("aria-hidden","true"),r.append(this.element,r.createText(e)),this.collapsible=r.createElement("span"),this.expandable=r.createElement("span"),this.collapsibleInner=r.createElement("span"),this.expandableInner=r.createElement("span"),this.lastOffsetWidth=-1,r.style(this.collapsible,t),r.style(this.expandable,t),r.style(this.expandableInner,t),r.style(this.collapsibleInner,"display:inline-block;width:200%;height:200%;"),r.append(this.collapsible,this.collapsibleInner),r.append(this.expandable,this.expandableInner),r.append(this.element,this.collapsible),r.append(this.element,this.expandable)};e.exports=i,i.prototype.getElement=function(){return this.element},i.prototype.setFont=function(e,t){r.style(this.element,"min-width:20px;min-height:20px;display:inline-block;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-size:100px;font-family:"+e+";"+t)},i.prototype.getWidth=function(){return this.element.offsetWidth},i.prototype.setWidth=function(e){this.element.style.width=e+"px"},i.prototype.reset=function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)},i.prototype.onScroll=function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)},i.prototype.onResize=function(e){var t=this;this.collapsible.addEventListener("scroll",(function(){t.onScroll(e)}),!1),this.expandable.addEventListener("scroll",(function(){t.onScroll(e)}),!1),this.reset()}}]]);
//# sourceMappingURL=2.2932b52f.chunk.js.map